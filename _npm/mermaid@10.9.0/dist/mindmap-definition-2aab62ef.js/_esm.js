/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/mermaid@10.9.0/dist/mindmap-definition-2aab62ef.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var t="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function e(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.from("string"==typeof t?[t]:t);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce((function(t,e){var n=e.match(/\n([\t ]+|(?!\s).)/g);return n?t.concat(n.map((function(t){var e,n;return null!==(n=null===(e=t.match(/[\t ]/g))||void 0===e?void 0:e.length)&&void 0!==n?n:0}))):t}),[]);if(i.length){var o=new RegExp("\n[\t ]{"+Math.min.apply(Math,i)+"}","g");r=r.map((function(t){return t.replace(o,"\n")}))}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return e.forEach((function(t,e){var n=a.match(/(?:^|\n)( *)$/),i=n?n[1]:"",o=t;"string"==typeof t&&t.includes("\n")&&(o=String(t).split("\n").map((function(t,e){return 0===e?t:""+i+t})).join("\n")),a+=o+r[e+1]})),a}var n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof t<"u"?t:typeof self<"u"?self:{};function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i={exports:{}};i.exports=function(){var t=1e3,e=6e4,n=36e5,r="millisecond",i="second",o="minute",a="hour",s="day",l="week",c="month",u="quarter",h="year",d="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),o=n-i<0,a=e.clone().add(r+(o?-1:1),c);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:l,d:s,D:d,h:a,m:o,s:i,ms:r,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},b="en",x={};x[b]=y;var C="$isDayjsObject",_=function(t){return t instanceof E||!(!t||!t[C])},w=function t(e,n,r){var i;if(!e)return b;if("string"==typeof e){var o=e.toLowerCase();x[o]&&(i=o),n&&(x[o]=n,i=o);var a=e.split("-");if(!i&&a.length>1)return t(a[0])}else{var s=e.name;x[s]=e,i=s}return!r&&i&&(b=i),i||!r&&b},k=function(t,e){if(_(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new E(n)},T=v;T.l=w,T.i=_,T.w=function(t,e){return k(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var E=function(){function y(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[C]=!0}var m=y.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(T.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(f);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return T},m.isValid=function(){return this.$d.toString()!==p},m.isSame=function(t,e){var n=k(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return k(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<k(t)},m.$g=function(t,e,n){return T.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!T.u(e)||e,u=T.p(t),p=function(t,e){var i=T.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(s)},f=function(t,e){return T.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,y=this.$M,m=this.$D,v="set"+(this.$u?"UTC":"");switch(u){case h:return r?p(1,0):p(31,11);case c:return r?p(1,y):p(0,y+1);case l:var b=this.$locale().weekStart||0,x=(g<b?g+7:g)-b;return p(r?m-x:m+(6-x),y);case s:case d:return f(v+"Hours",0);case a:return f(v+"Minutes",1);case o:return f(v+"Seconds",2);case i:return f(v+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,l=T.p(t),u="set"+(this.$u?"UTC":""),p=(n={},n[s]=u+"Date",n[d]=u+"Date",n[c]=u+"Month",n[h]=u+"FullYear",n[a]=u+"Hours",n[o]=u+"Minutes",n[i]=u+"Seconds",n[r]=u+"Milliseconds",n)[l],f=l===s?this.$D+(e-this.$W):e;if(l===c||l===h){var g=this.clone().set(d,1);g.$d[p](f),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[T.p(t)]()},m.add=function(r,u){var d,p=this;r=Number(r);var f=T.p(u),g=function(t){var e=k(p);return T.w(e.date(e.date()+Math.round(t*r)),p)};if(f===c)return this.set(c,this.$M+r);if(f===h)return this.set(h,this.$y+r);if(f===s)return g(1);if(f===l)return g(7);var y=(d={},d[o]=e,d[a]=n,d[i]=t,d)[f]||1,m=this.$d.getTime()+r*y;return T.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=T.z(this),o=this.$H,a=this.$m,s=this.$M,l=n.weekdays,c=n.months,u=n.meridiem,h=function(t,n,i,o){return t&&(t[n]||t(e,r))||i[n].slice(0,o)},d=function(t){return T.s(o%12||12,t,"0")},f=u||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(g,(function(t,r){return r||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return T.s(e.$y,4,"0");case"M":return s+1;case"MM":return T.s(s+1,2,"0");case"MMM":return h(n.monthsShort,s,c,3);case"MMMM":return h(c,s);case"D":return e.$D;case"DD":return T.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return h(n.weekdaysMin,e.$W,l,2);case"ddd":return h(n.weekdaysShort,e.$W,l,3);case"dddd":return l[e.$W];case"H":return String(o);case"HH":return T.s(o,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return f(o,a,!0);case"A":return f(o,a,!1);case"m":return String(a);case"mm":return T.s(a,2,"0");case"s":return String(e.$s);case"ss":return T.s(e.$s,2,"0");case"SSS":return T.s(e.$ms,3,"0");case"Z":return i}return null}(t)||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,p){var f,g=this,y=T.p(d),m=k(r),v=(m.utcOffset()-this.utcOffset())*e,b=this-m,x=function(){return T.m(g,m)};switch(y){case h:f=x()/12;break;case c:f=x();break;case u:f=x()/3;break;case l:f=(b-v)/6048e5;break;case s:f=(b-v)/864e5;break;case a:f=b/n;break;case o:f=b/e;break;case i:f=b/t;break;default:f=b}return p?f:T.a(f)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return x[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return T.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},y}(),S=E.prototype;return k.prototype=S,[["$ms",r],["$s",i],["$m",o],["$H",a],["$W",s],["$M",c],["$y",h],["$D",d]].forEach((function(t){S[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),k.extend=function(t,e){return t.$i||(t(e,E,k),t.$i=!0),k},k.locale=w,k.isDayjs=_,k.unix=function(t){return k(1e3*t)},k.en=x[b],k.Ls=x,k.p={},k}();const o=r(i.exports),a={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},s={trace:(...t)=>{},debug:(...t)=>{},info:(...t)=>{},warn:(...t)=>{},error:(...t)=>{},fatal:(...t)=>{}},l=function(t="fatal"){let e=a.fatal;"string"==typeof t?(t=t.toLowerCase())in a&&(e=a[t]):"number"==typeof t&&(e=t),s.trace=()=>{},s.debug=()=>{},s.info=()=>{},s.warn=()=>{},s.error=()=>{},s.fatal=()=>{},e<=a.fatal&&(s.fatal=console.error?console.error.bind(console,c("FATAL"),"color: orange"):console.log.bind(console,"[35m",c("FATAL"))),e<=a.error&&(s.error=console.error?console.error.bind(console,c("ERROR"),"color: orange"):console.log.bind(console,"[31m",c("ERROR"))),e<=a.warn&&(s.warn=console.warn?console.warn.bind(console,c("WARN"),"color: orange"):console.log.bind(console,"[33m",c("WARN"))),e<=a.info&&(s.info=console.info?console.info.bind(console,c("INFO"),"color: lightblue"):console.log.bind(console,"[34m",c("INFO"))),e<=a.debug&&(s.debug=console.debug?console.debug.bind(console,c("DEBUG"),"color: lightgreen"):console.log.bind(console,"[32m",c("DEBUG"))),e<=a.trace&&(s.trace=console.debug?console.debug.bind(console,c("TRACE"),"color: lightgreen"):console.log.bind(console,"[32m",c("TRACE")))},c=t=>`%c${o().format("ss.SSS")} : ${t} : `;var u={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeUrl=t.BLANK_URL=void 0;var e=/^([^\w]*)(javascript|data|vbscript)/im,n=/&#(\w+)(^\w|;)?/g,r=/&(newline|tab);/gi,i=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,o=/^.+(:|&colon;)/gim,a=[".","/"];t.BLANK_URL="about:blank",t.sanitizeUrl=function(s){if(!s)return t.BLANK_URL;var l=function(t){return t.replace(i,"").replace(n,(function(t,e){return String.fromCharCode(e)}))}(s).replace(r,"").replace(i,"").trim();if(!l)return t.BLANK_URL;if(function(t){return a.indexOf(t[0])>-1}(l))return l;var c=l.match(o);if(!c)return l;var u=c[0];return e.test(u)?t.BLANK_URL:l}}(u);var h={value:()=>{}};function d(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new p(r)}function p(t){this._=t}function f(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function g(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=h,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}p.prototype=d.prototype={constructor:p,on:function(t,e){var n,r=this._,i=function(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=g(r[n],t.name,e);else if(null==e)for(n in r)r[n]=g(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=f(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new p(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var y="http://www.w3.org/1999/xhtml";const m={svg:"http://www.w3.org/2000/svg",xhtml:y,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function v(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),m.hasOwnProperty(e)?{space:m[e],local:t}:t}function b(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===y&&e.documentElement.namespaceURI===y?e.createElement(t):e.createElementNS(n,t)}}function x(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function C(t){var e=v(t);return(e.local?x:b)(e)}function _(){}function w(t){return null==t?_:function(){return this.querySelector(t)}}function k(){return[]}function T(t){return null==t?k:function(){return this.querySelectorAll(t)}}function E(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function S(t){return function(){return this.matches(t)}}function A(t){return function(e){return e.matches(t)}}var L=Array.prototype.find;function D(){return this.firstElementChild}var B=Array.prototype.filter;function F(){return Array.from(this.children)}function N(t){return new Array(t.length)}function I(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function O(t,e,n,r,i,o){for(var a,s=0,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new I(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function M(t,e,n,r,i,o,a){var s,l,c,u=new Map,h=e.length,d=o.length,p=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(p[s]=c=a.call(l,l.__data__,s,e)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<d;++s)c=a.call(t,o[s],s,o)+"",(l=u.get(c))?(r[s]=l,l.__data__=o[s],u.delete(c)):n[s]=new I(t,o[s]);for(s=0;s<h;++s)(l=e[s])&&u.get(p[s])===l&&(i[s]=l)}function P(t){return t.__data__}function R(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function z(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function q(t){return function(){this.removeAttribute(t)}}function j(t){return function(){this.removeAttributeNS(t.space,t.local)}}function G(t,e){return function(){this.setAttribute(t,e)}}function $(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Y(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function W(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function U(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function H(t){return function(){this.style.removeProperty(t)}}function V(t,e,n){return function(){this.style.setProperty(t,e,n)}}function X(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function K(t,e){return t.style.getPropertyValue(e)||U(t).getComputedStyle(t,null).getPropertyValue(e)}function Z(t){return function(){delete this[t]}}function Q(t,e){return function(){this[t]=e}}function J(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function tt(t){return t.trim().split(/^|\s+/)}function et(t){return t.classList||new nt(t)}function nt(t){this._node=t,this._names=tt(t.getAttribute("class")||"")}function rt(t,e){for(var n=et(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function it(t,e){for(var n=et(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ot(t){return function(){rt(this,t)}}function at(t){return function(){it(this,t)}}function st(t,e){return function(){(e.apply(this,arguments)?rt:it)(this,t)}}function lt(){this.textContent=""}function ct(t){return function(){this.textContent=t}}function ut(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ht(){this.innerHTML=""}function dt(t){return function(){this.innerHTML=t}}function pt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ft(){this.nextSibling&&this.parentNode.appendChild(this)}function gt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yt(){return null}function mt(){var t=this.parentNode;t&&t.removeChild(this)}function vt(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function bt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xt(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function Ct(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function _t(t,e,n){var r=U(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function wt(t,e){return function(){return _t(this,t,e)}}function kt(t,e){return function(){return _t(this,t,e.apply(this,arguments))}}I.prototype={constructor:I,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},nt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Tt=[null];function Et(t,e){this._groups=t,this._parents=e}function St(){return new Et([[document.documentElement]],Tt)}function At(t){return"string"==typeof t?new Et([[document.querySelector(t)]],[document.documentElement]):new Et([[t]],Tt)}function Lt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Dt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Bt(){}Et.prototype=St.prototype={constructor:Et,select:function(t){"function"!=typeof t&&(t=w(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=t.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new Et(r,this._parents)},selectAll:function(t){t="function"==typeof t?E(t):T(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new Et(r,i)},selectChild:function(t){return this.select(null==t?D:function(t){return function(){return L.call(this.children,t)}}("function"==typeof t?t:A(t)))},selectChildren:function(t){return this.selectAll(null==t?F:function(t){return function(){return B.call(this.children,t)}}("function"==typeof t?t:A(t)))},filter:function(t){"function"!=typeof t&&(t=S(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new Et(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,P);var n=e?M:O,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],d=h.length,p=R(t.call(u,u&&u.__data__,c,r)),f=p.length,g=s[c]=new Array(f),y=a[c]=new Array(f);n(u,h,g,y,l[c]=new Array(d),p,e);for(var m,v,b=0,x=0;b<f;++b)if(m=g[b]){for(b>=x&&(x=b+1);!(v=y[x])&&++x<f;);m._next=v||null}}return(a=new Et(a,r))._enter=s,a._exit=l,a},enter:function(){return new Et(this._enter||this._groups.map(N),this._parents)},exit:function(){return new Et(this._exit||this._groups.map(N),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&((i=e(i))&&(i=i.selection())),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var c,u=n[l],h=r[l],d=u.length,p=s[l]=new Array(d),f=0;f<d;++f)(c=u[f]||h[f])&&(p[f]=c);for(;l<i;++l)s[l]=n[l];return new Et(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=z);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(e)}return new Et(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=v(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?j:q:"function"==typeof e?n.local?W:Y:n.local?$:G)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?H:"function"==typeof e?X:V)(t,e,n??"")):K(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Z:"function"==typeof e?J:Q)(t,e)):this.node()[t]},classed:function(t,e){var n=tt(t+"");if(arguments.length<2){for(var r=et(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?st:e?ot:at)(n,e))},text:function(t){return arguments.length?this.each(null==t?lt:("function"==typeof t?ut:ct)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ht:("function"==typeof t?pt:dt)(t)):this.node().innerHTML},raise:function(){return this.each(ft)},lower:function(){return this.each(gt)},append:function(t){var e="function"==typeof t?t:C(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:C(t),r=null==e?yt:"function"==typeof e?e:w(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(mt)},clone:function(t){return this.select(t?bt:vt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?Ct:xt,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?kt:wt)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var Ft=.7,Nt=1/Ft,It="\\s*([+-]?\\d+)\\s*",Ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pt=/^#([0-9a-f]{3,8})$/,Rt=new RegExp(`^rgb\\(${It},${It},${It}\\)$`),zt=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),qt=new RegExp(`^rgba\\(${It},${It},${It},${Ot}\\)$`),jt=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${Ot}\\)$`),Gt=new RegExp(`^hsl\\(${Ot},${Mt},${Mt}\\)$`),$t=new RegExp(`^hsla\\(${Ot},${Mt},${Mt},${Ot}\\)$`),Yt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Wt(){return this.rgb().formatHex()}function Ut(){return this.rgb().formatRgb()}function Ht(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Pt.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Vt(e):3===n?new Zt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Xt(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Xt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Rt.exec(t))?new Zt(e[1],e[2],e[3],1):(e=zt.exec(t))?new Zt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=qt.exec(t))?Xt(e[1],e[2],e[3],e[4]):(e=jt.exec(t))?Xt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Gt.exec(t))?re(e[1],e[2]/100,e[3]/100,1):(e=$t.exec(t))?re(e[1],e[2]/100,e[3]/100,e[4]):Yt.hasOwnProperty(t)?Vt(Yt[t]):"transparent"===t?new Zt(NaN,NaN,NaN,0):null}function Vt(t){return new Zt(t>>16&255,t>>8&255,255&t,1)}function Xt(t,e,n,r){return r<=0&&(t=e=n=NaN),new Zt(t,e,n,r)}function Kt(t,e,n,r){return 1===arguments.length?function(t){return t instanceof Bt||(t=Ht(t)),t?new Zt((t=t.rgb()).r,t.g,t.b,t.opacity):new Zt}(t):new Zt(t,e,n,r??1)}function Zt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Qt(){return`#${ne(this.r)}${ne(this.g)}${ne(this.b)}`}function Jt(){const t=te(this.opacity);return`${1===t?"rgb(":"rgba("}${ee(this.r)}, ${ee(this.g)}, ${ee(this.b)}${1===t?")":`, ${t})`}`}function te(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ee(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ne(t){return((t=ee(t))<16?"0":"")+t.toString(16)}function re(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new oe(t,e,n,r)}function ie(t){if(t instanceof oe)return new oe(t.h,t.s,t.l,t.opacity);if(t instanceof Bt||(t=Ht(t)),!t)return new oe;if(t instanceof oe)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new oe(a,s,l,t.opacity)}function oe(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ae(t){return(t=(t||0)%360)<0?t+360:t}function se(t){return Math.max(0,Math.min(1,t||0))}function le(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Lt(Bt,Ht,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Wt,formatHex:Wt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ie(this).formatHsl()},formatRgb:Ut,toString:Ut}),Lt(Zt,Kt,Dt(Bt,{brighter(t){return t=null==t?Nt:Math.pow(Nt,t),new Zt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Ft:Math.pow(Ft,t),new Zt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Zt(ee(this.r),ee(this.g),ee(this.b),te(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qt,formatHex:Qt,formatHex8:function(){return`#${ne(this.r)}${ne(this.g)}${ne(this.b)}${ne(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Jt,toString:Jt})),Lt(oe,(function(t,e,n,r){return 1===arguments.length?ie(t):new oe(t,e,n,r??1)}),Dt(Bt,{brighter(t){return t=null==t?Nt:Math.pow(Nt,t),new oe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Ft:Math.pow(Ft,t),new oe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Zt(le(t>=240?t-240:t+120,i,r),le(t,i,r),le(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new oe(ae(this.h),se(this.s),se(this.l),te(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=te(this.opacity);return`${1===t?"hsl(":"hsla("}${ae(this.h)}, ${100*se(this.s)}%, ${100*se(this.l)}%${1===t?")":`, ${t})`}`}}));const ce=t=>()=>t;function ue(t){return 1==(t=+t)?he:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):ce(isNaN(e)?n:e)}}function he(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):ce(isNaN(t)?e:t)}const de=function t(e){var n=ue(e);function r(t,e){var r=n((t=Kt(t)).r,(e=Kt(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=he(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function pe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var fe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ge=new RegExp(fe.source,"g");function ye(t,e){var n,r,i,o=fe.lastIndex=ge.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=fe.exec(t))&&(r=ge.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:pe(n,r)})),o=ge.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}var me,ve=180/Math.PI,be={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xe(t,e,n,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ve,skewX:Math.atan(l)*ve,scaleX:a,scaleY:s}}function Ce(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],l=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:pe(t,i)},{i:l-2,x:pe(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:pe(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,l),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:pe(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,l),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:pe(t,n)},{i:s-2,x:pe(e,r)})}else(1!==n||1!==r)&&o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(t){for(var e,n=-1,r=l.length;++n<r;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var _e,we,ke=Ce((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?be:xe(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Te=Ce((function(t){return null!=t&&(me||(me=document.createElementNS("http://www.w3.org/2000/svg","g")),me.setAttribute("transform",t),t=me.transform.baseVal.consolidate())?xe((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):be}),", ",")",")"),Ee=0,Se=0,Ae=0,Le=1e3,De=0,Be=0,Fe=0,Ne="object"==typeof performance&&performance.now?performance:Date,Ie="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Oe(){return Be||(Ie(Me),Be=Ne.now()+Fe)}function Me(){Be=0}function Pe(){this._call=this._time=this._next=null}function Re(t,e,n){var r=new Pe;return r.restart(t,e,n),r}function ze(){Be=(De=Ne.now())+Fe,Ee=Se=0;try{!function(){Oe(),++Ee;for(var t,e=_e;e;)(t=Be-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ee}()}finally{Ee=0,function(){for(var t,e,n=_e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:_e=e);we=t,je(r)}(),Be=0}}function qe(){var t=Ne.now(),e=t-De;e>Le&&(Fe-=e,De=t)}function je(t){Ee||(Se&&(Se=clearTimeout(Se)),t-Be>24?(t<1/0&&(Se=setTimeout(ze,t-Ne.now()-Fe)),Ae&&(Ae=clearInterval(Ae))):(Ae||(De=Ne.now(),Ae=setInterval(qe,Le)),Ee=1,Ie(ze)))}function Ge(t,e,n){var r=new Pe;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Pe.prototype=Re.prototype={constructor:Pe,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Oe():+n)+(null==e?0:+e),!this._next&&we!==this&&(we?we._next=this:_e=this,we=this),this._call=t,this._time=n,je()},stop:function(){this._call&&(this._call=null,this._time=1/0,je())}};var $e=d("start","end","cancel","interrupt"),Ye=[],We=0,Ue=1,He=2,Ve=3,Xe=4,Ke=5,Ze=6;function Qe(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(t){n.state=Ue,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var c,u,h,d;if(n.state!==Ue)return l();for(c in i)if((d=i[c]).name===n.name){if(d.state===Ve)return Ge(a);d.state===Xe?(d.state=Ze,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[c]):+c<e&&(d.state=Ze,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[c])}if(Ge((function(){n.state===Ve&&(n.state=Xe,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=He,n.on.call("start",t,t.__data__,n.index,n.group),n.state===He){for(n.state=Ve,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=Ke,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);n.state===Ke&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=Ze,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Re(o,0,n.time)}(t,n,{name:e,index:r,group:i,on:$e,tween:Ye,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:We})}function Je(t,e){var n=en(t,e);if(n.state>We)throw new Error("too late; already scheduled");return n}function tn(t,e){var n=en(t,e);if(n.state>Ve)throw new Error("too late; already running");return n}function en(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function nn(t,e){var n,r;return function(){var i=tn(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function rn(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=tn(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function on(t,e,n){var r=t._id;return t.each((function(){var t=tn(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return en(t,r).value[e]}}function an(t,e){var n;return("number"==typeof e?pe:e instanceof Ht?de:(n=Ht(e))?(e=n,de):ye)(t,e)}function sn(t){return function(){this.removeAttribute(t)}}function ln(t){return function(){this.removeAttributeNS(t.space,t.local)}}function cn(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function un(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function hn(t,e,n){var r,i,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttribute(t):(a=this.getAttribute(t))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,l))}}function dn(t,e,n){var r,i,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,l))}}function pn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function fn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function gn(t,e){return function(){Je(this,t).delay=+e.apply(this,arguments)}}function yn(t,e){return e=+e,function(){Je(this,t).delay=e}}function mn(t,e){return function(){tn(this,t).duration=+e.apply(this,arguments)}}function vn(t,e){return e=+e,function(){tn(this,t).duration=e}}var bn=St.prototype.constructor;function xn(t){return function(){this.style.removeProperty(t)}}var Cn=0;function _n(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function wn(){return++Cn}var kn=St.prototype;_n.prototype={constructor:_n,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=w(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,c=r[a],u=c.length,h=o[a]=new Array(u),d=0;d<u;++d)(s=c[d])&&(l=t.call(s,s.__data__,d,c))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,Qe(h[d],e,n,d,h,en(s,n)));return new _n(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=T(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,p=t.call(l,l.__data__,h,c),f=en(l,n),g=0,y=p.length;g<y;++g)(d=p[g])&&Qe(d,e,n,g,p,f);o.push(p),a.push(l)}return new _n(o,a,e,n)},selectChild:kn.selectChild,selectChildren:kn.selectChildren,filter:function(t){"function"!=typeof t&&(t=S(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new _n(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=e[s],u=n[s],h=c.length,d=a[s]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(d[p]=l);for(;s<r;++s)a[s]=e[s];return new _n(a,this._parents,this._name,this._id)},selection:function(){return new bn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=wn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=en(a,e);Qe(a,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new _n(r,this._parents,t,n)},call:kn.call,nodes:kn.nodes,node:kn.node,size:kn.size,empty:kn.empty,each:kn.each,on:function(t,e){var n=this._id;return arguments.length<2?en(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Je:tn;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=v(t),r="transform"===n?Te:an;return this.attrTween(t,"function"==typeof e?(n.local?dn:hn)(n,r,on(this,"attr."+t,e)):null==e?(n.local?ln:sn)(n):(n.local?un:cn)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=v(t);return this.tween(n,(r.local?pn:fn)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?ke:an;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=K(this,t),a=(this.style.removeProperty(t),K(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,xn(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=K(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=K(this,t)),a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s))}}(t,r,on(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var l=tn(this,t),c=l.on,u=null==l.value[a]?o||(o=xn(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=K(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,n??""))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=e??""}}(on(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=en(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?nn:rn)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?gn:yn)(e,t)):en(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?mn:vn)(e,t)):en(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){tn(this,t).ease=e}}(e,t)):en(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;tn(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0==--i&&o()}};n.each((function(){var n=tn(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:kn[Symbol.iterator]};var Tn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function En(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}St.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>He&&n.state<Ke,n.state=Ze,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)}))},St.prototype.transition=function(t){var e,n;t instanceof _n?(e=t._id,t=t._name):(e=wn(),(n=Tn).time=Oe(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)(a=s[c])&&Qe(a,t,e,c,s,n||En(a,e));return new _n(r,this._parents,t,e)};function Sn(t){this._context=t}Sn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};class An{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}function Ln(){}function Dn(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Bn(t){this._context=t}function Fn(t){this._context=t}function Nn(t){this._context=t}function In(t,e){this._basis=new Bn(t),this._beta=e}Bn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Fn.prototype={areaStart:Ln,areaEnd:Ln,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Dn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Nn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Dn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},In.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+r*a),this._beta*e[l]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const On=function t(e){function n(t){return 1===e?new Bn(t):new In(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Mn(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Pn(t,e){this._context=t,this._k=(1-e)/6}Pn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Mn(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Mn(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Rn=function t(e){function n(t){return new Pn(t,e)}return n.tension=function(e){return t(+e)},n}(0);function zn(t,e){this._context=t,this._k=(1-e)/6}zn.prototype={areaStart:Ln,areaEnd:Ln,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Mn(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const qn=function t(e){function n(t){return new zn(t,e)}return n.tension=function(e){return t(+e)},n}(0);function jn(t,e){this._context=t,this._k=(1-e)/6}jn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Mn(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Gn=function t(e){function n(t){return new jn(t,e)}return n.tension=function(e){return t(+e)},n}(0);function $n(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>1e-12){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>1e-12){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Yn(t,e){this._context=t,this._alpha=e}Yn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:$n(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Wn=function t(e){function n(t){return e?new Yn(t,e):new Pn(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Un(t,e){this._context=t,this._alpha=e}Un.prototype={areaStart:Ln,areaEnd:Ln,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:$n(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Hn=function t(e){function n(t){return e?new Un(t,e):new zn(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Vn(t,e){this._context=t,this._alpha=e}Vn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$n(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Xn=function t(e){function n(t){return e?new Vn(t,e):new jn(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Kn(t){this._context=t}function Zn(t){return t<0?-1:1}function Qn(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Zn(o)+Zn(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Jn(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function tr(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function er(t){this._context=t}function nr(t){this._context=new rr(t)}function rr(t){this._context=t}function ir(t){this._context=t}function or(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function ar(t,e){this._context=t,this._t=e}function sr(t,e,n){this.k=t,this.x=e,this.y=n}Kn.prototype={areaStart:Ln,areaEnd:Ln,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},er.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tr(this,this._t0,Jn(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,tr(this,Jn(this,n=Qn(this,t,e)),n);break;default:tr(this,this._t0,n=Qn(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(nr.prototype=Object.create(er.prototype)).point=function(t,e){er.prototype.point.call(this,e,t)},rr.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},ir.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=or(t),i=or(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},ar.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},sr.prototype={constructor:sr,scale:function(t){return 1===t?this:new sr(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new sr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},sr.prototype;
/*! @license DOMPurify 3.0.9 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.9/LICENSE */
const{entries:lr,setPrototypeOf:cr,isFrozen:ur,getPrototypeOf:hr,getOwnPropertyDescriptor:dr}=Object;let{freeze:pr,seal:fr,create:gr}=Object,{apply:yr,construct:mr}=typeof Reflect<"u"&&Reflect;pr||(pr=function(t){return t}),fr||(fr=function(t){return t}),yr||(yr=function(t,e,n){return t.apply(e,n)}),mr||(mr=function(t,e){return new t(...e)});const vr=Br(Array.prototype.forEach),br=Br(Array.prototype.pop),xr=Br(Array.prototype.push),Cr=Br(String.prototype.toLowerCase),_r=Br(String.prototype.toString),wr=Br(String.prototype.match),kr=Br(String.prototype.replace),Tr=Br(String.prototype.indexOf),Er=Br(String.prototype.trim),Sr=Br(Object.prototype.hasOwnProperty),Ar=Br(RegExp.prototype.test),Lr=(Dr=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return mr(Dr,e)});var Dr;function Br(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return yr(t,e,r)}}function Fr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Cr;cr&&cr(t,null);let r=e.length;for(;r--;){let i=e[r];if("string"==typeof i){const t=n(i);t!==i&&(ur(e)||(e[r]=t),i=t)}t[i]=!0}return t}function Nr(t){for(let e=0;e<t.length;e++)Sr(t,e)||(t[e]=null);return t}function Ir(t){const e=gr(null);for(const[n,r]of lr(t))Sr(t,n)&&(Array.isArray(r)?e[n]=Nr(r):r&&"object"==typeof r&&r.constructor===Object?e[n]=Ir(r):e[n]=r);return e}function Or(t,e){for(;null!==t;){const n=dr(t,e);if(n){if(n.get)return Br(n.get);if("function"==typeof n.value)return Br(n.value)}t=hr(t)}return function(){return null}}const Mr=pr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Pr=pr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Rr=pr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),zr=pr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),qr=pr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),jr=pr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Gr=pr(["#text"]),$r=pr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Yr=pr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Wr=pr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ur=pr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Hr=fr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Vr=fr(/<%[\w\W]*|[\w\W]*%>/gm),Xr=fr(/\${[\w\W]*}/gm),Kr=fr(/^data-[\-\w.\u00B7-\uFFFF]/),Zr=fr(/^aria-[\-\w]+$/),Qr=fr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Jr=fr(/^(?:\w+script|data):/i),ti=fr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ei=fr(/^html$/i);var ni=Object.freeze({__proto__:null,MUSTACHE_EXPR:Hr,ERB_EXPR:Vr,TMPLIT_EXPR:Xr,DATA_ATTR:Kr,ARIA_ATTR:Zr,IS_ALLOWED_URI:Qr,IS_SCRIPT_OR_DATA:Jr,ATTR_WHITESPACE:ti,DOCTYPE_NAME:ei});var ri=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const n=e=>t(e);if(n.version="3.0.9",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;let{document:r}=e;const i=r,o=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:l,Element:c,NodeFilter:u,NamedNodeMap:h=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:p,trustedTypes:f}=e,g=c.prototype,y=Or(g,"cloneNode"),m=Or(g,"nextSibling"),v=Or(g,"childNodes"),b=Or(g,"parentNode");if("function"==typeof s){const t=r.createElement("template");t.content&&t.content.ownerDocument&&(r=t.content.ownerDocument)}let x,C="";const{implementation:_,createNodeIterator:w,createDocumentFragment:k,getElementsByTagName:T}=r,{importNode:E}=i;let S={};n.isSupported="function"==typeof lr&&"function"==typeof b&&_&&void 0!==_.createHTMLDocument;const{MUSTACHE_EXPR:A,ERB_EXPR:L,TMPLIT_EXPR:D,DATA_ATTR:B,ARIA_ATTR:F,IS_SCRIPT_OR_DATA:N,ATTR_WHITESPACE:I}=ni;let{IS_ALLOWED_URI:O}=ni,M=null;const P=Fr({},[...Mr,...Pr,...Rr,...qr,...Gr]);let R=null;const z=Fr({},[...$r,...Yr,...Wr,...Ur]);let q=Object.seal(gr(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),j=null,G=null,$=!0,Y=!0,W=!1,U=!0,H=!1,V=!1,X=!1,K=!1,Z=!1,Q=!1,J=!1,tt=!0,et=!1,nt=!0,rt=!1,it={},ot=null;const at=Fr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let st=null;const lt=Fr({},["audio","video","img","source","image","track"]);let ct=null;const ut=Fr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ht="http://www.w3.org/1998/Math/MathML",dt="http://www.w3.org/2000/svg",pt="http://www.w3.org/1999/xhtml";let ft=pt,gt=!1,yt=null;const mt=Fr({},[ht,dt,pt],_r);let vt=null;const bt=["application/xhtml+xml","text/html"];let xt=null,Ct=null;const _t=r.createElement("form"),wt=function(t){return t instanceof RegExp||t instanceof Function},kt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ct||Ct!==t){if((!t||"object"!=typeof t)&&(t={}),t=Ir(t),vt=-1===bt.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,xt="application/xhtml+xml"===vt?_r:Cr,M=Sr(t,"ALLOWED_TAGS")?Fr({},t.ALLOWED_TAGS,xt):P,R=Sr(t,"ALLOWED_ATTR")?Fr({},t.ALLOWED_ATTR,xt):z,yt=Sr(t,"ALLOWED_NAMESPACES")?Fr({},t.ALLOWED_NAMESPACES,_r):mt,ct=Sr(t,"ADD_URI_SAFE_ATTR")?Fr(Ir(ut),t.ADD_URI_SAFE_ATTR,xt):ut,st=Sr(t,"ADD_DATA_URI_TAGS")?Fr(Ir(lt),t.ADD_DATA_URI_TAGS,xt):lt,ot=Sr(t,"FORBID_CONTENTS")?Fr({},t.FORBID_CONTENTS,xt):at,j=Sr(t,"FORBID_TAGS")?Fr({},t.FORBID_TAGS,xt):{},G=Sr(t,"FORBID_ATTR")?Fr({},t.FORBID_ATTR,xt):{},it=!!Sr(t,"USE_PROFILES")&&t.USE_PROFILES,$=!1!==t.ALLOW_ARIA_ATTR,Y=!1!==t.ALLOW_DATA_ATTR,W=t.ALLOW_UNKNOWN_PROTOCOLS||!1,U=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,H=t.SAFE_FOR_TEMPLATES||!1,V=t.WHOLE_DOCUMENT||!1,Z=t.RETURN_DOM||!1,Q=t.RETURN_DOM_FRAGMENT||!1,J=t.RETURN_TRUSTED_TYPE||!1,K=t.FORCE_BODY||!1,tt=!1!==t.SANITIZE_DOM,et=t.SANITIZE_NAMED_PROPS||!1,nt=!1!==t.KEEP_CONTENT,rt=t.IN_PLACE||!1,O=t.ALLOWED_URI_REGEXP||Qr,ft=t.NAMESPACE||pt,q=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&wt(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&wt(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(q.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),H&&(Y=!1),Q&&(Z=!0),it&&(M=Fr({},Gr),R=[],!0===it.html&&(Fr(M,Mr),Fr(R,$r)),!0===it.svg&&(Fr(M,Pr),Fr(R,Yr),Fr(R,Ur)),!0===it.svgFilters&&(Fr(M,Rr),Fr(R,Yr),Fr(R,Ur)),!0===it.mathMl&&(Fr(M,qr),Fr(R,Wr),Fr(R,Ur))),t.ADD_TAGS&&(M===P&&(M=Ir(M)),Fr(M,t.ADD_TAGS,xt)),t.ADD_ATTR&&(R===z&&(R=Ir(R)),Fr(R,t.ADD_ATTR,xt)),t.ADD_URI_SAFE_ATTR&&Fr(ct,t.ADD_URI_SAFE_ATTR,xt),t.FORBID_CONTENTS&&(ot===at&&(ot=Ir(ot)),Fr(ot,t.FORBID_CONTENTS,xt)),nt&&(M["#text"]=!0),V&&Fr(M,["html","head","body"]),M.table&&(Fr(M,["tbody"]),delete j.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw Lr('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw Lr('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=t.TRUSTED_TYPES_POLICY,C=x.createHTML("")}else void 0===x&&(x=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML:t=>t,createScriptURL:t=>t})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}}(f,o)),null!==x&&"string"==typeof C&&(C=x.createHTML(""));pr&&pr(t),Ct=t}},Tt=Fr({},["mi","mo","mn","ms","mtext"]),Et=Fr({},["foreignobject","desc","title","annotation-xml"]),St=Fr({},["title","style","font","a","script"]),At=Fr({},[...Pr,...Rr,...zr]),Lt=Fr({},[...qr,...jr]),Dt=function(t){xr(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch{t.remove()}},Bt=function(t,e){try{xr(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch{xr(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!R[t])if(Z||Q)try{Dt(e)}catch{}else try{e.setAttribute(t,"")}catch{}},Ft=function(t){let e=null,n=null;if(K)t="<remove></remove>"+t;else{const e=wr(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===vt&&ft===pt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const i=x?x.createHTML(t):t;if(ft===pt)try{e=(new p).parseFromString(i,vt)}catch{}if(!e||!e.documentElement){e=_.createDocument(ft,"template",null);try{e.documentElement.innerHTML=gt?C:i}catch{}}const o=e.body||e.documentElement;return t&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),ft===pt?T.call(e,V?"html":"body")[0]:V?e.documentElement:o},Nt=function(t){return w.call(t.ownerDocument||t,t,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null)},It=function(t){return"function"==typeof l&&t instanceof l},Ot=function(t,e,r){S[t]&&vr(S[t],(t=>{t.call(n,e,r,Ct)}))},Mt=function(t){let e=null;if(Ot("beforeSanitizeElements",t,null),function(t){return t instanceof d&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof h)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)}(t))return Dt(t),!0;const r=xt(t.nodeName);if(Ot("uponSanitizeElement",t,{tagName:r,allowedTags:M}),t.hasChildNodes()&&!It(t.firstElementChild)&&Ar(/<[/\w]/g,t.innerHTML)&&Ar(/<[/\w]/g,t.textContent))return Dt(t),!0;if(!M[r]||j[r]){if(!j[r]&&Rt(r)&&(q.tagNameCheck instanceof RegExp&&Ar(q.tagNameCheck,r)||q.tagNameCheck instanceof Function&&q.tagNameCheck(r)))return!1;if(nt&&!ot[r]){const e=b(t)||t.parentNode,n=v(t)||t.childNodes;if(n&&e){for(let r=n.length-1;r>=0;--r)e.insertBefore(y(n[r],!0),m(t))}}return Dt(t),!0}return t instanceof c&&!function(t){let e=b(t);(!e||!e.tagName)&&(e={namespaceURI:ft,tagName:"template"});const n=Cr(t.tagName),r=Cr(e.tagName);return!!yt[t.namespaceURI]&&(t.namespaceURI===dt?e.namespaceURI===pt?"svg"===n:e.namespaceURI===ht?"svg"===n&&("annotation-xml"===r||Tt[r]):!!At[n]:t.namespaceURI===ht?e.namespaceURI===pt?"math"===n:e.namespaceURI===dt?"math"===n&&Et[r]:!!Lt[n]:t.namespaceURI===pt?!(e.namespaceURI===dt&&!Et[r]||e.namespaceURI===ht&&!Tt[r])&&!Lt[n]&&(St[n]||!At[n]):!("application/xhtml+xml"!==vt||!yt[t.namespaceURI]))}(t)||("noscript"===r||"noembed"===r||"noframes"===r)&&Ar(/<\/no(script|embed|frames)/i,t.innerHTML)?(Dt(t),!0):(H&&3===t.nodeType&&(e=t.textContent,vr([A,L,D],(t=>{e=kr(e,t," ")})),t.textContent!==e&&(xr(n.removed,{element:t.cloneNode()}),t.textContent=e)),Ot("afterSanitizeElements",t,null),!1)},Pt=function(t,e,n){if(tt&&("id"===e||"name"===e)&&(n in r||n in _t))return!1;if((!Y||G[e]||!Ar(B,e))&&(!$||!Ar(F,e)))if(!R[e]||G[e]){if(!(Rt(t)&&(q.tagNameCheck instanceof RegExp&&Ar(q.tagNameCheck,t)||q.tagNameCheck instanceof Function&&q.tagNameCheck(t))&&(q.attributeNameCheck instanceof RegExp&&Ar(q.attributeNameCheck,e)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(e))||"is"===e&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&Ar(q.tagNameCheck,n)||q.tagNameCheck instanceof Function&&q.tagNameCheck(n))))return!1}else if(!ct[e]&&!Ar(O,kr(n,I,""))&&("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==Tr(n,"data:")||!st[t])&&(!W||Ar(N,kr(n,I,"")))&&n)return!1;return!0},Rt=function(t){return"annotation-xml"!==t&&t.indexOf("-")>0},zt=function(t){Ot("beforeSanitizeAttributes",t,null);const{attributes:e}=t;if(!e)return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:R};let i=e.length;for(;i--;){const o=e[i],{name:a,namespaceURI:s,value:l}=o,c=xt(a);let u="value"===a?l:Er(l);if(r.attrName=c,r.attrValue=u,r.keepAttr=!0,r.forceKeepAttr=void 0,Ot("uponSanitizeAttribute",t,r),u=r.attrValue,r.forceKeepAttr||(Bt(a,t),!r.keepAttr))continue;if(!U&&Ar(/\/>/i,u)){Bt(a,t);continue}H&&vr([A,L,D],(t=>{u=kr(u,t," ")}));const h=xt(t.nodeName);if(Pt(h,c,u)){if(et&&("id"===c||"name"===c)&&(Bt(a,t),u="user-content-"+u),x&&"object"==typeof f&&"function"==typeof f.getAttributeType&&!s)switch(f.getAttributeType(h,c)){case"TrustedHTML":u=x.createHTML(u);break;case"TrustedScriptURL":u=x.createScriptURL(u)}try{s?t.setAttributeNS(s,a,u):t.setAttribute(a,u),br(n.removed)}catch{}}}Ot("afterSanitizeAttributes",t,null)},qt=function t(e){let n=null;const r=Nt(e);for(Ot("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)Ot("uponSanitizeShadowNode",n,null),!Mt(n)&&(n.content instanceof a&&t(n.content),zt(n));Ot("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,o=null,s=null,c=null;if(gt=!t,gt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!It(t)){if("function"!=typeof t.toString)throw Lr("toString is not a function");if("string"!=typeof(t=t.toString()))throw Lr("dirty is not a string, aborting")}if(!n.isSupported)return t;if(X||kt(e),n.removed=[],"string"==typeof t&&(rt=!1),rt){if(t.nodeName){const e=xt(t.nodeName);if(!M[e]||j[e])throw Lr("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof l)r=Ft("\x3c!----\x3e"),o=r.ownerDocument.importNode(t,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?r=o:r.appendChild(o);else{if(!Z&&!H&&!V&&-1===t.indexOf("<"))return x&&J?x.createHTML(t):t;if(r=Ft(t),!r)return Z?null:J?C:""}r&&K&&Dt(r.firstChild);const u=Nt(rt?t:r);for(;s=u.nextNode();)Mt(s)||(s.content instanceof a&&qt(s.content),zt(s));if(rt)return t;if(Z){if(Q)for(c=k.call(r.ownerDocument);r.firstChild;)c.appendChild(r.firstChild);else c=r;return(R.shadowroot||R.shadowrootmode)&&(c=E.call(i,c,!0)),c}let h=V?r.outerHTML:r.innerHTML;return V&&M["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&Ar(ei,r.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+h),H&&vr([A,L,D],(t=>{h=kr(h,t," ")})),x&&J?x.createHTML(h):h},n.setConfig=function(){kt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),X=!0},n.clearConfig=function(){Ct=null,X=!1},n.isValidAttribute=function(t,e,n){Ct||kt({});const r=xt(t),i=xt(e);return Pt(r,i,n)},n.addHook=function(t,e){"function"==typeof e&&(S[t]=S[t]||[],xr(S[t],e))},n.removeHook=function(t){if(S[t])return br(S[t])},n.removeHooks=function(t){S[t]&&(S[t]=[])},n.removeAllHooks=function(){S={}},n}();const ii=/<br\s*\/?>/gi,oi=(()=>{let t=!1;return()=>{t||(function(){const t="data-temp-href-target";ri.addHook("beforeSanitizeAttributes",(e=>{"A"===e.tagName&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")||"")})),ri.addHook("afterSanitizeAttributes",(e=>{"A"===e.tagName&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)||""),e.removeAttribute(t),"_blank"===e.getAttribute("target")&&e.setAttribute("rel","noopener"))}))}(),t=!0)}})();const ai=t=>(oi(),ri.sanitize(t)),si=(t,e)=>{var n;if(!1!==(null==(n=e.flowchart)?void 0:n.htmlLabels)){const n=e.securityLevel;"antiscript"===n||"strict"===n?t=ai(t):"loose"!==n&&(t=(t=(t=ui(t)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),t=ci(t))}return t},li=(t,e)=>t&&(t=e.dompurifyConfig?ri.sanitize(si(t,e),e.dompurifyConfig).toString():ri.sanitize(si(t,e),{FORBID_TAGS:["style"]}).toString()),ci=t=>t.replace(/#br#/g,"<br/>"),ui=t=>t.replace(ii,"#br#"),hi=t=>!(!1===t||["false","null","0"].includes(String(t).trim().toLowerCase())),di={getRows:t=>t?ui(t).replace(/\\n/g,"#br#").split("#br#"):[""],sanitizeText:li,sanitizeTextOrArray:(t,e)=>"string"==typeof t?li(t,e):t.flat().map((t=>li(t,e))),hasBreaks:t=>ii.test(t),splitBreaks:t=>t.split(ii),lineBreakRegex:ii,removeScript:ai,getUrl:t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replaceAll(/\(/g,"\\("),e=e.replaceAll(/\)/g,"\\)")),e},evaluate:hi,getMax:function(...t){const e=t.filter((t=>!isNaN(t)));return Math.max(...e)},getMin:function(...t){const e=t.filter((t=>!isNaN(t)));return Math.min(...e)}},pi={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t),hsl2rgb:({h:t,s:e,l:n},r)=>{if(!e)return 2.55*n;t/=360,e/=100;const i=(n/=100)<.5?n*(1+e):n+e-n*e,o=2*n-i;switch(r){case"r":return 255*pi.hue2rgb(o,i,t+1/3);case"g":return 255*pi.hue2rgb(o,i,t);case"b":return 255*pi.hue2rgb(o,i,t-1/3)}},rgb2hsl:({r:t,g:e,b:n},r)=>{t/=255,e/=255,n/=255;const i=Math.max(t,e,n),o=Math.min(t,e,n),a=(i+o)/2;if("l"===r)return 100*a;if(i===o)return 0;const s=i-o;if("s"===r)return 100*(a>.5?s/(2-i-o):s/(i+o));switch(i){case t:return 60*((e-n)/s+(e<n?6:0));case e:return 60*((n-t)/s+2);case n:return 60*((t-e)/s+4);default:return-1}}},fi={clamp:(t,e,n)=>e>n?Math.min(e,Math.max(n,t)):Math.min(n,Math.max(e,t)),round:t=>Math.round(1e10*t)/1e10},gi={dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}},yi={channel:pi,lang:fi,unit:gi},mi={};for(let t=0;t<=255;t++)mi[t]=yi.unit.dec2hex(t);const vi=0,bi=1,xi=2;const Ci=class{constructor(){this.type=vi}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=vi}is(t){return this.type===t}};const _i=new class{constructor(t,e){this.color=e,this.changed=!1,this.data=t,this.type=new Ci}set(t,e){return this.color=e,this.changed=!1,this.data=t,this.type.type=vi,this}_ensureHSL(){const t=this.data,{h:e,s:n,l:r}=t;void 0===e&&(t.h=yi.channel.rgb2hsl(t,"h")),void 0===n&&(t.s=yi.channel.rgb2hsl(t,"s")),void 0===r&&(t.l=yi.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r:e,g:n,b:r}=t;void 0===e&&(t.r=yi.channel.hsl2rgb(t,"r")),void 0===n&&(t.g=yi.channel.hsl2rgb(t,"g")),void 0===r&&(t.b=yi.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,e=t.r;return this.type.is(xi)||void 0===e?(this._ensureHSL(),yi.channel.hsl2rgb(t,"r")):e}get g(){const t=this.data,e=t.g;return this.type.is(xi)||void 0===e?(this._ensureHSL(),yi.channel.hsl2rgb(t,"g")):e}get b(){const t=this.data,e=t.b;return this.type.is(xi)||void 0===e?(this._ensureHSL(),yi.channel.hsl2rgb(t,"b")):e}get h(){const t=this.data,e=t.h;return this.type.is(bi)||void 0===e?(this._ensureRGB(),yi.channel.rgb2hsl(t,"h")):e}get s(){const t=this.data,e=t.s;return this.type.is(bi)||void 0===e?(this._ensureRGB(),yi.channel.rgb2hsl(t,"s")):e}get l(){const t=this.data,e=t.l;return this.type.is(bi)||void 0===e?(this._ensureRGB(),yi.channel.rgb2hsl(t,"l")):e}get a(){return this.data.a}set r(t){this.type.set(bi),this.changed=!0,this.data.r=t}set g(t){this.type.set(bi),this.changed=!0,this.data.g=t}set b(t){this.type.set(bi),this.changed=!0,this.data.b=t}set h(t){this.type.set(xi),this.changed=!0,this.data.h=t}set s(t){this.type.set(xi),this.changed=!0,this.data.s=t}set l(t){this.type.set(xi),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}({r:0,g:0,b:0,a:0},"transparent"),wi={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(35!==t.charCodeAt(0))return;const e=t.match(wi.re);if(!e)return;const n=e[1],r=parseInt(n,16),i=n.length,o=i%4==0,a=i>4,s=a?1:17,l=a?8:4,c=o?0:-1,u=a?255:15;return _i.set({r:(r>>l*(c+3)&u)*s,g:(r>>l*(c+2)&u)*s,b:(r>>l*(c+1)&u)*s,a:o?(r&u)*s/255:1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`#${mi[Math.round(e)]}${mi[Math.round(n)]}${mi[Math.round(r)]}${mi[Math.round(255*i)]}`:`#${mi[Math.round(e)]}${mi[Math.round(n)]}${mi[Math.round(r)]}`}},ki=wi,Ti={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(Ti.hueRe);if(e){const[,t,n]=e;switch(n){case"grad":return yi.channel.clamp.h(.9*parseFloat(t));case"rad":return yi.channel.clamp.h(180*parseFloat(t)/Math.PI);case"turn":return yi.channel.clamp.h(360*parseFloat(t))}}return yi.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(104!==e&&72!==e)return;const n=t.match(Ti.re);if(!n)return;const[,r,i,o,a,s]=n;return _i.set({h:Ti._hue2deg(r),s:yi.channel.clamp.s(parseFloat(i)),l:yi.channel.clamp.l(parseFloat(o)),a:a?yi.channel.clamp.a(s?parseFloat(a)/100:parseFloat(a)):1},t)},stringify:t=>{const{h:e,s:n,l:r,a:i}=t;return i<1?`hsla(${yi.lang.round(e)}, ${yi.lang.round(n)}%, ${yi.lang.round(r)}%, ${i})`:`hsl(${yi.lang.round(e)}, ${yi.lang.round(n)}%, ${yi.lang.round(r)}%)`}},Ei=Ti,Si={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=Si.colors[t];if(e)return ki.parse(e)},stringify:t=>{const e=ki.stringify(t);for(const t in Si.colors)if(Si.colors[t]===e)return t}},Ai=Si,Li={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(114!==e&&82!==e)return;const n=t.match(Li.re);if(!n)return;const[,r,i,o,a,s,l,c,u]=n;return _i.set({r:yi.channel.clamp.r(i?2.55*parseFloat(r):parseFloat(r)),g:yi.channel.clamp.g(a?2.55*parseFloat(o):parseFloat(o)),b:yi.channel.clamp.b(l?2.55*parseFloat(s):parseFloat(s)),a:c?yi.channel.clamp.a(u?parseFloat(c)/100:parseFloat(c)):1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`rgba(${yi.lang.round(e)}, ${yi.lang.round(n)}, ${yi.lang.round(r)}, ${yi.lang.round(i)})`:`rgb(${yi.lang.round(e)}, ${yi.lang.round(n)}, ${yi.lang.round(r)})`}},Di=Li,Bi={format:{keyword:Ai,hex:ki,rgb:Di,rgba:Di,hsl:Ei,hsla:Ei},parse:t=>{if("string"!=typeof t)return t;const e=ki.parse(t)||Di.parse(t)||Ei.parse(t)||Ai.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(xi)||void 0===t.data.r?Ei.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?Di.stringify(t):ki.stringify(t)},Fi=Bi,Ni=(t,e)=>{const n=Fi.parse(t);for(const t in e)n[t]=yi.channel.clamp[t](e[t]);return Fi.stringify(n)},Ii=(t,e,n=0,r=1)=>{if("number"!=typeof t)return Ni(t,{a:e});const i=_i.set({r:yi.channel.clamp.r(t),g:yi.channel.clamp.g(e),b:yi.channel.clamp.b(n),a:yi.channel.clamp.a(r)});return Fi.stringify(i)},Oi=t=>{const{r:e,g:n,b:r}=Fi.parse(t),i=.2126*yi.channel.toLinear(e)+.7152*yi.channel.toLinear(n)+.0722*yi.channel.toLinear(r);return yi.lang.round(i)},Mi=t=>Oi(t)>=.5,Pi=t=>!Mi(t),Ri=(t,e,n)=>{const r=Fi.parse(t),i=r[e],o=yi.channel.clamp[e](i+n);return i!==o&&(r[e]=o),Fi.stringify(r)},zi=(t,e)=>Ri(t,"l",e),qi=(t,e)=>Ri(t,"l",-e),ji=(t,e)=>{const n=Fi.parse(t),r={};for(const t in e)e[t]&&(r[t]=n[t]+e[t]);return Ni(t,r)},Gi=(t,e,n=50)=>{const{r:r,g:i,b:o,a:a}=Fi.parse(t),{r:s,g:l,b:c,a:u}=Fi.parse(e),h=n/100,d=2*h-1,p=a-u,f=((d*p==-1?d:(d+p)/(1+d*p))+1)/2,g=1-f;return Ii(r*f+s*g,i*f+l*g,o*f+c*g,a*h+u*(1-h))},$i=(t,e=100)=>{const n=Fi.parse(t);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,Gi(n,t,e)},Yi=(t,e)=>ji(t,e?{s:-40,l:10}:{s:-40,l:-10}),Wi="#ffffff",Ui="#f2f2f2";class Hi{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=zi(this.contrast,55),this.background="#ffffff",this.tertiaryColor=ji(this.primaryColor,{h:-160}),this.primaryBorderColor=Yi(this.primaryColor,this.darkMode),this.secondaryBorderColor=Yi(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Yi(this.tertiaryColor,this.darkMode),this.primaryTextColor=$i(this.primaryColor),this.secondaryTextColor=$i(this.secondaryColor),this.tertiaryTextColor=$i(this.tertiaryColor),this.lineColor=$i(this.background),this.textColor=$i(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,e,n,r,i,o,a,s,l,c,u;this.secondBkg=zi(this.contrast,55),this.border2=this.contrast,this.actorBorder=zi(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||$i(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||zi(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||qi(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ji(this.mainBkg,{l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ji(this.mainBkg,{l:-(8+5*t)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=zi(this.contrast,30),this.sectionBkgColor2=zi(this.contrast,30),this.taskBorderColor=qi(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=zi(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=qi(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ji(this.primaryColor,{h:64}),this.fillType3=ji(this.secondaryColor,{h:64}),this.fillType4=ji(this.primaryColor,{h:-64}),this.fillType5=ji(this.secondaryColor,{h:-64}),this.fillType6=ji(this.primaryColor,{h:128}),this.fillType7=ji(this.secondaryColor,{h:128});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ji(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ji(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ji(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ji(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ji(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ji(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Pi(this.quadrant1Fill)?zi(this.quadrant1Fill):qi(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:(null==(t=this.xyChart)?void 0:t.backgroundColor)||this.background,titleColor:(null==(e=this.xyChart)?void 0:e.titleColor)||this.primaryTextColor,xAxisTitleColor:(null==(n=this.xyChart)?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:(null==(r=this.xyChart)?void 0:r.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:(null==(i=this.xyChart)?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:(null==(o=this.xyChart)?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:(null==(a=this.xyChart)?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(null==(s=this.xyChart)?void 0:s.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:(null==(l=this.xyChart)?void 0:l.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:(null==(c=this.xyChart)?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:(null==(u=this.xyChart)?void 0:u.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=qi(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||ji(this.primaryColor,{h:-30}),this.git4=this.pie5||ji(this.primaryColor,{h:-60}),this.git5=this.pie6||ji(this.primaryColor,{h:-90}),this.git6=this.pie7||ji(this.primaryColor,{h:60}),this.git7=this.pie8||ji(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||$i(this.git0),this.gitInv1=this.gitInv1||$i(this.git1),this.gitInv2=this.gitInv2||$i(this.git2),this.gitInv3=this.gitInv3||$i(this.git3),this.gitInv4=this.gitInv4||$i(this.git4),this.gitInv5=this.gitInv5||$i(this.git5),this.gitInv6=this.gitInv6||$i(this.git6),this.gitInv7=this.gitInv7||$i(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Wi,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ui}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}}const Vi={base:{getThemeVariables:t=>{const e=new class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var t,e,n,r,i,o,a,s,l,c,u;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||ji(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||ji(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Yi(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Yi(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Yi(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Yi(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||$i(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||$i(this.tertiaryColor),this.lineColor=this.lineColor||$i(this.background),this.arrowheadColor=this.arrowheadColor||$i(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?qi(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||qi(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||$i(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||zi(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ji(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ji(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ji(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ji(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ji(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ji(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||ji(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ji(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ji(this.primaryColor,{h:330}),this.darkMode)for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=qi(this["cScale"+t],75);else for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=qi(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||$i(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||zi(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||qi(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;const h=this.darkMode?-4:-1;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ji(this.mainBkg,{h:180,s:-15,l:h*(5+3*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ji(this.mainBkg,{h:180,s:-15,l:h*(8+3*t)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||ji(this.primaryColor,{h:64}),this.fillType3=this.fillType3||ji(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||ji(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||ji(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||ji(this.primaryColor,{h:128}),this.fillType7=this.fillType7||ji(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ji(this.primaryColor,{l:-10}),this.pie5=this.pie5||ji(this.secondaryColor,{l:-10}),this.pie6=this.pie6||ji(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||ji(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ji(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ji(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ji(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||ji(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||ji(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ji(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ji(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ji(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ji(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ji(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ji(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Pi(this.quadrant1Fill)?zi(this.quadrant1Fill):qi(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:(null==(t=this.xyChart)?void 0:t.backgroundColor)||this.background,titleColor:(null==(e=this.xyChart)?void 0:e.titleColor)||this.primaryTextColor,xAxisTitleColor:(null==(n=this.xyChart)?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:(null==(r=this.xyChart)?void 0:r.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:(null==(i=this.xyChart)?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:(null==(o=this.xyChart)?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:(null==(a=this.xyChart)?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(null==(s=this.xyChart)?void 0:s.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:(null==(l=this.xyChart)?void 0:l.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:(null==(c=this.xyChart)?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:(null==(u=this.xyChart)?void 0:u.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?qi(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ji(this.primaryColor,{h:-30}),this.git4=this.git4||ji(this.primaryColor,{h:-60}),this.git5=this.git5||ji(this.primaryColor,{h:-90}),this.git6=this.git6||ji(this.primaryColor,{h:60}),this.git7=this.git7||ji(this.primaryColor,{h:120}),this.darkMode?(this.git0=zi(this.git0,25),this.git1=zi(this.git1,25),this.git2=zi(this.git2,25),this.git3=zi(this.git3,25),this.git4=zi(this.git4,25),this.git5=zi(this.git5,25),this.git6=zi(this.git6,25),this.git7=zi(this.git7,25)):(this.git0=qi(this.git0,25),this.git1=qi(this.git1,25),this.git2=qi(this.git2,25),this.git3=qi(this.git3,25),this.git4=qi(this.git4,25),this.git5=qi(this.git5,25),this.git6=qi(this.git6,25),this.git7=qi(this.git7,25)),this.gitInv0=this.gitInv0||$i(this.git0),this.gitInv1=this.gitInv1||$i(this.git1),this.gitInv2=this.gitInv2||$i(this.git2),this.gitInv3=this.gitInv3||$i(this.git3),this.gitInv4=this.gitInv4||$i(this.git4),this.gitInv5=this.gitInv5||$i(this.git5),this.gitInv6=this.gitInv6||$i(this.git6),this.gitInv7=this.gitInv7||$i(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Wi,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ui}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}};return e.calculate(t),e}},dark:{getThemeVariables:t=>{const e=new class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=zi(this.primaryColor,16),this.tertiaryColor=ji(this.primaryColor,{h:-160}),this.primaryBorderColor=$i(this.background),this.secondaryBorderColor=Yi(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Yi(this.tertiaryColor,this.darkMode),this.primaryTextColor=$i(this.primaryColor),this.secondaryTextColor=$i(this.secondaryColor),this.tertiaryTextColor=$i(this.tertiaryColor),this.lineColor=$i(this.background),this.textColor=$i(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=zi($i("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=Ii(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=qi("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=qi(this.sectionBkgColor,10),this.taskBorderColor=Ii(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Ii(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var t,e,n,r,i,o,a,s,l,c,u;this.secondBkg=zi(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=zi(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=zi(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ji(this.primaryColor,{h:64}),this.fillType3=ji(this.secondaryColor,{h:64}),this.fillType4=ji(this.primaryColor,{h:-64}),this.fillType5=ji(this.secondaryColor,{h:-64}),this.fillType6=ji(this.primaryColor,{h:128}),this.fillType7=ji(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ji(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ji(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ji(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ji(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ji(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ji(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ji(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ji(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ji(this.primaryColor,{h:330});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||$i(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScalePeer"+t]=this["cScalePeer"+t]||zi(this["cScale"+t],10);for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ji(this.mainBkg,{h:30,s:-30,l:-(4*t-10)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ji(this.mainBkg,{h:30,s:-30,l:-(4*t-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ji(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ji(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ji(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ji(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ji(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ji(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Pi(this.quadrant1Fill)?zi(this.quadrant1Fill):qi(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:(null==(t=this.xyChart)?void 0:t.backgroundColor)||this.background,titleColor:(null==(e=this.xyChart)?void 0:e.titleColor)||this.primaryTextColor,xAxisTitleColor:(null==(n=this.xyChart)?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:(null==(r=this.xyChart)?void 0:r.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:(null==(i=this.xyChart)?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:(null==(o=this.xyChart)?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:(null==(a=this.xyChart)?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(null==(s=this.xyChart)?void 0:s.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:(null==(l=this.xyChart)?void 0:l.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:(null==(c=this.xyChart)?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:(null==(u=this.xyChart)?void 0:u.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?qi(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=zi(this.secondaryColor,20),this.git1=zi(this.pie2||this.secondaryColor,20),this.git2=zi(this.pie3||this.tertiaryColor,20),this.git3=zi(this.pie4||ji(this.primaryColor,{h:-30}),20),this.git4=zi(this.pie5||ji(this.primaryColor,{h:-60}),20),this.git5=zi(this.pie6||ji(this.primaryColor,{h:-90}),10),this.git6=zi(this.pie7||ji(this.primaryColor,{h:60}),10),this.git7=zi(this.pie8||ji(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||$i(this.git0),this.gitInv1=this.gitInv1||$i(this.git1),this.gitInv2=this.gitInv2||$i(this.git2),this.gitInv3=this.gitInv3||$i(this.git3),this.gitInv4=this.gitInv4||$i(this.git4),this.gitInv5=this.gitInv5||$i(this.git5),this.gitInv6=this.gitInv6||$i(this.git6),this.gitInv7=this.gitInv7||$i(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||$i(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||$i(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||zi(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||zi(this.background,2)}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}};return e.calculate(t),e}},default:{getThemeVariables:t=>{const e=new class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=ji(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=ji(this.primaryColor,{h:-160}),this.primaryBorderColor=Yi(this.primaryColor,this.darkMode),this.secondaryBorderColor=Yi(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Yi(this.tertiaryColor,this.darkMode),this.primaryTextColor=$i(this.primaryColor),this.secondaryTextColor=$i(this.secondaryColor),this.tertiaryTextColor=$i(this.tertiaryColor),this.lineColor=$i(this.background),this.textColor=$i(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Ii(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var t,e,n,r,i,o,a,s,l,c,u;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ji(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ji(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ji(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ji(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ji(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ji(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ji(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ji(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ji(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||qi(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||qi(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=qi(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||qi(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ji(this["cScale"+t],{h:180});for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ji(this.mainBkg,{h:30,l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ji(this.mainBkg,{h:30,l:-(7+5*t)});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||$i(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||$i(this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=zi(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ji(this.primaryColor,{h:64}),this.fillType3=ji(this.secondaryColor,{h:64}),this.fillType4=ji(this.primaryColor,{h:-64}),this.fillType5=ji(this.secondaryColor,{h:-64}),this.fillType6=ji(this.primaryColor,{h:128}),this.fillType7=ji(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||ji(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||ji(this.primaryColor,{l:-10}),this.pie5=this.pie5||ji(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ji(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||ji(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||ji(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||ji(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||ji(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||ji(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||ji(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ji(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ji(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ji(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ji(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ji(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ji(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Pi(this.quadrant1Fill)?zi(this.quadrant1Fill):qi(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:(null==(t=this.xyChart)?void 0:t.backgroundColor)||this.background,titleColor:(null==(e=this.xyChart)?void 0:e.titleColor)||this.primaryTextColor,xAxisTitleColor:(null==(n=this.xyChart)?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:(null==(r=this.xyChart)?void 0:r.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:(null==(i=this.xyChart)?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:(null==(o=this.xyChart)?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:(null==(a=this.xyChart)?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(null==(s=this.xyChart)?void 0:s.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:(null==(l=this.xyChart)?void 0:l.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:(null==(c=this.xyChart)?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:(null==(u=this.xyChart)?void 0:u.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ji(this.primaryColor,{h:-30}),this.git4=this.git4||ji(this.primaryColor,{h:-60}),this.git5=this.git5||ji(this.primaryColor,{h:-90}),this.git6=this.git6||ji(this.primaryColor,{h:60}),this.git7=this.git7||ji(this.primaryColor,{h:120}),this.darkMode?(this.git0=zi(this.git0,25),this.git1=zi(this.git1,25),this.git2=zi(this.git2,25),this.git3=zi(this.git3,25),this.git4=zi(this.git4,25),this.git5=zi(this.git5,25),this.git6=zi(this.git6,25),this.git7=zi(this.git7,25)):(this.git0=qi(this.git0,25),this.git1=qi(this.git1,25),this.git2=qi(this.git2,25),this.git3=qi(this.git3,25),this.git4=qi(this.git4,25),this.git5=qi(this.git5,25),this.git6=qi(this.git6,25),this.git7=qi(this.git7,25)),this.gitInv0=this.gitInv0||qi($i(this.git0),25),this.gitInv1=this.gitInv1||$i(this.git1),this.gitInv2=this.gitInv2||$i(this.git2),this.gitInv3=this.gitInv3||$i(this.git3),this.gitInv4=this.gitInv4||$i(this.git4),this.gitInv5=this.gitInv5||$i(this.git5),this.gitInv6=this.gitInv6||$i(this.git6),this.gitInv7=this.gitInv7||$i(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||$i(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||$i(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Wi,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ui}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}};return e.calculate(t),e}},forest:{getThemeVariables:t=>{const e=new class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=zi("#cde498",10),this.primaryBorderColor=Yi(this.primaryColor,this.darkMode),this.secondaryBorderColor=Yi(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Yi(this.tertiaryColor,this.darkMode),this.primaryTextColor=$i(this.primaryColor),this.secondaryTextColor=$i(this.secondaryColor),this.tertiaryTextColor=$i(this.primaryColor),this.lineColor=$i(this.background),this.textColor=$i(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,e,n,r,i,o,a,s,l,c,u;this.actorBorder=qi(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ji(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ji(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ji(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ji(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ji(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ji(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ji(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ji(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ji(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||qi(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||qi(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=qi(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||qi(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ji(this["cScale"+t],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ji(this.mainBkg,{h:30,s:-30,l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ji(this.mainBkg,{h:30,s:-30,l:-(8+5*t)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ji(this.primaryColor,{h:64}),this.fillType3=ji(this.secondaryColor,{h:64}),this.fillType4=ji(this.primaryColor,{h:-64}),this.fillType5=ji(this.secondaryColor,{h:-64}),this.fillType6=ji(this.primaryColor,{h:128}),this.fillType7=ji(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ji(this.primaryColor,{l:-30}),this.pie5=this.pie5||ji(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ji(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||ji(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ji(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ji(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ji(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||ji(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||ji(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ji(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ji(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ji(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ji(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ji(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ji(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Pi(this.quadrant1Fill)?zi(this.quadrant1Fill):qi(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:(null==(t=this.xyChart)?void 0:t.backgroundColor)||this.background,titleColor:(null==(e=this.xyChart)?void 0:e.titleColor)||this.primaryTextColor,xAxisTitleColor:(null==(n=this.xyChart)?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:(null==(r=this.xyChart)?void 0:r.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:(null==(i=this.xyChart)?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:(null==(o=this.xyChart)?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:(null==(a=this.xyChart)?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(null==(s=this.xyChart)?void 0:s.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:(null==(l=this.xyChart)?void 0:l.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:(null==(c=this.xyChart)?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:(null==(u=this.xyChart)?void 0:u.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ji(this.primaryColor,{h:-30}),this.git4=this.git4||ji(this.primaryColor,{h:-60}),this.git5=this.git5||ji(this.primaryColor,{h:-90}),this.git6=this.git6||ji(this.primaryColor,{h:60}),this.git7=this.git7||ji(this.primaryColor,{h:120}),this.darkMode?(this.git0=zi(this.git0,25),this.git1=zi(this.git1,25),this.git2=zi(this.git2,25),this.git3=zi(this.git3,25),this.git4=zi(this.git4,25),this.git5=zi(this.git5,25),this.git6=zi(this.git6,25),this.git7=zi(this.git7,25)):(this.git0=qi(this.git0,25),this.git1=qi(this.git1,25),this.git2=qi(this.git2,25),this.git3=qi(this.git3,25),this.git4=qi(this.git4,25),this.git5=qi(this.git5,25),this.git6=qi(this.git6,25),this.git7=qi(this.git7,25)),this.gitInv0=this.gitInv0||$i(this.git0),this.gitInv1=this.gitInv1||$i(this.git1),this.gitInv2=this.gitInv2||$i(this.git2),this.gitInv3=this.gitInv3||$i(this.git3),this.gitInv4=this.gitInv4||$i(this.git4),this.gitInv5=this.gitInv5||$i(this.git5),this.gitInv6=this.gitInv6||$i(this.git6),this.gitInv7=this.gitInv7||$i(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||$i(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||$i(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Wi,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ui}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}};return e.calculate(t),e}},neutral:{getThemeVariables:t=>{const e=new Hi;return e.calculate(t),e}}},Xi={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},theme:"default",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","maxEdges"],legacyMathML:!1,deterministicIds:!1,fontSize:16},Ki={...Xi,deterministicIDSeed:void 0,themeCSS:void 0,themeVariables:Vi.default.getThemeVariables(),sequence:{...Xi.sequence,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{...Xi.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Xi.c4,useWidth:void 0,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}},pie:{...Xi.pie,useWidth:984},xyChart:{...Xi.xyChart,useWidth:void 0},requirement:{...Xi.requirement,useWidth:void 0},gitGraph:{...Xi.gitGraph,useMaxWidth:!1},sankey:{...Xi.sankey,useMaxWidth:!1}},Zi=(t,e="")=>Object.keys(t).reduce(((n,r)=>Array.isArray(t[r])?n:"object"==typeof t[r]&&null!==t[r]?[...n,e+r,...Zi(t[r],"")]:[...n,e+r]),[]),Qi=new Set(Zi(Ki,"")),Ji=Ki,to=t=>{if(s.debug("sanitizeDirective called with",t),"object"==typeof t&&null!=t){if(Array.isArray(t))return void t.forEach((t=>to(t)));for(const e of Object.keys(t)){if(s.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!Qi.has(e)||null==t[e]){s.debug("sanitize deleting key: ",e),delete t[e];continue}if("object"==typeof t[e]){s.debug("sanitizing object",e),to(t[e]);continue}const n=["themeCSS","fontFamily","altFontFamily"];for(const r of n)e.includes(r)&&(s.debug("sanitizing css option",e),t[e]=eo(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const n=t.themeVariables[e];null!=n&&n.match&&!n.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}s.debug("After sanitization",t)}},eo=t=>{let e=0,n=0;for(const r of t){if(e<n)return"{ /* ERROR: Unbalanced CSS */ }";"{"===r?e++:"}"===r&&n++}return e!==n?"{ /* ERROR: Unbalanced CSS */ }":t},no=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,ro=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,io=/\s*%%.*\n/gm;class oo extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}}const ao={},so=function(t,e){t=t.replace(no,"").replace(ro,"").replace(io,"\n");for(const[n,{detector:r}]of Object.entries(ao))if(r(t,e))return n;throw new oo(`No diagram type detected matching given configuration for text: ${t}`)},lo=(...t)=>{for(const{id:e,detector:n,loader:r}of t)co(e,n,r)},co=(t,e,n)=>{ao[t]?s.error(`Detector with key ${t} already exists`):ao[t]={detector:e,loader:n},s.debug(`Detector with key ${t} added${n?" with loader":""}`)},uo=(t,e,{depth:n=2,clobber:r=!1}={})=>{const i={depth:n,clobber:r};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach((e=>uo(t,e,i))),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach((e=>{t.includes(e)||t.push(e)})),t):void 0===t||n<=0?null!=t&&"object"==typeof t&&"object"==typeof e?Object.assign(t,e):e:(void 0!==e&&"object"==typeof t&&"object"==typeof e&&Object.keys(e).forEach((i=>{"object"!=typeof e[i]||void 0!==t[i]&&"object"!=typeof t[i]?(r||"object"!=typeof t[i]&&"object"!=typeof e[i])&&(t[i]=e[i]):(void 0===t[i]&&(t[i]=Array.isArray(e[i])?[]:{}),t[i]=uo(t[i],e[i],{depth:n-1,clobber:r}))})),t)},ho=uo;const po="object"==typeof t&&t&&t.Object===Object&&t;var fo="object"==typeof self&&self&&self.Object===Object&&self;const go=po||fo||Function("return this")();const yo=go.Symbol;var mo=Object.prototype,vo=mo.hasOwnProperty,bo=mo.toString,xo=yo?yo.toStringTag:void 0;var Co=Object.prototype.toString;var _o="[object Null]",wo="[object Undefined]",ko=yo?yo.toStringTag:void 0;function To(t){return null==t?void 0===t?wo:_o:ko&&ko in Object(t)?function(t){var e=vo.call(t,xo),n=t[xo];try{t[xo]=void 0;var r=!0}catch{}var i=bo.call(t);return r&&(e?t[xo]=n:delete t[xo]),i}(t):function(t){return Co.call(t)}(t)}function Eo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var So="[object AsyncFunction]",Ao="[object Function]",Lo="[object GeneratorFunction]",Do="[object Proxy]";function Bo(t){if(!Eo(t))return!1;var e=To(t);return e==Ao||e==Lo||e==So||e==Do}const Fo=go["__core-js_shared__"];var No=function(){var t=/[^.]+$/.exec(Fo&&Fo.keys&&Fo.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var Io=Function.prototype.toString;function Oo(t){if(null!=t){try{return Io.call(t)}catch{}try{return t+""}catch{}}return""}var Mo=/^\[object .+?Constructor\]$/,Po=Function.prototype,Ro=Object.prototype,zo=Po.toString,qo=Ro.hasOwnProperty,jo=RegExp("^"+zo.call(qo).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Go(t){return!(!Eo(t)||function(t){return!!No&&No in t}(t))&&(Bo(t)?jo:Mo).test(Oo(t))}function $o(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Go(n)?n:void 0}const Yo=$o(Object,"create");var Wo=Object.prototype.hasOwnProperty;var Uo=Object.prototype.hasOwnProperty;function Ho(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vo(t,e){return t===e||t!=t&&e!=e}function Xo(t,e){for(var n=t.length;n--;)if(Vo(t[n][0],e))return n;return-1}Ho.prototype.clear=function(){this.__data__=Yo?Yo(null):{},this.size=0},Ho.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ho.prototype.get=function(t){var e=this.__data__;if(Yo){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Wo.call(e,t)?e[t]:void 0},Ho.prototype.has=function(t){var e=this.__data__;return Yo?void 0!==e[t]:Uo.call(e,t)},Ho.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Yo&&void 0===e?"__lodash_hash_undefined__":e,this};var Ko=Array.prototype.splice;function Zo(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Zo.prototype.clear=function(){this.__data__=[],this.size=0},Zo.prototype.delete=function(t){var e=this.__data__,n=Xo(e,t);return!(n<0)&&(n==e.length-1?e.pop():Ko.call(e,n,1),--this.size,!0)},Zo.prototype.get=function(t){var e=this.__data__,n=Xo(e,t);return n<0?void 0:e[n][1]},Zo.prototype.has=function(t){return Xo(this.__data__,t)>-1},Zo.prototype.set=function(t,e){var n=this.__data__,r=Xo(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};const Qo=$o(go,"Map");function Jo(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function ta(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ta.prototype.clear=function(){this.size=0,this.__data__={hash:new Ho,map:new(Qo||Zo),string:new Ho}},ta.prototype.delete=function(t){var e=Jo(this,t).delete(t);return this.size-=e?1:0,e},ta.prototype.get=function(t){return Jo(this,t).get(t)},ta.prototype.has=function(t){return Jo(this,t).has(t)},ta.prototype.set=function(t,e){var n=Jo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function ea(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ea.Cache||ta),n}ea.Cache=ta;function na(t){var e=this.__data__=new Zo(t);this.size=e.size}na.prototype.clear=function(){this.__data__=new Zo,this.size=0},na.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},na.prototype.get=function(t){return this.__data__.get(t)},na.prototype.has=function(t){return this.__data__.has(t)},na.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Zo){var r=n.__data__;if(!Qo||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ta(r)}return n.set(t,e),this.size=n.size,this};var ra=function(){try{var t=$o(Object,"defineProperty");return t({},"",{}),t}catch{}}();const ia=ra;function oa(t,e,n){"__proto__"==e&&ia?ia(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function aa(t,e,n){(void 0!==n&&!Vo(t[e],n)||void 0===n&&!(e in t))&&oa(t,e,n)}var sa=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}();const la=sa;var ca="object"==typeof exports&&exports&&!exports.nodeType&&exports,ua=ca&&"object"==typeof module&&module&&!module.nodeType&&module,ha=ua&&ua.exports===ca?go.Buffer:void 0,da=ha?ha.allocUnsafe:void 0;const pa=go.Uint8Array;function fa(t,e){var n=e?function(t){var e=new t.constructor(t.byteLength);return new pa(e).set(new pa(t)),e}(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var ga=Object.create,ya=function(){function t(){}return function(e){if(!Eo(e))return{};if(ga)return ga(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const ma=ya;function va(t,e){return function(n){return t(e(n))}}const ba=va(Object.getPrototypeOf,Object);var xa=Object.prototype;function Ca(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||xa)}function _a(t){return null!=t&&"object"==typeof t}function wa(t){return _a(t)&&"[object Arguments]"==To(t)}var ka=Object.prototype,Ta=ka.hasOwnProperty,Ea=ka.propertyIsEnumerable,Sa=wa(function(){return arguments}())?wa:function(t){return _a(t)&&Ta.call(t,"callee")&&!Ea.call(t,"callee")};const Aa=Sa;const La=Array.isArray;var Da=9007199254740991;function Ba(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Da}function Fa(t){return null!=t&&Ba(t.length)&&!Bo(t)}var Na="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ia=Na&&"object"==typeof module&&module&&!module.nodeType&&module,Oa=Ia&&Ia.exports===Na?go.Buffer:void 0;const Ma=(Oa?Oa.isBuffer:void 0)||function(){return!1};var Pa="[object Object]",Ra=Function.prototype,za=Object.prototype,qa=Ra.toString,ja=za.hasOwnProperty,Ga=qa.call(Object);var $a={};$a["[object Float32Array]"]=$a["[object Float64Array]"]=$a["[object Int8Array]"]=$a["[object Int16Array]"]=$a["[object Int32Array]"]=$a["[object Uint8Array]"]=$a["[object Uint8ClampedArray]"]=$a["[object Uint16Array]"]=$a["[object Uint32Array]"]=!0,$a["[object Arguments]"]=$a["[object Array]"]=$a["[object ArrayBuffer]"]=$a["[object Boolean]"]=$a["[object DataView]"]=$a["[object Date]"]=$a["[object Error]"]=$a["[object Function]"]=$a["[object Map]"]=$a["[object Number]"]=$a["[object Object]"]=$a["[object RegExp]"]=$a["[object Set]"]=$a["[object String]"]=$a["[object WeakMap]"]=!1;var Ya="object"==typeof exports&&exports&&!exports.nodeType&&exports,Wa=Ya&&"object"==typeof module&&module&&!module.nodeType&&module,Ua=Wa&&Wa.exports===Ya&&po.process,Ha=function(){try{return Wa&&Wa.require&&Wa.require("util").types||Ua&&Ua.binding&&Ua.binding("util")}catch{}}();var Va=Ha&&Ha.isTypedArray,Xa=Va?function(t){return function(e){return t(e)}}(Va):function(t){return _a(t)&&Ba(t.length)&&!!$a[To(t)]};const Ka=Xa;function Za(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Qa=Object.prototype.hasOwnProperty;function Ja(t,e,n){var r=t[e];(!Qa.call(t,e)||!Vo(r,n)||void 0===n&&!(e in t))&&oa(t,e,n)}var ts=9007199254740991,es=/^(?:0|[1-9]\d*)$/;function ns(t,e){var n=typeof t;return!!(e=e??ts)&&("number"==n||"symbol"!=n&&es.test(t))&&t>-1&&t%1==0&&t<e}var rs=Object.prototype.hasOwnProperty;function is(t,e){var n=La(t),r=!n&&Aa(t),i=!n&&!r&&Ma(t),o=!n&&!r&&!i&&Ka(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],l=s.length;for(var c in t)(e||rs.call(t,c))&&(!a||!("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ns(c,l)))&&s.push(c);return s}var os=Object.prototype.hasOwnProperty;function as(t){if(!Eo(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Ca(t),n=[];for(var r in t)"constructor"==r&&(e||!os.call(t,r))||n.push(r);return n}function ss(t){return Fa(t)?is(t,!0):as(t)}function ls(t){return function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),i?oa(n,s,l):Ja(n,s,l)}return n}(t,ss(t))}function cs(t,e,n,r,i,o,a){var s=Za(t,n),l=Za(e,n),c=a.get(l);if(c)aa(t,n,c);else{var u=o?o(s,l,n+"",t,e,a):void 0,h=void 0===u;if(h){var d=La(l),p=!d&&Ma(l),f=!d&&!p&&Ka(l);u=l,d||p||f?La(s)?u=s:function(t){return _a(t)&&Fa(t)}(s)?u=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(s):p?(h=!1,u=function(t,e){if(e)return t.slice();var n=t.length,r=da?da(n):new t.constructor(n);return t.copy(r),r}(l,!0)):f?(h=!1,u=fa(l,!0)):u=[]:function(t){if(!_a(t)||To(t)!=Pa)return!1;var e=ba(t);if(null===e)return!0;var n=ja.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&qa.call(n)==Ga}(l)||Aa(l)?(u=s,Aa(s)?u=ls(s):(!Eo(s)||Bo(s))&&(u=function(t){return"function"!=typeof t.constructor||Ca(t)?{}:ma(ba(t))}(l))):h=!1}h&&(a.set(l,u),i(u,l,r,o,a),a.delete(l)),aa(t,n,u)}}function us(t,e,n,r,i){t!==e&&la(e,(function(o,a){if(i||(i=new na),Eo(o))cs(t,e,a,n,us,r,i);else{var s=r?r(Za(t,a),o,a+"",t,e,i):void 0;void 0===s&&(s=o),aa(t,a,s)}}),ss)}function hs(t){return t}var ds=Math.max;function ps(t){return function(){return t}}var fs=ia?function(t,e){return ia(t,"toString",{configurable:!0,enumerable:!1,value:ps(e),writable:!0})}:hs;const gs=fs;var ys=Date.now;var ms=function(t){var e=0,n=0;return function(){var r=ys(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(gs);const vs=ms;function bs(t,e){return vs(function(t,e,n){return e=ds(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=ds(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,s)}}(t,e,hs),t+"")}var xs=function(t){return bs((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&function(t,e,n){if(!Eo(n))return!1;var r=typeof e;return!!("number"==r?Fa(n)&&ns(e,n.length):"string"==r&&e in n)&&Vo(n[e],t)}(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e}))}((function(t,e,n){us(t,e,n)}));const Cs=xs,_s={curveBasis:function(t){return new Bn(t)},curveBasisClosed:function(t){return new Fn(t)},curveBasisOpen:function(t){return new Nn(t)},curveBumpX:function(t){return new An(t,!0)},curveBumpY:function(t){return new An(t,!1)},curveBundle:On,curveCardinalClosed:qn,curveCardinalOpen:Gn,curveCardinal:Rn,curveCatmullRomClosed:Hn,curveCatmullRomOpen:Xn,curveCatmullRom:Wn,curveLinear:function(t){return new Sn(t)},curveLinearClosed:function(t){return new Kn(t)},curveMonotoneX:function(t){return new er(t)},curveMonotoneY:function(t){return new nr(t)},curveNatural:function(t){return new ir(t)},curveStep:function(t){return new ar(t,.5)},curveStepAfter:function(t){return new ar(t,1)},curveStepBefore:function(t){return new ar(t,0)}},ws=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,ks=function(t,e=null){try{const n=new RegExp(`[%]{2}(?![{]${ws.source})(?=[}][%]{2}).*\n`,"ig");let r;t=t.trim().replace(n,"").replace(/'/gm,'"'),s.debug(`Detecting diagram directive${null!==e?" type:"+e:""} based on the text:${t}`);const i=[];for(;null!==(r=ro.exec(t));)if(r.index===ro.lastIndex&&ro.lastIndex++,r&&!e||e&&r[1]&&r[1].match(e)||e&&r[2]&&r[2].match(e)){const t=r[1]?r[1]:r[2],e=r[3]?r[3].trim():r[4]?JSON.parse(r[4].trim()):null;i.push({type:t,args:e})}return 0===i.length?{type:t,args:null}:1===i.length?i[0]:i}catch(n){return s.error(`ERROR: ${n.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},Ts=function(t){return t.replace(ro,"")};function Es(t,e){return t&&e?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):0}const Ss=(t,e=2)=>{const n=Math.pow(10,e);return Math.round(t*n)/n},As=(t,e)=>{let n,r=e;for(const e of t){if(n){const t=Es(e,n);if(t<r)r-=t;else{const i=r/t;if(i<=0)return n;if(i>=1)return{x:e.x,y:e.y};if(i>0&&i<1)return{x:Ss((1-i)*n.x+i*e.x,5),y:Ss((1-i)*n.y+i*e.y,5)}}}n=e}throw new Error("Could not find a suitable point for the given distance")};let Ls=0;const Ds=function(t,e){const n=e.text.replace(di.lineBreakRegex," "),[,r]=Ps(e.fontSize),i=t.append("text");i.attr("x",e.x),i.attr("y",e.y),i.style("text-anchor",e.anchor),i.style("font-family",e.fontFamily),i.style("font-size",r),i.style("font-weight",e.fontWeight),i.attr("fill",e.fill),void 0!==e.class&&i.attr("class",e.class);const o=i.append("tspan");return o.attr("x",e.x+2*e.textMargin),o.attr("fill",e.fill),o.text(n),i},Bs=ea(((t,e,n)=>{if(!t||(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),di.lineBreakRegex.test(t)))return t;const r=t.split(" "),i=[];let o="";return r.forEach(((t,a)=>{const s=Ns(`${t} `,n),l=Ns(o,n);if(s>e){const{hyphenatedStrings:r,remainingWord:a}=Fs(t,e,"-",n);i.push(o,...r),o=a}else l+s>=e?(i.push(o),o=t):o=[o,t].filter(Boolean).join(" ");a+1===r.length&&i.push(o)})),i.filter((t=>""!==t)).join(n.joinWith)}),((t,e,n)=>`${t}${e}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`)),Fs=ea(((t,e,n="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const i=[...t],o=[];let a="";return i.forEach(((t,s)=>{const l=`${a}${t}`;if(Ns(l,r)>=e){const t=s+1,e=i.length===t,r=`${l}${n}`;o.push(e?l:r),a=""}else a=l})),{hyphenatedStrings:o,remainingWord:a}}),((t,e,n="-",r)=>`${t}${e}${n}${r.fontSize}${r.fontWeight}${r.fontFamily}`));function Ns(t,e){return Is(t,e).width}const Is=ea(((t,e)=>{const{fontSize:n=12,fontFamily:r="Arial",fontWeight:i=400}=e;if(!t)return{width:0,height:0};const[,o]=Ps(n),a=["sans-serif",r],s=t.split(di.lineBreakRegex),l=[],c=At("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const u=c.append("svg");for(const t of a){let e=0;const n={width:0,height:0,lineHeight:0};for(const r of s){const a={x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""};a.text=r||"​";const s=Ds(u,a).style("font-size",o).style("font-weight",i).style("font-family",t),l=(s._groups||s)[0][0].getBBox();if(0===l.width&&0===l.height)throw new Error("svg element not in render tree");n.width=Math.round(Math.max(n.width,l.width)),e=Math.round(l.height),n.height+=e,n.lineHeight=Math.round(Math.max(n.lineHeight,e))}l.push(n)}u.remove();return l[isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1]}),((t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`));let Os;function Ms(t){return"str"in t}const Ps=t=>{if("number"==typeof t)return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]};function Rs(t,e){return Cs({},t,e)}const zs={assignWithDepth:ho,wrapLabel:Bs,calculateTextHeight:function(t,e){return Is(t,e).height},calculateTextWidth:Ns,calculateTextDimensions:Is,cleanAndMerge:Rs,detectInit:function(t,e){const n=ks(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(n)){const t=n.map((t=>t.args));to(t),r=ho(r,[...t])}else r=n.args;if(!r)return;let i=so(t,e);const o="config";return void 0!==r[o]&&("flowchart-v2"===i&&(i="flowchart"),r[i]=r[o],delete r[o]),r},detectDirective:ks,isSubstringInArray:function(t,e){for(const[n,r]of e.entries())if(r.match(t))return n;return-1},interpolateToCurve:function(t,e){if(!t)return e;const n=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return _s[n]??e},calcLabelPosition:function(t){return 1===t.length?t[0]:function(t){let e,n=0;return t.forEach((t=>{n+=Es(t,e),e=t})),As(t,n/2)}(t)},calcCardinalityPosition:(t,e,n)=>{s.info(`our points ${JSON.stringify(e)}`),e[0]!==n&&(e=e.reverse());const r=As(e,25),i=t?10:5,o=Math.atan2(e[0].y-r.y,e[0].x-r.x),a={x:0,y:0};return a.x=Math.sin(o)*i+(e[0].x+r.x)/2,a.y=-Math.cos(o)*i+(e[0].y+r.y)/2,a},calcTerminalLabelPosition:function(t,e,n){const r=structuredClone(n);s.info("our points",r),"start_left"!==e&&"start_right"!==e&&r.reverse();const i=As(r,25+t),o=10+.5*t,a=Math.atan2(r[0].y-i.y,r[0].x-i.x),l={x:0,y:0};return"start_left"===e?(l.x=Math.sin(a+Math.PI)*o+(r[0].x+i.x)/2,l.y=-Math.cos(a+Math.PI)*o+(r[0].y+i.y)/2):"end_right"===e?(l.x=Math.sin(a-Math.PI)*o+(r[0].x+i.x)/2-5,l.y=-Math.cos(a-Math.PI)*o+(r[0].y+i.y)/2-5):"end_left"===e?(l.x=Math.sin(a)*o+(r[0].x+i.x)/2-5,l.y=-Math.cos(a)*o+(r[0].y+i.y)/2-5):(l.x=Math.sin(a)*o+(r[0].x+i.x)/2,l.y=-Math.cos(a)*o+(r[0].y+i.y)/2),l},formatUrl:function(t,e){const n=t.trim();if(n)return"loose"!==e.securityLevel?u.sanitizeUrl(n):n},getStylesFromArray:function(t){let e="",n="";for(const r of t)void 0!==r&&(r.startsWith("color:")||r.startsWith("text-align:")?n=n+r+";":e=e+r+";");return{style:e,labelStyle:n}},generateId:()=>(Ls++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Ls),random:t=>function(t){let e="";const n="0123456789abcdef";for(let r=0;r<t;r++)e+=n.charAt(Math.floor(16*Math.random()));return e}(t.length),runFunc:(t,...e)=>{const n=t.split("."),r=n.length-1,i=n[r];let o=window;for(let e=0;e<r;e++)if(o=o[n[e]],!o)return void s.error(`Function name: ${t} not found in window`);o[i](...e)},entityDecode:function(t){return Os=Os||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Os.innerHTML=t,unescape(Os.textContent)},insertTitle:(t,e,n,r)=>{var i;if(!r)return;const o=null==(i=t.node())?void 0:i.getBBox();o&&t.append("text").text(r).attr("x",o.x+o.width/2).attr("y",-n).attr("class",e)},parseFontSize:Ps,InitIDGenerator:class{constructor(t=!1,e){this.count=0,this.count=e?e.length:0,this.next=t?()=>this.count++:()=>Date.now()}}},qs=function(t){return t.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")};var js="comm",Gs="rule",$s="decl",Ys=Math.abs,Ws=String.fromCharCode;function Us(t){return t.trim()}function Hs(t,e,n){return t.replace(e,n)}function Vs(t,e,n){return t.indexOf(e,n)}function Xs(t,e){return 0|t.charCodeAt(e)}function Ks(t,e,n){return t.slice(e,n)}function Zs(t){return t.length}function Qs(t,e){return e.push(t),t}var Js=1,tl=1,el=0,nl=0,rl=0,il="";function ol(t,e,n,r,i,o,a,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:Js,column:tl,length:a,return:"",siblings:s}}function al(){return rl=nl<el?Xs(il,nl++):0,tl++,10===rl&&(tl=1,Js++),rl}function sl(){return Xs(il,nl)}function ll(){return nl}function cl(t,e){return Ks(il,t,e)}function ul(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function hl(t){return Us(cl(nl-1,fl(91===t?t+2:40===t?t+1:t)))}function dl(t){for(;(rl=sl())&&rl<33;)al();return ul(t)>2||ul(rl)>3?"":" "}function pl(t,e){for(;--e&&al()&&!(rl<48||rl>102||rl>57&&rl<65||rl>70&&rl<97););return cl(t,ll()+(e<6&&32==sl()&&32==al()))}function fl(t){for(;al();)switch(rl){case t:return nl;case 34:case 39:34!==t&&39!==t&&fl(rl);break;case 40:41===t&&fl(t);break;case 92:al()}return nl}function gl(t,e){for(;al()&&t+rl!==57&&(t+rl!==84||47!==sl()););return"/*"+cl(e,nl-1)+"*"+Ws(47===t?t:al())}function yl(t){for(;!ul(sl());)al();return cl(t,nl)}function ml(t){return function(t){return il="",t}(vl("",null,null,null,[""],t=function(t){return Js=tl=1,el=Zs(il=t),nl=0,[]}(t),0,[0],t))}function vl(t,e,n,r,i,o,a,s,l){for(var c=0,u=0,h=a,d=0,p=0,f=0,g=1,y=1,m=1,v=0,b="",x=i,C=o,_=r,w=b;y;)switch(f=v,v=al()){case 40:if(108!=f&&58==Xs(w,h-1)){-1!=Vs(w+=Hs(hl(v),"&","&\f"),"&\f",Ys(c?s[c-1]:0))&&(m=-1);break}case 34:case 39:case 91:w+=hl(v);break;case 9:case 10:case 13:case 32:w+=dl(f);break;case 92:w+=pl(ll()-1,7);continue;case 47:switch(sl()){case 42:case 47:Qs(xl(gl(al(),ll()),e,n,l),l);break;default:w+="/"}break;case 123*g:s[c++]=Zs(w)*m;case 125*g:case 59:case 0:switch(v){case 0:case 125:y=0;case 59+u:-1==m&&(w=Hs(w,/\f/g,"")),p>0&&Zs(w)-h&&Qs(p>32?Cl(w+";",r,n,h-1,l):Cl(Hs(w," ","")+";",r,n,h-2,l),l);break;case 59:w+=";";default:if(Qs(_=bl(w,e,n,c,u,i,s,b,x=[],C=[],h,o),o),123===v)if(0===u)vl(w,e,_,_,x,o,h,s,C);else switch(99===d&&110===Xs(w,3)?100:d){case 100:case 108:case 109:case 115:vl(t,_,_,r&&Qs(bl(t,_,_,0,0,i,s,b,i,x=[],h,C),C),i,C,h,s,r?x:C);break;default:vl(w,_,_,_,[""],C,0,s,C)}}c=u=p=0,g=m=1,b=w="",h=a;break;case 58:h=1+Zs(w),p=f;default:if(g<1)if(123==v)--g;else if(125==v&&0==g++&&125==(rl=nl>0?Xs(il,--nl):0,tl--,10===rl&&(tl=1,Js--),rl))continue;switch(w+=Ws(v),v*g){case 38:m=u>0?1:(w+="\f",-1);break;case 44:s[c++]=(Zs(w)-1)*m,m=1;break;case 64:45===sl()&&(w+=hl(al())),d=sl(),u=h=Zs(b=w+=yl(ll())),v++;break;case 45:45===f&&2==Zs(w)&&(g=0)}}return o}function bl(t,e,n,r,i,o,a,s,l,c,u,h){for(var d=i-1,p=0===i?o:[""],f=function(t){return t.length}(p),g=0,y=0,m=0;g<r;++g)for(var v=0,b=Ks(t,d+1,d=Ys(y=a[g])),x=t;v<f;++v)(x=Us(y>0?p[v]+" "+b:Hs(b,/&\f/g,p[v])))&&(l[m++]=x);return ol(t,e,n,0===i?Gs:s,l,c,u,h)}function xl(t,e,n,r){return ol(t,e,n,js,Ws(rl),Ks(t,2,-2),0,r)}function Cl(t,e,n,r,i){return ol(t,e,n,$s,Ks(t,0,r),Ks(t,r+1,-1),r,i)}function _l(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function wl(t,e,n,r){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case $s:return t.return=t.return||t.value;case js:return"";case"@keyframes":return t.return=t.value+"{"+_l(t.children,r)+"}";case Gs:if(!Zs(t.value=t.props.join(",")))return""}return Zs(n=_l(t.children,r))?t.return=t.value+"{"+n+"}":""}const kl="10.9.0",Tl=Object.freeze(Ji);let El,Sl=ho({},Tl),Al=[],Ll=ho({},Tl);const Dl=(t,e)=>{let n=ho({},t),r={};for(const t of e)Nl(t),r=ho(r,t);if(n=ho(n,r),r.theme&&r.theme in Vi){const t=ho({},El),e=ho(t.themeVariables||{},r.themeVariables);n.theme&&n.theme in Vi&&(n.themeVariables=Vi[n.theme].getThemeVariables(e))}return Ll=n,Rl(Ll),Ll},Bl=()=>ho({},Sl),Fl=()=>ho({},Ll),Nl=t=>{t&&(["secure",...Sl.secure??[]].forEach((e=>{Object.hasOwn(t,e)&&(s.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])})),Object.keys(t).forEach((e=>{e.startsWith("__")&&delete t[e]})),Object.keys(t).forEach((e=>{"string"==typeof t[e]&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],"object"==typeof t[e]&&Nl(t[e])})))},Il=t=>{to(t),t.fontFamily&&(!t.themeVariables||!t.themeVariables.fontFamily)&&(t.themeVariables={fontFamily:t.fontFamily}),Al.push(t),Dl(Sl,Al)},Ol=(t=Sl)=>{Al=[],Dl(t,Al)},Ml={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},Pl={},Rl=t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&(t=>{Pl[t]||(s.warn(Ml[t]),Pl[t]=!0)})("LAZY_LOAD_DEPRECATED")},zl={id:"c4",detector:t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),loader:async()=>{const{diagram:t}=await import("../c4Diagram-e65f60cc.js/_esm.js");return{id:"c4",diagram:t}}},ql=zl,jl="flowchart",Gl={id:jl,detector:(t,e)=>{var n,r;return"dagre-wrapper"!==(null==(n=null==e?void 0:e.flowchart)?void 0:n.defaultRenderer)&&"elk"!==(null==(r=null==e?void 0:e.flowchart)?void 0:r.defaultRenderer)&&/^\s*graph/.test(t)},loader:async()=>{const{diagram:t}=await import("../flowDiagram-d3710025.js/_esm.js");return{id:jl,diagram:t}}},$l=Gl,Yl="flowchart-v2",Wl={id:Yl,detector:(t,e)=>{var n,r,i;return"dagre-d3"!==(null==(n=null==e?void 0:e.flowchart)?void 0:n.defaultRenderer)&&"elk"!==(null==(r=null==e?void 0:e.flowchart)?void 0:r.defaultRenderer)&&(!(!/^\s*graph/.test(t)||"dagre-wrapper"!==(null==(i=null==e?void 0:e.flowchart)?void 0:i.defaultRenderer))||/^\s*flowchart/.test(t))},loader:async()=>{const{diagram:t}=await import("../flowDiagram-v2-8dd8b966.js/_esm.js");return{id:Yl,diagram:t}}},Ul=Wl,Hl={id:"er",detector:t=>/^\s*erDiagram/.test(t),loader:async()=>{const{diagram:t}=await import("../erDiagram-88ff80f2.js/_esm.js");return{id:"er",diagram:t}}},Vl=Hl,Xl="gitGraph",Kl={id:Xl,detector:t=>/^\s*gitGraph/.test(t),loader:async()=>{const{diagram:t}=await import("../gitGraphDiagram-e4279c54.js/_esm.js");return{id:Xl,diagram:t}}},Zl=Kl,Ql="gantt",Jl={id:Ql,detector:t=>/^\s*gantt/.test(t),loader:async()=>{const{diagram:t}=await import("../ganttDiagram-d5eca442.js/_esm.js");return{id:Ql,diagram:t}}},tc=Jl,ec="info",nc={id:ec,detector:t=>/^\s*info/.test(t),loader:async()=>{const{diagram:t}=await import("../infoDiagram-6f84184f.js/_esm.js");return{id:ec,diagram:t}}},rc={id:"pie",detector:t=>/^\s*pie/.test(t),loader:async()=>{const{diagram:t}=await import("../pieDiagram-fdb04870.js/_esm.js");return{id:"pie",diagram:t}}},ic="quadrantChart",oc={id:ic,detector:t=>/^\s*quadrantChart/.test(t),loader:async()=>{const{diagram:t}=await import("../quadrantDiagram-acae359b.js/_esm.js");return{id:ic,diagram:t}}},ac=oc,sc="xychart",lc={id:sc,detector:t=>/^\s*xychart-beta/.test(t),loader:async()=>{const{diagram:t}=await import("../xychartDiagram-2c3c3b85.js/_esm.js");return{id:sc,diagram:t}}},cc=lc,uc="requirement",hc={id:uc,detector:t=>/^\s*requirement(Diagram)?/.test(t),loader:async()=>{const{diagram:t}=await import("../requirementDiagram-fc9445a3.js/_esm.js");return{id:uc,diagram:t}}},dc=hc,pc="sequence",fc={id:pc,detector:t=>/^\s*sequenceDiagram/.test(t),loader:async()=>{const{diagram:t}=await import("../sequenceDiagram-a3c91cc7.js/_esm.js");return{id:pc,diagram:t}}},gc=fc,yc="class",mc={id:yc,detector:(t,e)=>{var n;return"dagre-wrapper"!==(null==(n=null==e?void 0:e.class)?void 0:n.defaultRenderer)&&/^\s*classDiagram/.test(t)},loader:async()=>{const{diagram:t}=await import("../classDiagram-9faaf380.js/_esm.js");return{id:yc,diagram:t}}},vc=mc,bc="classDiagram",xc={id:bc,detector:(t,e)=>{var n;return!(!/^\s*classDiagram/.test(t)||"dagre-wrapper"!==(null==(n=null==e?void 0:e.class)?void 0:n.defaultRenderer))||/^\s*classDiagram-v2/.test(t)},loader:async()=>{const{diagram:t}=await import("../classDiagram-v2-8d50f991.js/_esm.js");return{id:bc,diagram:t}}},Cc=xc,_c="state",wc={id:_c,detector:(t,e)=>{var n;return"dagre-wrapper"!==(null==(n=null==e?void 0:e.state)?void 0:n.defaultRenderer)&&/^\s*stateDiagram/.test(t)},loader:async()=>{const{diagram:t}=await import("../stateDiagram-654cced9.js/_esm.js");return{id:_c,diagram:t}}},kc=wc,Tc="stateDiagram",Ec={id:Tc,detector:(t,e)=>{var n;return!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&"dagre-wrapper"===(null==(n=null==e?void 0:e.state)?void 0:n.defaultRenderer))},loader:async()=>{const{diagram:t}=await import("../stateDiagram-v2-140258dc.js/_esm.js");return{id:Tc,diagram:t}}},Sc=Ec,Ac="journey",Lc={id:Ac,detector:t=>/^\s*journey/.test(t),loader:async()=>{const{diagram:t}=await import("../journeyDiagram-b15fc9d2.js/_esm.js");return{id:Ac,diagram:t}}},Dc=Lc,Bc=function(t,e,n,r){const i=function(t,e,n){let r=new Map;return n?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):(r.set("height",t),r.set("width",e)),r}(e,n,r);!function(t,e){for(let n of e)t.attr(n[0],n[1])}(t,i)},Fc=function(t,e,n,r){const i=e.node().getBBox(),o=i.width,a=i.height;s.info(`SVG bounds: ${o}x${a}`,i);let l=0,c=0;s.info(`Graph bounds: ${l}x${c}`,t),l=o+2*n,c=a+2*n,s.info(`Calculated bounds: ${l}x${c}`),Bc(e,c,l,r);const u=`${i.x-n} ${i.y-n} ${i.width+2*n} ${i.height+2*n}`;e.attr("viewBox",u)},Nc={},Ic=(t,e,n)=>{let r="";return t in Nc&&Nc[t]?r=Nc[t](n):s.warn(`No theme found for ${t}`),` & {\n    font-family: ${n.fontFamily};\n    font-size: ${n.fontSize};\n    fill: ${n.textColor}\n  }\n\n  /* Classes common for multiple diagrams */\n\n  & .error-icon {\n    fill: ${n.errorBkgColor};\n  }\n  & .error-text {\n    fill: ${n.errorTextColor};\n    stroke: ${n.errorTextColor};\n  }\n\n  & .edge-thickness-normal {\n    stroke-width: 2px;\n  }\n  & .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  & .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n\n  & .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  & .marker {\n    fill: ${n.lineColor};\n    stroke: ${n.lineColor};\n  }\n  & .marker.cross {\n    stroke: ${n.lineColor};\n  }\n\n  & svg {\n    font-family: ${n.fontFamily};\n    font-size: ${n.fontSize};\n  }\n\n  ${r}\n\n  ${e}\n`};let Oc="",Mc="",Pc="";const Rc=t=>li(t,Fl()),zc=Object.freeze(Object.defineProperty({__proto__:null,clear:()=>{Oc="",Pc="",Mc=""},getAccDescription:()=>Pc,getAccTitle:()=>Oc,getDiagramTitle:()=>Mc,setAccDescription:t=>{Pc=Rc(t).replace(/\n\s+/g,"\n")},setAccTitle:t=>{Oc=Rc(t).replace(/^\s+/g,"")},setDiagramTitle:t=>{Mc=Rc(t)}},Symbol.toStringTag,{value:"Module"})),qc=s,jc=l,Gc=Fl,$c=t=>li(t,Gc()),Yc=Fc,Wc={},Uc=(t,e,n)=>{var r;if(Wc[t])throw new Error(`Diagram ${t} already registered.`);Wc[t]=e,n&&co(t,n),((t,e)=>{void 0!==e&&(Nc[t]=e)})(t,e.styles),null==(r=e.injectUtils)||r.call(e,qc,jc,Gc,$c,Yc,zc,(()=>{}))},Hc=t=>{if(t in Wc)return Wc[t];throw new Vc(t)};class Vc extends Error{constructor(t){super(`Diagram ${t} not found.`)}}const Xc=t=>{var e;const{securityLevel:n}=Gc();let r=At("body");if("sandbox"===n){const n=(null==(e=At(`#i${t}`).node())?void 0:e.contentDocument)??document;r=At(n.body)}return r.select(`#${t}`)},Kc={draw:(t,e,n)=>{s.debug("rendering svg for syntax error\n");const r=Xc(e),i=r.append("g");r.attr("viewBox","0 0 2412 512"),Bc(r,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${n}`)}},Zc=Kc,Qc={db:{},renderer:Kc,parser:{parser:{yy:{}},parse:()=>{}}},Jc="flowchart-elk",tu={id:Jc,detector:(t,e)=>{var n;return!!(/^\s*flowchart-elk/.test(t)||/^\s*flowchart|graph/.test(t)&&"elk"===(null==(n=null==e?void 0:e.flowchart)?void 0:n.defaultRenderer))},loader:async()=>{const{diagram:t}=await import("../flowchart-elk-definition-34365f60.js/_esm.js");return{id:Jc,diagram:t}}},eu=tu,nu="timeline",ru={id:nu,detector:t=>/^\s*timeline/.test(t),loader:async()=>{const{diagram:t}=await import("../timeline-definition-d879e019.js/_esm.js");return{id:nu,diagram:t}}},iu=ru,ou="mindmap",au={id:ou,detector:t=>/^\s*mindmap/.test(t),loader:async()=>{const{diagram:t}=await import("./_esm.js");return{id:ou,diagram:t}}},su=au,lu="sankey",cu={id:lu,detector:t=>/^\s*sankey-beta/.test(t),loader:async()=>{const{diagram:t}=await import("../sankeyDiagram-9fcf3781.js/_esm.js");return{id:lu,diagram:t}}},uu=cu,hu="block",du={id:hu,detector:t=>/^\s*block-beta/.test(t),loader:async()=>{const{diagram:t}=await import("../blockDiagram-48276afd.js/_esm.js");return{id:hu,diagram:t}}},pu=du;let fu=!1;const gu=()=>{fu||(fu=!0,Uc("error",Qc,(t=>"error"===t.toLowerCase().trim())),Uc("---",{db:{clear:()=>{}},styles:{},renderer:{draw:()=>{}},parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")}},init:()=>null},(t=>t.toLowerCase().trimStart().startsWith("---"))),lo(ql,Cc,vc,Vl,tc,nc,rc,dc,gc,eu,Ul,$l,su,iu,Zl,Sc,kc,Dc,ac,uu,cc,pu))};class yu{constructor(t,e={}){this.text=t,this.metadata=e,this.type="graph",this.text=function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,(function(t){return t.substring(0,t.length-1)})),e=e.replace(/classDef.*:\S*#.*;/g,(function(t){return t.substring(0,t.length-1)})),e=e.replace(/#\w+;/g,(function(t){const e=t.substring(1,t.length-1);return/^\+?\d+$/.test(e)?"ﬂ°°"+e+"¶ß":"ﬂ°"+e+"¶ß"})),e}(t),this.text+="\n";const n=Fl();try{this.type=so(t,n)}catch(t){this.type="error",this.detectError=t}const r=Hc(this.type);s.debug("Type "+this.type),this.db=r.db,this.renderer=r.renderer,this.parser=r.parser,this.parser.parser.yy=this.db,this.init=r.init,this.parse()}parse(){var t,e,n,r,i;if(this.detectError)throw this.detectError;null==(e=(t=this.db).clear)||e.call(t);const o=Fl();null==(n=this.init)||n.call(this,o),this.metadata.title&&(null==(i=(r=this.db).setDiagramTitle)||i.call(r,this.metadata.title)),this.parser.parse(this.text)}async render(t,e){await this.renderer.draw(this.text,t,e,this)}getParser(){return this.parser}getType(){return this.type}}const mu=async(t,e={})=>{const n=so(t,Fl());try{Hc(n)}catch{const t=(t=>ao[t].loader)(n);if(!t)throw new oo(`Diagram ${n} not found.`);const{id:e,diagram:r}=await t();Uc(e,r)}return new yu(t,e)};let vu=[];const bu=va(Object.keys,Object);var xu=Object.prototype.hasOwnProperty;const Cu=$o(go,"DataView");const _u=$o(go,"Promise");const wu=$o(go,"Set");const ku=$o(go,"WeakMap");var Tu="[object Map]",Eu="[object Promise]",Su="[object Set]",Au="[object WeakMap]",Lu="[object DataView]",Du=Oo(Cu),Bu=Oo(Qo),Fu=Oo(_u),Nu=Oo(wu),Iu=Oo(ku),Ou=To;(Cu&&Ou(new Cu(new ArrayBuffer(1)))!=Lu||Qo&&Ou(new Qo)!=Tu||_u&&Ou(_u.resolve())!=Eu||wu&&Ou(new wu)!=Su||ku&&Ou(new ku)!=Au)&&(Ou=function(t){var e=To(t),n="[object Object]"==e?t.constructor:void 0,r=n?Oo(n):"";if(r)switch(r){case Du:return Lu;case Bu:return Tu;case Fu:return Eu;case Nu:return Su;case Iu:return Au}return e});const Mu=Ou;var Pu=Object.prototype.hasOwnProperty;function Ru(t){if(null==t)return!0;if(Fa(t)&&(La(t)||"string"==typeof t||"function"==typeof t.splice||Ma(t)||Ka(t)||Aa(t)))return!t.length;var e=Mu(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Ca(t))return!function(t){if(!Ca(t))return bu(t);var e=[];for(var n in Object(t))xu.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t).length;for(var n in t)if(Pu.call(t,n))return!1;return!0}const zu="graphics-document document";const qu=t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart()
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */;function ju(t){return typeof t>"u"||null===t}var Gu=function(t){return"object"==typeof t&&null!==t},$u=function(t){return Array.isArray(t)?t:ju(t)?[]:[t]},Yu=function(t,e){var n,r="";for(n=0;n<e;n+=1)r+=t;return r},Wu=function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},Uu=function(t,e){var n,r,i,o;if(e)for(n=0,r=(o=Object.keys(e)).length;n<r;n+=1)t[i=o[n]]=e[i];return t},Hu={isNothing:ju,isObject:Gu,toArray:$u,repeat:Yu,isNegativeZero:Wu,extend:Uu};function Vu(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+="\n\n"+t.mark.snippet),r+" "+n):r}function Xu(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Vu(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}Xu.prototype=Object.create(Error.prototype),Xu.prototype.constructor=Xu,Xu.prototype.toString=function(t){return this.name+": "+Vu(this,t)};var Ku=Xu;function Zu(t,e,n,r,i){var o="",a="",s=Math.floor(i/2)-1;return r-e>s&&(e=r-s+(o=" ... ").length),n-r>s&&(n=r+s-(a=" ...").length),{str:o+t.slice(e,n).replace(/\t/g,"→")+a,pos:r-e+o.length}}function Qu(t,e){return Hu.repeat(" ",e-t.length)+t}var Ju=function(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),"number"!=typeof e.indent&&(e.indent=1),"number"!=typeof e.linesBefore&&(e.linesBefore=3),"number"!=typeof e.linesAfter&&(e.linesAfter=2);for(var n,r=/\r?\n|\r|\0/g,i=[0],o=[],a=-1;n=r.exec(t.buffer);)o.push(n.index),i.push(n.index+n[0].length),t.position<=n.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var s,l,c="",u=Math.min(t.line+e.linesAfter,o.length).toString().length,h=e.maxLength-(e.indent+u+3);for(s=1;s<=e.linesBefore&&!(a-s<0);s++)l=Zu(t.buffer,i[a-s],o[a-s],t.position-(i[a]-i[a-s]),h),c=Hu.repeat(" ",e.indent)+Qu((t.line-s+1).toString(),u)+" | "+l.str+"\n"+c;for(l=Zu(t.buffer,i[a],o[a],t.position,h),c+=Hu.repeat(" ",e.indent)+Qu((t.line+1).toString(),u)+" | "+l.str+"\n",c+=Hu.repeat("-",e.indent+u+3+l.pos)+"^\n",s=1;s<=e.linesAfter&&!(a+s>=o.length);s++)l=Zu(t.buffer,i[a+s],o[a+s],t.position-(i[a]-i[a+s]),h),c+=Hu.repeat(" ",e.indent)+Qu((t.line+s+1).toString(),u)+" | "+l.str+"\n";return c.replace(/\n$/,"")},th=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],eh=["scalar","sequence","mapping"];var nh=function(t,e){if(e=e||{},Object.keys(e).forEach((function(e){if(-1===th.indexOf(e))throw new Ku('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')})),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=function(t){var e={};return null!==t&&Object.keys(t).forEach((function(n){t[n].forEach((function(t){e[String(t)]=n}))})),e}(e.styleAliases||null),-1===eh.indexOf(this.kind))throw new Ku('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function rh(t,e){var n=[];return t[e].forEach((function(t){var e=n.length;n.forEach((function(n,r){n.tag===t.tag&&n.kind===t.kind&&n.multi===t.multi&&(e=r)})),n[e]=t})),n}function ih(t){return this.extend(t)}ih.prototype.extend=function(t){var e=[],n=[];if(t instanceof nh)n.push(t);else if(Array.isArray(t))n=n.concat(t);else{if(!t||!Array.isArray(t.implicit)&&!Array.isArray(t.explicit))throw new Ku("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit))}e.forEach((function(t){if(!(t instanceof nh))throw new Ku("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(t.loadKind&&"scalar"!==t.loadKind)throw new Ku("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(t.multi)throw new Ku("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(t){if(!(t instanceof nh))throw new Ku("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var r=Object.create(ih.prototype);return r.implicit=(this.implicit||[]).concat(e),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=rh(r,"implicit"),r.compiledExplicit=rh(r,"explicit"),r.compiledTypeMap=function(){var t,e,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(t){t.multi?(n.multi[t.kind].push(t),n.multi.fallback.push(t)):n[t.kind][t.tag]=n.fallback[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(r);return n}(r.compiledImplicit,r.compiledExplicit),r};var oh=ih,ah=new nh("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),sh=new nh("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),lh=new nh("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}}),ch=new oh({explicit:[ah,sh,lh]});var uh=new nh("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var hh=new nh("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function dh(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function ph(t){return 48<=t&&t<=55}function fh(t){return 48<=t&&t<=57}var gh=new nh("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,n=t.length,r=0,i=!1;if(!n)return!1;if(("-"===(e=t[r])||"+"===e)&&(e=t[++r]),"0"===e){if(r+1===n)return!0;if("b"===(e=t[++r])){for(r++;r<n;r++)if("_"!==(e=t[r])){if("0"!==e&&"1"!==e)return!1;i=!0}return i&&"_"!==e}if("x"===e){for(r++;r<n;r++)if("_"!==(e=t[r])){if(!dh(t.charCodeAt(r)))return!1;i=!0}return i&&"_"!==e}if("o"===e){for(r++;r<n;r++)if("_"!==(e=t[r])){if(!ph(t.charCodeAt(r)))return!1;i=!0}return i&&"_"!==e}}if("_"===e)return!1;for(;r<n;r++)if("_"!==(e=t[r])){if(!fh(t.charCodeAt(r)))return!1;i=!0}return!(!i||"_"===e)},construct:function(t){var e,n=t,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),("-"===(e=n[0])||"+"===e)&&("-"===e&&(r=-1),e=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===e){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!Hu.isNegativeZero(t)},represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),yh=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var mh=/^[-+]?[0-9]+e/;var vh=new nh("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return!(null===t||!yh.test(t)||"_"===t[t.length-1])},construct:function(t){var e,n;return n="-"===(e=t.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),".inf"===e?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===e?NaN:n*parseFloat(e,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||Hu.isNegativeZero(t))},represent:function(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Hu.isNegativeZero(t))return"-0.0";return n=t.toString(10),mh.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),bh=ch.extend({implicit:[uh,hh,gh,vh]}),xh=bh,Ch=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),_h=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var wh=new nh("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&(null!==Ch.exec(t)||null!==_h.exec(t))},construct:function(t){var e,n,r,i,o,a,s,l,c=0,u=null;if(null===(e=Ch.exec(t))&&(e=_h.exec(t)),null===e)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(o=+e[4],a=+e[5],s=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=6e4*(60*+e[10]+ +(e[11]||0)),"-"===e[9]&&(u=-u)),l=new Date(Date.UTC(n,r,i,o,a,s,c)),u&&l.setTime(l.getTime()-u),l},instanceOf:Date,represent:function(t){return t.toISOString()}});var kh=new nh("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}}),Th="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var Eh=new nh("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,n,r=0,i=t.length,o=Th;for(n=0;n<i;n++)if(!((e=o.indexOf(t.charAt(n)))>64)){if(e<0)return!1;r+=6}return r%8==0},construct:function(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,o=Th,a=0,s=[];for(e=0;e<i;e++)e%4==0&&e&&(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)),a=a<<6|o.indexOf(r.charAt(e));return 0===(n=i%4*6)?(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)):18===n?(s.push(a>>10&255),s.push(a>>2&255)):12===n&&s.push(a>>4&255),new Uint8Array(s)},predicate:function(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)},represent:function(t){var e,n,r="",i=0,o=t.length,a=Th;for(e=0;e<o;e++)e%3==0&&e&&(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]),i=(i<<8)+t[e];return 0===(n=o%3)?(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]):2===n?(r+=a[i>>10&63],r+=a[i>>4&63],r+=a[i<<2&63],r+=a[64]):1===n&&(r+=a[i>>2&63],r+=a[i<<4&63],r+=a[64],r+=a[64]),r}}),Sh=Object.prototype.hasOwnProperty,Ah=Object.prototype.toString;var Lh=new nh("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,n,r,i,o,a=[],s=t;for(e=0,n=s.length;e<n;e+=1){if(r=s[e],o=!1,"[object Object]"!==Ah.call(r))return!1;for(i in r)if(Sh.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==a.indexOf(i))return!1;a.push(i)}return!0},construct:function(t){return null!==t?t:[]}}),Dh=Object.prototype.toString;var Bh=new nh("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1){if(r=a[e],"[object Object]"!==Dh.call(r)||1!==(i=Object.keys(r)).length)return!1;o[e]=[i[0],r[i[0]]]}return!0},construct:function(t){if(null===t)return[];var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1)r=a[e],i=Object.keys(r),o[e]=[i[0],r[i[0]]];return o}}),Fh=Object.prototype.hasOwnProperty;var Nh=new nh("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null===t)return!0;var e,n=t;for(e in n)if(Fh.call(n,e)&&null!==n[e])return!1;return!0},construct:function(t){return null!==t?t:{}}}),Ih=xh.extend({implicit:[wh,kh],explicit:[Eh,Lh,Bh,Nh]}),Oh=Object.prototype.hasOwnProperty,Mh=1,Ph=2,Rh=3,zh=4,qh=1,jh=2,Gh=3,$h=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Yh=/[\x85\u2028\u2029]/,Wh=/[,\[\]\{\}]/,Uh=/^(?:!|!!|![a-z\-]+!)$/i,Hh=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Vh(t){return Object.prototype.toString.call(t)}function Xh(t){return 10===t||13===t}function Kh(t){return 9===t||32===t}function Zh(t){return 9===t||32===t||10===t||13===t}function Qh(t){return 44===t||91===t||93===t||123===t||125===t}function Jh(t){var e;return 48<=t&&t<=57?t-48:97<=(e=32|t)&&e<=102?e-97+10:-1}function td(t){return 120===t?2:117===t?4:85===t?8:0}function ed(t){return 48<=t&&t<=57?t-48:-1}function nd(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"":95===t?" ":76===t?"\u2028":80===t?"\u2029":""}function rd(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var id=new Array(256),od=new Array(256),ad=0;ad<256;ad++)id[ad]=nd(ad)?1:0,od[ad]=nd(ad);function sd(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Ih,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ld(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=Ju(n),new Ku(e,n)}function cd(t,e){throw ld(t,e)}function ud(t,e){t.onWarning&&t.onWarning.call(null,ld(t,e))}var hd={YAML:function(t,e,n){var r,i,o;null!==t.version&&cd(t,"duplication of %YAML directive"),1!==n.length&&cd(t,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&cd(t,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&cd(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,1!==o&&2!==o&&ud(t,"unsupported YAML version of the document")},TAG:function(t,e,n){var r,i;2!==n.length&&cd(t,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],Uh.test(r)||cd(t,"ill-formed tag handle (first argument) of the TAG directive"),Oh.call(t.tagMap,r)&&cd(t,'there is a previously declared suffix for "'+r+'" tag handle'),Hh.test(i)||cd(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{cd(t,"tag prefix is malformed: "+i)}t.tagMap[r]=i}};function dd(t,e,n,r){var i,o,a,s;if(e<n){if(s=t.input.slice(e,n),r)for(i=0,o=s.length;i<o;i+=1)9===(a=s.charCodeAt(i))||32<=a&&a<=1114111||cd(t,"expected valid JSON character");else $h.test(s)&&cd(t,"the stream contains non-printable characters");t.result+=s}}function pd(t,e,n,r){var i,o,a,s;for(Hu.isObject(n)||cd(t,"cannot merge mappings; the provided source object is unacceptable"),a=0,s=(i=Object.keys(n)).length;a<s;a+=1)o=i[a],Oh.call(e,o)||(e[o]=n[o],r[o]=!0)}function fd(t,e,n,r,i,o,a,s,l){var c,u;if(Array.isArray(i))for(c=0,u=(i=Array.prototype.slice.call(i)).length;c<u;c+=1)Array.isArray(i[c])&&cd(t,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===Vh(i[c])&&(i[c]="[object Object]");if("object"==typeof i&&"[object Object]"===Vh(i)&&(i="[object Object]"),i=String(i),null===e&&(e={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(c=0,u=o.length;c<u;c+=1)pd(t,e,o[c],n);else pd(t,e,o,n);else!t.json&&!Oh.call(n,i)&&Oh.call(e,i)&&(t.line=a||t.line,t.lineStart=s||t.lineStart,t.position=l||t.position,cd(t,"duplicated mapping key")),"__proto__"===i?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete n[i];return e}function gd(t){var e;10===(e=t.input.charCodeAt(t.position))?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):cd(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function yd(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);0!==i;){for(;Kh(i);)9===i&&-1===t.firstTabInLine&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&35===i)do{i=t.input.charCodeAt(++t.position)}while(10!==i&&13!==i&&0!==i);if(!Xh(i))break;for(gd(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;32===i;)t.lineIndent++,i=t.input.charCodeAt(++t.position)}return-1!==n&&0!==r&&t.lineIndent<n&&ud(t,"deficient indentation"),r}function md(t){var e,n=t.position;return!(45!==(e=t.input.charCodeAt(n))&&46!==e||e!==t.input.charCodeAt(n+1)||e!==t.input.charCodeAt(n+2)||(n+=3,e=t.input.charCodeAt(n),0!==e&&!Zh(e)))}function vd(t,e){1===e?t.result+=" ":e>1&&(t.result+=Hu.repeat("\n",e-1))}function bd(t,e){var n,r,i=t.tag,o=t.anchor,a=[],s=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),r=t.input.charCodeAt(t.position);0!==r&&(-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,cd(t,"tab characters must not be used in indentation")),45===r&&Zh(t.input.charCodeAt(t.position+1)));)if(s=!0,t.position++,yd(t,!0,-1)&&t.lineIndent<=e)a.push(null),r=t.input.charCodeAt(t.position);else if(n=t.line,_d(t,e,Rh,!1,!0),a.push(t.result),yd(t,!0,-1),r=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&0!==r)cd(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!s&&(t.tag=i,t.anchor=o,t.kind="sequence",t.result=a,!0)}function xd(t){var e,n,r,i,o=!1,a=!1;if(33!==(i=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&cd(t,"duplication of a tag property"),60===(i=t.input.charCodeAt(++t.position))?(o=!0,i=t.input.charCodeAt(++t.position)):33===i?(a=!0,n="!!",i=t.input.charCodeAt(++t.position)):n="!",e=t.position,o){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&62!==i);t.position<t.length?(r=t.input.slice(e,t.position),i=t.input.charCodeAt(++t.position)):cd(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!Zh(i);)33===i&&(a?cd(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),Uh.test(n)||cd(t,"named tag handle cannot contain such characters"),a=!0,e=t.position+1)),i=t.input.charCodeAt(++t.position);r=t.input.slice(e,t.position),Wh.test(r)&&cd(t,"tag suffix cannot contain flow indicator characters")}r&&!Hh.test(r)&&cd(t,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch{cd(t,"tag name is malformed: "+r)}return o?t.tag=r:Oh.call(t.tagMap,n)?t.tag=t.tagMap[n]+r:"!"===n?t.tag="!"+r:"!!"===n?t.tag="tag:yaml.org,2002:"+r:cd(t,'undeclared tag handle "'+n+'"'),!0}function Cd(t){var e,n;if(38!==(n=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&cd(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!Zh(n)&&!Qh(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&cd(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function _d(t,e,n,r,i){var o,a,s,l,c,u,h,d,p,f=1,g=!1,y=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=s=zh===n||Rh===n,r&&yd(t,!0,-1)&&(g=!0,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)),1===f)for(;xd(t)||Cd(t);)yd(t,!0,-1)?(g=!0,s=o,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)):s=!1;if(s&&(s=g||i),(1===f||zh===n)&&(d=Mh===n||Ph===n?e:e+1,p=t.position-t.lineStart,1===f?s&&(bd(t,p)||function(t,e,n){var r,i,o,a,s,l,c,u=t.tag,h=t.anchor,d={},p=Object.create(null),f=null,g=null,y=null,m=!1,v=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=d),c=t.input.charCodeAt(t.position);0!==c;){if(!m&&-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,cd(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),o=t.line,63!==c&&58!==c||!Zh(r)){if(a=t.line,s=t.lineStart,l=t.position,!_d(t,n,Ph,!1,!0))break;if(t.line===o){for(c=t.input.charCodeAt(t.position);Kh(c);)c=t.input.charCodeAt(++t.position);if(58===c)Zh(c=t.input.charCodeAt(++t.position))||cd(t,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(fd(t,d,p,f,g,null,a,s,l),f=g=y=null),v=!0,m=!1,i=!1,f=t.tag,g=t.result;else{if(!v)return t.tag=u,t.anchor=h,!0;cd(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!v)return t.tag=u,t.anchor=h,!0;cd(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(m&&(fd(t,d,p,f,g,null,a,s,l),f=g=y=null),v=!0,m=!0,i=!0):m?(m=!1,i=!0):cd(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,c=r;if((t.line===o||t.lineIndent>e)&&(m&&(a=t.line,s=t.lineStart,l=t.position),_d(t,e,zh,!0,i)&&(m?g=t.result:y=t.result),m||(fd(t,d,p,f,g,y,a,s,l),f=g=y=null),yd(t,!0,-1),c=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&0!==c)cd(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return m&&fd(t,d,p,f,g,null,a,s,l),v&&(t.tag=u,t.anchor=h,t.kind="mapping",t.result=d),v}(t,p,d))||function(t,e){var n,r,i,o,a,s,l,c,u,h,d,p,f=!0,g=t.tag,y=t.anchor,m=Object.create(null);if(91===(p=t.input.charCodeAt(t.position)))a=93,c=!1,o=[];else{if(123!==p)return!1;a=125,c=!0,o={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(++t.position);0!==p;){if(yd(t,!0,e),(p=t.input.charCodeAt(t.position))===a)return t.position++,t.tag=g,t.anchor=y,t.kind=c?"mapping":"sequence",t.result=o,!0;f?44===p&&cd(t,"expected the node content, but found ','"):cd(t,"missed comma between flow collection entries"),d=null,s=l=!1,63===p&&Zh(t.input.charCodeAt(t.position+1))&&(s=l=!0,t.position++,yd(t,!0,e)),n=t.line,r=t.lineStart,i=t.position,_d(t,e,Mh,!1,!0),h=t.tag,u=t.result,yd(t,!0,e),p=t.input.charCodeAt(t.position),(l||t.line===n)&&58===p&&(s=!0,p=t.input.charCodeAt(++t.position),yd(t,!0,e),_d(t,e,Mh,!1,!0),d=t.result),c?fd(t,o,m,h,u,d,n,r,i):s?o.push(fd(t,null,m,h,u,d,n,r,i)):o.push(u),yd(t,!0,e),44===(p=t.input.charCodeAt(t.position))?(f=!0,p=t.input.charCodeAt(++t.position)):f=!1}cd(t,"unexpected end of the stream within a flow collection")}(t,d)?y=!0:(a&&function(t,e){var n,r,i,o,a=qh,s=!1,l=!1,c=e,u=0,h=!1;if(124===(o=t.input.charCodeAt(t.position)))r=!1;else{if(62!==o)return!1;r=!0}for(t.kind="scalar",t.result="";0!==o;)if(43===(o=t.input.charCodeAt(++t.position))||45===o)qh===a?a=43===o?Gh:jh:cd(t,"repeat of a chomping mode identifier");else{if(!((i=ed(o))>=0))break;0===i?cd(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?cd(t,"repeat of an indentation width identifier"):(c=e+i-1,l=!0)}if(Kh(o)){do{o=t.input.charCodeAt(++t.position)}while(Kh(o));if(35===o)do{o=t.input.charCodeAt(++t.position)}while(!Xh(o)&&0!==o)}for(;0!==o;){for(gd(t),t.lineIndent=0,o=t.input.charCodeAt(t.position);(!l||t.lineIndent<c)&&32===o;)t.lineIndent++,o=t.input.charCodeAt(++t.position);if(!l&&t.lineIndent>c&&(c=t.lineIndent),Xh(o))u++;else{if(t.lineIndent<c){a===Gh?t.result+=Hu.repeat("\n",s?1+u:u):a===qh&&s&&(t.result+="\n");break}for(r?Kh(o)?(h=!0,t.result+=Hu.repeat("\n",s?1+u:u)):h?(h=!1,t.result+=Hu.repeat("\n",u+1)):0===u?s&&(t.result+=" "):t.result+=Hu.repeat("\n",u):t.result+=Hu.repeat("\n",s?1+u:u),s=!0,l=!0,u=0,n=t.position;!Xh(o)&&0!==o;)o=t.input.charCodeAt(++t.position);dd(t,n,t.position,!1)}}return!0}(t,d)||function(t,e){var n,r,i;if(39!==(n=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;0!==(n=t.input.charCodeAt(t.position));)if(39===n){if(dd(t,r,t.position,!0),39!==(n=t.input.charCodeAt(++t.position)))return!0;r=t.position,t.position++,i=t.position}else Xh(n)?(dd(t,r,i,!0),vd(t,yd(t,!1,e)),r=i=t.position):t.position===t.lineStart&&md(t)?cd(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);cd(t,"unexpected end of the stream within a single quoted scalar")}(t,d)||function(t,e){var n,r,i,o,a,s;if(34!==(s=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;0!==(s=t.input.charCodeAt(t.position));){if(34===s)return dd(t,n,t.position,!0),t.position++,!0;if(92===s){if(dd(t,n,t.position,!0),Xh(s=t.input.charCodeAt(++t.position)))yd(t,!1,e);else if(s<256&&id[s])t.result+=od[s],t.position++;else if((a=td(s))>0){for(i=a,o=0;i>0;i--)(a=Jh(s=t.input.charCodeAt(++t.position)))>=0?o=(o<<4)+a:cd(t,"expected hexadecimal character");t.result+=rd(o),t.position++}else cd(t,"unknown escape sequence");n=r=t.position}else Xh(s)?(dd(t,n,r,!0),vd(t,yd(t,!1,e)),n=r=t.position):t.position===t.lineStart&&md(t)?cd(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}cd(t,"unexpected end of the stream within a double quoted scalar")}(t,d)?y=!0:function(t){var e,n,r;if(42!==(r=t.input.charCodeAt(t.position)))return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!Zh(r)&&!Qh(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&cd(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),Oh.call(t.anchorMap,n)||cd(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],yd(t,!0,-1),!0}(t)?(y=!0,(null!==t.tag||null!==t.anchor)&&cd(t,"alias node should not have any properties")):function(t,e,n){var r,i,o,a,s,l,c,u,h=t.kind,d=t.result;if(Zh(u=t.input.charCodeAt(t.position))||Qh(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u||(63===u||45===u)&&(Zh(r=t.input.charCodeAt(t.position+1))||n&&Qh(r)))return!1;for(t.kind="scalar",t.result="",i=o=t.position,a=!1;0!==u;){if(58===u){if(Zh(r=t.input.charCodeAt(t.position+1))||n&&Qh(r))break}else if(35===u){if(Zh(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&md(t)||n&&Qh(u))break;if(Xh(u)){if(s=t.line,l=t.lineStart,c=t.lineIndent,yd(t,!1,-1),t.lineIndent>=e){a=!0,u=t.input.charCodeAt(t.position);continue}t.position=o,t.line=s,t.lineStart=l,t.lineIndent=c;break}}a&&(dd(t,i,o,!1),vd(t,t.line-s),i=o=t.position,a=!1),Kh(u)||(o=t.position+1),u=t.input.charCodeAt(++t.position)}return dd(t,i,o,!1),!!t.result||(t.kind=h,t.result=d,!1)}(t,d,Mh===n)&&(y=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===f&&(y=s&&bd(t,p))),null===t.tag)null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);else if("?"===t.tag){for(null!==t.result&&"scalar"!==t.kind&&cd(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),l=0,c=t.implicitTypes.length;l<c;l+=1)if((h=t.implicitTypes[l]).resolve(t.result)){t.result=h.construct(t.result),t.tag=h.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else if("!"!==t.tag){if(Oh.call(t.typeMap[t.kind||"fallback"],t.tag))h=t.typeMap[t.kind||"fallback"][t.tag];else for(h=null,l=0,c=(u=t.typeMap.multi[t.kind||"fallback"]).length;l<c;l+=1)if(t.tag.slice(0,u[l].tag.length)===u[l].tag){h=u[l];break}h||cd(t,"unknown tag !<"+t.tag+">"),null!==t.result&&h.kind!==t.kind&&cd(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+h.kind+'", not "'+t.kind+'"'),h.resolve(t.result,t.tag)?(t.result=h.construct(t.result,t.tag),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):cd(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||y}function wd(t){var e,n,r,i,o=t.position,a=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);0!==(i=t.input.charCodeAt(t.position))&&(yd(t,!0,-1),i=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==i));){for(a=!0,i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!Zh(i);)i=t.input.charCodeAt(++t.position);for(r=[],(n=t.input.slice(e,t.position)).length<1&&cd(t,"directive name must not be less than one character in length");0!==i;){for(;Kh(i);)i=t.input.charCodeAt(++t.position);if(35===i){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&!Xh(i));break}if(Xh(i))break;for(e=t.position;0!==i&&!Zh(i);)i=t.input.charCodeAt(++t.position);r.push(t.input.slice(e,t.position))}0!==i&&gd(t),Oh.call(hd,n)?hd[n](t,n,r):ud(t,'unknown document directive "'+n+'"')}yd(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,yd(t,!0,-1)):a&&cd(t,"directives end mark is expected"),_d(t,t.lineIndent-1,zh,!1,!0),yd(t,!0,-1),t.checkLineBreaks&&Yh.test(t.input.slice(o,t.position))&&ud(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&md(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,yd(t,!0,-1)):t.position<t.length-1&&cd(t,"end of the stream or a document separator is expected")}function kd(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var n=new sd(t,e),r=t.indexOf("\0");for(-1!==r&&(n.position=r,cd(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)wd(n);return n.documents}var Td=function(t,e,n){null!==e&&"object"==typeof e&&typeof n>"u"&&(n=e,e=null);var r=kd(t,n);if("function"!=typeof e)return r;for(var i=0,o=r.length;i<o;i+=1)e(r[i])},Ed=function(t,e){var n=kd(t,e);if(0!==n.length){if(1===n.length)return n[0];throw new Ku("expected a single document in the stream, but found more")}},Sd=bh,Ad={loadAll:Td,load:Ed}.load;const Ld=t=>t.replace(/\r\n?/g,"\n").replace(/<(\w+)([^>]*)>/g,((t,e,n)=>"<"+e+n.replace(/="([^"]*)"/g,"='$1'")+">")),Dd=t=>{const{text:e,metadata:n}=function(t){const e=t.match(no);if(!e)return{text:t,metadata:{}};let n=Ad(e[1],{schema:Sd})??{};n="object"!=typeof n||Array.isArray(n)?{}:n;const r={};return n.displayMode&&(r.displayMode=n.displayMode.toString()),n.title&&(r.title=n.title.toString()),n.config&&(r.config=n.config),{text:t.slice(e[0].length),metadata:r}}(t),{displayMode:r,title:i,config:o={}}=n;return r&&(o.gantt||(o.gantt={}),o.gantt.displayMode=r),{title:i,config:o,text:e}},Bd=t=>{const e=zs.detectInit(t)??{},n=zs.detectDirective(t,"wrap");return Array.isArray(n)?e.wrap=n.some((({type:t})=>{})):"wrap"===(null==n?void 0:n.type)&&(e.wrap=!0),{text:Ts(t),directive:e}};function Fd(t){const e=Ld(t),n=Dd(e),r=Bd(n.text),i=Rs(n.config,r.directive);return{code:t=qu(r.text),title:n.title,config:i}}const Nd=["foreignobject"],Id=["dominant-baseline"];function Od(t){const e=Fd(t);return Ol(),Il(e.config??{}),e}const Md=(t,e,n=[])=>`\n.${t} ${e} { ${n.join(" !important; ")} !important; }`,Pd=(t,e,n,r)=>{const i=((t,e={})=>{var n;let r="";if(void 0!==t.themeCSS&&(r+=`\n${t.themeCSS}`),void 0!==t.fontFamily&&(r+=`\n:root { --mermaid-font-family: ${t.fontFamily}}`),void 0!==t.altFontFamily&&(r+=`\n:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),!Ru(e)){const i=t.htmlLabels||(null==(n=t.flowchart)?void 0:n.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const t in e){const n=e[t];Ru(n.styles)||i.forEach((t=>{r+=Md(n.id,t,n.styles)})),Ru(n.textStyles)||(r+=Md(n.id,"tspan",n.textStyles))}}return r})(t,n);return _l(ml(`${r}{${Ic(e,i,t.themeVariables)}}`),wl)},Rd=(t,e,n,r,i)=>{const o=t.append("div");o.attr("id",n),r&&o.attr("style",r);const a=o.append("svg").attr("id",e).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg");return i&&a.attr("xmlns:xlink",i),a.append("g"),t};function zd(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const qd=(t,e={})=>{const{code:n}=Fd(t);return mu(n,e)};const jd=Object.freeze({render:async function(t,e,n){var r,i,o,a,l,c;gu();const u=Od(e);e=u.code;const h=Fl();s.debug(h),e.length>((null==h?void 0:h.maxTextSize)??5e4)&&(e="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");const d="#"+t,p="i"+t,f="#"+p,g="d"+t,y="#"+g;let m=At("body");const v="sandbox"===h.securityLevel,b="loose"===h.securityLevel,x=h.fontFamily;if(void 0!==n){if(n&&(n.innerHTML=""),v){const t=zd(At(n),p);m=At(t.nodes()[0].contentDocument.body),m.node().style.margin=0}else m=At(n);Rd(m,t,g,`font-family: ${x}`,"http://www.w3.org/1999/xlink")}else{if(((t,e,n,r)=>{var i,o,a;null==(i=t.getElementById(e))||i.remove(),null==(o=t.getElementById(n))||o.remove(),null==(a=t.getElementById(r))||a.remove()})(document,t,g,p),v){const t=zd(At("body"),p);m=At(t.nodes()[0].contentDocument.body),m.node().style.margin=0}else m=At("body");Rd(m,t,g)}let C,_;try{C=await qd(e,{title:u.title})}catch(t){C=new yu("error"),_=t}const w=m.select(y).node(),k=C.type,T=w.firstChild,E=T.firstChild,S=null==(i=(r=C.renderer).getClasses)?void 0:i.call(r,e,C),A=Pd(h,k,S,d),L=document.createElement("style");L.innerHTML=A,T.insertBefore(L,E);try{await C.renderer.draw(e,t,kl,C)}catch(n){throw Zc.draw(e,t,kl),n}(function(t,e,n,r){(function(t,e){t.attr("role",zu),""!==e&&t.attr("aria-roledescription",e)})(e,t),function(t,e,n,r){if(void 0!==t.insert){if(n){const e=`chart-desc-${r}`;t.attr("aria-describedby",e),t.insert("desc",":first-child").attr("id",e).text(n)}if(e){const n=`chart-title-${r}`;t.attr("aria-labelledby",n),t.insert("title",":first-child").attr("id",n).text(e)}}}(e,n,r,e.attr("id"))})(k,m.select(`${y} svg`),null==(a=(o=C.db).getAccTitle)?void 0:a.call(o),null==(c=(l=C.db).getAccDescription)?void 0:c.call(l)),m.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let D=m.select(y).node().innerHTML;if(s.debug("config.arrowMarkerAbsolute",h.arrowMarkerAbsolute),D=((t="",e,n)=>{let r=t;return!n&&!e&&(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=qs(r),r=r.replace(/<br>/g,"<br/>"),r})(D,v,hi(h.arrowMarkerAbsolute)),v){D=((t="",e)=>{var n,r;return`<iframe style="width:100%;height:${null!=(r=null==(n=null==e?void 0:e.viewBox)?void 0:n.baseVal)&&r.height?e.viewBox.baseVal.height+"px":"100%"};border:0;margin:0;" src="data:text/html;base64,${btoa('<body style="margin:0">'+t+"</body>")}" sandbox="allow-top-navigation-by-user-activation allow-popups">\n  The "iframe" tag is not supported by your browser.\n</iframe>`})(D,m.select(y+" svg").node())}else b||(D=ri.sanitize(D,{ADD_TAGS:Nd,ADD_ATTR:Id}));if(vu.forEach((t=>{t()})),vu=[],_)throw _;const B=At(v?f:y).node();return B&&"remove"in B&&B.remove(),{svg:D,bindFunctions:C.db.bindFunctions}},parse:async function(t,e){gu(),t=Od(t).code;try{await qd(t)}catch(t){if(null!=e&&e.suppressErrors)return!1;throw t}return!0},getDiagramFromText:qd,initialize:function(t={}){var e;null!=t&&t.fontFamily&&!(null!=(e=t.themeVariables)&&e.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),(t=>{El=ho({},t)})(t),null!=t&&t.theme&&t.theme in Vi?t.themeVariables=Vi[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Vi.default.getThemeVariables(t.themeVariables));const n="object"==typeof t?(t=>(Sl=ho({},Tl),Sl=ho(Sl,t),t.theme&&Vi[t.theme]&&(Sl.themeVariables=Vi[t.theme].getThemeVariables(t.themeVariables)),Dl(Sl,Al),Sl))(t):Bl();l(n.logLevel),gu()},getConfig:Fl,setConfig:t=>(Rl(t),ho(Ll,t),Fl()),getSiteConfig:Bl,updateSiteConfig:t=>(Sl=ho(Sl,t),Dl(Sl,Al),Sl),reset:()=>{Ol()},globalReset:()=>{Ol(Tl)},defaultConfig:Tl});l(Fl().logLevel),Ol(Fl());const Gd=(t,e,n)=>{s.warn(t),Ms(t)?(n&&n(t.str,t.hash),e.push({...t,message:t.str,error:t})):(n&&n(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},$d=async function(t={querySelector:".mermaid"}){try{await Yd(t)}catch(e){if(Ms(e)&&s.error(e.str),Zd.parseError&&Zd.parseError(e),!t.suppressErrors)throw s.error("Use the suppressErrors option to suppress these errors"),e}},Yd=async function({postRenderCallback:t,querySelector:n,nodes:r}={querySelector:".mermaid"}){const i=jd.getConfig();let o;if(s.debug((t?"":"No ")+"Callback function found"),r)o=r;else{if(!n)throw new Error("Nodes and querySelector are both undefined");o=document.querySelectorAll(n)}s.debug(`Found ${o.length} diagrams`),void 0!==(null==i?void 0:i.startOnLoad)&&(s.debug("Start On Load: "+(null==i?void 0:i.startOnLoad)),jd.updateSiteConfig({startOnLoad:null==i?void 0:i.startOnLoad}));const a=new zs.InitIDGenerator(i.deterministicIds,i.deterministicIDSeed);let l;const c=[];for(const n of Array.from(o)){
/*! Check if previously processed */
if(s.info("Rendering diagram: "+n.id),n.getAttribute("data-processed"))continue;n.setAttribute("data-processed","true");const r=`mermaid-${a.next()}`;l=n.innerHTML,l=e(zs.entityDecode(l)).trim().replace(/<br\s*\/?>/gi,"<br/>");const i=zs.detectInit(l);i&&s.debug("Detected early reinit: ",i);try{const{svg:e,bindFunctions:i}=await Kd(r,l,n);n.innerHTML=e,t&&await t(r),i&&i(n)}catch(t){Gd(t,c,Zd.parseError)}}if(c.length>0)throw c[0]},Wd=function(t){jd.initialize(t)},Ud=function(){if(Zd.startOnLoad){const{startOnLoad:t}=jd.getConfig();t&&Zd.run().catch((t=>s.error("Mermaid failed to initialize",t)))}};typeof document<"u"&&
/*!
   * Wait for document loaded before starting the execution
   */
window.addEventListener("load",Ud,!1);const Hd=[];let Vd=!1;const Xd=async()=>{if(!Vd){for(Vd=!0;Hd.length>0;){const t=Hd.shift();if(t)try{await t()}catch(t){s.error("Error executing queue",t)}}Vd=!1}},Kd=(t,e,n)=>new Promise(((r,i)=>{Hd.push((()=>new Promise(((o,a)=>{jd.render(t,e,n).then((t=>{o(t),r(t)}),(t=>{var e;s.error("Error parsing",t),null==(e=Zd.parseError)||e.call(Zd,t),a(t),i(t)}))})))),Xd().catch(i)})),Zd={startOnLoad:!0,mermaidAPI:jd,parse:async(t,e)=>new Promise(((n,r)=>{Hd.push((()=>new Promise(((i,o)=>{jd.parse(t,e).then((t=>{i(t),n(t)}),(t=>{var e;s.error("Error parsing",t),null==(e=Zd.parseError)||e.call(Zd,t),o(t),r(t)}))})))),Xd().catch(r)})),render:Kd,init:async function(t,e,n){s.warn("mermaid.init is deprecated. Please use run instead."),t&&Wd(t);const r={postRenderCallback:n,querySelector:".mermaid"};"string"==typeof e?r.querySelector=e:e&&(e instanceof HTMLElement?r.nodes=[e]:r.nodes=e),await $d(r)},run:$d,registerExternalDiagrams:async(t,{lazyLoad:e=!0}={})=>{lo(...t),!1===e&&await(async()=>{s.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(ao).map((async([t,{detector:e,loader:n}])=>{if(n)try{Hc(t)}catch{try{const{diagram:t,id:r}=await n();Uc(r,t,e)}catch(e){throw s.error(`Failed to load external diagram with key ${t}. Removing from detectors.`),delete ao[t],e}}})))).filter((t=>"rejected"===t.status));if(t.length>0){s.error(`Failed to load ${t.length} external diagrams`);for(const e of t)s.error(e);throw new Error(`Failed to load ${t.length} external diagrams`)}})()},initialize:Wd,parseError:void 0,contentLoaded:Ud,setParseErrorHandler:function(t){Zd.parseError=t},detectType:so},Qd={};function Jd(t,e,n){if(function(t){return!(!t||"object"!=typeof t)}(t)){if("value"in t)return"html"!==t.type||n?t.value:"";if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return tp(t.children,e,n)}return Array.isArray(t)?tp(t,e,n):""}function tp(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=Jd(t[i],e,n);return r.join("")}function ep(t,e,n,r){const i=t.length;let o,a=0;if(e=e<0?-e>i?0:i+e:e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(e,0),t.splice(...o),a+=1e4,e+=1e4}function np(t,e){return t.length>0?(ep(t,t.length,0,e),t):e}const rp={}.hasOwnProperty;function ip(t,e){let n;for(n in e){const r=(rp.call(t,n)?t[n]:void 0)||(t[n]={}),i=e[n];let o;if(i)for(o in i){rp.call(r,o)||(r[o]=[]);const t=i[o];op(r[o],Array.isArray(t)?t:t?[t]:[])}}}function op(t,e){let n=-1;const r=[];for(;++n<e.length;)("after"===e[n].add?t:r).push(e[n]);ep(t,0,0,r)}const ap=vp(/[A-Za-z]/),sp=vp(/[\dA-Za-z]/),lp=vp(/[#-'*+\--9=?A-Z^-~]/);function cp(t){return null!==t&&(t<32||127===t)}const up=vp(/\d/),hp=vp(/[\dA-Fa-f]/),dp=vp(/[!-/:-@[-`{-~]/);function pp(t){return null!==t&&t<-2}function fp(t){return null!==t&&(t<0||32===t)}function gp(t){return-2===t||-1===t||32===t}const yp=vp(/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/),mp=vp(/\s/);function vp(t){return function(e){return null!==e&&t.test(String.fromCharCode(e))}}function bp(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return function(r){return gp(r)?(t.enter(n),a(r)):e(r)};function a(r){return gp(r)&&o++<i?(t.consume(r),a):(t.exit(n),e(r))}}const xp={tokenize:function(t){const e=t.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void t.consume(n);return t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),bp(t,e,"linePrefix")}),(function(e){return t.enter("paragraph"),r(e)}));let n;return e;function r(e){const r=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,i(e)}function i(e){return null===e?(t.exit("chunkText"),t.exit("paragraph"),void t.consume(e)):pp(e)?(t.consume(e),t.exit("chunkText"),r):(t.consume(e),i)}}};const Cp={tokenize:function(t){const e=this,n=[];let r,i,o,a=0;return s;function s(r){if(a<n.length){const i=n[a];return e.containerState=i[1],t.attempt(i[0].continuation,l,c)(r)}return c(r)}function l(t){if(a++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&v();const n=e.events.length;let i,o=n;for(;o--;)if("exit"===e.events[o][0]&&"chunkFlow"===e.events[o][1].type){i=e.events[o][1].end;break}m(a);let s=n;for(;s<e.events.length;)e.events[s][1].end=Object.assign({},i),s++;return ep(e.events,o+1,0,e.events.slice(n)),e.events.length=s,c(t)}return s(t)}function c(i){if(a===n.length){if(!r)return d(i);if(r.currentConstruct&&r.currentConstruct.concrete)return f(i);e.interrupt=!(!r.currentConstruct||r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(_p,u,h)(i)}function u(t){return r&&v(),m(a),d(t)}function h(t){return e.parser.lazy[e.now().line]=a!==n.length,o=e.now().offset,f(t)}function d(n){return e.containerState={},t.attempt(_p,p,f)(n)}function p(t){return a++,n.push([e.currentConstruct,e.containerState]),d(t)}function f(n){return null===n?(r&&v(),m(0),void t.consume(n)):(r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:r}),g(n))}function g(n){return null===n?(y(t.exit("chunkFlow"),!0),m(0),void t.consume(n)):pp(n)?(t.consume(n),y(t.exit("chunkFlow")),a=0,e.interrupt=void 0,s):(t.consume(n),g)}function y(t,n){const s=e.sliceStream(t);if(n&&s.push(null),t.previous=i,i&&(i.next=t),i=t,r.defineSkip(t.start),r.write(s),e.parser.lazy[t.start.line]){let t=r.events.length;for(;t--;)if(r.events[t][1].start.offset<o&&(!r.events[t][1].end||r.events[t][1].end.offset>o))return;const n=e.events.length;let i,s,l=n;for(;l--;)if("exit"===e.events[l][0]&&"chunkFlow"===e.events[l][1].type){if(i){s=e.events[l][1].end;break}i=!0}for(m(a),t=n;t<e.events.length;)e.events[t][1].end=Object.assign({},s),t++;ep(e.events,l+1,0,e.events.slice(n)),e.events.length=t}}function m(r){let i=n.length;for(;i-- >r;){const r=n[i];e.containerState=r[1],r[0].exit.call(e,t)}n.length=r}function v(){r.write([null]),i=void 0,r=void 0,e.containerState._closeFlow=void 0}}},_p={tokenize:function(t,e,n){return bp(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function wp(t){return null===t||fp(t)||mp(t)?1:yp(t)?2:void 0}function kp(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const o=t[i].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}const Tp={name:"attention",tokenize:function(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=wp(r);let o;return function(e){return o=e,t.enter("attentionSequence"),a(e)};function a(s){if(s===o)return t.consume(s),a;const l=t.exit("attentionSequence"),c=wp(s),u=!c||2===c&&i||n.includes(s),h=!i||2===i&&c||n.includes(r);return l._open=!!(42===o?u:u&&(i||!h)),l._close=!!(42===o?h:h&&(c||!u)),e(s)}},resolveAll:function(t,e){let n,r,i,o,a,s,l,c,u=-1;for(;++u<t.length;)if("enter"===t[u][0]&&"attentionSequence"===t[u][1].type&&t[u][1]._close)for(n=u;n--;)if("exit"===t[n][0]&&"attentionSequence"===t[n][1].type&&t[n][1]._open&&e.sliceSerialize(t[n][1]).charCodeAt(0)===e.sliceSerialize(t[u][1]).charCodeAt(0)){if((t[n][1]._close||t[u][1]._open)&&(t[u][1].end.offset-t[u][1].start.offset)%3&&!((t[n][1].end.offset-t[n][1].start.offset+t[u][1].end.offset-t[u][1].start.offset)%3))continue;s=t[n][1].end.offset-t[n][1].start.offset>1&&t[u][1].end.offset-t[u][1].start.offset>1?2:1;const h=Object.assign({},t[n][1].end),d=Object.assign({},t[u][1].start);Ep(h,-s),Ep(d,s),o={type:s>1?"strongSequence":"emphasisSequence",start:h,end:Object.assign({},t[n][1].end)},a={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},t[u][1].start),end:d},i={type:s>1?"strongText":"emphasisText",start:Object.assign({},t[n][1].end),end:Object.assign({},t[u][1].start)},r={type:s>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},t[n][1].end=Object.assign({},o.start),t[u][1].start=Object.assign({},a.end),l=[],t[n][1].end.offset-t[n][1].start.offset&&(l=np(l,[["enter",t[n][1],e],["exit",t[n][1],e]])),l=np(l,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",i,e]]),l=np(l,kp(e.parser.constructs.insideSpan.null,t.slice(n+1,u),e)),l=np(l,[["exit",i,e],["enter",a,e],["exit",a,e],["exit",r,e]]),t[u][1].end.offset-t[u][1].start.offset?(c=2,l=np(l,[["enter",t[u][1],e],["exit",t[u][1],e]])):c=0,ep(t,n-1,u-n+3,l),u=n+l.length-c-2;break}for(u=-1;++u<t.length;)"attentionSequence"===t[u][1].type&&(t[u][1].type="data");return t}};function Ep(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Sp={name:"autolink",tokenize:function(t,e,n){let r=0;return function(e){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(e),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),i};function i(e){return ap(e)?(t.consume(e),o):l(e)}function o(t){return 43===t||45===t||46===t||sp(t)?(r=1,a(t)):l(t)}function a(e){return 58===e?(t.consume(e),r=0,s):(43===e||45===e||46===e||sp(e))&&r++<32?(t.consume(e),a):(r=0,l(e))}function s(r){return 62===r?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(r),t.exit("autolinkMarker"),t.exit("autolink"),e):null===r||32===r||60===r||cp(r)?n(r):(t.consume(r),s)}function l(e){return 64===e?(t.consume(e),c):lp(e)?(t.consume(e),l):n(e)}function c(t){return sp(t)?u(t):n(t)}function u(n){return 46===n?(t.consume(n),r=0,c):62===n?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(n),t.exit("autolinkMarker"),t.exit("autolink"),e):h(n)}function h(e){if((45===e||sp(e))&&r++<63){const n=45===e?h:u;return t.consume(e),n}return n(e)}}};const Ap={tokenize:function(t,e,n){return function(e){return gp(e)?bp(t,r,"linePrefix")(e):r(e)};function r(t){return null===t||pp(t)?e(t):n(t)}},partial:!0};const Lp={name:"blockQuote",tokenize:function(t,e,n){const r=this;return function(e){if(62===e){const n=r.containerState;return n.open||(t.enter("blockQuote",{_container:!0}),n.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(e),t.exit("blockQuoteMarker"),i}return n(e)};function i(n){return gp(n)?(t.enter("blockQuotePrefixWhitespace"),t.consume(n),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(n))}},continuation:{tokenize:function(t,e,n){const r=this;return function(e){return gp(e)?bp(t,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(e):i(e)};function i(r){return t.attempt(Lp,e,n)(r)}}},exit:function(t){t.exit("blockQuote")}};const Dp={name:"characterEscape",tokenize:function(t,e,n){return function(e){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(e),t.exit("escapeMarker"),r};function r(r){return dp(r)?(t.enter("characterEscapeValue"),t.consume(r),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(r)}}};const Bp=document.createElement("i");function Fp(t){const e="&"+t+";";Bp.innerHTML=e;const n=Bp.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===t)&&n!==e&&n}const Np={name:"characterReference",tokenize:function(t,e,n){const r=this;let i,o,a=0;return function(e){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(e),t.exit("characterReferenceMarker"),s};function s(e){return 35===e?(t.enter("characterReferenceMarkerNumeric"),t.consume(e),t.exit("characterReferenceMarkerNumeric"),l):(t.enter("characterReferenceValue"),i=31,o=sp,c(e))}function l(e){return 88===e||120===e?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(e),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),i=6,o=hp,c):(t.enter("characterReferenceValue"),i=7,o=up,c(e))}function c(s){if(59===s&&a){const i=t.exit("characterReferenceValue");return o!==sp||Fp(r.sliceSerialize(i))?(t.enter("characterReferenceMarker"),t.consume(s),t.exit("characterReferenceMarker"),t.exit("characterReference"),e):n(s)}return o(s)&&a++<i?(t.consume(s),c):n(s)}}};const Ip={tokenize:function(t,e,n){const r=this;return function(e){return null===e?n(e):(t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),i)};function i(t){return r.parser.lazy[r.now().line]?n(t):e(t)}},partial:!0},Op={name:"codeFenced",tokenize:function(t,e,n){const r=this,i={tokenize:function(t,e,n){let i=0;return a;function a(e){return t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),l}function l(e){return t.enter("codeFencedFence"),gp(e)?bp(t,c,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(e):c(e)}function c(e){return e===o?(t.enter("codeFencedFenceSequence"),u(e)):n(e)}function u(e){return e===o?(i++,t.consume(e),u):i>=s?(t.exit("codeFencedFenceSequence"),gp(e)?bp(t,h,"whitespace")(e):h(e)):n(e)}function h(r){return null===r||pp(r)?(t.exit("codeFencedFence"),e(r)):n(r)}},partial:!0};let o,a=0,s=0;return function(e){return function(e){const n=r.events[r.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,o=e,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),l(e)}(e)};function l(e){return e===o?(s++,t.consume(e),l):s<3?n(e):(t.exit("codeFencedFenceSequence"),gp(e)?bp(t,c,"whitespace")(e):c(e))}function c(n){return null===n||pp(n)?(t.exit("codeFencedFence"),r.interrupt?e(n):t.check(Ip,p,v)(n)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),u(n))}function u(e){return null===e||pp(e)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),c(e)):gp(e)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),bp(t,h,"whitespace")(e)):96===e&&e===o?n(e):(t.consume(e),u)}function h(e){return null===e||pp(e)?c(e):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),d(e))}function d(e){return null===e||pp(e)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),c(e)):96===e&&e===o?n(e):(t.consume(e),d)}function p(e){return t.attempt(i,v,f)(e)}function f(e){return t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),g}function g(e){return a>0&&gp(e)?bp(t,y,"linePrefix",a+1)(e):y(e)}function y(e){return null===e||pp(e)?t.check(Ip,p,v)(e):(t.enter("codeFlowValue"),m(e))}function m(e){return null===e||pp(e)?(t.exit("codeFlowValue"),y(e)):(t.consume(e),m)}function v(n){return t.exit("codeFenced"),e(n)}},concrete:!0};const Mp={name:"codeIndented",tokenize:function(t,e,n){const r=this;return function(e){return t.enter("codeIndented"),bp(t,i,"linePrefix",5)(e)};function i(t){const e=r.events[r.events.length-1];return e&&"linePrefix"===e[1].type&&e[2].sliceSerialize(e[1],!0).length>=4?o(t):n(t)}function o(e){return null===e?s(e):pp(e)?t.attempt(Pp,o,s)(e):(t.enter("codeFlowValue"),a(e))}function a(e){return null===e||pp(e)?(t.exit("codeFlowValue"),o(e)):(t.consume(e),a)}function s(n){return t.exit("codeIndented"),e(n)}}},Pp={tokenize:function(t,e,n){const r=this;return i;function i(e){return r.parser.lazy[r.now().line]?n(e):pp(e)?(t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),i):bp(t,o,"linePrefix",5)(e)}function o(t){const o=r.events[r.events.length-1];return o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?e(t):pp(t)?i(t):n(t)}},partial:!0};const Rp={name:"codeText",tokenize:function(t,e,n){let r,i,o=0;return function(e){return t.enter("codeText"),t.enter("codeTextSequence"),a(e)};function a(e){return 96===e?(t.consume(e),o++,a):(t.exit("codeTextSequence"),s(e))}function s(e){return null===e?n(e):32===e?(t.enter("space"),t.consume(e),t.exit("space"),s):96===e?(i=t.enter("codeTextSequence"),r=0,c(e)):pp(e)?(t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),s):(t.enter("codeTextData"),l(e))}function l(e){return null===e||32===e||96===e||pp(e)?(t.exit("codeTextData"),s(e)):(t.consume(e),l)}function c(n){return 96===n?(t.consume(n),r++,c):r===o?(t.exit("codeTextSequence"),t.exit("codeText"),e(n)):(i.type="codeTextData",l(n))}},resolve:function(t){let e,n,r=t.length-4,i=3;if(!("lineEnding"!==t[i][1].type&&"space"!==t[i][1].type||"lineEnding"!==t[r][1].type&&"space"!==t[r][1].type))for(e=i;++e<r;)if("codeTextData"===t[e][1].type){t[i][1].type="codeTextPadding",t[r][1].type="codeTextPadding",i+=2,r-=2;break}for(e=i-1,r++;++e<=r;)void 0===n?e!==r&&"lineEnding"!==t[e][1].type&&(n=e):(e===r||"lineEnding"===t[e][1].type)&&(t[n][1].type="codeTextData",e!==n+2&&(t[n][1].end=t[e-1][1].end,t.splice(n+2,e-n-2),r-=e-n-2,e=n+2),n=void 0);return t},previous:function(t){return 96!==t||"characterEscape"===this.events[this.events.length-1][1].type}};function zp(t){const e={};let n,r,i,o,a,s,l,c=-1;for(;++c<t.length;){for(;c in e;)c=e[c];if(n=t[c],c&&"chunkFlow"===n[1].type&&"listItemPrefix"===t[c-1][1].type&&(s=n[1]._tokenizer.events,i=0,i<s.length&&"lineEndingBlank"===s[i][1].type&&(i+=2),i<s.length&&"content"===s[i][1].type))for(;++i<s.length&&"content"!==s[i][1].type;)"chunkText"===s[i][1].type&&(s[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(e,qp(t,c)),c=e[c],l=!0);else if(n[1]._container){for(i=c,r=void 0;i--&&(o=t[i],"lineEnding"===o[1].type||"lineEndingBlank"===o[1].type);)"enter"===o[0]&&(r&&(t[r][1].type="lineEndingBlank"),o[1].type="lineEnding",r=i);r&&(n[1].end=Object.assign({},t[r][1].start),a=t.slice(r,c),a.unshift(n),ep(t,r,c-r+1,a))}}return!l}function qp(t,e){const n=t[e][1],r=t[e][2];let i=e-1;const o=[],a=n._tokenizer||r.parser[n.contentType](n.start),s=a.events,l=[],c={};let u,h,d=-1,p=n,f=0,g=0;const y=[g];for(;p;){for(;t[++i][1]!==p;);o.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),h&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++d<s.length;)"exit"===s[d][0]&&"enter"===s[d-1][0]&&s[d][1].type===s[d-1][1].type&&s[d][1].start.line!==s[d][1].end.line&&(g=d+1,y.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):y.pop(),d=y.length;d--;){const e=s.slice(y[d],y[d+1]),n=o.pop();l.unshift([n,n+e.length-1]),ep(t,n,2,e)}for(d=-1;++d<l.length;)c[f+l[d][0]]=f+l[d][1],f+=l[d][1]-l[d][0]-1;return c}const jp={tokenize:function(t,e){let n;return function(e){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(e)};function r(e){return null===e?i(e):pp(e)?t.check(Gp,o,i)(e):(t.consume(e),r)}function i(n){return t.exit("chunkContent"),t.exit("content"),e(n)}function o(e){return t.consume(e),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}},resolve:function(t){return zp(t),t}},Gp={tokenize:function(t,e,n){const r=this;return function(e){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),bp(t,i,"linePrefix")};function i(i){if(null===i||pp(i))return n(i);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?e(i):t.interrupt(r.parser.constructs.flow,n,e)(i)}},partial:!0};function $p(t,e,n,r,i,o,a,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(e){return 60===e?(t.enter(r),t.enter(i),t.enter(o),t.consume(e),t.exit(o),h):null===e||32===e||41===e||cp(e)?n(e):(t.enter(r),t.enter(a),t.enter(s),t.enter("chunkString",{contentType:"string"}),f(e))};function h(n){return 62===n?(t.enter(o),t.consume(n),t.exit(o),t.exit(i),t.exit(r),e):(t.enter(s),t.enter("chunkString",{contentType:"string"}),d(n))}function d(e){return 62===e?(t.exit("chunkString"),t.exit(s),h(e)):null===e||60===e||pp(e)?n(e):(t.consume(e),92===e?p:d)}function p(e){return 60===e||62===e||92===e?(t.consume(e),d):d(e)}function f(i){return u||null!==i&&41!==i&&!fp(i)?u<c&&40===i?(t.consume(i),u++,f):41===i?(t.consume(i),u--,f):null===i||32===i||40===i||cp(i)?n(i):(t.consume(i),92===i?g:f):(t.exit("chunkString"),t.exit(s),t.exit(a),t.exit(r),e(i))}function g(e){return 40===e||41===e||92===e?(t.consume(e),f):f(e)}}function Yp(t,e,n,r,i,o){const a=this;let s,l=0;return function(e){return t.enter(r),t.enter(i),t.consume(e),t.exit(i),t.enter(o),c};function c(h){return l>999||null===h||91===h||93===h&&!s||94===h&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(h):93===h?(t.exit(o),t.enter(i),t.consume(h),t.exit(i),t.exit(r),e):pp(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),u(h))}function u(e){return null===e||91===e||93===e||pp(e)||l++>999?(t.exit("chunkString"),c(e)):(t.consume(e),s||(s=!gp(e)),92===e?h:u)}function h(e){return 91===e||92===e||93===e?(t.consume(e),l++,u):u(e)}}function Wp(t,e,n,r,i,o){let a;return function(e){return 34===e||39===e||40===e?(t.enter(r),t.enter(i),t.consume(e),t.exit(i),a=40===e?41:e,s):n(e)};function s(n){return n===a?(t.enter(i),t.consume(n),t.exit(i),t.exit(r),e):(t.enter(o),l(n))}function l(e){return e===a?(t.exit(o),s(a)):null===e?n(e):pp(e)?(t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),bp(t,l,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(e))}function c(e){return e===a||null===e||pp(e)?(t.exit("chunkString"),l(e)):(t.consume(e),92===e?u:c)}function u(e){return e===a||92===e?(t.consume(e),c):c(e)}}function Up(t,e){let n;return function r(i){return pp(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):gp(i)?bp(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}function Hp(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Vp={name:"definition",tokenize:function(t,e,n){const r=this;let i;return function(e){return t.enter("definition"),function(e){return Yp.call(r,t,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(e)}(e)};function o(e){return i=Hp(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===e?(t.enter("definitionMarker"),t.consume(e),t.exit("definitionMarker"),a):n(e)}function a(e){return fp(e)?Up(t,s)(e):s(e)}function s(e){return $p(t,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(e)}function l(e){return t.attempt(Xp,c,c)(e)}function c(e){return gp(e)?bp(t,u,"whitespace")(e):u(e)}function u(o){return null===o||pp(o)?(t.exit("definition"),r.parser.defined.push(i),e(o)):n(o)}}},Xp={tokenize:function(t,e,n){return function(e){return fp(e)?Up(t,r)(e):n(e)};function r(e){return Wp(t,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(e)}function i(e){return gp(e)?bp(t,o,"whitespace")(e):o(e)}function o(t){return null===t||pp(t)?e(t):n(t)}},partial:!0};const Kp={name:"hardBreakEscape",tokenize:function(t,e,n){return function(e){return t.enter("hardBreakEscape"),t.consume(e),r};function r(r){return pp(r)?(t.exit("hardBreakEscape"),e(r)):n(r)}}};const Zp={name:"headingAtx",tokenize:function(t,e,n){let r=0;return function(e){return t.enter("atxHeading"),function(e){return t.enter("atxHeadingSequence"),i(e)}(e)};function i(e){return 35===e&&r++<6?(t.consume(e),i):null===e||fp(e)?(t.exit("atxHeadingSequence"),o(e)):n(e)}function o(n){return 35===n?(t.enter("atxHeadingSequence"),a(n)):null===n||pp(n)?(t.exit("atxHeading"),e(n)):gp(n)?bp(t,o,"whitespace")(n):(t.enter("atxHeadingText"),s(n))}function a(e){return 35===e?(t.consume(e),a):(t.exit("atxHeadingSequence"),o(e))}function s(e){return null===e||35===e||fp(e)?(t.exit("atxHeadingText"),o(e)):(t.consume(e),s)}},resolve:function(t,e){let n,r,i=t.length-2,o=3;return"whitespace"===t[o][1].type&&(o+=2),i-2>o&&"whitespace"===t[i][1].type&&(i-=2),"atxHeadingSequence"===t[i][1].type&&(o===i-1||i-4>o&&"whitespace"===t[i-2][1].type)&&(i-=o+1===i?2:4),i>o&&(n={type:"atxHeadingText",start:t[o][1].start,end:t[i][1].end},r={type:"chunkText",start:t[o][1].start,end:t[i][1].end,contentType:"text"},ep(t,o,i-o+1,[["enter",n,e],["enter",r,e],["exit",r,e],["exit",n,e]])),t}};const Qp=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Jp=["pre","script","style","textarea"],tf={name:"htmlFlow",tokenize:function(t,e,n){const r=this;let i,o,a,s,l;return function(e){return function(e){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(e),c}(e)};function c(s){return 33===s?(t.consume(s),u):47===s?(t.consume(s),o=!0,p):63===s?(t.consume(s),i=3,r.interrupt?e:I):ap(s)?(t.consume(s),a=String.fromCharCode(s),f):n(s)}function u(o){return 45===o?(t.consume(o),i=2,h):91===o?(t.consume(o),i=5,s=0,d):ap(o)?(t.consume(o),i=4,r.interrupt?e:I):n(o)}function h(i){return 45===i?(t.consume(i),r.interrupt?e:I):n(i)}function d(i){const o="CDATA[";return i===o.charCodeAt(s++)?(t.consume(i),6===s?r.interrupt?e:E:d):n(i)}function p(e){return ap(e)?(t.consume(e),a=String.fromCharCode(e),f):n(e)}function f(s){if(null===s||47===s||62===s||fp(s)){const l=47===s,c=a.toLowerCase();return l||o||!Jp.includes(c)?Qp.includes(a.toLowerCase())?(i=6,l?(t.consume(s),g):r.interrupt?e(s):E(s)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(s):o?y(s):m(s)):(i=1,r.interrupt?e(s):E(s))}return 45===s||sp(s)?(t.consume(s),a+=String.fromCharCode(s),f):n(s)}function g(i){return 62===i?(t.consume(i),r.interrupt?e:E):n(i)}function y(e){return gp(e)?(t.consume(e),y):k(e)}function m(e){return 47===e?(t.consume(e),k):58===e||95===e||ap(e)?(t.consume(e),v):gp(e)?(t.consume(e),m):k(e)}function v(e){return 45===e||46===e||58===e||95===e||sp(e)?(t.consume(e),v):b(e)}function b(e){return 61===e?(t.consume(e),x):gp(e)?(t.consume(e),b):m(e)}function x(e){return null===e||60===e||61===e||62===e||96===e?n(e):34===e||39===e?(t.consume(e),l=e,C):gp(e)?(t.consume(e),x):_(e)}function C(e){return e===l?(t.consume(e),l=null,w):null===e||pp(e)?n(e):(t.consume(e),C)}function _(e){return null===e||34===e||39===e||47===e||60===e||61===e||62===e||96===e||fp(e)?b(e):(t.consume(e),_)}function w(t){return 47===t||62===t||gp(t)?m(t):n(t)}function k(e){return 62===e?(t.consume(e),T):n(e)}function T(e){return null===e||pp(e)?E(e):gp(e)?(t.consume(e),T):n(e)}function E(e){return 45===e&&2===i?(t.consume(e),D):60===e&&1===i?(t.consume(e),B):62===e&&4===i?(t.consume(e),O):63===e&&3===i?(t.consume(e),I):93===e&&5===i?(t.consume(e),N):!pp(e)||6!==i&&7!==i?null===e||pp(e)?(t.exit("htmlFlowData"),S(e)):(t.consume(e),E):(t.exit("htmlFlowData"),t.check(ef,M,S)(e))}function S(e){return t.check(nf,A,M)(e)}function A(e){return t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),L}function L(e){return null===e||pp(e)?S(e):(t.enter("htmlFlowData"),E(e))}function D(e){return 45===e?(t.consume(e),I):E(e)}function B(e){return 47===e?(t.consume(e),a="",F):E(e)}function F(e){if(62===e){const n=a.toLowerCase();return Jp.includes(n)?(t.consume(e),O):E(e)}return ap(e)&&a.length<8?(t.consume(e),a+=String.fromCharCode(e),F):E(e)}function N(e){return 93===e?(t.consume(e),I):E(e)}function I(e){return 62===e?(t.consume(e),O):45===e&&2===i?(t.consume(e),I):E(e)}function O(e){return null===e||pp(e)?(t.exit("htmlFlowData"),M(e)):(t.consume(e),O)}function M(n){return t.exit("htmlFlow"),e(n)}},resolveTo:function(t){let e=t.length;for(;e--&&("enter"!==t[e][0]||"htmlFlow"!==t[e][1].type););return e>1&&"linePrefix"===t[e-2][1].type&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t},concrete:!0},ef={tokenize:function(t,e,n){return function(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(Ap,e,n)}},partial:!0},nf={tokenize:function(t,e,n){const r=this;return function(e){return pp(e)?(t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),i):n(e)};function i(t){return r.parser.lazy[r.now().line]?n(t):e(t)}},partial:!0};const rf={name:"htmlText",tokenize:function(t,e,n){const r=this;let i,o,a;return function(e){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(e),s};function s(e){return 33===e?(t.consume(e),l):47===e?(t.consume(e),x):63===e?(t.consume(e),v):ap(e)?(t.consume(e),w):n(e)}function l(e){return 45===e?(t.consume(e),c):91===e?(t.consume(e),o=0,p):ap(e)?(t.consume(e),m):n(e)}function c(e){return 45===e?(t.consume(e),d):n(e)}function u(e){return null===e?n(e):45===e?(t.consume(e),h):pp(e)?(a=u,F(e)):(t.consume(e),u)}function h(e){return 45===e?(t.consume(e),d):u(e)}function d(t){return 62===t?B(t):45===t?h(t):u(t)}function p(e){const r="CDATA[";return e===r.charCodeAt(o++)?(t.consume(e),6===o?f:p):n(e)}function f(e){return null===e?n(e):93===e?(t.consume(e),g):pp(e)?(a=f,F(e)):(t.consume(e),f)}function g(e){return 93===e?(t.consume(e),y):f(e)}function y(e){return 62===e?B(e):93===e?(t.consume(e),y):f(e)}function m(e){return null===e||62===e?B(e):pp(e)?(a=m,F(e)):(t.consume(e),m)}function v(e){return null===e?n(e):63===e?(t.consume(e),b):pp(e)?(a=v,F(e)):(t.consume(e),v)}function b(t){return 62===t?B(t):v(t)}function x(e){return ap(e)?(t.consume(e),C):n(e)}function C(e){return 45===e||sp(e)?(t.consume(e),C):_(e)}function _(e){return pp(e)?(a=_,F(e)):gp(e)?(t.consume(e),_):B(e)}function w(e){return 45===e||sp(e)?(t.consume(e),w):47===e||62===e||fp(e)?k(e):n(e)}function k(e){return 47===e?(t.consume(e),B):58===e||95===e||ap(e)?(t.consume(e),T):pp(e)?(a=k,F(e)):gp(e)?(t.consume(e),k):B(e)}function T(e){return 45===e||46===e||58===e||95===e||sp(e)?(t.consume(e),T):E(e)}function E(e){return 61===e?(t.consume(e),S):pp(e)?(a=E,F(e)):gp(e)?(t.consume(e),E):k(e)}function S(e){return null===e||60===e||61===e||62===e||96===e?n(e):34===e||39===e?(t.consume(e),i=e,A):pp(e)?(a=S,F(e)):gp(e)?(t.consume(e),S):(t.consume(e),L)}function A(e){return e===i?(t.consume(e),i=void 0,D):null===e?n(e):pp(e)?(a=A,F(e)):(t.consume(e),A)}function L(e){return null===e||34===e||39===e||60===e||61===e||96===e?n(e):47===e||62===e||fp(e)?k(e):(t.consume(e),L)}function D(t){return 47===t||62===t||fp(t)?k(t):n(t)}function B(r){return 62===r?(t.consume(r),t.exit("htmlTextData"),t.exit("htmlText"),e):n(r)}function F(e){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),N}function N(e){return gp(e)?bp(t,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(e):I(e)}function I(e){return t.enter("htmlTextData"),a(e)}}};const of={name:"labelEnd",tokenize:function(t,e,n){const r=this;let i,o,a=r.events.length;for(;a--;)if(("labelImage"===r.events[a][1].type||"labelLink"===r.events[a][1].type)&&!r.events[a][1]._balanced){i=r.events[a][1];break}return function(e){return i?i._inactive?u(e):(o=r.parser.defined.includes(Hp(r.sliceSerialize({start:i.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(e),t.exit("labelMarker"),t.exit("labelEnd"),s):n(e)};function s(e){return 40===e?t.attempt(af,c,o?c:u)(e):91===e?t.attempt(sf,c,o?l:u)(e):o?c(e):u(e)}function l(e){return t.attempt(lf,c,u)(e)}function c(t){return e(t)}function u(t){return i._balanced=!0,n(t)}},resolveTo:function(t,e){let n,r,i,o,a=t.length,s=0;for(;a--;)if(n=t[a][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===t[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===t[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=a,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(i=a);const l={type:"labelLink"===t[r][1].type?"link":"image",start:Object.assign({},t[r][1].start),end:Object.assign({},t[t.length-1][1].end)},c={type:"label",start:Object.assign({},t[r][1].start),end:Object.assign({},t[i][1].end)},u={type:"labelText",start:Object.assign({},t[r+s+2][1].end),end:Object.assign({},t[i-2][1].start)};return o=[["enter",l,e],["enter",c,e]],o=np(o,t.slice(r+1,r+s+3)),o=np(o,[["enter",u,e]]),o=np(o,kp(e.parser.constructs.insideSpan.null,t.slice(r+s+4,i-3),e)),o=np(o,[["exit",u,e],t[i-2],t[i-1],["exit",c,e]]),o=np(o,t.slice(i+1)),o=np(o,[["exit",l,e]]),ep(t,r,t.length,o),t},resolveAll:function(t){let e=-1;for(;++e<t.length;){const n=t[e][1];("labelImage"===n.type||"labelLink"===n.type||"labelEnd"===n.type)&&(t.splice(e+1,"labelImage"===n.type?4:2),n.type="data",e++)}return t}},af={tokenize:function(t,e,n){return function(e){return t.enter("resource"),t.enter("resourceMarker"),t.consume(e),t.exit("resourceMarker"),r};function r(e){return fp(e)?Up(t,i)(e):i(e)}function i(e){return 41===e?c(e):$p(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(e)}function o(e){return fp(e)?Up(t,s)(e):c(e)}function a(t){return n(t)}function s(e){return 34===e||39===e||40===e?Wp(t,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(e):c(e)}function l(e){return fp(e)?Up(t,c)(e):c(e)}function c(r){return 41===r?(t.enter("resourceMarker"),t.consume(r),t.exit("resourceMarker"),t.exit("resource"),e):n(r)}}},sf={tokenize:function(t,e,n){const r=this;return function(e){return Yp.call(r,t,i,o,"reference","referenceMarker","referenceString")(e)};function i(t){return r.parser.defined.includes(Hp(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(t):n(t)}function o(t){return n(t)}}},lf={tokenize:function(t,e,n){return function(e){return t.enter("reference"),t.enter("referenceMarker"),t.consume(e),t.exit("referenceMarker"),r};function r(r){return 93===r?(t.enter("referenceMarker"),t.consume(r),t.exit("referenceMarker"),t.exit("reference"),e):n(r)}}};const cf={name:"labelStartImage",tokenize:function(t,e,n){const r=this;return function(e){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(e),t.exit("labelImageMarker"),i};function i(e){return 91===e?(t.enter("labelMarker"),t.consume(e),t.exit("labelMarker"),t.exit("labelImage"),o):n(e)}function o(t){return 94===t&&"_hiddenFootnoteSupport"in r.parser.constructs?n(t):e(t)}},resolveAll:of.resolveAll};const uf={name:"labelStartLink",tokenize:function(t,e,n){const r=this;return function(e){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(e),t.exit("labelMarker"),t.exit("labelLink"),i};function i(t){return 94===t&&"_hiddenFootnoteSupport"in r.parser.constructs?n(t):e(t)}},resolveAll:of.resolveAll};const hf={name:"lineEnding",tokenize:function(t,e){return function(n){return t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),bp(t,e,"linePrefix")}}};const df={name:"thematicBreak",tokenize:function(t,e,n){let r,i=0;return function(e){return t.enter("thematicBreak"),function(t){return r=t,o(t)}(e)};function o(o){return o===r?(t.enter("thematicBreakSequence"),a(o)):i>=3&&(null===o||pp(o))?(t.exit("thematicBreak"),e(o)):n(o)}function a(e){return e===r?(t.consume(e),i++,a):(t.exit("thematicBreakSequence"),gp(e)?bp(t,o,"whitespace")(e):o(e))}}};const pf={name:"list",tokenize:function(t,e,n){const r=this,i=r.events[r.events.length-1];let o=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,a=0;return function(e){const i=r.containerState.type||(42===e||43===e||45===e?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||e===r.containerState.marker:up(e)){if(r.containerState.type||(r.containerState.type=i,t.enter(i,{_container:!0})),"listUnordered"===i)return t.enter("listItemPrefix"),42===e||45===e?t.check(df,n,l)(e):l(e);if(!r.interrupt||49===e)return t.enter("listItemPrefix"),t.enter("listItemValue"),s(e)}return n(e)};function s(e){return up(e)&&++a<10?(t.consume(e),s):(!r.interrupt||a<2)&&(r.containerState.marker?e===r.containerState.marker:41===e||46===e)?(t.exit("listItemValue"),l(e)):n(e)}function l(e){return t.enter("listItemMarker"),t.consume(e),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||e,t.check(Ap,r.interrupt?n:c,t.attempt(ff,h,u))}function c(t){return r.containerState.initialBlankLine=!0,o++,h(t)}function u(e){return gp(e)?(t.enter("listItemPrefixWhitespace"),t.consume(e),t.exit("listItemPrefixWhitespace"),h):n(e)}function h(n){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(n)}},continuation:{tokenize:function(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Ap,(function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,bp(t,e,"listItemIndent",r.containerState.size+1)(n)}),(function(n){return r.containerState.furtherBlankLines||!gp(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(gf,e,i)(n))}));function i(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,bp(t,t.attempt(pf,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(t){t.exit(this.containerState.type)}},ff={tokenize:function(t,e,n){const r=this;return bp(t,(function(t){const i=r.events[r.events.length-1];return!gp(t)&&i&&"listItemPrefixWhitespace"===i[1].type?e(t):n(t)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},gf={tokenize:function(t,e,n){const r=this;return bp(t,(function(t){const i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?e(t):n(t)}),"listItemIndent",r.containerState.size+1)},partial:!0};const yf={name:"setextUnderline",tokenize:function(t,e,n){const r=this;let i;return function(e){let a,s=r.events.length;for(;s--;)if("lineEnding"!==r.events[s][1].type&&"linePrefix"!==r.events[s][1].type&&"content"!==r.events[s][1].type){a="paragraph"===r.events[s][1].type;break}return r.parser.lazy[r.now().line]||!r.interrupt&&!a?n(e):(t.enter("setextHeadingLine"),i=e,function(e){return t.enter("setextHeadingLineSequence"),o(e)}(e))};function o(e){return e===i?(t.consume(e),o):(t.exit("setextHeadingLineSequence"),gp(e)?bp(t,a,"lineSuffix")(e):a(e))}function a(r){return null===r||pp(r)?(t.exit("setextHeadingLine"),e(r)):n(r)}},resolveTo:function(t,e){let n,r,i,o=t.length;for(;o--;)if("enter"===t[o][0]){if("content"===t[o][1].type){n=o;break}"paragraph"===t[o][1].type&&(r=o)}else"content"===t[o][1].type&&t.splice(o,1),!i&&"definition"===t[o][1].type&&(i=o);const a={type:"setextHeading",start:Object.assign({},t[r][1].start),end:Object.assign({},t[t.length-1][1].end)};return t[r][1].type="setextHeadingText",i?(t.splice(r,0,["enter",a,e]),t.splice(i+1,0,["exit",t[n][1],e]),t[n][1].end=Object.assign({},t[i][1].end)):t[n][1]=a,t.push(["exit",a,e]),t}};const mf={tokenize:function(t){const e=this,n=t.attempt(Ap,(function(r){if(null===r)return void t.consume(r);return t.enter("lineEndingBlank"),t.consume(r),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}),t.attempt(this.parser.constructs.flowInitial,r,bp(t,t.attempt(this.parser.constructs.flow,r,t.attempt(jp,r)),"linePrefix")));return n;function r(r){if(null!==r)return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),e.currentConstruct=void 0,n;t.consume(r)}}};const vf={resolveAll:_f()},bf=Cf("string"),xf=Cf("text");function Cf(t){return{tokenize:function(e){const n=this,r=this.parser.constructs[t],i=e.attempt(r,o,a);return o;function o(t){return l(t)?i(t):a(t)}function a(t){if(null!==t)return e.enter("data"),e.consume(t),s;e.consume(t)}function s(t){return l(t)?(e.exit("data"),i(t)):(e.consume(t),s)}function l(t){if(null===t)return!0;const e=r[t];let i=-1;if(e)for(;++i<e.length;){const t=e[i];if(!t.previous||t.previous.call(n,n.previous))return!0}return!1}},resolveAll:_f("text"===t?wf:void 0)}}function _f(t){return function(e,n){let r,i=-1;for(;++i<=e.length;)void 0===r?e[i]&&"data"===e[i][1].type&&(r=i,i++):(!e[i]||"data"!==e[i][1].type)&&(i!==r+2&&(e[r][1].end=e[i-1][1].end,e.splice(r+2,i-r-2),i=r+2),r=void 0);return t?t(e,n):e}}function wf(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||"lineEnding"===t[n][1].type)&&"data"===t[n-1][1].type){const r=t[n-1][1],i=e.sliceStream(r);let o,a=i.length,s=-1,l=0;for(;a--;){const t=i[a];if("string"==typeof t){for(s=t.length;32===t.charCodeAt(s-1);)l++,s--;if(s)break;s=-1}else if(-2===t)o=!0,l++;else if(-1!==t){a++;break}}if(l){const i={type:n===t.length||o||l<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-l,offset:r.end.offset-l,_index:r.start._index+a,_bufferIndex:a?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},i.start),r.start.offset===r.end.offset?Object.assign(r,i):(t.splice(n,0,["enter",i,e],["exit",i,e]),n+=2)}n++}return t}function kf(t,e,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},o=[];let a=[],s=[];const l={consume:function(t){pp(t)?(r.line++,r.column=1,r.offset+=-3===t?2:1,m()):-1!==t&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=t},enter:function(t,e){const n=e||{};return n.type=t,n.start=d(),c.events.push(["enter",n,c]),s.push(n),n},exit:function(t){const e=s.pop();return e.end=d(),c.events.push(["exit",e,c]),e},attempt:g((function(t,e){y(t,e.from)})),check:g(f),interrupt:g(f,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:t,sliceStream:h,sliceSerialize:function(t,e){return function(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const o=t[n];let a;if("string"==typeof o)a=o;else switch(o){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=e?" ":"\t";break;case-1:if(!e&&i)continue;a=" ";break;default:a=String.fromCharCode(o)}i=-2===o,r.push(a)}return r.join("")}(h(t),e)},now:d,defineSkip:function(t){i[t.line]=t.column,m()},write:function(t){return a=np(a,t),function(){let t;for(;r._index<a.length;){const e=a[r._index];if("string"==typeof e)for(t=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===t&&r._bufferIndex<e.length;)p(e.charCodeAt(r._bufferIndex));else p(e)}}(),null!==a[a.length-1]?[]:(y(e,0),c.events=kp(o,c.events,c),c.events)}};let u=e.tokenize.call(c,l);return e.resolveAll&&o.push(e),c;function h(t){return function(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,o=e.end._bufferIndex;let a;if(n===i)a=[t[n].slice(r,o)];else{if(a=t.slice(n,i),r>-1){const t=a[0];"string"==typeof t?a[0]=t.slice(r):a.shift()}o>0&&a.push(t[i].slice(0,o))}return a}(a,t)}function d(){const{line:t,column:e,offset:n,_index:i,_bufferIndex:o}=r;return{line:t,column:e,offset:n,_index:i,_bufferIndex:o}}function p(t){u=u(t)}function f(t,e){e.restore()}function g(t,e){return function(n,i,o){let a,u,h,p;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):function(t){return e;function e(e){const n=null!==e&&t[e],r=null!==e&&t.null;return f([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(e)}}(n);function f(t){return a=t,u=0,0===t.length?o:g(t[u])}function g(t){return function(n){return p=function(){const t=d(),e=c.previous,n=c.currentConstruct,i=c.events.length,o=Array.from(s);return{restore:a,from:i};function a(){r=t,c.previous=e,c.currentConstruct=n,c.events.length=i,s=o,m()}}(),h=t,t.partial||(c.currentConstruct=t),t.name&&c.parser.constructs.disable.null.includes(t.name)?v():t.tokenize.call(e?Object.assign(Object.create(c),e):c,l,y,v)(n)}}function y(e){return t(h,p),i}function v(t){return p.restore(),++u<a.length?g(a[u]):o}}}function y(t,e){t.resolveAll&&!o.includes(t)&&o.push(t),t.resolve&&ep(c.events,e,c.events.length-e,t.resolve(c.events.slice(e),c)),t.resolveTo&&(c.events=t.resolveTo(c.events,c))}function m(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}const Tf={42:pf,43:pf,45:pf,48:pf,49:pf,50:pf,51:pf,52:pf,53:pf,54:pf,55:pf,56:pf,57:pf,62:Lp},Ef={91:Vp},Sf={[-2]:Mp,[-1]:Mp,32:Mp},Af={35:Zp,42:df,45:[yf,df],60:tf,61:yf,95:df,96:Op,126:Op},Lf={38:Np,92:Dp},Df={[-5]:hf,[-4]:hf,[-3]:hf,33:cf,38:Np,42:Tp,60:[Sp,rf],91:uf,92:[Kp,Dp],93:of,95:Tp,96:Rp},Bf={null:[Tp,vf]},Ff=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:Ef,disable:{null:[]},document:Tf,flow:Af,flowInitial:Sf,insideSpan:Bf,string:Lf,text:Df},Symbol.toStringTag,{value:"Module"}));function Nf(t){const e=function(t){const e={};let n=-1;for(;++n<t.length;)ip(e,t[n]);return e}([Ff,...(t||{}).extensions||[]]),n={defined:[],lazy:{},constructs:e,content:r(xp),document:r(Cp),flow:r(mf),string:r(bf),text:r(xf)};return n;function r(t){return function(e){return kf(n,t,e)}}}const If=/[\0\t\n\r]/g;function Of(t,e){const n=Number.parseInt(t,e);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535==(65535&n)||65534==(65535&n)||n>1114111?"�":String.fromCharCode(n)}const Mf=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Pf(t,e,n){if(e)return e;if(35===n.charCodeAt(0)){const t=n.charCodeAt(1),e=120===t||88===t;return Of(n.slice(e?2:1),e?16:10)}return Fp(n)||t}function Rf(t){return t&&"object"==typeof t?"position"in t||"type"in t?qf(t.position):"start"in t||"end"in t?qf(t):"line"in t||"column"in t?zf(t):"":""}function zf(t){return jf(t&&t.line)+":"+jf(t&&t.column)}function qf(t){return zf(t&&t.start)+"-"+zf(t&&t.end)}function jf(t){return t&&"number"==typeof t?t:1}const Gf={}.hasOwnProperty,$f=function(t,e,n){return"string"!=typeof e&&(n=e,e=void 0),function(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(nt),autolinkProtocol:S,autolinkEmail:S,atxHeading:s(Q),blockQuote:s(H),characterEscape:S,characterReference:S,codeFenced:s(V),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:s(V,l),codeText:s(X,l),codeTextData:S,data:S,codeFlowValue:S,definition:s(K),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:s(Z),hardBreakEscape:s(J),hardBreakTrailing:s(J),htmlFlow:s(tt,l),htmlFlowData:S,htmlText:s(tt,l),htmlTextData:S,image:s(et),label:l,link:s(nt),listItem:s(it),listItemValue:f,listOrdered:s(rt,p),listUnordered:s(rt),paragraph:s(ot),reference:j,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:s(Q),strong:s(at),thematicBreak:s(lt)},exit:{atxHeading:u(),atxHeadingSequence:w,autolink:u(),autolinkEmail:U,autolinkProtocol:W,blockQuote:u(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:$,characterReferenceMarkerNumeric:$,characterReferenceValue:Y,codeFenced:u(v),codeFencedFence:m,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:A,codeIndented:u(b),codeText:u(N),codeTextData:A,data:A,definition:u(),definitionDestinationString:_,definitionLabelString:x,definitionTitleString:C,emphasis:u(),hardBreakEscape:u(D),hardBreakTrailing:u(D),htmlFlow:u(B),htmlFlowData:A,htmlText:u(F),htmlTextData:A,image:u(O),label:P,labelText:M,lineEnding:L,link:u(I),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:G,resourceDestinationString:R,resourceTitleString:z,resource:q,setextHeading:u(E),setextHeadingLineSequence:T,setextHeadingText:k,strong:u(),thematicBreak:u()}};Wf(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(t){let n={type:"root",children:[]};const r={stack:[n],tokenStack:[],config:e,enter:c,exit:h,buffer:l,resume:d,setData:o,getData:a},s=[];let u=-1;for(;++u<t.length;)if("listOrdered"===t[u][1].type||"listUnordered"===t[u][1].type)if("enter"===t[u][0])s.push(u);else{u=i(t,s.pop(),u)}for(u=-1;++u<t.length;){const n=e[t[u][0]];Gf.call(n,t[u][1].type)&&n[t[u][1].type].call(Object.assign({sliceSerialize:t[u][2].sliceSerialize},r),t[u][1])}if(r.tokenStack.length>0){const t=r.tokenStack[r.tokenStack.length-1];(t[1]||Hf).call(r,void 0,t[0])}for(n.position={start:Yf(t.length>0?t[0][1].start:{line:1,column:1,offset:0}),end:Yf(t.length>0?t[t.length-2][1].end:{line:1,column:1,offset:0})},u=-1;++u<e.transforms.length;)n=e.transforms[u](n)||n;return n}function i(t,e,n){let r,i,o,a,s=e-1,l=-1,c=!1;for(;++s<=n;){const e=t[s];if("listUnordered"===e[1].type||"listOrdered"===e[1].type||"blockQuote"===e[1].type?("enter"===e[0]?l++:l--,a=void 0):"lineEndingBlank"===e[1].type?"enter"===e[0]&&(r&&!a&&!l&&!o&&(o=s),a=void 0):"linePrefix"===e[1].type||"listItemValue"===e[1].type||"listItemMarker"===e[1].type||"listItemPrefix"===e[1].type||"listItemPrefixWhitespace"===e[1].type||(a=void 0),!l&&"enter"===e[0]&&"listItemPrefix"===e[1].type||-1===l&&"exit"===e[0]&&("listUnordered"===e[1].type||"listOrdered"===e[1].type)){if(r){let a=s;for(i=void 0;a--;){const e=t[a];if("lineEnding"===e[1].type||"lineEndingBlank"===e[1].type){if("exit"===e[0])continue;i&&(t[i][1].type="lineEndingBlank",c=!0),e[1].type="lineEnding",i=a}else if("linePrefix"!==e[1].type&&"blockQuotePrefix"!==e[1].type&&"blockQuotePrefixWhitespace"!==e[1].type&&"blockQuoteMarker"!==e[1].type&&"listItemIndent"!==e[1].type)break}o&&(!i||o<i)&&(r._spread=!0),r.end=Object.assign({},i?t[i][1].start:e[1].end),t.splice(i||s,0,["exit",r,e[2]]),s++,n++}"listItemPrefix"===e[1].type&&(r={type:"listItem",_spread:!1,start:Object.assign({},e[1].start),end:void 0},t.splice(s,0,["enter",r,e[2]]),s++,n++,o=void 0,a=!0)}}return t[e][1]._spread=c,n}function o(t,e){n[t]=e}function a(t){return n[t]}function s(t,e){return n;function n(n){c.call(this,t(n),n),e&&e.call(this,n)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(t,e,n){return this.stack[this.stack.length-1].children.push(t),this.stack.push(t),this.tokenStack.push([e,n]),t.position={start:Yf(e.start)},t}function u(t){return e;function e(e){t&&t.call(this,e),h.call(this,e)}}function h(t,e){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+t.type+"` ("+Rf({start:t.start,end:t.end})+"): it’s not open");return r[0].type!==t.type&&(e?e.call(this,t,r[0]):(r[1]||Hf).call(this,t,r[0])),n.position.end=Yf(t.end),n}function d(){return function(t,e){const n=e||Qd;return Jd(t,"boolean"!=typeof n.includeImageAlt||n.includeImageAlt,"boolean"!=typeof n.includeHtml||n.includeHtml)}(this.stack.pop())}function p(){o("expectingFirstListItemValue",!0)}function f(t){if(a("expectingFirstListItemValue")){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(t),10),o("expectingFirstListItemValue")}}function g(){const t=this.resume();this.stack[this.stack.length-1].lang=t}function y(){const t=this.resume();this.stack[this.stack.length-1].meta=t}function m(){a("flowCodeInside")||(this.buffer(),o("flowCodeInside",!0))}function v(){const t=this.resume();this.stack[this.stack.length-1].value=t.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),o("flowCodeInside")}function b(){const t=this.resume();this.stack[this.stack.length-1].value=t.replace(/(\r?\n|\r)$/g,"")}function x(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.label=e,n.identifier=Hp(this.sliceSerialize(t)).toLowerCase()}function C(){const t=this.resume();this.stack[this.stack.length-1].title=t}function _(){const t=this.resume();this.stack[this.stack.length-1].url=t}function w(t){const e=this.stack[this.stack.length-1];if(!e.depth){const n=this.sliceSerialize(t).length;e.depth=n}}function k(){o("setextHeadingSlurpLineEnding",!0)}function T(t){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(t).charCodeAt(0)?1:2}function E(){o("setextHeadingSlurpLineEnding")}function S(t){const e=this.stack[this.stack.length-1];let n=e.children[e.children.length-1];(!n||"text"!==n.type)&&(n=st(),n.position={start:Yf(t.start)},e.children.push(n)),this.stack.push(n)}function A(t){const e=this.stack.pop();e.value+=this.sliceSerialize(t),e.position.end=Yf(t.end)}function L(t){const n=this.stack[this.stack.length-1];if(a("atHardBreak")){return n.children[n.children.length-1].position.end=Yf(t.end),void o("atHardBreak")}!a("setextHeadingSlurpLineEnding")&&e.canContainEols.includes(n.type)&&(S.call(this,t),A.call(this,t))}function D(){o("atHardBreak",!0)}function B(){const t=this.resume();this.stack[this.stack.length-1].value=t}function F(){const t=this.resume();this.stack[this.stack.length-1].value=t}function N(){const t=this.resume();this.stack[this.stack.length-1].value=t}function I(){const t=this.stack[this.stack.length-1];if(a("inReference")){const e=a("referenceType")||"shortcut";t.type+="Reference",t.referenceType=e,delete t.url,delete t.title}else delete t.identifier,delete t.label;o("referenceType")}function O(){const t=this.stack[this.stack.length-1];if(a("inReference")){const e=a("referenceType")||"shortcut";t.type+="Reference",t.referenceType=e,delete t.url,delete t.title}else delete t.identifier,delete t.label;o("referenceType")}function M(t){const e=this.sliceSerialize(t),n=this.stack[this.stack.length-2];n.label=function(t){return t.replace(Mf,Pf)}(e),n.identifier=Hp(e).toLowerCase()}function P(){const t=this.stack[this.stack.length-1],e=this.resume(),n=this.stack[this.stack.length-1];if(o("inReference",!0),"link"===n.type){const e=t.children;n.children=e}else n.alt=e}function R(){const t=this.resume();this.stack[this.stack.length-1].url=t}function z(){const t=this.resume();this.stack[this.stack.length-1].title=t}function q(){o("inReference")}function j(){o("referenceType","collapsed")}function G(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.label=e,n.identifier=Hp(this.sliceSerialize(t)).toLowerCase(),o("referenceType","full")}function $(t){o("characterReferenceType",t.type)}function Y(t){const e=this.sliceSerialize(t),n=a("characterReferenceType");let r;n?(r=Of(e,"characterReferenceMarkerNumeric"===n?10:16),o("characterReferenceType")):r=Fp(e);const i=this.stack.pop();i.value+=r,i.position.end=Yf(t.end)}function W(t){A.call(this,t);this.stack[this.stack.length-1].url=this.sliceSerialize(t)}function U(t){A.call(this,t);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(t)}function H(){return{type:"blockquote",children:[]}}function V(){return{type:"code",lang:null,meta:null,value:""}}function X(){return{type:"inlineCode",value:""}}function K(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Z(){return{type:"emphasis",children:[]}}function Q(){return{type:"heading",depth:void 0,children:[]}}function J(){return{type:"break"}}function tt(){return{type:"html",value:""}}function et(){return{type:"image",title:null,url:"",alt:null}}function nt(){return{type:"link",title:null,url:"",children:[]}}function rt(t){return{type:"list",ordered:"listOrdered"===t.type,start:null,spread:t._spread,children:[]}}function it(t){return{type:"listItem",spread:t._spread,checked:null,children:[]}}function ot(){return{type:"paragraph",children:[]}}function at(){return{type:"strong",children:[]}}function st(){return{type:"text",value:""}}function lt(){return{type:"thematicBreak"}}}(n)(function(t){for(;!zp(t););return t}(Nf(n).document().write(function(){let t,e=1,n="",r=!0;return function(i,o,a){const s=[];let l,c,u,h,d;for(i=n+i.toString(o),u=0,n="",r&&(65279===i.charCodeAt(0)&&u++,r=void 0);u<i.length;){if(If.lastIndex=u,l=If.exec(i),h=l&&void 0!==l.index?l.index:i.length,d=i.charCodeAt(h),!l){n=i.slice(u);break}if(10===d&&u===h&&t)s.push(-3),t=void 0;else switch(t&&(s.push(-5),t=void 0),u<h&&(s.push(i.slice(u,h)),e+=h-u),d){case 0:s.push(65533),e++;break;case 9:for(c=4*Math.ceil(e/4),s.push(-2);e++<c;)s.push(-1);break;case 10:s.push(-4),e=1;break;default:t=!0,e=1}u=h+1}return a&&(t&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(t,e,!0))))};function Yf(t){return{line:t.line,column:t.column,offset:t.offset}}function Wf(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?Wf(t,r):Uf(t,r)}}function Uf(t,e){let n;for(n in e)if(Gf.call(e,n))if("canContainEols"===n){const r=e[n];r&&t[n].push(...r)}else if("transforms"===n){const r=e[n];r&&t[n].push(...r)}else if("enter"===n||"exit"===n){const r=e[n];r&&Object.assign(t[n],r)}}function Hf(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Rf({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Rf({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Rf({start:e.start,end:e.end})+") is still open")}function Vf(t){const n=function(t){return e(t.replace(/\n{2,}/g,"\n"))}(t),{children:r}=$f(n),i=[[]];let o=0;function a(t,e="normal"){"text"===t.type?t.value.split("\n").forEach(((t,n)=>{0!==n&&(o++,i.push([])),t.split(" ").forEach((t=>{t&&i[o].push({content:t,type:e})}))})):("strong"===t.type||"emphasis"===t.type)&&t.children.forEach((e=>{a(e,t.type)}))}return r.forEach((t=>{"paragraph"===t.type&&t.children.forEach((t=>{a(t)}))})),i}function Xf(t,e){const n=function(t){return Intl.Segmenter?[...(new Intl.Segmenter).segment(t)].map((t=>t.segment)):[...t]}(e.content);return Kf(t,[],n,e.type)}function Kf(t,e,n,r){if(0===n.length)return[{content:e.join(""),type:r},{content:"",type:r}];const[i,...o]=n,a=[...e,i];return t([{content:a.join(""),type:r}])?Kf(t,a,o,r):(0===e.length&&i&&(e.push(i),n.shift()),[{content:e.join(""),type:r},{content:n.join(""),type:r}])}function Zf(t,e){if(t.some((({content:t})=>t.includes("\n"))))throw new Error("splitLineToFitWidth does not support newlines in the line");return Qf(t,e)}function Qf(t,e,n=[],r=[]){if(0===t.length)return r.length>0&&n.push(r),n.length>0?n:[];let i="";" "===t[0].content&&(i=" ",t.shift());const o=t.shift()??{content:" ",type:"normal"},a=[...r];if(""!==i&&a.push({content:i,type:"normal"}),a.push(o),e(a))return Qf(t,e,n,a);if(r.length>0)n.push(r),t.unshift(o);else if(o.content){const[r,i]=Xf(e,o);n.push([r]),i.content&&t.unshift(i)}return Qf(t,e,n)}function Jf(t,e,n){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*n-.1+"em").attr("dy",n+"em")}function tg(t,e,n){const r=t.append("text"),i=Jf(r,1,e);eg(i,n);const o=i.node().getComputedTextLength();return r.remove(),o}function eg(t,e){t.text(""),e.forEach(((e,n)=>{const r=t.append("tspan").attr("font-style","emphasis"===e.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===e.type?"bold":"normal");0===n?r.text(e.content):r.text(" "+e.content)}))}const ng=(t,e="",{style:n="",isTitle:r=!1,classes:i="",useHtmlLabels:o=!0,isNode:a=!0,width:l=200,addSvgBackground:c=!1}={})=>{if(s.info("createText",e,n,r,i,o,a,c),o){const r=function(t){const{children:e}=$f(t);return e.map((function t(e){return"text"===e.type?e.value.replace(/\n/g,"<br/>"):"strong"===e.type?`<strong>${e.children.map(t).join("")}</strong>`:"emphasis"===e.type?`<em>${e.children.map(t).join("")}</em>`:"paragraph"===e.type?`<p>${e.children.map(t).join("")}</p>`:`Unsupported markdown: ${e.type}`})).join("")}(e);return function(t,e,n,r,i=!1){const o=t.append("foreignObject"),a=o.append("xhtml:div"),s=e.label,l=e.isNode?"nodeLabel":"edgeLabel";a.html(`\n    <span class="${l} ${r}" `+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+s+"</span>"),function(t,e){e&&t.attr("style",e)}(a,e.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("max-width",n+"px"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&a.attr("class","labelBkg");let c=a.node().getBoundingClientRect();return c.width===n&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",n+"px"),c=a.node().getBoundingClientRect()),o.style("width",c.width),o.style("height",c.height),o.node()}(t,{isNode:a,label:qs(r).replace(/fa[blrs]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`)),labelStyle:n.replace("fill:","color:")},l,i,c)}return function(t,e,n,r=!1){const i=e.append("g"),o=i.insert("rect").attr("class","background"),a=i.append("text").attr("y","-10.1");let s=0;for(const e of n){const n=e=>tg(i,1.1,e)<=t,r=n(e)?[e]:Zf(e,n);for(const t of r)eg(Jf(a,s,1.1),t),s++}if(r){const t=a.node().getBBox(),e=2;return o.attr("x",-e).attr("y",-e).attr("width",t.width+2*e).attr("height",t.height+2*e),i.node()}return a.node()}(l,t,Vf(e),c)};var rg=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,4],n=[1,13],r=[1,12],i=[1,15],o=[1,16],a=[1,20],s=[1,19],l=[6,7,8],c=[1,26],u=[1,24],h=[1,25],d=[6,7,11],p=[1,6,13,15,16,19,22],f=[1,33],g=[1,34],y=[1,6,7,11,13,15,16,19,22],m={trace:function(){},yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:function(t,e,n,r,i,o,a){var s=o.length-1;switch(i){case 6:case 7:return r;case 8:r.getLogger().trace("Stop NL ");break;case 9:r.getLogger().trace("Stop EOF ");break;case 11:r.getLogger().trace("Stop NL2 ");break;case 12:r.getLogger().trace("Stop EOF2 ");break;case 15:r.getLogger().info("Node: ",o[s].id),r.addNode(o[s-1].length,o[s].id,o[s].descr,o[s].type);break;case 16:r.getLogger().trace("Icon: ",o[s]),r.decorateNode({icon:o[s]});break;case 17:case 21:r.decorateNode({class:o[s]});break;case 18:r.getLogger().trace("SPACELIST");break;case 19:r.getLogger().trace("Node: ",o[s].id),r.addNode(0,o[s].id,o[s].descr,o[s].type);break;case 20:r.decorateNode({icon:o[s]});break;case 25:r.getLogger().trace("node found ..",o[s-2]),this.$={id:o[s-1],descr:o[s-1],type:r.getType(o[s-2],o[s])};break;case 26:this.$={id:o[s],descr:o[s],type:r.nodeType.DEFAULT};break;case 27:r.getLogger().trace("node found ..",o[s-3]),this.$={id:o[s-3],descr:o[s-1],type:r.getType(o[s-2],o[s])}}},table:[{3:1,4:2,5:3,6:[1,5],8:e},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:e},{6:n,7:[1,10],9:9,12:11,13:r,14:14,15:i,16:o,17:17,18:18,19:a,22:s},t(l,[2,3]),{1:[2,2]},t(l,[2,4]),t(l,[2,5]),{1:[2,6],6:n,12:21,13:r,14:14,15:i,16:o,17:17,18:18,19:a,22:s},{6:n,9:22,12:11,13:r,14:14,15:i,16:o,17:17,18:18,19:a,22:s},{6:c,7:u,10:23,11:h},t(d,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:a,22:s}),t(d,[2,18]),t(d,[2,19]),t(d,[2,20]),t(d,[2,21]),t(d,[2,23]),t(d,[2,24]),t(d,[2,26],{19:[1,30]}),{20:[1,31]},{6:c,7:u,10:32,11:h},{1:[2,7],6:n,12:21,13:r,14:14,15:i,16:o,17:17,18:18,19:a,22:s},t(p,[2,14],{7:f,11:g}),t(y,[2,8]),t(y,[2,9]),t(y,[2,10]),t(d,[2,15]),t(d,[2,16]),t(d,[2,17]),{20:[1,35]},{21:[1,36]},t(p,[2,13],{7:f,11:g}),t(y,[2,11]),t(y,[2,12]),{21:[1,37]},t(d,[2,25]),t(d,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],o=[],a=this.table,s="",l=0,c=0,u=o.slice.call(arguments,1),h=Object.create(this.lexer),d={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(d.yy[p]=this.yy[p]);h.setInput(t,d.yy),d.yy.lexer=h,d.yy.parser=this,typeof h.yylloc>"u"&&(h.yylloc={});var f=h.yylloc;o.push(f);var g=h.options&&h.options.ranges;function y(){var t;return"number"!=typeof(t=r.pop()||h.lex()||1)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,v,b,x,C,_,w,k,T={};;){if(v=n[n.length-1],this.defaultActions[v]?b=this.defaultActions[v]:((null===m||typeof m>"u")&&(m=y()),b=a[v]&&a[v][m]),typeof b>"u"||!b.length||!b[0]){var E="";for(C in k=[],a[v])this.terminals_[C]&&C>2&&k.push("'"+this.terminals_[C]+"'");E=h.showPosition?"Parse error on line "+(l+1)+":\n"+h.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(E,{text:h.match,token:this.terminals_[m]||m,line:h.yylineno,loc:f,expected:k})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);switch(b[0]){case 1:n.push(m),i.push(h.yytext),o.push(h.yylloc),n.push(b[1]),m=null,c=h.yyleng,s=h.yytext,l=h.yylineno,f=h.yylloc;break;case 2:if(_=this.productions_[b[1]][1],T.$=i[i.length-_],T._$={first_line:o[o.length-(_||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(_||1)].first_column,last_column:o[o.length-1].last_column},g&&(T._$.range=[o[o.length-(_||1)].range[0],o[o.length-1].range[1]]),typeof(x=this.performAction.apply(T,[s,c,l,d.yy,b[1],i,o].concat(u)))<"u")return x;_&&(n=n.slice(0,-1*_*2),i=i.slice(0,-1*_),o=o.slice(0,-1*_)),n.push(this.productions_[b[1]][0]),i.push(T.$),o.push(T._$),w=a[n[n.length-2]][n[n.length-1]],n.push(w);break;case 3:return!0}}return!0}},v=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return t.getLogger().trace("Found comment",e.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:case 23:case 26:this.popState();break;case 5:t.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return t.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:t.getLogger().trace("end icon"),this.popState();break;case 10:return t.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return t.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return t.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return t.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:case 15:case 16:case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 24:t.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return t.getLogger().trace("description:",e.yytext),"NODE_DESCR";case 27:return this.popState(),t.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),t.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),t.getLogger().trace("node end ...",e.yytext),"NODE_DEND";case 30:case 33:case 34:return this.popState(),t.getLogger().trace("node end (("),"NODE_DEND";case 31:case 32:return this.popState(),t.getLogger().trace("node end (-"),"NODE_DEND";case 35:case 36:return t.getLogger().trace("Long description:",e.yytext),20}},rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return t}();function b(){this.yy={}}return m.lexer=v,b.prototype=m,m.Parser=b,new b}();rg.parser=rg;const ig=rg;let og=[],ag=0,sg={};const lg={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},cg={clear:()=>{og=[],ag=0,sg={}},addNode:(t,e,n,r)=>{var i,o;s.info("addNode",t,e,n,r);const a=Gc();let l=(null==(i=a.mindmap)?void 0:i.padding)??Ji.mindmap.padding;switch(r){case lg.ROUNDED_RECT:case lg.RECT:case lg.HEXAGON:l*=2}const c={id:ag++,nodeId:li(e,a),level:t,descr:li(n,a),type:r,children:[],width:(null==(o=a.mindmap)?void 0:o.maxNodeWidth)??Ji.mindmap.maxNodeWidth,padding:l},u=function(t){for(let e=og.length-1;e>=0;e--)if(og[e].level<t)return og[e];return null}(t);if(u)u.children.push(c),og.push(c);else{if(0!==og.length)throw new Error('There can be only one root. No parent could be found for ("'+c.descr+'")');og.push(c)}},getMindmap:()=>og.length>0?og[0]:null,nodeType:lg,getType:(t,e)=>{switch(s.debug("In get type",t,e),t){case"[":return lg.RECT;case"(":return")"===e?lg.ROUNDED_RECT:lg.CLOUD;case"((":return lg.CIRCLE;case")":return lg.CLOUD;case"))":return lg.BANG;case"{{":return lg.HEXAGON;default:return lg.DEFAULT}},setElementForId:(t,e)=>{sg[t]=e},decorateNode:t=>{if(!t)return;const e=Gc(),n=og[og.length-1];t.icon&&(n.icon=li(t.icon,e)),t.class&&(n.class=li(t.class,e))},type2Str:t=>{switch(t){case lg.DEFAULT:return"no-border";case lg.RECT:return"rect";case lg.ROUNDED_RECT:return"rounded-rect";case lg.CIRCLE:return"circle";case lg.CLOUD:return"cloud";case lg.BANG:return"bang";case lg.HEXAGON:return"hexgon";default:return"no-border"}},getLogger:()=>s,getElementById:t=>sg[t]},ug=cg;var hg={exports:{}};hg.exports=function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){return s(t)||l(t,e)||c(t,e)||h()}function s(t){if(Array.isArray(t))return t}function l(t,e){var n=null==t?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{!a&&null!=n.return&&n.return()}finally{if(s)throw i}}return o}}function c(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d=typeof window>"u"?null:window,p=d?d.navigator:null;d&&d.document;var f=t(""),g=t({}),y=t((function(){})),m=typeof HTMLElement>"u"?"undefined":t(HTMLElement),v=function(t){return t&&t.instanceString&&x(t.instanceString)?t.instanceString():null},b=function(e){return null!=e&&t(e)==f},x=function(e){return null!=e&&t(e)===y},C=function(t){return!S(t)&&(Array.isArray?Array.isArray(t):null!=t&&t instanceof Array)},_=function(e){return null!=e&&t(e)===g&&!C(e)&&e.constructor===Object},w=function(e){return null!=e&&t(e)===g},k=function(e){return null!=e&&t(e)===t(1)&&!isNaN(e)},T=function(t){return k(t)&&Math.floor(t)===t},E=function(t){if("undefined"!==m)return null!=t&&t instanceof HTMLElement},S=function(t){return A(t)||L(t)},A=function(t){return"collection"===v(t)&&t._private.single},L=function(t){return"collection"===v(t)&&!t._private.single},D=function(t){return"core"===v(t)},B=function(t){return"stylesheet"===v(t)},F=function(t){return"event"===v(t)},N=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},I=function(t){return!(typeof HTMLElement>"u")&&t instanceof HTMLElement},O=function(t){return _(t)&&k(t.x1)&&k(t.x2)&&k(t.y1)&&k(t.y2)},M=function(t){return w(t)&&x(t.then)},P=function(){return p&&p.userAgent.match(/msie|trident|edge/i)},R=function(t,e){e||(e=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return t.join("$")});var n=function n(){var r,i=this,o=arguments,a=e.apply(i,o),s=n.cache;return(r=s[a])||(r=s[a]=t.apply(i,o)),r};return n.cache={},n},z=R((function(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))})),q=R((function(t){return t.replace(/(-\w)/g,(function(t){return t[1].toUpperCase()}))})),j=R((function(t,e){return t+e[0].toUpperCase()+e.substring(1)}),(function(t,e){return t+"$"+e})),G=function(t){return N(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},$="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Y="rgb[a]?\\(("+$+"[%]?)\\s*,\\s*("+$+"[%]?)\\s*,\\s*("+$+"[%]?)(?:\\s*,\\s*("+$+"))?\\)",W="rgb[a]?\\((?:"+$+"[%]?)\\s*,\\s*(?:"+$+"[%]?)\\s*,\\s*(?:"+$+"[%]?)(?:\\s*,\\s*(?:"+$+"))?\\)",U="hsl[a]?\\(("+$+")\\s*,\\s*("+$+"[%])\\s*,\\s*("+$+"[%])(?:\\s*,\\s*("+$+"))?\\)",H="hsl[a]?\\((?:"+$+")\\s*,\\s*(?:"+$+"[%])\\s*,\\s*(?:"+$+"[%])(?:\\s*,\\s*(?:"+$+"))?\\)",V="\\#[0-9a-fA-F]{3}",X="\\#[0-9a-fA-F]{6}",K=function(t,e){return t<e?-1:t>e?1:0},Z=function(t,e){return-1*K(t,e)},Q=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(null!=r)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];t[a]=r[a]}}return t},J=function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var e,n,r,i=16;return 4===t.length?(e=parseInt(t[1]+t[1],i),n=parseInt(t[2]+t[2],i),r=parseInt(t[3]+t[3],i)):(e=parseInt(t[1]+t[2],i),n=parseInt(t[3]+t[4],i),r=parseInt(t[5]+t[6],i)),[e,n,r]}},tt=function(t){var e,n,r,i,o,a,s,l;function c(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var u=new RegExp("^"+U+"$").exec(t);if(u){if((n=parseInt(u[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(r=parseFloat(u[2]))<0||r>100||(r/=100,(i=parseFloat(u[3]))<0||i>100)||(i/=100,void 0!==(o=u[4])&&((o=parseFloat(o))<0||o>1)))return;if(0===r)a=s=l=Math.round(255*i);else{var h=i<.5?i*(1+r):i+r-i*r,d=2*i-h;a=Math.round(255*c(d,h,n+1/3)),s=Math.round(255*c(d,h,n)),l=Math.round(255*c(d,h,n-1/3))}e=[a,s,l,o]}return e},et=function(t){var e,n=new RegExp("^"+Y+"$").exec(t);if(n){e=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;e.push(Math.floor(o))}var a=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(a&&!s)return;var l=n[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;e.push(l)}}return e},nt=function(t){return it[t.toLowerCase()]},rt=function(t){return(C(t)?t:null)||nt(t)||J(t)||et(t)||tt(t)},it={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ot=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(_(o))throw Error("Tried to set map with object key");i<n.length-1?(null==e[o]&&(e[o]={}),e=e[o]):e[o]=t.value}},at=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(_(o))throw Error("Tried to get map with object key");if(null==(e=e[o]))return e}return e};function st(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var lt=st,ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n<"u"?n:typeof self<"u"?self:{};function ut(t,e){return t(e={exports:{}},e.exports),e.exports}var ht="object"==typeof ct&&ct&&ct.Object===Object&&ct,dt=ht,pt="object"==typeof self&&self&&self.Object===Object&&self,ft=dt||pt||Function("return this")(),gt=ft,yt=function(){return gt.Date.now()},mt=yt,vt=/\s/;function bt(t){for(var e=t.length;e--&&vt.test(t.charAt(e)););return e}var xt=bt,Ct=/^\s+/;function _t(t){return t&&t.slice(0,xt(t)+1).replace(Ct,"")}var wt=_t,kt=gt.Symbol,Tt=kt,Et=Object.prototype,St=Et.hasOwnProperty,At=Et.toString,Lt=Tt?Tt.toStringTag:void 0;function Dt(t){var e=St.call(t,Lt),n=t[Lt];try{t[Lt]=void 0;var r=!0}catch{}var i=At.call(t);return r&&(e?t[Lt]=n:delete t[Lt]),i}var Bt=Dt,Ft=Object.prototype,Nt=Ft.toString;function It(t){return Nt.call(t)}var Ot=It,Mt="[object Null]",Pt="[object Undefined]",Rt=Tt?Tt.toStringTag:void 0;function zt(t){return null==t?void 0===t?Pt:Mt:Rt&&Rt in Object(t)?Bt(t):Ot(t)}var qt=zt;function jt(t){return null!=t&&"object"==typeof t}var Gt=jt,$t="[object Symbol]";function Yt(t){return"symbol"==typeof t||Gt(t)&&qt(t)==$t}var Wt=Yt,Ut=NaN,Ht=/^[-+]0x[0-9a-f]+$/i,Vt=/^0b[01]+$/i,Xt=/^0o[0-7]+$/i,Kt=parseInt;function Zt(t){if("number"==typeof t)return t;if(Wt(t))return Ut;if(lt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=lt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=wt(t);var n=Vt.test(t);return n||Xt.test(t)?Kt(t.slice(2),n?2:8):Ht.test(t)?Ut:+t}var Qt=Zt,Jt="Expected a function",te=Math.max,ee=Math.min;function ne(t,e,n){var r,i,o,a,s,l,c=0,u=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError(Jt);function p(e){var n=r,o=i;return r=i=void 0,c=e,a=t.apply(o,n)}function f(t){return c=t,s=setTimeout(m,e),u?p(t):a}function g(t){var n=e-(t-l);return h?ee(n,o-(t-c)):n}function y(t){var n=t-l;return void 0===l||n>=e||n<0||h&&t-c>=o}function m(){var t=mt();if(y(t))return v(t);s=setTimeout(m,g(t))}function v(t){return s=void 0,d&&r?p(t):(r=i=void 0,a)}function b(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0}function x(){return void 0===s?a:v(mt())}function C(){var t=mt(),n=y(t);if(r=arguments,i=this,l=t,n){if(void 0===s)return f(l);if(h)return clearTimeout(s),s=setTimeout(m,e),p(l)}return void 0===s&&(s=setTimeout(m,e)),a}return e=Qt(e)||0,lt(n)&&(u=!!n.leading,o=(h="maxWait"in n)?te(Qt(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),C.cancel=b,C.flush=x,C}var re=ne,ie=d?d.performance:null,oe=ie&&ie.now?function(){return ie.now()}:function(){return Date.now()},ae=function(){if(d){if(d.requestAnimationFrame)return function(t){d.requestAnimationFrame(t)};if(d.mozRequestAnimationFrame)return function(t){d.mozRequestAnimationFrame(t)};if(d.webkitRequestAnimationFrame)return function(t){d.webkitRequestAnimationFrame(t)};if(d.msRequestAnimationFrame)return function(t){d.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout((function(){t(oe())}),1e3/60)}}(),se=function(t){return ae(t)},le=oe,ce=9261,ue=65599,he=5381,de=function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce;!(e=t.next()).done;)n=n*ue+e.value|0;return n},pe=function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce)*ue+t|0},fe=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he;return(e<<5)+e+t|0},ge=function(t,e){return 2097152*t+e},ye=function(t){return 2097152*t[0]+t[1]},me=function(t,e){return[pe(t[0],e[0]),fe(t[1],e[1])]},ve=function(t,e){var n={value:0,done:!1},r=0,i=t.length;return de({next:function(){return r<i?n.value=t[r++]:n.done=!0,n}},e)},be=function(t,e){var n={value:0,done:!1},r=0,i=t.length;return de({next:function(){return r<i?n.value=t.charCodeAt(r++):n.done=!0,n}},e)},xe=function(){return Ce(arguments)},Ce=function(t){for(var e,n=0;n<t.length;n++){var r=t[n];e=0===n?be(r):be(r,e)}return e},_e=!0,we=null!=console.warn,ke=null!=console.trace,Te=Number.MAX_SAFE_INTEGER||9007199254740991,Ee=function(){return!0},Se=function(){return!1},Ae=function(){return 0},Le=function(){},De=function(t){throw new Error(t)},Be=function(t){if(void 0===t)return _e;_e=!!t},Fe=function(t){Be()&&(we?console.warn(t):(console.log(t),ke&&console.trace()))},Ne=function(t){return Q({},t)},Ie=function(t){return null==t?t:C(t)?t.slice():_(t)?Ne(t):t},Oe=function(t){return t.slice()},Me=function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e},Pe={},Re=function(){return Pe},ze=function(t){var e=Object.keys(t);return function(n){for(var r={},i=0;i<e.length;i++){var o=e[i],a=null==n?void 0:n[o];r[o]=void 0===a?t[o]:a}return r}},qe=function(t,e,n){for(var r=t.length-1;r>=0&&(t[r]!==e||(t.splice(r,1),!n));r--);},je=function(t){t.splice(0,t.length)},Ge=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.push(r)}},$e=function(t,e,n){return n&&(e=j(n,e)),t[e]},Ye=function(t,e,n,r){n&&(e=j(n,e)),t[e]=r},We=function(){function t(){e(this,t),this._obj={}}return i(t,[{key:"set",value:function(t,e){return this._obj[t]=e,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return void 0!==this._obj[t]}},{key:"get",value:function(t){return this._obj[t]}}]),t}(),Ue=typeof Map<"u"?Map:We,He="undefined",Ve=function(){function t(n){if(e(this,t),this._obj=Object.create(null),this.size=0,null!=n){var r;r=null!=n.instanceString&&n.instanceString()===this.instanceString()?n.toArray():n;for(var i=0;i<r.length;i++)this.add(r[i])}}return i(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var e=this._obj;1!==e[t]&&(e[t]=1,this.size++)}},{key:"delete",value:function(t){var e=this._obj;1===e[t]&&(e[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return 1===this._obj[t]}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter((function(e){return t.has(e)}))}},{key:"forEach",value:function(t,e){return this.toArray().forEach(t,e)}}]),t}(),Xe=(typeof Set>"u"?"undefined":t(Set))!==He?Set:Ve,Ke=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==t&&void 0!==e&&D(t)){var r=e.group;if(null==r&&(r=e.data&&null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"===r||"edges"===r){this.length=1,this[0]=this;var i=this._private={cy:t,single:!0,data:e.data||{},position:e.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!e.selected,selectable:void 0===e.selectable||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:void 0===e.grabbable||!!e.grabbable,pannable:void 0===e.pannable?"edges"===r:!!e.pannable,active:!1,classes:new Xe,animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[],parent:e.parent&&e.parent.isNode()?e.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),e.renderedPosition){var o=e.renderedPosition,a=t.pan(),s=t.zoom();i.position={x:(o.x-a.x)/s,y:(o.y-a.y)/s}}var l=[];C(e.classes)?l=e.classes:b(e.classes)&&(l=e.classes.split(/\s+/));for(var c=0,u=l.length;c<u;c++){var h=l[c];!h||""===h||i.classes.add(h)}this.createEmitter();var d=e.style||e.css;d&&(Fe("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d)),(void 0===n||n)&&this.restore()}else De("An element must be of type `nodes` or `edges`; you specified `"+r+"`")}else De("An element must have a core reference and parameters set")},Ze=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,n,r){var i;_(e)&&!S(e)&&(e=(i=e).roots||i.root,n=i.visit,r=i.directed),r=2!==arguments.length||x(n)?r:n,n=x(n)?n:function(){};for(var o,a=this._private.cy,s=e=b(e)?this.filter(e):e,l=[],c=[],u={},h={},d={},p=0,f=this.byGroup(),g=f.nodes,y=f.edges,m=0;m<s.length;m++){var v=s[m],C=v.id();v.isNode()&&(l.unshift(v),t.bfs&&(d[C]=!0,c.push(v)),h[C]=0)}for(var w=function(){var e=t.bfs?l.shift():l.pop(),i=e.id();if(t.dfs){if(d[i])return"continue";d[i]=!0,c.push(e)}var a=h[i],s=u[i],f=null!=s?s.source():null,m=null!=s?s.target():null,v=null==s?void 0:e.same(f)?m[0]:f[0],b=void 0;if(!0===(b=n(e,s,v,p++,a)))return o=e,"break";if(!1===b)return"break";for(var x=e.connectedEdges().filter((function(t){return(!r||t.source().same(e))&&y.has(t)})),C=0;C<x.length;C++){var _=x[C],w=_.connectedNodes().filter((function(t){return!t.same(e)&&g.has(t)})),k=w.id();0!==w.length&&!d[k]&&(w=w[0],l.push(w),t.bfs&&(d[k]=!0,c.push(w)),u[k]=_,h[k]=h[i]+1)}};0!==l.length;){var k=w();if("continue"!==k&&"break"===k)break}for(var T=a.collection(),E=0;E<c.length;E++){var A=c[E],L=u[A.id()];null!=L&&T.push(L),T.push(A)}return{path:a.collection(T),found:a.collection(o)}}},Qe={breadthFirstSearch:Ze({bfs:!0}),depthFirstSearch:Ze({dfs:!0})};Qe.bfs=Qe.breadthFirstSearch,Qe.dfs=Qe.depthFirstSearch;var Je=ut((function(t,e){(function(){var e,n,r,i,o,a,s,l,c,u,h,d,p,f,g,y;r=Math.floor,u=Math.min,n=function(t,e){return t<e?-1:t>e?1:0},c=function(t,e,i,o,a){var s;if(null==i&&(i=0),null==a&&(a=n),i<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);i<o;)a(e,t[s=r((i+o)/2)])<0?o=s:i=s+1;return[].splice.apply(t,[i,i-i].concat(e)),e},a=function(t,e,r){return null==r&&(r=n),t.push(e),f(t,0,t.length-1,r)},o=function(t,e){var r,i;return null==e&&(e=n),r=t.pop(),t.length?(i=t[0],t[0]=r,g(t,0,e)):i=r,i},l=function(t,e,r){var i;return null==r&&(r=n),i=t[0],t[0]=e,g(t,0,r),i},s=function(t,e,r){var i;return null==r&&(r=n),t.length&&r(t[0],e)<0&&(e=(i=[t[0],e])[0],t[0]=i[1],g(t,0,r)),e},i=function(t,e){var i,o,a,s,l,c;for(null==e&&(e=n),s=function(){c=[];for(var e=0,n=r(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)c.push(e);return c}.apply(this).reverse(),l=[],o=0,a=s.length;o<a;o++)i=s[o],l.push(g(t,i,e));return l},p=function(t,e,r){var i;if(null==r&&(r=n),-1!==(i=t.indexOf(e)))return f(t,0,i,r),g(t,i,r)},h=function(t,e,r){var o,a,l,c,u;if(null==r&&(r=n),!(a=t.slice(0,e)).length)return a;for(i(a,r),l=0,c=(u=t.slice(e)).length;l<c;l++)o=u[l],s(a,o,r);return a.sort(r).reverse()},d=function(t,e,r){var a,s,l,h,d,p,f,g,y;if(null==r&&(r=n),10*e<=t.length){if(!(l=t.slice(0,e).sort(r)).length)return l;for(s=l[l.length-1],h=0,p=(f=t.slice(e)).length;h<p;h++)r(a=f[h],s)<0&&(c(l,a,0,null,r),l.pop(),s=l[l.length-1]);return l}for(i(t,r),y=[],d=0,g=u(e,t.length);0<=g?d<g:d>g;0<=g?++d:--d)y.push(o(t,r));return y},f=function(t,e,r,i){var o,a,s;for(null==i&&(i=n),o=t[r];r>e&&i(o,a=t[s=r-1>>1])<0;)t[r]=a,r=s;return t[r]=o},g=function(t,e,r){var i,o,a,s,l;for(null==r&&(r=n),o=t.length,l=e,a=t[e],i=2*e+1;i<o;)(s=i+1)<o&&!(r(t[i],t[s])<0)&&(i=s),t[e]=t[i],i=2*(e=i)+1;return t[e]=a,f(t,l,e,r)},e=function(){function t(t){this.cmp=t??n,this.nodes=[]}return t.push=a,t.pop=o,t.replace=l,t.pushpop=s,t.heapify=i,t.updateItem=p,t.nlargest=h,t.nsmallest=d,t.prototype.push=function(t){return a(this.nodes,t,this.cmp)},t.prototype.pop=function(){return o(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return l(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return s(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return i(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return p(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),y=function(){return e},t.exports=y()}).call(ct)})),tn=Je,en=ze({root:null,weight:function(t){return 1},directed:!1}),nn={dijkstra:function(t){if(!_(t)){var e=arguments;t={root:e[0],weight:e[1],directed:e[2]}}var n=en(t),r=n.root,i=n.weight,o=n.directed,a=this,s=i,l=b(r)?this.filter(r)[0]:r[0],c={},u={},h={},d=this.byGroup(),p=d.nodes,f=d.edges;f.unmergeBy((function(t){return t.isLoop()}));for(var g=function(t){return c[t.id()]},y=function(t,e){c[t.id()]=e,m.updateItem(t)},m=new tn((function(t,e){return g(t)-g(e)})),v=0;v<p.length;v++){var x=p[v];c[x.id()]=x.same(l)?0:1/0,m.push(x)}for(var C=function(t,e){for(var n,r=(o?t.edgesTo(e):t.edgesWith(e)).intersect(f),i=1/0,a=0;a<r.length;a++){var l=r[a],c=s(l);(c<i||!n)&&(i=c,n=l)}return{edge:n,dist:i}};m.size()>0;){var w=m.pop(),k=g(w),T=w.id();if(h[T]=k,k!==1/0)for(var E=w.neighborhood().intersect(p),S=0;S<E.length;S++){var A=E[S],L=A.id(),D=C(w,A),B=k+D.dist;B<g(A)&&(y(A,B),u[L]={node:w,edge:D.edge})}}return{distanceTo:function(t){var e=b(t)?p.filter(t)[0]:t[0];return h[e.id()]},pathTo:function(t){var e=b(t)?p.filter(t)[0]:t[0],n=[],r=e,i=r.id();if(e.length>0)for(n.unshift(e);u[i];){var o=u[i];n.unshift(o.edge),n.unshift(o.node),i=(r=o.node).id()}return a.spawn(n)}}}},rn={kruskal:function(t){t=t||function(t){return 1};for(var e=this.byGroup(),n=e.nodes,r=e.edges,i=n.length,o=new Array(i),a=n,s=function(t){for(var e=0;e<o.length;e++)if(o[e].has(t))return e},l=0;l<i;l++)o[l]=this.spawn(n[l]);for(var c=r.sort((function(e,n){return t(e)-t(n)})),u=0;u<c.length;u++){var h=c[u],d=h.source()[0],p=h.target()[0],f=s(d),g=s(p),y=o[f],m=o[g];f!==g&&(a.merge(h),y.merge(m),o.splice(g,1))}return a}},on=ze({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),an={aStar:function(t){var e=this.cy(),n=on(t),r=n.root,i=n.goal,o=n.heuristic,a=n.directed,s=n.weight;r=e.collection(r)[0],i=e.collection(i)[0];var l,c,u=r.id(),h=i.id(),d={},p={},f={},g=new tn((function(t,e){return p[t.id()]-p[e.id()]})),y=new Xe,m={},v={},b=function(t,e){g.push(t),y.add(e)},x=function(){l=g.pop(),c=l.id(),y.delete(c)},C=function(t){return y.has(t)};b(r,u),d[u]=0,p[u]=o(r);for(var _=0;g.size()>0;){if(x(),_++,c===h){for(var w=[],k=i,T=h,E=v[T];w.unshift(k),null!=E&&w.unshift(E),null!=(k=m[T]);)E=v[T=k.id()];return{found:!0,distance:d[c],path:this.spawn(w),steps:_}}f[c]=!0;for(var S=l._private.edges,A=0;A<S.length;A++){var L=S[A];if(this.hasElementWithId(L.id())&&(!a||L.data("source")===c)){var D=L.source(),B=L.target(),F=D.id()!==c?D:B,N=F.id();if(this.hasElementWithId(N)&&!f[N]){var I=d[c]+s(L);if(!C(N)){d[N]=I,p[N]=I+o(F),b(F,N),m[N]=l,v[N]=L;continue}I<d[N]&&(d[N]=I,p[N]=I+o(F),m[N]=l,v[N]=L)}}}}return{found:!1,distance:void 0,path:void 0,steps:_}}},sn=ze({weight:function(t){return 1},directed:!1}),ln={floydWarshall:function(t){for(var e=this.cy(),n=sn(t),r=n.weight,i=n.directed,o=r,a=this.byGroup(),s=a.nodes,l=a.edges,c=s.length,u=c*c,h=function(t){return s.indexOf(t)},d=function(t){return s[t]},p=new Array(u),f=0;f<u;f++){var g=f%c,y=(f-g)/c;p[f]=y===g?0:1/0}for(var m=new Array(u),v=new Array(u),x=0;x<l.length;x++){var C=l[x],_=C.source()[0],w=C.target()[0];if(_!==w){var k=h(_),T=h(w),E=k*c+T,S=o(C);if(p[E]>S&&(p[E]=S,m[E]=T,v[E]=C),!i){var A=T*c+k;!i&&p[A]>S&&(p[A]=S,m[A]=k,v[A]=C)}}}for(var L=0;L<c;L++)for(var D=0;D<c;D++)for(var B=D*c+L,F=0;F<c;F++){var N=D*c+F,I=L*c+F;p[B]+p[I]<p[N]&&(p[N]=p[B]+p[I],m[N]=m[B])}var O=function(t){return(b(t)?e.filter(t):t)[0]},M=function(t){return h(O(t))},P={distance:function(t,e){var n=M(t),r=M(e);return p[n*c+r]},path:function(t,n){var r=M(t),i=M(n),o=d(r);if(r===i)return o.collection();if(null==m[r*c+i])return e.collection();var a,s=e.collection(),l=r;for(s.merge(o);r!==i;)l=r,r=m[r*c+i],a=v[l*c+r],s.merge(a),s.merge(d(r));return s}};return P}},cn=ze({weight:function(t){return 1},directed:!1,root:null}),un={bellmanFord:function(t){var e=this,n=cn(t),r=n.weight,i=n.directed,o=n.root,a=r,s=this,l=this.cy(),c=this.byGroup(),u=c.edges,h=c.nodes,d=h.length,p=new Ue,f=!1,g=[];o=l.collection(o)[0],u.unmergeBy((function(t){return t.isLoop()}));for(var y=u.length,m=function(t){var e=p.get(t.id());return e||(e={},p.set(t.id(),e)),e},v=function(t){return(b(t)?l.$(t):t)[0]},x=function(t){return m(v(t)).dist},C=function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r=[],i=v(t);;){if(null==i)return e.spawn();var a=m(i),l=a.edge,c=a.pred;if(r.unshift(i[0]),i.same(n)&&r.length>0)break;null!=l&&r.unshift(l),i=c}return s.spawn(r)},_=0;_<d;_++){var w=h[_],k=m(w);w.same(o)?k.dist=0:k.dist=1/0,k.pred=null,k.edge=null}for(var T=!1,E=function(t,e,n,r,i,o){var a=r.dist+o;a<i.dist&&!n.same(r.edge)&&(i.dist=a,i.pred=t,i.edge=n,T=!0)},S=1;S<d;S++){T=!1;for(var A=0;A<y;A++){var L=u[A],D=L.source(),B=L.target(),F=a(L),N=m(D),I=m(B);E(D,B,L,N,I,F),i||E(B,D,L,I,N,F)}if(!T)break}if(T)for(var O=[],M=0;M<y;M++){var P=u[M],R=P.source(),z=P.target(),q=a(P),j=m(R).dist,G=m(z).dist;if(j+q<G||!i&&G+q<j){if(f||(Fe("Graph contains a negative weight cycle for Bellman-Ford"),f=!0),!1===t.findNegativeWeightCycles)break;var $=[];j+q<G&&$.push(R),!i&&G+q<j&&$.push(z);for(var Y=$.length,W=0;W<Y;W++){var U=$[W],H=[U];H.push(m(U).edge);for(var V=m(U).pred;-1===H.indexOf(V);)H.push(V),H.push(m(V).edge),V=m(V).pred;for(var X=(H=H.slice(H.indexOf(V)))[0].id(),K=0,Z=2;Z<H.length;Z+=2)H[Z].id()<X&&(X=H[Z].id(),K=Z);(H=H.slice(K).concat(H.slice(0,K))).push(H[0]);var Q=H.map((function(t){return t.id()})).join(",");-1===O.indexOf(Q)&&(g.push(s.spawn(H)),O.push(Q))}}}return{distanceTo:x,pathTo:C,hasNegativeWeightCycle:f,negativeWeightCycles:g}}},hn=Math.sqrt(2),dn=function(t,e,n){0===n.length&&De("Karger-Stein must be run on a connected (sub)graph");for(var r=n[t],i=r[1],o=r[2],a=e[i],s=e[o],l=n,c=l.length-1;c>=0;c--){var u=l[c],h=u[1],d=u[2];(e[h]===a&&e[d]===s||e[h]===s&&e[d]===a)&&l.splice(c,1)}for(var p=0;p<l.length;p++){var f=l[p];f[1]===s?(l[p]=f.slice(),l[p][1]=a):f[2]===s&&(l[p]=f.slice(),l[p][2]=a)}for(var g=0;g<e.length;g++)e[g]===s&&(e[g]=a);return l},pn=function(t,e,n,r){for(;n>r;){var i=Math.floor(Math.random()*e.length);e=dn(i,t,e),n--}return e},fn={kargerStein:function(){var t=this,e=this.byGroup(),n=e.nodes,r=e.edges;r.unmergeBy((function(t){return t.isLoop()}));var i=n.length,o=r.length,a=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),s=Math.floor(i/hn);if(!(i<2)){for(var l=[],c=0;c<o;c++){var u=r[c];l.push([c,n.indexOf(u.source()),n.indexOf(u.target())])}for(var h=1/0,d=[],p=new Array(i),f=new Array(i),g=new Array(i),y=function(t,e){for(var n=0;n<i;n++)e[n]=t[n]},m=0;m<=a;m++){for(var v=0;v<i;v++)f[v]=v;var b=pn(f,l.slice(),i,s),x=b.slice();y(f,g);var C=pn(f,b,s,2),_=pn(g,x,s,2);C.length<=_.length&&C.length<h?(h=C.length,d=C,y(f,p)):_.length<=C.length&&_.length<h&&(h=_.length,d=_,y(g,p))}for(var w=this.spawn(d.map((function(t){return r[t[0]]}))),k=this.spawn(),T=this.spawn(),E=p[0],S=0;S<p.length;S++){var A=p[S],L=n[S];A===E?k.merge(L):T.merge(L)}var D=function(e){var n=t.spawn();return e.forEach((function(e){n.merge(e),e.connectedEdges().forEach((function(e){t.contains(e)&&!w.contains(e)&&n.merge(e)}))})),n},B=[D(k),D(T)];return{cut:w,components:B,partition1:k,partition2:T}}De("At least 2 nodes are required for Karger-Stein algorithm")}},gn=function(t){return{x:t.x,y:t.y}},yn=function(t,e,n){return{x:t.x*e+n.x,y:t.y*e+n.y}},mn=function(t,e,n){return{x:(t.x-n.x)/e,y:(t.y-n.y)/e}},vn=function(t){return{x:t[0],y:t[1]}},bn=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=1/0,i=e;i<n;i++){var o=t[i];isFinite(o)&&(r=Math.min(o,r))}return r},xn=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=-1/0,i=e;i<n;i++){var o=t[i];isFinite(o)&&(r=Math.max(o,r))}return r},Cn=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=0,i=0,o=e;o<n;o++){var a=t[o];isFinite(a)&&(r+=a,i++)}return r/i},_n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(n<t.length&&t.splice(n,t.length-n),e>0&&t.splice(0,e)):t=t.slice(e,n);for(var o=0,a=t.length-1;a>=0;a--){var s=t[a];i?isFinite(s)||(t[a]=-1/0,o++):t.splice(a,1)}r&&t.sort((function(t,e){return t-e}));var l=t.length,c=Math.floor(l/2);return l%2!=0?t[c+1+o]:(t[c-1+o]+t[c+o])/2},wn=function(t){return Math.PI*t/180},kn=function(t,e){return Math.atan2(e,t)-Math.PI/2},Tn=Math.log2||function(t){return Math.log(t)/Math.log(2)},En=function(t){return t>0?1:t<0?-1:0},Sn=function(t,e){return Math.sqrt(An(t,e))},An=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},Ln=function(t){for(var e=t.length,n=0,r=0;r<e;r++)n+=t[r];for(var i=0;i<e;i++)t[i]=t[i]/n;return t},Dn=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},Bn=function(t,e,n,r){return{x:Dn(t.x,e.x,n.x,r),y:Dn(t.y,e.y,n.y,r)}},Fn=function(t,e,n,r){var i={x:e.x-t.x,y:e.y-t.y},o=Sn(t,e),a={x:i.x/o,y:i.y/o};return n=n??0,r=r??n*o,{x:t.x+a.x*r,y:t.y+a.y*r}},Nn=function(t,e,n){return Math.max(t,Math.min(n,e))},In=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},On=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}},Mn=function(t){t.x1=1/0,t.y1=1/0,t.x2=-1/0,t.y2=-1/0,t.w=0,t.h=0},Pn=function(t,e,n){return{x1:t.x1+e,x2:t.x2+e,y1:t.y1+n,y2:t.y2+n,w:t.w,h:t.h}},Rn=function(t,e){t.x1=Math.min(t.x1,e.x1),t.x2=Math.max(t.x2,e.x2),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,e.y1),t.y2=Math.max(t.y2,e.y2),t.h=t.y2-t.y1},zn=function(t,e,n){t.x1=Math.min(t.x1,e),t.x2=Math.max(t.x2,e),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,n),t.y2=Math.max(t.y2,n),t.h=t.y2-t.y1},qn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},jn=function(t){var e,n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===o.length)e=n=r=i=o[0];else if(2===o.length)e=r=o[0],i=n=o[1];else if(4===o.length){var s=a(o,4);e=s[0],n=s[1],r=s[2],i=s[3]}return t.x1-=i,t.x2+=n,t.y1-=e,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},Gn=function(t,e){t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},$n=function(t,e){return!(t.x1>e.x2||e.x1>t.x2||t.x2<e.x1||e.x2<t.x1||t.y2<e.y1||e.y2<t.y1||t.y1>e.y2||e.y1>t.y2)},Yn=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},Wn=function(t,e){return Yn(t,e.x,e.y)},Un=function(t,e){return Yn(t,e.x1,e.y1)&&Yn(t,e.x2,e.y2)},Hn=function(t,e,n,r,i,o,a){var s,l=yr(i,o),c=i/2,u=o/2,h=r-u-a;if((s=cr(t,e,n,r,n-c+l-a,h,n+c-l+a,h,!1)).length>0)return s;var d=n+c+a;if((s=cr(t,e,n,r,d,r-u+l-a,d,r+u-l+a,!1)).length>0)return s;var p=r+u+a;if((s=cr(t,e,n,r,n-c+l-a,p,n+c-l+a,p,!1)).length>0)return s;var f,g=n-c-a;if((s=cr(t,e,n,r,g,r-u+l-a,g,r+u-l+a,!1)).length>0)return s;var y=n-c+l,m=r-u+l;if((f=sr(t,e,n,r,y,m,l+a)).length>0&&f[0]<=y&&f[1]<=m)return[f[0],f[1]];var v=n+c-l,b=r-u+l;if((f=sr(t,e,n,r,v,b,l+a)).length>0&&f[0]>=v&&f[1]<=b)return[f[0],f[1]];var x=n+c-l,C=r+u-l;if((f=sr(t,e,n,r,x,C,l+a)).length>0&&f[0]>=x&&f[1]>=C)return[f[0],f[1]];var _=n-c+l,w=r+u-l;return(f=sr(t,e,n,r,_,w,l+a)).length>0&&f[0]<=_&&f[1]>=w?[f[0],f[1]]:[]},Vn=function(t,e,n,r,i,o,a){var s=a,l=Math.min(n,i),c=Math.max(n,i),u=Math.min(r,o),h=Math.max(r,o);return l-s<=t&&t<=c+s&&u-s<=e&&e<=h+s},Xn=function(t,e,n,r,i,o,a,s,l){var c={x1:Math.min(n,a,i)-l,x2:Math.max(n,a,i)+l,y1:Math.min(r,s,o)-l,y2:Math.max(r,s,o)+l};return!(t<c.x1||t>c.x2||e<c.y1||e>c.y2)},Kn=function(t,e,n,r){var i=e*e-4*t*(n-=r);if(i<0)return[];var o=Math.sqrt(i),a=2*t;return[(-e+o)/a,(-e-o)/a]},Zn=function(t,e,n,r,i){var o,a,s,l,c,u,h,d;return 0===t&&(t=1e-5),s=-27*(r/=t)+(e/=t)*(9*(n/=t)-e*e*2),o=(a=(3*n-e*e)/9)*a*a+(s/=54)*s,i[1]=0,h=e/3,o>0?(c=(c=s+Math.sqrt(o))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),u=(u=s-Math.sqrt(o))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=-h+c+u,h+=(c+u)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-u+c)/2,i[3]=h,void(i[5]=-h)):(i[5]=i[3]=0,0===o?(d=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=2*d-h,void(i[4]=i[2]=-(d+h))):(l=(a=-a)*a*a,l=Math.acos(s/Math.sqrt(l)),d=2*Math.sqrt(a),i[0]=-h+d*Math.cos(l/3),i[2]=-h+d*Math.cos((l+2*Math.PI)/3),void(i[4]=-h+d*Math.cos((l+4*Math.PI)/3))))},Qn=function(t,e,n,r,i,o,a,s){var l=[];Zn(1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s,9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,3*n*n-6*n*i+n*a-n*t+2*i*i+2*i*t-a*t+3*r*r-6*r*o+r*s-r*e+2*o*o+2*o*e-s*e,1*n*i-n*n+n*t-i*t+r*o-r*r+r*e-o*e,l);for(var c=1e-7,u=[],h=0;h<6;h+=2)Math.abs(l[h+1])<c&&l[h]>=0&&l[h]<=1&&u.push(l[h]);u.push(1),u.push(0);for(var d,p,f,g=-1,y=0;y<u.length;y++)d=Math.pow(1-u[y],2)*n+2*(1-u[y])*u[y]*i+u[y]*u[y]*a,p=Math.pow(1-u[y],2)*r+2*(1-u[y])*u[y]*o+u[y]*u[y]*s,f=Math.pow(d-t,2)+Math.pow(p-e,2),g>=0?f<g&&(g=f):g=f;return g},Jn=function(t,e,n,r,i,o){var a=[t-n,e-r],s=[i-n,o-r],l=s[0]*s[0]+s[1]*s[1],c=a[0]*a[0]+a[1]*a[1],u=a[0]*s[0]+a[1]*s[1],h=u*u/l;return u<0?c:h>l?(t-i)*(t-i)+(e-o)*(e-o):c-h},tr=function(t,e,n){for(var r,i,o,a,s=0,l=0;l<n.length/2;l++)if(r=n[2*l],i=n[2*l+1],l+1<n.length/2?(o=n[2*(l+1)],a=n[2*(l+1)+1]):(o=n[2*(l+1-n.length/2)],a=n[2*(l+1-n.length/2)+1]),r!=t||o!=t){if(!(r>=t&&t>=o||r<=t&&t<=o))continue;(t-r)/(o-r)*(a-i)+i>e&&s++}return s%2!=0},er=function(t,e,n,r,i,o,a,s,l){var c,u,h=new Array(n.length);null!=s[0]?(c=Math.atan(s[1]/s[0]),s[0]<0?c+=Math.PI/2:c=-c-Math.PI/2):c=s;for(var d=Math.cos(-c),p=Math.sin(-c),f=0;f<h.length/2;f++)h[2*f]=o/2*(n[2*f]*d-n[2*f+1]*p),h[2*f+1]=a/2*(n[2*f+1]*d+n[2*f]*p),h[2*f]+=r,h[2*f+1]+=i;if(l>0){var g=ir(h,-l);u=rr(g)}else u=h;return tr(t,e,u)},nr=function(t,e,n,r,i,o,a){for(var s=new Array(n.length),l=o/2,c=a/2,u=mr(o,a),h=u*u,d=0;d<n.length/4;d++){var p=void 0,f=void 0;p=0===d?n.length-2:4*d-2,f=4*d+2;var g=r+l*n[4*d],y=i+c*n[4*d+1],m=-n[p]*n[f]-n[p+1]*n[f+1],v=u/Math.tan(Math.acos(m)/2),b=g-v*n[p],x=y-v*n[p+1],C=g+v*n[f],_=y+v*n[f+1];s[4*d]=b,s[4*d+1]=x,s[4*d+2]=C,s[4*d+3]=_;var w=n[p+1],k=-n[p];w*n[f]+k*n[f+1]<0&&(w*=-1,k*=-1);var T=b+w*u,E=x+k*u;if(Math.pow(T-t,2)+Math.pow(E-e,2)<=h)return!0}return tr(t,e,s)},rr=function(t){for(var e,n,r,i,o,a,s,l,c=new Array(t.length/2),u=0;u<t.length/4;u++){e=t[4*u],n=t[4*u+1],r=t[4*u+2],i=t[4*u+3],u<t.length/4-1?(o=t[4*(u+1)],a=t[4*(u+1)+1],s=t[4*(u+1)+2],l=t[4*(u+1)+3]):(o=t[0],a=t[1],s=t[2],l=t[3]);var h=cr(e,n,r,i,o,a,s,l,!0);c[2*u]=h[0],c[2*u+1]=h[1]}return c},ir=function(t,e){for(var n,r,i,o,a=new Array(2*t.length),s=0;s<t.length/2;s++){n=t[2*s],r=t[2*s+1],s<t.length/2-1?(i=t[2*(s+1)],o=t[2*(s+1)+1]):(i=t[0],o=t[1]);var l=o-r,c=-(i-n),u=Math.sqrt(l*l+c*c),h=l/u,d=c/u;a[4*s]=n+h*e,a[4*s+1]=r+d*e,a[4*s+2]=i+h*e,a[4*s+3]=o+d*e}return a},or=function(t,e,n,r,i,o){var a=n-t,s=r-e;a/=i,s/=o;var l=Math.sqrt(a*a+s*s),c=l-1;if(c<0)return[];var u=c/l;return[(n-t)*u+t,(r-e)*u+e]},ar=function(t,e,n,r,i,o,a){return t-=i,e-=o,(t/=n/2+a)*t+(e/=r/2+a)*e<=1},sr=function(t,e,n,r,i,o,a){var s=[n-t,r-e],l=[t-i,e-o],c=s[0]*s[0]+s[1]*s[1],u=2*(l[0]*s[0]+l[1]*s[1]),h=u*u-4*c*(l[0]*l[0]+l[1]*l[1]-a*a);if(h<0)return[];var d=(-u+Math.sqrt(h))/(2*c),p=(-u-Math.sqrt(h))/(2*c),f=Math.min(d,p),g=Math.max(d,p),y=[];if(f>=0&&f<=1&&y.push(f),g>=0&&g<=1&&y.push(g),0===y.length)return[];var m=y[0]*s[0]+t,v=y[0]*s[1]+e;return y.length>1?y[0]==y[1]?[m,v]:[m,v,y[1]*s[0]+t,y[1]*s[1]+e]:[m,v]},lr=function(t,e,n){return e<=t&&t<=n||n<=t&&t<=e?t:t<=e&&e<=n||n<=e&&e<=t?e:n},cr=function(t,e,n,r,i,o,a,s,l){var c=t-i,u=n-t,h=a-i,d=e-o,p=r-e,f=s-o,g=h*d-f*c,y=u*d-p*c,m=f*u-h*p;if(0!==m){var v=g/m,b=y/m,x=.001,C=0-x,_=1+x;return C<=v&&v<=_&&C<=b&&b<=_||l?[t+v*u,e+v*p]:[]}return 0===g||0===y?lr(t,n,a)===a?[a,s]:lr(t,n,i)===i?[i,o]:lr(i,a,n)===n?[n,r]:[]:[]},ur=function(t,e,n,r,i,o,a,s){var l,c,u=[],h=new Array(n.length),d=!0;if(null==o&&(d=!1),d){for(var p=0;p<h.length/2;p++)h[2*p]=n[2*p]*o+r,h[2*p+1]=n[2*p+1]*a+i;if(s>0){var f=ir(h,-s);c=rr(f)}else c=h}else c=n;for(var g,y,m,v,b=0;b<c.length/2;b++)g=c[2*b],y=c[2*b+1],b<c.length/2-1?(m=c[2*(b+1)],v=c[2*(b+1)+1]):(m=c[0],v=c[1]),0!==(l=cr(t,e,r,i,g,y,m,v)).length&&u.push(l[0],l[1]);return u},hr=function(t,e,n,r,i,o,a,s){for(var l,c=[],u=new Array(n.length),h=o/2,d=a/2,p=mr(o,a),f=0;f<n.length/4;f++){var g=void 0,y=void 0;g=0===f?n.length-2:4*f-2,y=4*f+2;var m=r+h*n[4*f],v=i+d*n[4*f+1],b=-n[g]*n[y]-n[g+1]*n[y+1],x=p/Math.tan(Math.acos(b)/2),C=m-x*n[g],_=v-x*n[g+1],w=m+x*n[y],k=v+x*n[y+1];0===f?(u[n.length-2]=C,u[n.length-1]=_):(u[4*f-2]=C,u[4*f-1]=_),u[4*f]=w,u[4*f+1]=k;var T=n[g+1],E=-n[g];T*n[y]+E*n[y+1]<0&&(T*=-1,E*=-1),0!==(l=sr(t,e,r,i,C+T*p,_+E*p,p)).length&&c.push(l[0],l[1])}for(var S=0;S<u.length/4;S++)0!==(l=cr(t,e,r,i,u[4*S],u[4*S+1],u[4*S+2],u[4*S+3],!1)).length&&c.push(l[0],l[1]);if(c.length>2){for(var A=[c[0],c[1]],L=Math.pow(A[0]-t,2)+Math.pow(A[1]-e,2),D=1;D<c.length/2;D++){var B=Math.pow(c[2*D]-t,2)+Math.pow(c[2*D+1]-e,2);B<=L&&(A[0]=c[2*D],A[1]=c[2*D+1],L=B)}return A}return c},dr=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[e[0]+o*r[0],e[1]+o*r[1]]},pr=function(t,e){var n=gr(t,e);return n=fr(n)},fr=function(t){for(var e,n,r=t.length/2,i=1/0,o=1/0,a=-1/0,s=-1/0,l=0;l<r;l++)e=t[2*l],n=t[2*l+1],i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);for(var c=2/(a-i),u=2/(s-o),h=0;h<r;h++)e=t[2*h]=t[2*h]*c,n=t[2*h+1]=t[2*h+1]*u,i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);if(o<-1)for(var d=0;d<r;d++)n=t[2*d+1]=t[2*d+1]+(-1-o);return t},gr=function(t,e){var n=1/t*2*Math.PI,r=t%2==0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i,o=new Array(2*t),a=0;a<t;a++)i=a*n+r,o[2*a]=Math.cos(i),o[2*a+1]=Math.sin(-i);return o},yr=function(t,e){return Math.min(t/4,e/4,8)},mr=function(t,e){return Math.min(t/10,e/10,8)},vr=function(){return 8},br=function(t,e,n){return[t-2*e+n,2*(e-t),t]},xr=function(t,e){return{heightOffset:Math.min(15,.05*e),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},Cr=ze({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),_r={pageRank:function(t){for(var e=Cr(t),n=e.dampingFactor,r=e.precision,i=e.iterations,o=e.weight,a=this._private.cy,s=this.byGroup(),l=s.nodes,c=s.edges,u=l.length,h=u*u,d=c.length,p=new Array(h),f=new Array(u),g=(1-n)/u,y=0;y<u;y++){for(var m=0;m<u;m++)p[y*u+m]=0;f[y]=0}for(var v=0;v<d;v++){var b=c[v],x=b.data("source"),C=b.data("target");if(x!==C){var _=l.indexOfId(x),w=l.indexOfId(C),k=o(b);p[w*u+_]+=k,f[_]+=k}}for(var T=1/u+g,E=0;E<u;E++)if(0===f[E])for(var S=0;S<u;S++)p[S*u+E]=T;else for(var A=0;A<u;A++){var L=A*u+E;p[L]=p[L]/f[E]+g}for(var D,B=new Array(u),F=new Array(u),N=0;N<u;N++)B[N]=1;for(var I=0;I<i;I++){for(var O=0;O<u;O++)F[O]=0;for(var M=0;M<u;M++)for(var P=0;P<u;P++){var R=M*u+P;F[M]+=p[R]*B[P]}Ln(F),D=B,B=F,F=D;for(var z=0,q=0;q<u;q++){var j=D[q]-B[q];z+=j*j}if(z<r)break}var G={rank:function(t){return t=a.collection(t)[0],B[l.indexOf(t)]}};return G}},wr=ze({root:null,weight:function(t){return 1},directed:!1,alpha:0}),kr={degreeCentralityNormalized:function(t){t=wr(t);var e=this.cy(),n=this.nodes(),r=n.length;if(t.directed){for(var i={},o={},a=0,s=0,l=0;l<r;l++){var c=n[l],u=c.id();t.root=c;var h=this.degreeCentrality(t);a<h.indegree&&(a=h.indegree),s<h.outdegree&&(s=h.outdegree),i[u]=h.indegree,o[u]=h.outdegree}return{indegree:function(t){return 0==a?0:(b(t)&&(t=e.filter(t)),i[t.id()]/a)},outdegree:function(t){return 0===s?0:(b(t)&&(t=e.filter(t)),o[t.id()]/s)}}}for(var d={},p=0,f=0;f<r;f++){var g=n[f];t.root=g;var y=this.degreeCentrality(t);p<y.degree&&(p=y.degree),d[g.id()]=y.degree}return{degree:function(t){return 0===p?0:(b(t)&&(t=e.filter(t)),d[t.id()]/p)}}},degreeCentrality:function(t){t=wr(t);var e=this.cy(),n=this,r=t,i=r.root,o=r.weight,a=r.directed,s=r.alpha;if(i=e.collection(i)[0],a){for(var l=i.connectedEdges(),c=l.filter((function(t){return t.target().same(i)&&n.has(t)})),u=l.filter((function(t){return t.source().same(i)&&n.has(t)})),h=c.length,d=u.length,p=0,f=0,g=0;g<c.length;g++)p+=o(c[g]);for(var y=0;y<u.length;y++)f+=o(u[y]);return{indegree:Math.pow(h,1-s)*Math.pow(p,s),outdegree:Math.pow(d,1-s)*Math.pow(f,s)}}for(var m=i.connectedEdges().intersection(n),v=m.length,b=0,x=0;x<m.length;x++)b+=o(m[x]);return{degree:Math.pow(v,1-s)*Math.pow(b,s)}}};kr.dc=kr.degreeCentrality,kr.dcn=kr.degreeCentralityNormalised=kr.degreeCentralityNormalized;var Tr=ze({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Er={closenessCentralityNormalized:function(t){for(var e=Tr(t),n=e.harmonic,r=e.weight,i=e.directed,o=this.cy(),a={},s=0,l=this.nodes(),c=this.floydWarshall({weight:r,directed:i}),u=0;u<l.length;u++){for(var h=0,d=l[u],p=0;p<l.length;p++)if(u!==p){var f=c.distance(d,l[p]);h+=n?1/f:f}n||(h=1/h),s<h&&(s=h),a[d.id()]=h}return{closeness:function(t){return 0==s?0:(t=b(t)?o.filter(t)[0].id():t.id(),a[t]/s)}}},closenessCentrality:function(t){var e=Tr(t),n=e.root,r=e.weight,i=e.directed,o=e.harmonic;n=this.filter(n)[0];for(var a=this.dijkstra({root:n,weight:r,directed:i}),s=0,l=this.nodes(),c=0;c<l.length;c++){var u=l[c];if(!u.same(n)){var h=a.distanceTo(u);s+=o?1/h:h}}return o?s:1/s}};Er.cc=Er.closenessCentrality,Er.ccn=Er.closenessCentralityNormalised=Er.closenessCentralityNormalized;var Sr=ze({weight:null,directed:!1}),Ar={betweennessCentrality:function(t){for(var e=Sr(t),n=e.directed,r=e.weight,i=null!=r,o=this.cy(),a=this.nodes(),s={},l={},c=0,u={set:function(t,e){l[t]=e,e>c&&(c=e)},get:function(t){return l[t]}},h=0;h<a.length;h++){var d=a[h],p=d.id();s[p]=n?d.outgoers().nodes():d.openNeighborhood().nodes(),u.set(p,0)}for(var f=function(t){for(var e=a[t].id(),n=[],l={},c={},h={},d=new tn((function(t,e){return h[t]-h[e]})),p=0;p<a.length;p++){var f=a[p].id();l[f]=[],c[f]=0,h[f]=1/0}for(c[e]=1,h[e]=0,d.push(e);!d.empty();){var g=d.pop();if(n.push(g),i)for(var y=0;y<s[g].length;y++){var m=s[g][y],v=o.getElementById(g),b=void 0;b=v.edgesTo(m).length>0?v.edgesTo(m)[0]:m.edgesTo(v)[0];var x=r(b);m=m.id(),h[m]>h[g]+x&&(h[m]=h[g]+x,d.nodes.indexOf(m)<0?d.push(m):d.updateItem(m),c[m]=0,l[m]=[]),h[m]==h[g]+x&&(c[m]=c[m]+c[g],l[m].push(g))}else for(var C=0;C<s[g].length;C++){var _=s[g][C].id();h[_]==1/0&&(d.push(_),h[_]=h[g]+1),h[_]==h[g]+1&&(c[_]=c[_]+c[g],l[_].push(g))}}for(var w={},k=0;k<a.length;k++)w[a[k].id()]=0;for(;n.length>0;){for(var T=n.pop(),E=0;E<l[T].length;E++){var S=l[T][E];w[S]=w[S]+c[S]/c[T]*(1+w[T])}T!=a[t].id()&&u.set(T,u.get(T)+w[T])}},g=0;g<a.length;g++)f(g);var y={betweenness:function(t){var e=o.collection(t).id();return u.get(e)},betweennessNormalized:function(t){if(0==c)return 0;var e=o.collection(t).id();return u.get(e)/c}};return y.betweennessNormalised=y.betweennessNormalized,y}};Ar.bc=Ar.betweennessCentrality;var Lr=ze({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),Dr=function(t){return Lr(t)},Br=function(t,e){for(var n=0,r=0;r<e.length;r++)n+=e[r](t);return n},Fr=function(t,e,n){for(var r=0;r<e;r++)t[r*e+r]=n},Nr=function(t,e){for(var n,r=0;r<e;r++){n=0;for(var i=0;i<e;i++)n+=t[i*e+r];for(var o=0;o<e;o++)t[o*e+r]=t[o*e+r]/n}},Ir=function(t,e,n){for(var r=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)r[i*n+o]=0;for(var a=0;a<n;a++)for(var s=0;s<n;s++)r[i*n+s]+=t[i*n+a]*e[a*n+s]}return r},Or=function(t,e,n){for(var r=t.slice(0),i=1;i<n;i++)t=Ir(t,r,e);return t},Mr=function(t,e,n){for(var r=new Array(e*e),i=0;i<e*e;i++)r[i]=Math.pow(t[i],n);return Nr(r,e),r},Pr=function(t,e,n,r){for(var i=0;i<n;i++)if(Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r)!=Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r))return!1;return!0},Rr=function(t,e,n,r){for(var i=[],o=0;o<e;o++){for(var a=[],s=0;s<e;s++)Math.round(1e3*t[o*e+s])/1e3>0&&a.push(n[s]);0!==a.length&&i.push(r.collection(a))}return i},zr=function(t,e){for(var n=0;n<t.length;n++)if(!e[n]||t[n].id()!==e[n].id())return!1;return!0},qr=function(t){for(var e=0;e<t.length;e++)for(var n=0;n<t.length;n++)e!=n&&zr(t[e],t[n])&&t.splice(n,1);return t},jr=function(t){for(var e=this.nodes(),n=this.edges(),r=this.cy(),i=Dr(t),o={},a=0;a<e.length;a++)o[e[a].id()]=a;for(var s,l=e.length,c=l*l,u=new Array(c),h=0;h<c;h++)u[h]=0;for(var d=0;d<n.length;d++){var p=n[d],f=o[p.source().id()],g=o[p.target().id()],y=Br(p,i.attributes);u[f*l+g]+=y,u[g*l+f]+=y}Fr(u,l,i.multFactor),Nr(u,l);for(var m=!0,v=0;m&&v<i.maxIterations;)m=!1,s=Or(u,l,i.expandFactor),u=Mr(s,l,i.inflateFactor),Pr(u,s,c,4)||(m=!0),v++;var b=Rr(u,l,e,r);return b=qr(b)},Gr={markovClustering:jr,mcl:jr},$r=function(t){return t},Yr=function(t,e){return Math.abs(e-t)},Wr=function(t,e,n){return t+Yr(e,n)},Ur=function(t,e,n){return t+Math.pow(n-e,2)},Hr=function(t){return Math.sqrt(t)},Vr=function(t,e,n){return Math.max(t,Yr(e,n))},Xr=function(t,e,n,r,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$r,a=r,s=0;s<t;s++)a=i(a,e(s),n(s));return o(a)},Kr={euclidean:function(t,e,n){return t>=2?Xr(t,e,n,0,Ur,Hr):Xr(t,e,n,0,Wr)},squaredEuclidean:function(t,e,n){return Xr(t,e,n,0,Ur)},manhattan:function(t,e,n){return Xr(t,e,n,0,Wr)},max:function(t,e,n){return Xr(t,e,n,-1/0,Vr)}};function Zr(t,e,n,r,i,o){var a;return a=x(t)?t:Kr[t]||Kr.euclidean,0===e&&x(t)?a(i,o):a(e,n,r,i,o)}Kr["squared-euclidean"]=Kr.squaredEuclidean,Kr.squaredeuclidean=Kr.squaredEuclidean;var Qr=ze({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Jr=function(t){return Qr(t)},ti=function(t,e,n,r,i){var o="kMedoids"!==i?function(t){return n[t]}:function(t){return r[t](n)},a=function(t){return r[t](e)},s=n,l=e;return Zr(t,r.length,o,a,s,l)},ei=function(t,e,n){for(var r=n.length,i=new Array(r),o=new Array(r),a=new Array(e),s=null,l=0;l<r;l++)i[l]=t.min(n[l]).value,o[l]=t.max(n[l]).value;for(var c=0;c<e;c++){s=[];for(var u=0;u<r;u++)s[u]=Math.random()*(o[u]-i[u])+i[u];a[c]=s}return a},ni=function(t,e,n,r,i){for(var o=1/0,a=0,s=0;s<e.length;s++){var l=ti(n,t,e[s],r,i);l<o&&(o=l,a=s)}return a},ri=function(t,e,n){for(var r=[],i=null,o=0;o<e.length;o++)n[(i=e[o]).id()]===t&&r.push(i);return r},ii=function(t,e,n){return Math.abs(e-t)<=n},oi=function(t,e,n){for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)if(Math.abs(t[r][i]-e[r][i])>n)return!1;return!0},ai=function(t,e,n){for(var r=0;r<n;r++)if(t===e[r])return!0;return!1},si=function(t,e){var n=new Array(e);if(t.length<50)for(var r=0;r<e;r++){for(var i=t[Math.floor(Math.random()*t.length)];ai(i,n,r);)i=t[Math.floor(Math.random()*t.length)];n[r]=i}else for(var o=0;o<e;o++)n[o]=t[Math.floor(Math.random()*t.length)];return n},li=function(t,e,n){for(var r=0,i=0;i<e.length;i++)r+=ti("manhattan",e[i],t,n,"kMedoids");return r},ci=function(e){var n,r=this.cy(),i=this.nodes(),o=null,a=Jr(e),s=new Array(a.k),l={};a.testMode?"number"==typeof a.testCentroids?(a.testCentroids,n=ei(i,a.k,a.attributes)):n="object"===t(a.testCentroids)?a.testCentroids:ei(i,a.k,a.attributes):n=ei(i,a.k,a.attributes);for(var c=!0,u=0;c&&u<a.maxIterations;){for(var h=0;h<i.length;h++)l[(o=i[h]).id()]=ni(o,n,a.distance,a.attributes,"kMeans");c=!1;for(var d=0;d<a.k;d++){var p=ri(d,i,l);if(0!==p.length){for(var f=a.attributes.length,g=n[d],y=new Array(f),m=new Array(f),v=0;v<f;v++){m[v]=0;for(var b=0;b<p.length;b++)o=p[b],m[v]+=a.attributes[v](o);y[v]=m[v]/p.length,ii(y[v],g[v],a.sensitivityThreshold)||(c=!0)}n[d]=y,s[d]=r.collection(p)}}u++}return s},ui=function(e){var n,r,i=this.cy(),o=this.nodes(),a=null,s=Jr(e),l=new Array(s.k),c={},u=new Array(s.k);s.testMode?"number"==typeof s.testCentroids||(n="object"===t(s.testCentroids)?s.testCentroids:si(o,s.k)):n=si(o,s.k);for(var h=!0,d=0;h&&d<s.maxIterations;){for(var p=0;p<o.length;p++)c[(a=o[p]).id()]=ni(a,n,s.distance,s.attributes,"kMedoids");h=!1;for(var f=0;f<n.length;f++){var g=ri(f,o,c);if(0!==g.length){u[f]=li(n[f],g,s.attributes);for(var y=0;y<g.length;y++)(r=li(g[y],g,s.attributes))<u[f]&&(u[f]=r,n[f]=g[y],h=!0);l[f]=i.collection(g)}}d++}return l},hi=function(t,e,n,r,i){for(var o,a,s=0;s<e.length;s++)for(var l=0;l<t.length;l++)r[s][l]=Math.pow(n[s][l],i.m);for(var c=0;c<t.length;c++)for(var u=0;u<i.attributes.length;u++){o=0,a=0;for(var h=0;h<e.length;h++)o+=r[h][c]*i.attributes[u](e[h]),a+=r[h][c];t[c][u]=o/a}},di=function(t,e,n,r,i){for(var o=0;o<t.length;o++)e[o]=t[o].slice();for(var a,s,l,c=2/(i.m-1),u=0;u<n.length;u++)for(var h=0;h<r.length;h++){a=0;for(var d=0;d<n.length;d++)s=ti(i.distance,r[h],n[u],i.attributes,"cmeans"),l=ti(i.distance,r[h],n[d],i.attributes,"cmeans"),a+=Math.pow(s/l,c);t[h][u]=1/a}},pi=function(t,e,n,r){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var a,s,l=0;l<e.length;l++){a=-1/0,s=-1;for(var c=0;c<e[0].length;c++)e[l][c]>a&&(a=e[l][c],s=c);i[s].push(t[l])}for(var u=0;u<i.length;u++)i[u]=r.collection(i[u]);return i},fi=function(t){var e,n,r,i,o=this.cy(),a=this.nodes(),s=Jr(t);r=new Array(a.length);for(var l=0;l<a.length;l++)r[l]=new Array(s.k);n=new Array(a.length);for(var c=0;c<a.length;c++)n[c]=new Array(s.k);for(var u=0;u<a.length;u++){for(var h=0,d=0;d<s.k;d++)n[u][d]=Math.random(),h+=n[u][d];for(var p=0;p<s.k;p++)n[u][p]=n[u][p]/h}e=new Array(s.k);for(var f=0;f<s.k;f++)e[f]=new Array(s.attributes.length);i=new Array(a.length);for(var g=0;g<a.length;g++)i[g]=new Array(s.k);for(var y=!0,m=0;y&&m<s.maxIterations;)y=!1,hi(e,a,n,i,s),di(n,r,e,a,s),oi(n,r,s.sensitivityThreshold)||(y=!0),m++;return{clusters:pi(a,n,s,o),degreeOfMembership:n}},gi={kMeans:ci,kMedoids:ui,fuzzyCMeans:fi,fcm:fi},yi=ze({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),mi={single:"min",complete:"max"},vi=function(t){var e=yi(t),n=mi[e.linkage];return null!=n&&(e.linkage=n),e},bi=function(t,e,n,r,i){for(var o,a=0,s=1/0,l=i.attributes,c=function(t,e){return Zr(i.distance,l.length,(function(e){return l[e](t)}),(function(t){return l[t](e)}),t,e)},u=0;u<t.length;u++){var h=t[u].key,d=n[h][r[h]];d<s&&(a=h,s=d)}if("threshold"===i.mode&&s>=i.threshold||"dendrogram"===i.mode&&1===t.length)return!1;var p,f=e[a],g=e[r[a]];p="dendrogram"===i.mode?{left:f,right:g,key:f.key}:{value:f.value.concat(g.value),key:f.key},t[f.index]=p,t.splice(g.index,1),e[f.key]=p;for(var y=0;y<t.length;y++){var m=t[y];f.key===m.key?o=1/0:"min"===i.linkage?(o=n[f.key][m.key],n[f.key][m.key]>n[g.key][m.key]&&(o=n[g.key][m.key])):"max"===i.linkage?(o=n[f.key][m.key],n[f.key][m.key]<n[g.key][m.key]&&(o=n[g.key][m.key])):o="mean"===i.linkage?(n[f.key][m.key]*f.size+n[g.key][m.key]*g.size)/(f.size+g.size):"dendrogram"===i.mode?c(m.value,f.value):c(m.value[0],f.value[0]),n[f.key][m.key]=n[m.key][f.key]=o}for(var v=0;v<t.length;v++){var b=t[v].key;if(r[b]===f.key||r[b]===g.key){for(var x=b,C=0;C<t.length;C++){var _=t[C].key;n[b][_]<n[b][x]&&(x=_)}r[b]=x}t[v].index=v}return f.key=g.key=f.index=g.index=null,!0},xi=function t(e,n,r){e&&(e.value?n.push(e.value):(e.left&&t(e.left,n),e.right&&t(e.right,n)))},Ci=function t(e,n){if(!e)return"";if(e.left&&e.right){var r=t(e.left,n),i=t(e.right,n),o=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:o.id()}}),n.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}return e.value?e.value.id():void 0},_i=function t(e,n,r){if(!e)return[];var i=[],o=[],a=[];return 0===n?(e.left&&xi(e.left,i),e.right&&xi(e.right,o),a=i.concat(o),[r.collection(a)]):1===n?e.value?[r.collection(e.value)]:(e.left&&xi(e.left,i),e.right&&xi(e.right,o),[r.collection(i),r.collection(o)]):e.value?[r.collection(e.value)]:(e.left&&(i=t(e.left,n-1,r)),e.right&&(o=t(e.right,n-1,r)),i.concat(o))},wi=function(t){for(var e=this.cy(),n=this.nodes(),r=vi(t),i=r.attributes,o=function(t,e){return Zr(r.distance,i.length,(function(e){return i[e](t)}),(function(t){return i[t](e)}),t,e)},a=[],s=[],l=[],c=[],u=0;u<n.length;u++){var h={value:"dendrogram"===r.mode?n[u]:[n[u]],key:u,index:u};a[u]=h,c[u]=h,s[u]=[],l[u]=0}for(var d=0;d<a.length;d++)for(var p=0;p<=d;p++){var f=void 0;f="dendrogram"===r.mode?d===p?1/0:o(a[d].value,a[p].value):d===p?1/0:o(a[d].value[0],a[p].value[0]),s[d][p]=f,s[p][d]=f,f<s[d][l[d]]&&(l[d]=p)}for(var g=bi(a,c,s,l,r);g;)g=bi(a,c,s,l,r);var y;return"dendrogram"===r.mode?(y=_i(a[0],r.dendrogramDepth,e),r.addDendrogram&&Ci(a[0],e)):(y=new Array(a.length),a.forEach((function(t,n){t.key=t.index=null,y[n]=e.collection(t.value)}))),y},ki={hierarchicalClustering:wi,hca:wi},Ti=ze({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Ei=function(t){var e=t.damping,n=t.preference;.5<=e&&e<1||De("Damping must range on [0.5, 1).  Got: ".concat(e));var r=["median","mean","min","max"];return r.some((function(t){return t===n}))||k(n)||De("Preference must be one of [".concat(r.map((function(t){return"'".concat(t,"'")})).join(", "),"] or a number.  Got: ").concat(n)),Ti(t)},Si=function(t,e,n,r){var i=function(t,e){return r[e](t)};return-Zr(t,r.length,(function(t){return i(e,t)}),(function(t){return i(n,t)}),e,n)},Ai=function(t,e){return"median"===e?_n(t):"mean"===e?Cn(t):"min"===e?bn(t):"max"===e?xn(t):e},Li=function(t,e,n){for(var r=[],i=0;i<t;i++)e[i*t+i]+n[i*t+i]>0&&r.push(i);return r},Di=function(t,e,n){for(var r=[],i=0;i<t;i++){for(var o=-1,a=-1/0,s=0;s<n.length;s++){var l=n[s];e[i*t+l]>a&&(o=l,a=e[i*t+l])}o>0&&r.push(o)}for(var c=0;c<n.length;c++)r[n[c]]=n[c];return r},Bi=function(t,e,n){for(var r=Di(t,e,n),i=0;i<n.length;i++){for(var o=[],a=0;a<r.length;a++)r[a]===n[i]&&o.push(a);for(var s=-1,l=-1/0,c=0;c<o.length;c++){for(var u=0,h=0;h<o.length;h++)u+=e[o[h]*t+o[c]];u>l&&(s=c,l=u)}n[i]=o[s]}return r=Di(t,e,n)},Fi=function(t){for(var e=this.cy(),n=this.nodes(),r=Ei(t),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var a,s,l,c,u,h,d;s=(a=n.length)*a,l=new Array(s);for(var p=0;p<s;p++)l[p]=-1/0;for(var f=0;f<a;f++)for(var g=0;g<a;g++)f!==g&&(l[f*a+g]=Si(r.distance,n[f],n[g],r.attributes));c=Ai(l,r.preference);for(var y=0;y<a;y++)l[y*a+y]=c;u=new Array(s);for(var m=0;m<s;m++)u[m]=0;h=new Array(s);for(var v=0;v<s;v++)h[v]=0;for(var b=new Array(a),x=new Array(a),C=new Array(a),_=0;_<a;_++)b[_]=0,x[_]=0,C[_]=0;for(var w=new Array(a*r.minIterations),k=0;k<w.length;k++)w[k]=0;for(d=0;d<r.maxIterations;d++){for(var T=0;T<a;T++){for(var E=-1/0,S=-1/0,A=-1,L=0,D=0;D<a;D++)b[D]=u[T*a+D],(L=h[T*a+D]+l[T*a+D])>=E?(S=E,E=L,A=D):L>S&&(S=L);for(var B=0;B<a;B++)u[T*a+B]=(1-r.damping)*(l[T*a+B]-E)+r.damping*b[B];u[T*a+A]=(1-r.damping)*(l[T*a+A]-S)+r.damping*b[A]}for(var F=0;F<a;F++){for(var N=0,I=0;I<a;I++)b[I]=h[I*a+F],x[I]=Math.max(0,u[I*a+F]),N+=x[I];N-=x[F],x[F]=u[F*a+F],N+=x[F];for(var O=0;O<a;O++)h[O*a+F]=(1-r.damping)*Math.min(0,N-x[O])+r.damping*b[O];h[F*a+F]=(1-r.damping)*(N-x[F])+r.damping*b[F]}for(var M=0,P=0;P<a;P++){var R=h[P*a+P]+u[P*a+P]>0?1:0;w[d%r.minIterations*a+P]=R,M+=R}if(M>0&&(d>=r.minIterations-1||d==r.maxIterations-1)){for(var z=0,q=0;q<a;q++){C[q]=0;for(var j=0;j<r.minIterations;j++)C[q]+=w[j*a+q];(0===C[q]||C[q]===r.minIterations)&&z++}if(z===a)break}}for(var G=Li(a,u,h),$=Bi(a,l,G),Y={},W=0;W<G.length;W++)Y[G[W]]=[];for(var U=0;U<n.length;U++){var H=$[i[n[U].id()]];null!=H&&Y[H].push(n[U])}for(var V=new Array(G.length),X=0;X<G.length;X++)V[X]=e.collection(Y[G[X]]);return V},Ni={affinityPropagation:Fi,ap:Fi},Ii=ze({root:void 0,directed:!1}),Oi={hierholzer:function(t){if(!_(t)){var e=arguments;t={root:e[0],directed:e[1]}}var n,r,i,o=Ii(t),a=o.root,s=o.directed,l=this,c=!1;a&&(i=b(a)?this.filter(a)[0].id():a[0].id());var u={},h={};s?l.forEach((function(t){var e=t.id();if(t.isNode()){var i=t.indegree(!0),o=t.outdegree(!0),a=i-o,s=o-i;1==a?n?c=!0:n=e:1==s?r?c=!0:r=e:(s>1||a>1)&&(c=!0),u[e]=[],t.outgoers().forEach((function(t){t.isEdge()&&u[e].push(t.id())}))}else h[e]=[void 0,t.target().id()]})):l.forEach((function(t){var e=t.id();t.isNode()?(t.degree(!0)%2&&(n?r?c=!0:r=e:n=e),u[e]=[],t.connectedEdges().forEach((function(t){return u[e].push(t.id())}))):h[e]=[t.source().id(),t.target().id()]}));var d={found:!1,trail:void 0};if(c)return d;if(r&&n)if(s){if(i&&r!=i)return d;i=r}else{if(i&&r!=i&&n!=i)return d;i||(i=r)}else i||(i=l[0].id());var p=function(t){for(var e,n,r,i=t,o=[t];u[i].length;)e=u[i].shift(),n=h[e][0],i!=(r=h[e][1])?(u[r]=u[r].filter((function(t){return t!=e})),i=r):!s&&i!=n&&(u[n]=u[n].filter((function(t){return t!=e})),i=n),o.unshift(e),o.unshift(i);return o},f=[],g=[];for(g=p(i);1!=g.length;)0==u[g[0]].length?(f.unshift(l.getElementById(g.shift())),f.unshift(l.getElementById(g.shift()))):g=p(g.shift()).concat(g);for(var y in f.unshift(l.getElementById(g.shift())),u)if(u[y].length)return d;return d.found=!0,d.trail=this.spawn(f,!0),d}},Mi=function(){var t=this,e={},n=0,r=0,i=[],o=[],a={},s=function(n,r){for(var a=o.length-1,s=[],l=t.spawn();o[a].x!=n||o[a].y!=r;)s.push(o.pop().edge),a--;s.push(o.pop().edge),s.forEach((function(n){var r=n.connectedNodes().intersection(t);l.merge(n),r.forEach((function(n){var r=n.id(),i=n.connectedEdges().intersection(t);l.merge(n),e[r].cutVertex?l.merge(i.filter((function(t){return t.isLoop()}))):l.merge(i)}))})),i.push(l)},l=function l(c,u,h){c===h&&(r+=1),e[u]={id:n,low:n++,cutVertex:!1};var d,p,f,g,y=t.getElementById(u).connectedEdges().intersection(t);0===y.size()?i.push(t.spawn(t.getElementById(u))):y.forEach((function(t){d=t.source().id(),p=t.target().id(),(f=d===u?p:d)!==h&&(g=t.id(),a[g]||(a[g]=!0,o.push({x:u,y:f,edge:t})),f in e?e[u].low=Math.min(e[u].low,e[f].id):(l(c,f,u),e[u].low=Math.min(e[u].low,e[f].low),e[u].id<=e[f].low&&(e[u].cutVertex=!0,s(u,f))))}))};t.forEach((function(t){if(t.isNode()){var n=t.id();n in e||(r=0,l(n,n),e[n].cutVertex=r>1)}}));var c=Object.keys(e).filter((function(t){return e[t].cutVertex})).map((function(e){return t.getElementById(e)}));return{cut:t.spawn(c),components:i}},Pi={hopcroftTarjanBiconnected:Mi,htbc:Mi,htb:Mi,hopcroftTarjanBiconnectedComponents:Mi},Ri=function(){var t=this,e={},n=0,r=[],i=[],o=t.spawn(t),a=function a(s){if(i.push(s),e[s]={index:n,low:n++,explored:!1},t.getElementById(s).connectedEdges().intersection(t).forEach((function(t){var n=t.target().id();n!==s&&(n in e||a(n),e[n].explored||(e[s].low=Math.min(e[s].low,e[n].low)))})),e[s].index===e[s].low){for(var l=t.spawn();;){var c=i.pop();if(l.merge(t.getElementById(c)),e[c].low=e[s].index,e[c].explored=!0,c===s)break}var u=l.edgesWith(l),h=l.merge(u);r.push(h),o=o.difference(h)}};return t.forEach((function(t){if(t.isNode()){var n=t.id();n in e||a(n)}})),{cut:o,components:r}},zi={tarjanStronglyConnected:Ri,tsc:Ri,tscc:Ri,tarjanStronglyConnectedComponents:Ri},qi={};[Qe,nn,rn,an,ln,un,fn,_r,kr,Er,Ar,Gr,gi,ki,Ni,Oi,Pi,zi].forEach((function(t){Q(qi,t)}));
/*!
    Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
    Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
    Licensed under The MIT License (http://opensource.org/licenses/MIT)
    */
var ji=0,Gi=1,$i=2,Yi=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=ji,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Yi.prototype={fulfill:function(t){return Wi(this,Gi,"fulfillValue",t)},reject:function(t){return Wi(this,$i,"rejectReason",t)},then:function(t,e){var n=this,r=new Yi;return n.onFulfilled.push(Vi(t,r,"fulfill")),n.onRejected.push(Vi(e,r,"reject")),Ui(n),r.proxy}};var Wi=function(t,e,n,r){return t.state===ji&&(t.state=e,t[n]=r,Ui(t)),t},Ui=function(t){t.state===Gi?Hi(t,"onFulfilled",t.fulfillValue):t.state===$i&&Hi(t,"onRejected",t.rejectReason)},Hi=function(t,e,n){if(0!==t[e].length){var r=t[e];t[e]=[];var i=function(){for(var t=0;t<r.length;t++)r[t](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},Vi=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(t){return void e.reject(t)}Xi(e,i)}}},Xi=function e(n,r){if(n!==r&&n.proxy!==r){var i;if("object"===t(r)&&null!==r||"function"==typeof r)try{i=r.then}catch(t){return void n.reject(t)}if("function"!=typeof i)n.fulfill(r);else{var o=!1;try{i.call(r,(function(t){o||(o=!0,t===r?n.reject(new TypeError("circular thenable chain")):e(n,t))}),(function(t){o||(o=!0,n.reject(t))}))}catch(t){o||n.reject(t)}}}else n.reject(new TypeError("cannot resolve promise with itself"))};Yi.all=function(t){return new Yi((function(e,n){for(var r=new Array(t.length),i=0,o=function(n,o){r[n]=o,++i===t.length&&e(r)},a=0;a<t.length;a++)!function(e){var r=t[e];null!=r&&null!=r.then?r.then((function(t){o(e,t)}),(function(t){n(t)})):o(e,r)}(a)}))},Yi.resolve=function(t){return new Yi((function(e,n){e(t)}))},Yi.reject=function(t){return new Yi((function(e,n){n(t)}))};var Ki=typeof Promise<"u"?Promise:Yi,Zi=function(t,e,n){var r=D(t),i=!r,o=this._private=Q({duration:1e3},e,n);if(o.target=t,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&x(o.complete)&&o.completes.push(o.complete),i){var a=t.position();o.startPosition=o.startPosition||{x:a.x,y:a.y},o.startStyle=o.startStyle||t.cy().style().getAnimationStartStyle(t,o.style)}if(r){var s=t.pan();o.startPan={x:s.x,y:s.y},o.startZoom=t.zoom()}this.length=1,this[0]=this},Qi=Zi.prototype;Q(Qi,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e=t.target._private.animation;(t.queue?e.queue:e.current).push(this),S(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,n=e.playing;return void 0===t?e.progress:(n&&this.pause(),e.progress=t,e.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(e,n){var r=t[e];null!=r&&(t[e]=t[n],t[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),t.style)for(var r=0;r<t.style.length;r++){var i=t.style[r],o=i.name,a=t.startStyle[o];t.startStyle[o]=i,t.style[r]=a}return e&&this.play(),this},promise:function(t){var e,n=this._private;return e="frame"===t?n.frames:n.completes,new Ki((function(t,n){e.push((function(){t()}))}))}}),Qi.complete=Qi.completed,Qi.run=Qi.play,Qi.running=Qi.playing;var Ji={animated:function(){return function(){var t=this,e=void 0!==t.length?t:[t];if(!(this._private.cy||this).styleEnabled())return!1;var n=e[0];return n?n._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var t=this,e=void 0!==t.length?t:[t];if(!(this._private.cy||this).styleEnabled())return this;for(var n=0;n<e.length;n++)e[n]._private.animation.queue=[];return this}},delay:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(){return function(t,e){var n=this,r=void 0!==n.length,i=r?n:[n],o=this._private.cy||this,a=!r,s=!a;if(!o.styleEnabled())return this;var l=o.style();if(t=Q({},t,e),0===Object.keys(t).length)return new Zi(i[0],t);switch(void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(s&&(t.style=l.getPropsList(t.style||t.css),t.css=void 0),s&&null!=t.renderedPosition){var c=t.renderedPosition,u=o.pan(),h=o.zoom();t.position=mn(c,h,u)}if(a&&null!=t.panBy){var d=t.panBy,p=o.pan();t.pan={x:p.x+d.x,y:p.y+d.y}}var f=t.center||t.centre;if(a&&null!=f){var g=o.getCenterPan(f.eles,t.zoom);null!=g&&(t.pan=g)}if(a&&null!=t.fit){var y=t.fit,m=o.getFitViewport(y.eles||y.boundingBox,y.padding);null!=m&&(t.pan=m.pan,t.zoom=m.zoom)}if(a&&_(t.zoom)){var v=o.getZoomedViewport(t.zoom);null!=v?(v.zoomed&&(t.zoom=v.zoom),v.panned&&(t.pan=v.pan)):t.zoom=null}return new Zi(i[0],t)}},animate:function(){return function(t,e){var n=this,r=void 0!==n.length?n:[n];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=Q({},t,e));for(var i=0;i<r.length;i++){var o=r[i],a=o.animated()&&(void 0===t.queue||t.queue);o.animation(t,a?{queue:!0}:void 0).play()}return this}},stop:function(){return function(t,e){var n=this,r=void 0!==n.length?n:[n],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<r.length;o++){for(var a=r[o]._private,s=a.animation.current,l=0;l<s.length;l++){var c=s[l]._private;e&&(c.duration=0)}t&&(a.animation.queue=[]),e||(a.animation.current=[])}return i.notify("draw"),this}}},to=Array.isArray,eo=to,no=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ro=/^\w*$/;function io(t,e){if(eo(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Wt(t))||ro.test(t)||!no.test(t)||null!=e&&t in Object(e)}var oo=io,ao="[object AsyncFunction]",so="[object Function]",lo="[object GeneratorFunction]",co="[object Proxy]";function uo(t){if(!lt(t))return!1;var e=qt(t);return e==so||e==lo||e==ao||e==co}var ho=uo,po=gt["__core-js_shared__"],fo=po,go=function(){var t=/[^.]+$/.exec(fo&&fo.keys&&fo.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function yo(t){return!!go&&go in t}var mo=yo,vo=Function.prototype,bo=vo.toString;function xo(t){if(null!=t){try{return bo.call(t)}catch{}try{return t+""}catch{}}return""}var Co=xo,_o=/[\\^$.*+?()[\]{}|]/g,wo=/^\[object .+?Constructor\]$/,ko=Function.prototype,To=Object.prototype,Eo=ko.toString,So=To.hasOwnProperty,Ao=RegExp("^"+Eo.call(So).replace(_o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Lo(t){return!(!lt(t)||mo(t))&&(ho(t)?Ao:wo).test(Co(t))}var Do=Lo;function Bo(t,e){return null==t?void 0:t[e]}var Fo=Bo;function No(t,e){var n=Fo(t,e);return Do(n)?n:void 0}var Io=No,Oo=Io(Object,"create"),Mo=Oo;function Po(){this.__data__=Mo?Mo(null):{},this.size=0}var Ro=Po;function zo(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var qo=zo,jo="__lodash_hash_undefined__",Go=Object.prototype.hasOwnProperty;function $o(t){var e=this.__data__;if(Mo){var n=e[t];return n===jo?void 0:n}return Go.call(e,t)?e[t]:void 0}var Yo=$o,Wo=Object.prototype.hasOwnProperty;function Uo(t){var e=this.__data__;return Mo?void 0!==e[t]:Wo.call(e,t)}var Ho=Uo,Vo="__lodash_hash_undefined__";function Xo(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Mo&&void 0===e?Vo:e,this}var Ko=Xo;function Zo(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Zo.prototype.clear=Ro,Zo.prototype.delete=qo,Zo.prototype.get=Yo,Zo.prototype.has=Ho,Zo.prototype.set=Ko;var Qo=Zo;function Jo(){this.__data__=[],this.size=0}var ta=Jo;function ea(t,e){return t===e||t!=t&&e!=e}var na=ea;function ra(t,e){for(var n=t.length;n--;)if(na(t[n][0],e))return n;return-1}var ia=ra,oa=Array.prototype.splice;function aa(t){var e=this.__data__,n=ia(e,t);return!(n<0||(n==e.length-1?e.pop():oa.call(e,n,1),--this.size,0))}var sa=aa;function la(t){var e=this.__data__,n=ia(e,t);return n<0?void 0:e[n][1]}var ca=la;function ua(t){return ia(this.__data__,t)>-1}var ha=ua;function da(t,e){var n=this.__data__,r=ia(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var pa=da;function fa(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}fa.prototype.clear=ta,fa.prototype.delete=sa,fa.prototype.get=ca,fa.prototype.has=ha,fa.prototype.set=pa;var ga=fa,ya=Io(gt,"Map"),ma=ya;function va(){this.size=0,this.__data__={hash:new Qo,map:new(ma||ga),string:new Qo}}var ba=va;function xa(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}var Ca=xa;function _a(t,e){var n=t.__data__;return Ca(e)?n["string"==typeof e?"string":"hash"]:n.map}var wa=_a;function ka(t){var e=wa(this,t).delete(t);return this.size-=e?1:0,e}var Ta=ka;function Ea(t){return wa(this,t).get(t)}var Sa=Ea;function Aa(t){return wa(this,t).has(t)}var La=Aa;function Da(t,e){var n=wa(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Ba=Da;function Fa(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Fa.prototype.clear=ba,Fa.prototype.delete=Ta,Fa.prototype.get=Sa,Fa.prototype.has=La,Fa.prototype.set=Ba;var Na=Fa,Ia="Expected a function";function Oa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Ia);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Oa.Cache||Na),n}Oa.Cache=Na;var Ma=Oa,Pa=500;function Ra(t){var e=Ma(t,(function(t){return n.size===Pa&&n.clear(),t})),n=e.cache;return e}var za=Ra,qa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ja=/\\(\\)?/g,Ga=za((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(qa,(function(t,n,r,i){e.push(r?i.replace(ja,"$1"):n||t)})),e})),$a=Ga;function Ya(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Wa=Ya,Ua=1/0,Ha=Tt?Tt.prototype:void 0,Va=Ha?Ha.toString:void 0;function Xa(t){if("string"==typeof t)return t;if(eo(t))return Wa(t,Xa)+"";if(Wt(t))return Va?Va.call(t):"";var e=t+"";return"0"==e&&1/t==-Ua?"-0":e}var Ka=Xa;function Za(t){return null==t?"":Ka(t)}var Qa=Za;function Ja(t,e){return eo(t)?t:oo(t,e)?[t]:$a(Qa(t))}var ts=Ja,es=1/0;function ns(t){if("string"==typeof t||Wt(t))return t;var e=t+"";return"0"==e&&1/t==-es?"-0":e}var rs=ns;function is(t,e){for(var n=0,r=(e=ts(e,t)).length;null!=t&&n<r;)t=t[rs(e[n++])];return n&&n==r?t:void 0}var os=is;function as(t,e,n){var r=null==t?void 0:os(t,e);return void 0===r?n:r}var ss=as,ls=function(){try{var t=Io(Object,"defineProperty");return t({},"",{}),t}catch{}}(),cs=ls;function us(t,e,n){"__proto__"==e&&cs?cs(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var hs=us,ds=Object.prototype,ps=ds.hasOwnProperty;function fs(t,e,n){var r=t[e];(!ps.call(t,e)||!na(r,n)||void 0===n&&!(e in t))&&hs(t,e,n)}var gs=fs,ys=9007199254740991,ms=/^(?:0|[1-9]\d*)$/;function vs(t,e){var n=typeof t;return!!(e=e??ys)&&("number"==n||"symbol"!=n&&ms.test(t))&&t>-1&&t%1==0&&t<e}var bs=vs;function xs(t,e,n,r){if(!lt(t))return t;for(var i=-1,o=(e=ts(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var l=rs(e[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(i!=a){var u=s[l];void 0===(c=r?r(u,l,s):void 0)&&(c=lt(u)?u:bs(e[i+1])?[]:{})}gs(s,l,c),s=s[l]}return t}var Cs=xs;function _s(t,e,n){return null==t?t:Cs(t,e,n)}var ws=_s;function ks(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Ts=ks;function Es(t){return eo(t)?Wa(t,rs):Wt(t)?[t]:Ts($a(Qa(t)))}var Ss=Es,As={data:function(t){return t=Q({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(t){},beforeSet:function(t,e){},onSet:function(t){},canSet:function(t){return!0}},t),function(e,n){var r=t,i=this,a=void 0!==i.length,s=a?i:[i],l=a?i[0]:i;if(b(e)){var c,u=-1!==e.indexOf(".")&&Ss(e);if(r.allowGetting&&void 0===n)return l&&(r.beforeGet(l),c=u&&void 0===l._private[r.field][e]?ss(l._private[r.field],u):l._private[r.field][e]),c;if(r.allowSetting&&void 0!==n&&!r.immutableKeys[e]){var h=o({},e,n);r.beforeSet(i,h);for(var d=0,p=s.length;d<p;d++){var f=s[d];r.canSet(f)&&(u&&void 0===l._private[r.field][e]?ws(f._private[r.field],u,n):f._private[r.field][e]=n)}r.updateStyle&&i.updateStyle(),r.onSet(i),r.settingTriggersEvent&&i[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&_(e)){var g,y,m=e,v=Object.keys(m);r.beforeSet(i,m);for(var C=0;C<v.length;C++)if(y=m[g=v[C]],!r.immutableKeys[g])for(var w=0;w<s.length;w++){var k=s[w];r.canSet(k)&&(k._private[r.field][g]=y)}r.updateStyle&&i.updateStyle(),r.onSet(i),r.settingTriggersEvent&&i[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&x(e)){var T=e;i.on(r.bindingEvent,T)}else if(r.allowGetting&&void 0===e){var E;return l&&(r.beforeGet(l),E=l._private[r.field]),E}return i}},removeData:function(t){return t=Q({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(e){var n=t,r=this,i=void 0!==r.length?r:[r];if(b(e)){for(var o=e.split(/\s+/),a=o.length,s=0;s<a;s++){var l=o[s];if(!N(l)&&!n.immutableKeys[l])for(var c=0,u=i.length;c<u;c++)i[c]._private[n.field][l]=void 0}n.triggerEvent&&r[n.triggerFnName](n.event)}else if(void 0===e){for(var h=0,d=i.length;h<d;h++)for(var p=i[h]._private[n.field],f=Object.keys(p),g=0;g<f.length;g++){var y=f[g];!n.immutableKeys[y]&&(p[y]=void 0)}n.triggerEvent&&r[n.triggerFnName](n.event)}return r}}},Ls={eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(t,e){var n=this,r=Array.prototype.slice.call(arguments,0);return new Ki((function(t,e){var i=function(e){n.off.apply(n,a),t(e)},o=r.concat([i]),a=o.concat([]);n.on.apply(n,o)}))}}},Ds={};[Ji,As,Ls].forEach((function(t){Q(Ds,t)}));var Bs={animate:Ds.animate(),animation:Ds.animation(),animated:Ds.animated(),clearQueue:Ds.clearQueue(),delay:Ds.delay(),delayAnimation:Ds.delayAnimation(),stop:Ds.stop()},Fs={classes:function(t){var e=this;if(void 0===t){var n=[];return e[0]._private.classes.forEach((function(t){return n.push(t)})),n}C(t)||(t=(t||"").match(/\S+/g)||[]);for(var r=[],i=new Xe(t),o=0;o<e.length;o++){for(var a=e[o],s=a._private,l=s.classes,c=!1,u=0;u<t.length;u++){var h=t[u];if(!l.has(h)){c=!0;break}}c||(c=l.size!==t.length),c&&(s.classes=i,r.push(a))}return r.length>0&&this.spawn(r).updateStyle().emit("class"),e},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes.has(t)},toggleClass:function(t,e){C(t)||(t=t.match(/\S+/g)||[]);for(var n=this,r=void 0===e,i=[],o=0,a=n.length;o<a;o++)for(var s=n[o],l=s._private.classes,c=!1,u=0;u<t.length;u++){var h=t[u],d=l.has(h),p=!1;e||r&&!d?(l.add(h),p=!0):(!e||r&&d)&&(l.delete(h),p=!0),!c&&p&&(i.push(s),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout((function(){n.removeClass(t)}),e),n}};Fs.className=Fs.classNames=Fs.classes;var Ns={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:$,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ns.variable="(?:[\\w-.]|(?:\\\\"+Ns.metaChar+"))+",Ns.className="(?:[\\w-]|(?:\\\\"+Ns.metaChar+"))+",Ns.value=Ns.string+"|"+Ns.number,Ns.id=Ns.variable,function(){var t,e,n;for(t=Ns.comparatorOp.split("|"),n=0;n<t.length;n++)e=t[n],Ns.comparatorOp+="|@"+e;for(t=Ns.comparatorOp.split("|"),n=0;n<t.length;n++)!((e=t[n]).indexOf("!")>=0)&&"="!==e&&(Ns.comparatorOp+="|\\!"+e)}();var Is=function(){return{checks:[]}},Os={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Ms=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort((function(t,e){return Z(t.selector,e.selector)})),Ps=function(){for(var t,e={},n=0;n<Ms.length;n++)e[(t=Ms[n]).selector]=t.matches;return e}(),Rs=function(t,e){return Ps[t](e)},zs="("+Ms.map((function(t){return t.selector})).join("|")+")",qs=function(t){return t.replace(new RegExp("\\\\("+Ns.metaChar+")","g"),(function(t,e){return e}))},js=function(t,e,n){t[t.length-1]=n},Gs=[{name:"group",query:!0,regex:"("+Ns.group+")",populate:function(t,e,n){var r=a(n,1)[0];e.checks.push({type:Os.GROUP,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:zs,populate:function(t,e,n){var r=a(n,1)[0];e.checks.push({type:Os.STATE,value:r})}},{name:"id",query:!0,regex:"\\#("+Ns.id+")",populate:function(t,e,n){var r=a(n,1)[0];e.checks.push({type:Os.ID,value:qs(r)})}},{name:"className",query:!0,regex:"\\.("+Ns.className+")",populate:function(t,e,n){var r=a(n,1)[0];e.checks.push({type:Os.CLASS,value:qs(r)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ns.variable+")\\s*\\]",populate:function(t,e,n){var r=a(n,1)[0];e.checks.push({type:Os.DATA_EXIST,field:qs(r)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ns.variable+")\\s*("+Ns.comparatorOp+")\\s*("+Ns.value+")\\s*\\]",populate:function(t,e,n){var r=a(n,3),i=r[0],o=r[1],s=r[2];s=null!=new RegExp("^"+Ns.string+"$").exec(s)?s.substring(1,s.length-1):parseFloat(s),e.checks.push({type:Os.DATA_COMPARE,field:qs(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ns.boolOp+")\\s*("+Ns.variable+")\\s*\\]",populate:function(t,e,n){var r=a(n,2),i=r[0],o=r[1];e.checks.push({type:Os.DATA_BOOL,field:qs(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ns.meta+")\\s*("+Ns.comparatorOp+")\\s*("+Ns.number+")\\s*\\]\\]",populate:function(t,e,n){var r=a(n,3),i=r[0],o=r[1],s=r[2];e.checks.push({type:Os.META_COMPARE,field:qs(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Ns.separator,populate:function(t,e){var n=t.currentSubject,r=t.edgeCount,i=t.compoundCount,o=t[t.length-1];return null!=n&&(o.subject=n,t.currentSubject=null),o.edgeCount=r,o.compoundCount=i,t.edgeCount=0,t.compoundCount=0,t[t.length++]=Is()}},{name:"directedEdge",separator:!0,regex:Ns.directedEdge,populate:function(t,e){if(null==t.currentSubject){var n=Is(),r=e,i=Is();return n.checks.push({type:Os.DIRECTED_EDGE,source:r,target:i}),js(t,e,n),t.edgeCount++,i}var o=Is(),a=e,s=Is();return o.checks.push({type:Os.NODE_SOURCE,source:a,target:s}),js(t,e,o),t.edgeCount++,s}},{name:"undirectedEdge",separator:!0,regex:Ns.undirectedEdge,populate:function(t,e){if(null==t.currentSubject){var n=Is(),r=e,i=Is();return n.checks.push({type:Os.UNDIRECTED_EDGE,nodes:[r,i]}),js(t,e,n),t.edgeCount++,i}var o=Is(),a=e,s=Is();return o.checks.push({type:Os.NODE_NEIGHBOR,node:a,neighbor:s}),js(t,e,o),s}},{name:"child",separator:!0,regex:Ns.child,populate:function(t,e){if(null==t.currentSubject){var n=Is(),r=Is(),i=t[t.length-1];return n.checks.push({type:Os.CHILD,parent:i,child:r}),js(t,e,n),t.compoundCount++,r}if(t.currentSubject===e){var o=Is(),a=t[t.length-1],s=Is(),l=Is(),c=Is(),u=Is();return o.checks.push({type:Os.COMPOUND_SPLIT,left:a,right:s,subject:l}),l.checks=e.checks,e.checks=[{type:Os.TRUE}],u.checks.push({type:Os.TRUE}),s.checks.push({type:Os.PARENT,parent:u,child:c}),js(t,a,o),t.currentSubject=l,t.compoundCount++,c}var h=Is(),d=Is(),p=[{type:Os.PARENT,parent:h,child:d}];return h.checks=e.checks,e.checks=p,t.compoundCount++,d}},{name:"descendant",separator:!0,regex:Ns.descendant,populate:function(t,e){if(null==t.currentSubject){var n=Is(),r=Is(),i=t[t.length-1];return n.checks.push({type:Os.DESCENDANT,ancestor:i,descendant:r}),js(t,e,n),t.compoundCount++,r}if(t.currentSubject===e){var o=Is(),a=t[t.length-1],s=Is(),l=Is(),c=Is(),u=Is();return o.checks.push({type:Os.COMPOUND_SPLIT,left:a,right:s,subject:l}),l.checks=e.checks,e.checks=[{type:Os.TRUE}],u.checks.push({type:Os.TRUE}),s.checks.push({type:Os.ANCESTOR,ancestor:u,descendant:c}),js(t,a,o),t.currentSubject=l,t.compoundCount++,c}var h=Is(),d=Is(),p=[{type:Os.ANCESTOR,ancestor:h,descendant:d}];return h.checks=e.checks,e.checks=p,t.compoundCount++,d}},{name:"subject",modifier:!0,regex:Ns.subject,populate:function(t,e){if(null!=t.currentSubject&&t.currentSubject!==e)return Fe("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=e;var n=t[t.length-1].checks[0],r=null==n?null:n.type;r===Os.DIRECTED_EDGE?n.type=Os.NODE_TARGET:r===Os.UNDIRECTED_EDGE&&(n.type=Os.NODE_NEIGHBOR,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];Gs.forEach((function(t){return t.regexObj=new RegExp("^"+t.regex)}));var $s=function(t){for(var e,n,r,i=0;i<Gs.length;i++){var o=Gs[i],a=o.name,s=t.match(o.regexObj);if(null!=s){n=s,e=o,r=a;var l=s[0];t=t.substring(l.length);break}}return{expr:e,match:n,name:r,remaining:t}},Ys=function(t){var e=t.match(/^\s+/);if(e){var n=e[0];t=t.substring(n.length)}return t},Ws=function(t){var e=this,n=e.inputText=t,r=e[0]=Is();for(e.length=1,n=Ys(n);;){var i=$s(n);if(null==i.expr)return Fe("The selector `"+t+"`is invalid"),!1;var o=i.match.slice(1),a=i.expr.populate(e,r,o);if(!1===a)return!1;if(null!=a&&(r=a),(n=i.remaining).match(/^\s*$/))break}var s=e[e.length-1];null!=e.currentSubject&&(s.subject=e.currentSubject),s.edgeCount=e.edgeCount,s.compoundCount=e.compoundCount;for(var l=0;l<e.length;l++){var c=e[l];if(c.compoundCount>0&&c.edgeCount>0)return Fe("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Fe("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===c.edgeCount&&Fe("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},Us=function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(t){return t??""},e=function(e){return b(e)?'"'+e+'"':t(e)},n=function(t){return" "+t+" "},r=function(r,o){var a=r.type,s=r.value;switch(a){case Os.GROUP:var l=t(s);return l.substring(0,l.length-1);case Os.DATA_COMPARE:var c=r.field,u=r.operator;return"["+c+n(t(u))+e(s)+"]";case Os.DATA_BOOL:var h=r.operator,d=r.field;return"["+t(h)+d+"]";case Os.DATA_EXIST:return"["+r.field+"]";case Os.META_COMPARE:var p=r.operator;return"[["+r.field+n(t(p))+e(s)+"]]";case Os.STATE:return s;case Os.ID:return"#"+s;case Os.CLASS:return"."+s;case Os.PARENT:case Os.CHILD:return i(r.parent,o)+n(">")+i(r.child,o);case Os.ANCESTOR:case Os.DESCENDANT:return i(r.ancestor,o)+" "+i(r.descendant,o);case Os.COMPOUND_SPLIT:var f=i(r.left,o),g=i(r.subject,o),y=i(r.right,o);return f+(f.length>0?" ":"")+g+y;case Os.TRUE:return""}},i=function(t,e){return t.checks.reduce((function(n,i,o){return n+(e===t&&0===o?"$":"")+r(i,e)}),"")},o="",a=0;a<this.length;a++){var s=this[a];o+=i(s,s.subject),this.length>1&&a<this.length-1&&(o+=", ")}return this.toStringCache=o,o},Hs={parse:Ws,toString:Us},Vs=function(t,e,n){var r,i,o,a=b(t),s=k(t),l=b(n),c=!1,u=!1,h=!1;switch(e.indexOf("!")>=0&&(e=e.replace("!",""),u=!0),e.indexOf("@")>=0&&(e=e.replace("@",""),c=!0),(a||l||c)&&(i=a||s?""+t:"",o=""+n),c&&(t=i=i.toLowerCase(),n=o=o.toLowerCase()),e){case"*=":r=i.indexOf(o)>=0;break;case"$=":r=i.indexOf(o,i.length-o.length)>=0;break;case"^=":r=0===i.indexOf(o);break;case"=":r=t===n;break;case">":h=!0,r=t>n;break;case">=":h=!0,r=t>=n;break;case"<":h=!0,r=t<n;break;case"<=":h=!0,r=t<=n;break;default:r=!1}return u&&(null!=t||!h)&&(r=!r),r},Xs=function(t,e){switch(e){case"?":return!!t;case"!":return!t;case"^":return void 0===t}},Ks=function(t){return void 0!==t},Zs=function(t,e){return t.data(e)},Qs=function(t,e){return t[e]()},Js=[],tl=function(t,e){return t.checks.every((function(t){return Js[t.type](t,e)}))};Js[Os.GROUP]=function(t,e){var n=t.value;return"*"===n||n===e.group()},Js[Os.STATE]=function(t,e){var n=t.value;return Rs(n,e)},Js[Os.ID]=function(t,e){var n=t.value;return e.id()===n},Js[Os.CLASS]=function(t,e){var n=t.value;return e.hasClass(n)},Js[Os.META_COMPARE]=function(t,e){var n=t.field,r=t.operator,i=t.value;return Vs(Qs(e,n),r,i)},Js[Os.DATA_COMPARE]=function(t,e){var n=t.field,r=t.operator,i=t.value;return Vs(Zs(e,n),r,i)},Js[Os.DATA_BOOL]=function(t,e){var n=t.field,r=t.operator;return Xs(Zs(e,n),r)},Js[Os.DATA_EXIST]=function(t,e){var n=t.field;return t.operator,Ks(Zs(e,n))},Js[Os.UNDIRECTED_EDGE]=function(t,e){var n=t.nodes[0],r=t.nodes[1],i=e.source(),o=e.target();return tl(n,i)&&tl(r,o)||tl(r,i)&&tl(n,o)},Js[Os.NODE_NEIGHBOR]=function(t,e){return tl(t.node,e)&&e.neighborhood().some((function(e){return e.isNode()&&tl(t.neighbor,e)}))},Js[Os.DIRECTED_EDGE]=function(t,e){return tl(t.source,e.source())&&tl(t.target,e.target())},Js[Os.NODE_SOURCE]=function(t,e){return tl(t.source,e)&&e.outgoers().some((function(e){return e.isNode()&&tl(t.target,e)}))},Js[Os.NODE_TARGET]=function(t,e){return tl(t.target,e)&&e.incomers().some((function(e){return e.isNode()&&tl(t.source,e)}))},Js[Os.CHILD]=function(t,e){return tl(t.child,e)&&tl(t.parent,e.parent())},Js[Os.PARENT]=function(t,e){return tl(t.parent,e)&&e.children().some((function(e){return tl(t.child,e)}))},Js[Os.DESCENDANT]=function(t,e){return tl(t.descendant,e)&&e.ancestors().some((function(e){return tl(t.ancestor,e)}))},Js[Os.ANCESTOR]=function(t,e){return tl(t.ancestor,e)&&e.descendants().some((function(e){return tl(t.descendant,e)}))},Js[Os.COMPOUND_SPLIT]=function(t,e){return tl(t.subject,e)&&tl(t.left,e)&&tl(t.right,e)},Js[Os.TRUE]=function(){return!0},Js[Os.COLLECTION]=function(t,e){return t.value.has(e)},Js[Os.FILTER]=function(t,e){return(0,t.value)(e)};var el=function(t){var e=this;if(1===e.length&&1===e[0].checks.length&&e[0].checks[0].type===Os.ID)return t.getElementById(e[0].checks[0].value).collection();var n=function(t){for(var n=0;n<e.length;n++){var r=e[n];if(tl(r,t))return!0}return!1};return null==e.text()&&(n=function(){return!0}),t.filter(n)},nl=function(t){for(var e=this,n=0;n<e.length;n++){var r=e[n];if(tl(r,t))return!0}return!1},rl={matches:nl,filter:el},il=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||b(t)&&t.match(/^\s*$/)||(S(t)?this.addQuery({checks:[{type:Os.COLLECTION,value:t.collection()}]}):x(t)?this.addQuery({checks:[{type:Os.FILTER,value:t}]}):b(t)?this.parse(t)||(this.invalid=!0):De("A selector must be created from a string; found "))},ol=il.prototype;[Hs,rl].forEach((function(t){return Q(ol,t)})),ol.text=function(){return this.inputText},ol.size=function(){return this.length},ol.eq=function(t){return this[t]},ol.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},ol.addQuery=function(t){this[this.length++]=t},ol.selector=ol.toString;var al={allAre:function(t){var e=new il(t);return this.every((function(t){return e.matches(t)}))},is:function(t){var e=new il(t);return this.some((function(t){return e.matches(t)}))},some:function(t,e){for(var n=0;n<this.length;n++)if(e?t.apply(e,[this[n],n,this]):t(this[n],n,this))return!0;return!1},every:function(t,e){for(var n=0;n<this.length;n++)if(!(e?t.apply(e,[this[n],n,this]):t(this[n],n,this)))return!1;return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var e=this.length;return e===t.length&&(1===e?this[0]===t[0]:this.every((function(e){return t.hasElementWithId(e.id())})))},anySame:function(t){return t=this.cy().collection(t),this.some((function(e){return t.hasElementWithId(e.id())}))},allAreNeighbors:function(t){t=this.cy().collection(t);var e=this.neighborhood();return t.every((function(t){return e.hasElementWithId(t.id())}))},contains:function(t){t=this.cy().collection(t);var e=this;return t.every((function(t){return e.hasElementWithId(t.id())}))}};al.allAreNeighbours=al.allAreNeighbors,al.has=al.contains,al.equal=al.equals=al.same;var sl,ll,cl=function(t,e){return function(n,r,i,o){var a,s=n,l=this;if(null==s?a="":S(s)&&1===s.length&&(a=s.id()),1===l.length&&a){var c=l[0]._private,u=c.traversalCache=c.traversalCache||{},h=u[e]=u[e]||[],d=be(a);return h[d]||(h[d]=t.call(l,n,r,i,o))}return t.call(l,n,r,i,o)}},ul={parent:function(t){var e=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&e.push(i)}return this.spawn(e,!0).filter(t)},parents:function(t){for(var e=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];e.push(i)}n=n.parent()}return this.spawn(e,!0).filter(t)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var r=this[n].parents();e=(e=e||r).intersect(r)}return e.filter(t)},orphans:function(t){return this.stdFilter((function(t){return t.isOrphan()})).filter(t)},nonorphans:function(t){return this.stdFilter((function(t){return t.isChild()})).filter(t)},children:cl((function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n]._private.children,i=0;i<r.length;i++)e.push(r[i]);return this.spawn(e,!0).filter(t)}),"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var e=[];function n(t){for(var r=0;r<t.length;r++){var i=t[r];e.push(i),i.children().nonempty()&&n(i.children())}}return n(this.children()),this.spawn(e,!0).filter(t)}};function hl(t,e,n,r){for(var i=[],o=new Xe,a=t.cy().hasCompoundNodes(),s=0;s<t.length;s++){var l=t[s];n?i.push(l):a&&r(i,o,l)}for(;i.length>0;){var c=i.shift();e(c),o.add(c.id()),a&&r(i,o,c)}return t}function dl(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];e.has(o.id())||t.push(o)}}function pl(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}function fl(t,e,n){pl(t,e,n),dl(t,e,n)}ul.forEachDown=function(t){return hl(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],dl)},ul.forEachUp=function(t){return hl(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],pl)},ul.forEachUpAndDown=function(t){return hl(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],fl)},ul.ancestors=ul.parents,(sl=ll={data:Ds.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Ds.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Ds.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ds.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Ds.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Ds.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}}).attr=sl.data,sl.removeAttr=sl.removeData;var gl=ll,yl={};function ml(t){return function(e){var n=this;if(void 0===e&&(e=!0),0===n.length);else if(n.isNode()&&!n.removed()){for(var r=0,i=n[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];!e&&s.isLoop()||(r+=t(i,s))}return r}}}function vl(t,e){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o][t](n);void 0!==a&&(void 0===r||e(a,r))&&(r=a)}return r}}Q(yl,{degree:ml((function(t,e){return e.source().same(e.target())?2:1})),indegree:ml((function(t,e){return e.target().same(t)?1:0})),outdegree:ml((function(t,e){return e.source().same(t)?1:0}))}),Q(yl,{minDegree:vl("degree",(function(t,e){return t<e})),maxDegree:vl("degree",(function(t,e){return t>e})),minIndegree:vl("indegree",(function(t,e){return t<e})),maxIndegree:vl("indegree",(function(t,e){return t>e})),minOutdegree:vl("outdegree",(function(t,e){return t<e})),maxOutdegree:vl("outdegree",(function(t,e){return t>e}))}),Q(yl,{totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}});var bl,xl,Cl=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(!i.locked()){var o=i._private.position,a={x:null!=e.x?e.x-o.x:0,y:null!=e.y?e.y-o.y:0};i.isParent()&&!(0===a.x&&0===a.y)&&i.children().shift(a,n),i.dirtyBoundingBoxCache()}}},_l={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,e){Cl(t,e,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};bl=xl={position:Ds.data(_l),silentPosition:Ds.data(Q({},_l,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,e){Cl(t,e,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,e){if(_(t))e?this.silentPosition(t):this.position(t);else if(x(t)){var n=t,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var o=this[i],a=void 0;(a=n(o,i))&&(e?o.silentPosition(a):o.position(a))}r.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,e,n){var r;if(_(t)?(r={x:k(t.x)?t.x:0,y:k(t.y)?t.y:0},n=e):b(t)&&k(e)&&((r={x:0,y:0})[t]=e),null!=r){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o];if(!(i.hasCompoundNodes()&&a.isChild()&&a.ancestors().anySame(this))){var s=a.position(),l={x:s.x+r.x,y:s.y+r.y};n?a.silentPosition(l):a.position(l)}}i.endBatch()}return this},silentShift:function(t,e){return _(t)?this.shift(t,!0):b(t)&&k(e)&&this.shift(t,e,!0),this},renderedPosition:function(t,e){var n=this[0],r=this.cy(),i=r.zoom(),o=r.pan(),a=_(t)?t:void 0,s=void 0!==a||void 0!==e&&b(t);if(n&&n.isNode()){if(!s){var l=n.position();return a=yn(l,i,o),void 0===t?a:a[t]}for(var c=0;c<this.length;c++){var u=this[c];void 0!==e?u.position(t,(e-o[t])/i):void 0!==a&&u.position(mn(a,i,o))}}else if(!s)return;return this},relativePosition:function(t,e){var n=this[0],r=this.cy(),i=_(t)?t:void 0,o=void 0!==i||void 0!==e&&b(t),a=r.hasCompoundNodes();if(n&&n.isNode()){if(!o){var s=n.position(),l=a?n.parent():null,c=l&&l.length>0,u=c;c&&(l=l[0]);var h=u?l.position():{x:0,y:0};return i={x:s.x-h.x,y:s.y-h.y},void 0===t?i:i[t]}for(var d=0;d<this.length;d++){var p=this[d],f=a?p.parent():null,g=f&&f.length>0,y=g;g&&(f=f[0]);var m=y?f.position():{x:0,y:0};void 0!==e?p.position(t,e+m[t]):void 0!==i&&p.position({x:i.x+m.x,y:i.y+m.y})}}else if(!o)return;return this}},bl.modelPosition=bl.point=bl.position,bl.modelPositions=bl.points=bl.positions,bl.renderedPoint=bl.renderedPosition,bl.relativePoint=bl.relativePosition;var wl,kl,Tl=xl;wl=kl={},kl.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),o=e.x1*r+i.x,a=e.x2*r+i.x,s=e.y1*r+i.y,l=e.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:l,w:a-o,h:l-s}},kl.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp((function(e){if(e.isParent()){var n=e._private;n.compoundBoundsClean=!1,n.bbCache=null,t||e.emitAndNotify("bounds")}})),this):this},kl.updateCompoundBounds=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function n(t){if(t.isParent()){var e=t._private,n=t.children(),r="include"===t.pstyle("compound-sizing-wrt-labels").value,i={width:{val:t.pstyle("min-width").pfValue,left:t.pstyle("min-width-bias-left"),right:t.pstyle("min-width-bias-right")},height:{val:t.pstyle("min-height").pfValue,top:t.pstyle("min-height-bias-top"),bottom:t.pstyle("min-height-bias-bottom")}},o=n.boundingBox({includeLabels:r,includeOverlays:!1,useCache:!1}),a=e.position;(0===o.w||0===o.h)&&((o={w:t.pstyle("width").pfValue,h:t.pstyle("height").pfValue}).x1=a.x-o.w/2,o.x2=a.x+o.w/2,o.y1=a.y-o.h/2,o.y2=a.y+o.h/2);var s=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(s=100*s/i.width.val);var l=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(l=100*l/i.width.val);var c=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(c=100*c/i.height.val);var u=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(u=100*u/i.height.val);var h=m(i.width.val-o.w,s,l),d=h.biasDiff,p=h.biasComplementDiff,f=m(i.height.val-o.h,c,u),g=f.biasDiff,y=f.biasComplementDiff;e.autoPadding=v(o.w,o.h,t.pstyle("padding"),t.pstyle("padding-relative-to").value),e.autoWidth=Math.max(o.w,i.width.val),a.x=(-d+o.x1+o.x2+p)/2,e.autoHeight=Math.max(o.h,i.height.val),a.y=(-g+o.y1+o.y2+y)/2}function m(t,e,n){var r=0,i=0,o=e+n;return t>0&&o>0&&(r=e/o*t,i=n/o*t),{biasDiff:r,biasComplementDiff:i}}function v(t,e,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return t>0?n.pfValue*t:0;case"height":return e>0?n.pfValue*e:0;case"average":return t>0&&e>0?n.pfValue*(t+e)/2:0;case"min":return t>0&&e>0?t>e?n.pfValue*e:n.pfValue*t:0;case"max":return t>0&&e>0?t>e?n.pfValue*t:n.pfValue*e:0;default:return 0}}}for(var r=0;r<this.length;r++){var i=this[r],o=i._private;(!o.compoundBoundsClean||t)&&(n(i),e.batching()||(o.compoundBoundsClean=!0))}return this};var El=function(t){return t===1/0||t===-1/0?0:t},Sl=function(t,e,n,r,i){r-e==0||i-n==0||null==e||null==n||null==r||null==i||(t.x1=e<t.x1?e:t.x1,t.x2=r>t.x2?r:t.x2,t.y1=n<t.y1?n:t.y1,t.y2=i>t.y2?i:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},Al=function(t,e){return null==e?t:Sl(t,e.x1,e.y1,e.x2,e.y2)},Ll=function(t,e,n){return $e(t,e,n)},Dl=function(t,e,n){if(!e.cy().headless()){var r,i,o=e._private,a=o.rstyle,s=a.arrowWidth/2;if("none"!==e.pstyle(n+"-arrow-shape").value){"source"===n?(r=a.srcX,i=a.srcY):"target"===n?(r=a.tgtX,i=a.tgtY):(r=a.midX,i=a.midY);var l=o.arrowBounds=o.arrowBounds||{},c=l[n]=l[n]||{};c.x1=r-s,c.y1=i-s,c.x2=r+s,c.y2=i+s,c.w=c.x2-c.x1,c.h=c.y2-c.y1,qn(c,1),Sl(t,c.x1,c.y1,c.x2,c.y2)}}},Bl=function(t,e,n){if(!e.cy().headless()){var r;r=n?n+"-":"";var i=e._private,o=i.rstyle;if(e.pstyle(r+"label").strValue){var a,s,l,c,u=e.pstyle("text-halign"),h=e.pstyle("text-valign"),d=Ll(o,"labelWidth",n),p=Ll(o,"labelHeight",n),f=Ll(o,"labelX",n),g=Ll(o,"labelY",n),y=e.pstyle(r+"text-margin-x").pfValue,m=e.pstyle(r+"text-margin-y").pfValue,v=e.isEdge(),b=e.pstyle(r+"text-rotation"),x=e.pstyle("text-outline-width").pfValue,C=e.pstyle("text-border-width").pfValue/2,_=e.pstyle("text-background-padding").pfValue,w=2,k=p,T=d,E=T/2,S=k/2;if(v)a=f-E,s=f+E,l=g-S,c=g+S;else{switch(u.value){case"left":a=f-T,s=f;break;case"center":a=f-E,s=f+E;break;case"right":a=f,s=f+T}switch(h.value){case"top":l=g-k,c=g;break;case"center":l=g-S,c=g+S;break;case"bottom":l=g,c=g+k}}a+=y-Math.max(x,C)-_-w,s+=y+Math.max(x,C)+_+w,l+=m-Math.max(x,C)-_-w,c+=m+Math.max(x,C)+_+w;var A=n||"main",L=i.labelBounds,D=L[A]=L[A]||{};D.x1=a,D.y1=l,D.x2=s,D.y2=c,D.w=s-a,D.h=c-l;var B=v&&"autorotate"===b.strValue,F=null!=b.pfValue&&0!==b.pfValue;if(B||F){var N=B?Ll(i.rstyle,"labelAngle",n):b.pfValue,I=Math.cos(N),O=Math.sin(N),M=(a+s)/2,P=(l+c)/2;if(!v){switch(u.value){case"left":M=s;break;case"right":M=a}switch(h.value){case"top":P=c;break;case"bottom":P=l}}var R=function(t,e){return{x:(t-=M)*I-(e-=P)*O+M,y:t*O+e*I+P}},z=R(a,l),q=R(a,c),j=R(s,l),G=R(s,c);a=Math.min(z.x,q.x,j.x,G.x),s=Math.max(z.x,q.x,j.x,G.x),l=Math.min(z.y,q.y,j.y,G.y),c=Math.max(z.y,q.y,j.y,G.y)}var $=A+"Rot",Y=L[$]=L[$]||{};Y.x1=a,Y.y1=l,Y.x2=s,Y.y2=c,Y.w=s-a,Y.h=c-l,Sl(t,a,l,s,c),Sl(i.labelBounds.all,a,l,s,c)}return t}},Fl=function(t,e){if(!e.cy().headless()){var n=e.pstyle("outline-opacity").value,r=e.pstyle("outline-width").value;if(n>0&&r>0){var i=e.pstyle("outline-offset").value,o=e.pstyle("shape").value,a=r+i,s=(t.w+2*a)/t.w,l=(t.h+2*a)/t.h,c=0,u=0;["diamond","pentagon","round-triangle"].includes(o)?(s=(t.w+2.4*a)/t.w,u=-a/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?s=(t.w+2.4*a)/t.w:"star"===o?(s=(t.w+2.8*a)/t.w,l=(t.h+2.6*a)/t.h,u=-a/3.8):"triangle"===o?(s=(t.w+2.8*a)/t.w,l=(t.h+2.4*a)/t.h,u=-a/1.4):"vee"===o&&(s=(t.w+4.4*a)/t.w,l=(t.h+3.8*a)/t.h,u=.5*-a);var h=t.h*l-t.h,d=t.w*s-t.w;if(jn(t,[Math.ceil(h/2),Math.ceil(d/2)]),0!=c||0!==u){var p=Pn(t,c,u);Rn(t,p)}}}},Nl=function(t,e){var n,r,i,o,a,s,l=t._private.cy,c=l.styleEnabled(),u=l.headless(),h=In(),d=t._private,p=t.isNode(),f=t.isEdge(),g=d.rstyle,y=p&&c?t.pstyle("bounds-expansion").pfValue:[0],m=function(t){return"none"!==t.pstyle("display").value},v=!c||m(t)&&(!f||m(t.source())&&m(t.target()));if(v){var b=0;c&&e.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(b=t.pstyle("overlay-padding").value);var x=0;c&&e.includeUnderlays&&0!==t.pstyle("underlay-opacity").value&&(x=t.pstyle("underlay-padding").value);var C=Math.max(b,x),_=0;if(c&&(_=t.pstyle("width").pfValue/2),p&&e.includeNodes){var w=t.position();a=w.x,s=w.y;var k=t.outerWidth()/2,T=t.outerHeight()/2;Sl(h,n=a-k,i=s-T,r=a+k,o=s+T),c&&e.includeOutlines&&Fl(h,t)}else if(f&&e.includeEdges)if(c&&!u){var E=t.pstyle("curve-style").strValue;if(n=Math.min(g.srcX,g.midX,g.tgtX),r=Math.max(g.srcX,g.midX,g.tgtX),i=Math.min(g.srcY,g.midY,g.tgtY),o=Math.max(g.srcY,g.midY,g.tgtY),Sl(h,n-=_,i-=_,r+=_,o+=_),"haystack"===E){var S=g.haystackPts;if(S&&2===S.length){if(n=S[0].x,i=S[0].y,n>(r=S[1].x)){var A=n;n=r,r=A}if(i>(o=S[1].y)){var L=i;i=o,o=L}Sl(h,n-_,i-_,r+_,o+_)}}else if("bezier"===E||"unbundled-bezier"===E||"segments"===E||"taxi"===E){var D;switch(E){case"bezier":case"unbundled-bezier":D=g.bezierPts;break;case"segments":case"taxi":D=g.linePts}if(null!=D)for(var B=0;B<D.length;B++){var F=D[B];n=F.x-_,r=F.x+_,i=F.y-_,o=F.y+_,Sl(h,n,i,r,o)}}}else{var N=t.source().position(),I=t.target().position();if((n=N.x)>(r=I.x)){var O=n;n=r,r=O}if((i=N.y)>(o=I.y)){var M=i;i=o,o=M}Sl(h,n-=_,i-=_,r+=_,o+=_)}if(c&&e.includeEdges&&f&&(Dl(h,t,"mid-source"),Dl(h,t,"mid-target"),Dl(h,t,"source"),Dl(h,t,"target")),c&&"yes"===t.pstyle("ghost").value){var P=t.pstyle("ghost-offset-x").pfValue,R=t.pstyle("ghost-offset-y").pfValue;Sl(h,h.x1+P,h.y1+R,h.x2+P,h.y2+R)}var z=d.bodyBounds=d.bodyBounds||{};Gn(z,h),jn(z,y),qn(z,1),c&&(n=h.x1,r=h.x2,i=h.y1,o=h.y2,Sl(h,n-C,i-C,r+C,o+C));var q=d.overlayBounds=d.overlayBounds||{};Gn(q,h),jn(q,y),qn(q,1);var j=d.labelBounds=d.labelBounds||{};null!=j.all?Mn(j.all):j.all=In(),c&&e.includeLabels&&(e.includeMainLabels&&Bl(h,t,null),f&&(e.includeSourceLabels&&Bl(h,t,"source"),e.includeTargetLabels&&Bl(h,t,"target")))}return h.x1=El(h.x1),h.y1=El(h.y1),h.x2=El(h.x2),h.y2=El(h.y2),h.w=El(h.x2-h.x1),h.h=El(h.y2-h.y1),h.w>0&&h.h>0&&v&&(jn(h,y),qn(h,1)),h},Il=function(t){var e=0,n=function(t){return(t?1:0)<<e++},r=0;return r+=n(t.incudeNodes),r+=n(t.includeEdges),r+=n(t.includeLabels),r+=n(t.includeMainLabels),r+=n(t.includeSourceLabels),r+=n(t.includeTargetLabels),r+=n(t.includeOverlays),r+=n(t.includeOutlines)},Ol=function(t){if(t.isEdge()){var e=t.source().position(),n=t.target().position(),r=function(t){return Math.round(t)};return ve([r(e.x),r(e.y),r(n.x),r(n.y)])}return 0},Ml=function(t,e){var n,r=t._private,i=t.isEdge(),o=(null==e?Rl:Il(e))===Rl,a=Ol(t),s=r.bbCachePosKey===a,l=e.useCache&&s,c=function(t){return null==t._private.bbCache||t._private.styleDirty};if(!l||c(t)||i&&c(t.source())||c(t.target())?(s||t.recalculateRenderedStyle(l),n=Nl(t,Pl),r.bbCache=n,r.bbCachePosKey=a):n=r.bbCache,!o){var u=t.isNode();n=In(),(e.includeNodes&&u||e.includeEdges&&!u)&&(e.includeOverlays?Al(n,r.overlayBounds):Al(n,r.bodyBounds)),e.includeLabels&&(e.includeMainLabels&&(!i||e.includeSourceLabels&&e.includeTargetLabels)?Al(n,r.labelBounds.all):(e.includeMainLabels&&Al(n,r.labelBounds.mainRot),e.includeSourceLabels&&Al(n,r.labelBounds.sourceRot),e.includeTargetLabels&&Al(n,r.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},Pl={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Rl=Il(Pl),zl=ze(Pl);kl.boundingBox=function(t){var e;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==t&&void 0!==t.useCache&&!0!==t.useCache){e=In();var n=zl(t=t||Pl),r=this;if(r.cy().styleEnabled())for(var i=0;i<r.length;i++){var o=r[i],a=o._private,s=Ol(o),l=a.bbCachePosKey===s,c=n.useCache&&l&&!a.styleDirty;o.recalculateRenderedStyle(c)}this.updateCompoundBounds(!t.useCache);for(var u=0;u<r.length;u++){var h=r[u];Al(e,Ml(h,n))}}else t=void 0===t?Pl:zl(t),e=Ml(this[0],t);return e.x1=El(e.x1),e.y1=El(e.y1),e.x2=El(e.x2),e.y2=El(e.y2),e.w=El(e.x2-e.x1),e.h=El(e.y2-e.y1),e},kl.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},kl.boundingBoxAt=function(t){var e=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),i=n.collection();if(r&&(i=e.filter((function(t){return t.isParent()})),e=e.not(i)),_(t)){var o=t;t=function(){return o}}var a=function(e,n){return e._private.bbAtOldPos=t(e,n)},s=function(t){return t._private.bbAtOldPos};n.startBatch(),e.forEach(a).silentPositions(t),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var l=On(this.boundingBox({useCache:!1}));return e.silentPositions(s),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),n.endBatch(),l},wl.boundingbox=wl.bb=wl.boundingBox,wl.renderedBoundingbox=wl.renderedBoundingBox;var ql,jl,Gl=kl;ql=jl={};var $l=function(t){t.uppercaseName=G(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=G(t.outerName),ql[t.name]=function(){var e=this[0],n=e._private,r=n.cy._private.styleEnabled;if(e){if(r){if(e.isParent())return e.updateCompoundBounds(),n[t.autoName]||0;var i=e.pstyle(t.name);return"label"===i.strValue?(e.recalculateRenderedStyle(),n.rstyle[t.labelName]||0):i.pfValue}return 1}},ql["outer"+t.uppercaseName]=function(){var e=this[0],n=e._private.cy._private.styleEnabled;if(e)return n?e[t.name]()+e.pstyle("border-width").pfValue+2*e.padding():1},ql["rendered"+t.uppercaseName]=function(){var e=this[0];if(e)return e[t.name]()*this.cy().zoom()},ql["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e)return e[t.outerName]()*this.cy().zoom()}};$l({name:"width"}),$l({name:"height"}),jl.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==e.autoPadding?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},jl.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()},jl.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Yl=jl,Wl=function(t,e){if(t.isEdge())return e(t)},Ul=function(t,e){if(t.isEdge()){var n=t.cy();return yn(e(t),n.zoom(),n.pan())}},Hl=function(t,e){if(t.isEdge()){var n=t.cy(),r=n.pan(),i=n.zoom();return e(t).map((function(t){return yn(t,i,r)}))}},Vl=function(t){return t.renderer().getControlPoints(t)},Xl=function(t){return t.renderer().getSegmentPoints(t)},Kl=function(t){return t.renderer().getSourceEndpoint(t)},Zl=function(t){return t.renderer().getTargetEndpoint(t)},Ql=function(t){return t.renderer().getEdgeMidpoint(t)},Jl={controlPoints:{get:Vl,mult:!0},segmentPoints:{get:Xl,mult:!0},sourceEndpoint:{get:Kl},targetEndpoint:{get:Zl},midpoint:{get:Ql}},tc=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)},ec=Object.keys(Jl).reduce((function(t,e){var n=Jl[e],r=tc(e);return t[e]=function(){return Wl(this,n.get)},n.mult?t[r]=function(){return Hl(this,n.get)}:t[r]=function(){return Ul(this,n.get)},t}),{}),nc=Q({},Tl,Gl,Yl,ec),rc=function(t,e){this.recycle(t,e)};
/*!
    	  Event object based on jQuery events, MIT license
    
    	  https://jquery.org/license/
    	  https://tldrlegal.com/license/mit-license
    	  https://github.com/jquery/jquery/blob/master/src/event.js
    	  */function ic(){return!1}function oc(){return!0}rc.prototype={instanceString:function(){return"event"},recycle:function(t,e){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=ic,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?oc:ic):null!=t&&t.type?e=t:this.type=t,null!=e&&(this.originalEvent=e.originalEvent,this.type=null!=e.type?e.type:this.type,this.cy=e.cy,this.target=e.target,this.position=e.position,this.renderedPosition=e.renderedPosition,this.namespace=e.namespace,this.layout=e.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=oc;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=oc;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=oc,this.stopPropagation()},isDefaultPrevented:ic,isPropagationStopped:ic,isImmediatePropagationStopped:ic};var ac=/^([^.]+)(\.(?:[^.]+))?$/,sc=".*",lc={qualifierCompare:function(t,e){return t===e},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},cc=Object.keys(lc),uc={};function hc(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uc,e=arguments.length>1?arguments[1]:void 0,n=0;n<cc.length;n++){var r=cc[n];this[r]=t[r]||lc[r]}this.context=e||this.context,this.listeners=[],this.emitting=0}var dc=hc.prototype,pc=function(t,e,n,r,i,o,a){x(r)&&(i=r,r=null),a&&(o=null==o?a:Q({},o,a));for(var s=C(n)?n:n.split(/\s+/),l=0;l<s.length;l++){var c=s[l];if(!N(c)){var u=c.match(ac);if(u&&!1===e(t,c,u[1],u[2]?u[2]:null,r,i,o))break}}},fc=function(t,e){return t.addEventFields(t.context,e),new rc(e.type,e)},gc=function(t,e,n){if(F(n))e(t,n);else if(_(n))e(t,fc(t,n));else for(var r=C(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var o=r[i];if(!N(o)){var a=o.match(ac);if(a){var s=a[1],l=a[2]?a[2]:null;e(t,fc(t,{type:s,namespace:l,target:t.context}))}}}};dc.on=dc.addListener=function(t,e,n,r,i){return pc(this,(function(t,e,n,r,i,o,a){x(o)&&t.listeners.push({event:e,callback:o,type:n,namespace:r,qualifier:i,conf:a})}),t,e,n,r,i),this},dc.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})},dc.removeListener=dc.off=function(t,e,n,r){var i=this;0!==this.emitting&&(this.listeners=Oe(this.listeners));for(var o=this.listeners,a=function(a){var s=o[a];pc(i,(function(e,n,r,i,l,c){if((s.type===r||"*"===t)&&(!i&&".*"!==s.namespace||s.namespace===i)&&(!l||e.qualifierCompare(s.qualifier,l))&&(!c||s.callback===c))return o.splice(a,1),!1}),t,e,n,r)},s=o.length-1;s>=0;s--)a(s);return this},dc.removeAllListeners=function(){return this.removeListener("*")},dc.emit=dc.trigger=function(t,e,n){var r=this.listeners,i=r.length;return this.emitting++,C(e)||(e=[e]),gc(this,(function(t,o){null!=n&&(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}],i=r.length);for(var a=function(n){var i=r[n];if(i.type===o.type&&(!i.namespace||i.namespace===o.namespace||i.namespace===sc)&&t.eventMatches(t.context,i,o)){var a=[o];null!=e&&Ge(a,e),t.beforeEmit(t.context,i,o),i.conf&&i.conf.one&&(t.listeners=t.listeners.filter((function(t){return t!==i})));var s=t.callbackContext(t.context,i,o),l=i.callback.apply(s,a);t.afterEmit(t.context,i,o),!1===l&&(o.stopPropagation(),o.preventDefault())}},s=0;s<i;s++)a(s);t.bubble(t.context)&&!o.isPropagationStopped()&&t.parent(t.context).emit(o,e)}),t),this.emitting--,this};var yc={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&A(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t.cy(),e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t},beforeEmit:function(t,e){e.conf&&e.conf.once&&e.conf.onceCollection.removeListener(e.event,e.qualifier,e.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},mc=function(t){return b(t)?new il(t):t},vc={createEmitter:function(){for(var t=0;t<this.length;t++){var e=this[t],n=e._private;n.emitter||(n.emitter=new hc(yc,e))}return this},emitter:function(){return this._private.emitter},on:function(t,e,n){for(var r=mc(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n);return this},removeListener:function(t,e,n){for(var r=mc(e),i=0;i<this.length;i++)this[i].emitter().removeListener(t,r,n);return this},removeAllListeners:function(){for(var t=0;t<this.length;t++)this[t].emitter().removeAllListeners();return this},one:function(t,e,n){for(var r=mc(e),i=0;i<this.length;i++)this[i].emitter().one(t,r,n);return this},once:function(t,e,n){for(var r=mc(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n,{once:!0,onceCollection:this})},emit:function(t,e){for(var n=0;n<this.length;n++)this[n].emitter().emit(t,e);return this},emitAndNotify:function(t,e){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,e),this}};Ds.eventAliasesOn(vc);var bc={nodes:function(t){return this.filter((function(t){return t.isNode()})).filter(t)},edges:function(t){return this.filter((function(t){return t.isEdge()})).filter(t)},byGroup:function(){for(var t=this.spawn(),e=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?t.push(r):e.push(r)}return{nodes:t,edges:e}},filter:function(t,e){if(void 0===t)return this;if(b(t)||S(t))return new il(t).filter(this);if(x(t)){for(var n=this.spawn(),r=this,i=0;i<r.length;i++){var o=r[i];(e?t.apply(e,[o,i,r]):t(o,i,r))&&n.push(o)}return n}return this.spawn()},not:function(t){if(t){b(t)&&(t=this.filter(t));for(var e=this.spawn(),n=0;n<this.length;n++){var r=this[n];t.has(r)||e.push(r)}return e}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(b(t)){var e=t;return this.filter(e)}for(var n=this.spawn(),r=this,i=t,o=this.length<t.length,a=o?r:i,s=o?i:r,l=0;l<a.length;l++){var c=a[l];s.has(c)&&n.push(c)}return n},xor:function(t){var e=this._private.cy;b(t)&&(t=e.$(t));var n=this.spawn(),r=this,i=t,o=function(t,e){for(var r=0;r<t.length;r++){var i=t[r],o=i._private.data.id;e.hasElementWithId(o)||n.push(i)}};return o(r,i),o(i,r),n},diff:function(t){var e=this._private.cy;b(t)&&(t=e.$(t));var n=this.spawn(),r=this.spawn(),i=this.spawn(),o=this,a=t,s=function(t,e,n){for(var r=0;r<t.length;r++){var o=t[r],a=o._private.data.id;e.hasElementWithId(a)?i.merge(o):n.push(o)}};return s(o,a,n),s(a,o,r),{left:n,right:r,both:i}},add:function(t){var e=this._private.cy;if(!t)return this;if(b(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=this.spawnSelf(),i=0;i<t.length;i++){var o=t[i];!this.has(o)&&r.push(o)}return r},merge:function(t){var e=this._private,n=e.cy;if(!t)return this;if(t&&b(t)){var r=t;t=n.mutableElements().filter(r)}for(var i=e.map,o=0;o<t.length;o++){var a=t[o],s=a._private.data.id;if(!i.has(s)){var l=this.length++;this[l]=a,i.set(s,{ele:a,index:l})}}return this},unmergeAt:function(t){var e=this[t].id(),n=this._private.map;this[t]=void 0,n.delete(e);var r=t===this.length-1;if(this.length>1&&!r){var i=this.length-1,o=this[i],a=o._private.data.id;this[i]=void 0,this[t]=o,n.set(a,{ele:o,index:t})}return this.length--,this},unmergeOne:function(t){t=t[0];var e=this._private,n=t._private.data.id,r=e.map.get(n);if(!r)return this;var i=r.index;return this.unmergeAt(i),this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(t&&b(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=0;r<t.length;r++)this.unmergeOne(t[r]);return this},unmergeBy:function(t){for(var e=this.length-1;e>=0;e--)t(this[e])&&this.unmergeAt(e);return this},map:function(t,e){for(var n=[],r=this,i=0;i<r.length;i++){var o=r[i],a=e?t.apply(e,[o,i,r]):t(o,i,r);n.push(a)}return n},reduce:function(t,e){for(var n=e,r=this,i=0;i<r.length;i++)n=t(n,r[i],i,r);return n},max:function(t,e){for(var n,r=-1/0,i=this,o=0;o<i.length;o++){var a=i[o],s=e?t.apply(e,[a,o,i]):t(a,o,i);s>r&&(r=s,n=a)}return{value:r,ele:n}},min:function(t,e){for(var n,r=1/0,i=this,o=0;o<i.length;o++){var a=i[o],s=e?t.apply(e,[a,o,i]):t(a,o,i);s<r&&(r=s,n=a)}return{value:r,ele:n}}},xc=bc;xc.u=xc["|"]=xc["+"]=xc.union=xc.or=xc.add,xc["\\"]=xc["!"]=xc["-"]=xc.difference=xc.relativeComplement=xc.subtract=xc.not,xc.n=xc["&"]=xc["."]=xc.and=xc.intersection=xc.intersect,xc["^"]=xc["(+)"]=xc["(-)"]=xc.symmetricDifference=xc.symdiff=xc.xor,xc.fnFilter=xc.filterFn=xc.stdFilter=xc.filter,xc.complement=xc.abscomp=xc.absoluteComplement;var Cc={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},_c=function(t,e){var n=t.cy().hasCompoundNodes();function r(t){var e=t.pstyle("z-compound-depth");return"auto"===e.value?n?t.zDepth():0:"bottom"===e.value?-1:"top"===e.value?Te:0}var i=r(t)-r(e);if(0!==i)return i;function o(t){return"auto"===t.pstyle("z-index-compare").value&&t.isNode()?1:0}var a=o(t)-o(e);if(0!==a)return a;var s=t.pstyle("z-index").value-e.pstyle("z-index").value;return 0!==s?s:t.poolIndex()-e.poolIndex()},wc={forEach:function(t,e){if(x(t))for(var n=this.length,r=0;r<n;r++){var i=this[r];if(!1===(e?t.apply(e,[i,r,this]):t(i,r,this)))break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var n=[],r=this.length;null==e&&(e=r),null==t&&(t=0),t<0&&(t=r+t),e<0&&(e=r+e);for(var i=t;i>=0&&i<e&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!x(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort(_c)},zDepth:function(){var t=this[0];if(t){var e=t._private;if("nodes"===e.group){var n=e.data.parent?t.parents().size():0;return t.isParent()?n:Te-1}var r=e.source,i=e.target,o=r.zDepth(),a=i.zDepth();return Math.max(o,a,0)}}};wc.each=wc.forEach;var kc=function(){var e="undefined";(typeof Symbol>"u"?"undefined":t(Symbol))!=e&&t(Symbol.iterator)!=e&&(wc[Symbol.iterator]=function(){var t=this,e={value:void 0,done:!1},n=0,r=this.length;return o({next:function(){return n<r?e.value=t[n++]:(e.value=void 0,e.done=!0),e}},Symbol.iterator,(function(){return this}))})};kc();var Tc=ze({nodeDimensionsIncludeLabels:!1}),Ec={layoutDimensions:function(t){var e;if(t=Tc(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var n=this.boundingBox();e={w:n.w,h:n.h}}else e={w:this.outerWidth(),h:this.outerHeight()};else e={w:0,h:0};return(0===e.w||0===e.h)&&(e.w=e.h=1),e},layoutPositions:function(t,e,n){var r=this.nodes().filter((function(t){return!t.isParent()})),i=this.cy(),o=e.eles,a=function(t){return t.id()},s=R(n,a);t.emit({type:"layoutstart",layout:t}),t.animations=[];var l=function(t,e,n){var r={x:e.x1+e.w/2,y:e.y1+e.h/2},i={x:(n.x-r.x)*t,y:(n.y-r.y)*t};return{x:r.x+i.x,y:r.y+i.y}},c=e.spacingFactor&&1!==e.spacingFactor,u=function(){if(!c)return null;for(var t=In(),e=0;e<r.length;e++){var n=r[e],i=s(n,e);zn(t,i.x,i.y)}return t},h=u(),d=R((function(t,n){var r=s(t,n);if(c){var i=Math.abs(e.spacingFactor);r=l(i,h,r)}return null!=e.transform&&(r=e.transform(t,r)),r}),a);if(e.animate){for(var p=0;p<r.length;p++){var f=r[p],g=d(f,p);if(null==e.animateFilter||e.animateFilter(f,p)){var y=f.animation({position:g,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(y)}else f.position(g)}if(e.fit){var m=i.animation({fit:{boundingBox:o.boundingBoxAt(d),padding:e.padding},duration:e.animationDuration,easing:e.animationEasing});t.animations.push(m)}else if(void 0!==e.zoom&&void 0!==e.pan){var v=i.animation({zoom:e.zoom,pan:e.pan,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(v)}t.animations.forEach((function(t){return t.play()})),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),Ki.all(t.animations.map((function(t){return t.promise()}))).then((function(){t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t})}))}else r.positions(d),e.fit&&i.fit(e.eles,e.padding),null!=e.zoom&&i.zoom(e.zoom),e.pan&&i.pan(e.pan),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(Q({},t,{eles:this}))}};function Sc(t,e,n){var r,i=n._private,o=i.styleCache=i.styleCache||[];return null!=(r=o[t])||(r=o[t]=e(n)),r}function Ac(t,e){return t=be(t),function(n){return Sc(t,e,n)}}function Lc(t,e){t=be(t);var n=function(t){return e.call(t)};return function(){var e=this[0];if(e)return Sc(t,n,e)}}Ec.createLayout=Ec.makeLayout=Ec.layout;var Dc={recalculateRenderedStyle:function(t){var e=this.cy(),n=e.renderer(),r=e.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t,e=this.cy(),n=function(t){return t._private.styleCache=null};return e.hasCompoundNodes()?((t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(n)):this.forEach((function(t){n(t),t.connectedEdges().forEach(n)})),this},updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e.batching())return e._private.batchStyleEles.merge(this),this;var n=this;t=!(!t&&void 0!==t),e.hasCompoundNodes()&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var r=n;return t?r.emitAndNotify("style"):r.emit("style"),n.forEach((function(t){return t._private.styleDirty=!0})),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var e=0;e<this.length;e++){var n=this[e];n._private.styleDirty&&(n._private.styleDirty=!1,t.style().apply(n))}},parsedStyle:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n)return this.cleanStyle(),n._private.style[t]??(e?r.style().getDefaultProperty(t):null)},numericStyle:function(t){var e=this[0];if(e.cy().styleEnabled()&&e){var n=e.pstyle(t);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(t){var e=this[0];if(e.cy().styleEnabled()&&e)return e.pstyle(t).units},renderedStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=this[0];return n?e.style().getRenderedStyle(n,t):void 0},style:function(t,e){var n=this.cy();if(!n.styleEnabled())return this;var r=!1,i=n.style();if(_(t)){var o=t;i.applyBypass(this,o,r),this.emitAndNotify("style")}else if(b(t)){if(void 0===e){var a=this[0];return a?i.getStylePropertyValue(a,t):void 0}i.applyBypass(this,t,e,r),this.emitAndNotify("style")}else if(void 0===t){var s=this[0];return s?i.getRawStyle(s):void 0}return this},removeStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=!1,r=e.style(),i=this;if(void 0===t)for(var o=0;o<i.length;o++){var a=i[o];r.removeAllBypasses(a,n)}else{t=t.split(/\s+/);for(var s=0;s<i.length;s++){var l=i[s];r.removeBypasses(l,t,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!e)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++)i*=o[a].pstyle("opacity").value;return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function Bc(t,e){var n=t._private.data.parent?t.parents():null;if(n)for(var r=0;r<n.length;r++)if(!e(n[r]))return!1;return!0}function Fc(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var t=this.cy();if(!t.styleEnabled())return!0;var i=this[0],o=t.hasCompoundNodes();if(i){var a=i._private;if(!e(i))return!1;if(i.isNode())return!o||Bc(i,r);var s=a.source,l=a.target;return n(s)&&(!o||Bc(s,n))&&(s===l||n(l)&&(!o||Bc(l,n)))}}}var Nc=Ac("eleTakesUpSpace",(function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())}));Dc.takesUpSpace=Lc("takesUpSpace",Fc({ok:Nc}));var Ic=Ac("eleInteractive",(function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&Nc(t)})),Oc=Ac("parentInteractive",(function(t){return"visible"===t.pstyle("visibility").value&&Nc(t)}));Dc.interactive=Lc("interactive",Fc({ok:Ic,parentOk:Oc,edgeOkViaNode:Nc})),Dc.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var Mc=Ac("eleVisible",(function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&Nc(t)})),Pc=Nc;Dc.visible=Lc("visible",Fc({ok:Mc,edgeOkViaNode:Pc})),Dc.hidden=function(){var t=this[0];if(t)return!t.visible()},Dc.isBundledBezier=Lc("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()})),Dc.bypass=Dc.css=Dc.style,Dc.renderedCss=Dc.renderedStyle,Dc.removeBypass=Dc.removeCss=Dc.removeStyle,Dc.pstyle=Dc.parsedStyle;var Rc={};function zc(t){return function(){var e=arguments,n=[];if(2===e.length){var r=e[0],i=e[1];this.on(t.event,r,i)}else if(1===e.length&&x(e[0])){var o=e[0];this.on(t.event,o)}else if(0===e.length||1===e.length&&C(e[0])){for(var a=1===e.length?e[0]:null,s=0;s<this.length;s++){var l=this[s],c=!t.ableField||l._private[t.ableField],u=l._private[t.field]!=t.value;if(t.overrideAble){var h=t.overrideAble(l);if(void 0!==h&&(c=h,!h))return this}c&&(l._private[t.field]=t.value,u&&n.push(l))}var d=this.spawn(n);d.updateStyle(),d.emit(t.event),a&&d.emit(a)}return this}}function qc(t){Rc[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(void 0!==n)return n}return e._private[t.field]}},Rc[t.on]=zc({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Rc[t.off]=zc({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}qc({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),qc({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0},on:"grabify",off:"ungrabify"}),qc({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),qc({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),Rc.deselect=Rc.unselect,Rc.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},qc({field:"active",on:"activate",off:"unactivate"}),qc({field:"pannable",on:"panify",off:"unpanify"}),Rc.inactive=function(){var t=this[0];if(t)return!t._private.active};var jc={},Gc=function(t){return function(e){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode()){for(var a=!1,s=o.connectedEdges(),l=0;l<s.length;l++){var c=s[l],u=c.source(),h=c.target();if(t.noIncomingEdges&&h===o&&u!==o||t.noOutgoingEdges&&u===o&&h!==o){a=!0;break}}a||r.push(o)}}return this.spawn(r,!0).filter(e)}},$c=function(t){return function(e){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var a=o.connectedEdges(),s=0;s<a.length;s++){var l=a[s],c=l.source(),u=l.target();t.outgoing&&c===o?(r.push(l),r.push(u)):t.incoming&&u===o&&(r.push(l),r.push(c))}}return this.spawn(r,!0).filter(e)}},Yc=function(t){return function(e){for(var n=this,r=[],i={};;){var o=t.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var l=o[s],c=l.id();i[c]||(i[c]=!0,r.push(l),a=!0)}if(!a)break;n=o}return this.spawn(r,!0).filter(e)}};function Wc(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[t.attr];i&&n.push(i)}return this.spawn(n,!0).filter(e)}}function Uc(t){return function(e){var n=[],r=this._private.cy,i=t||{};b(e)&&(e=r.$(e));for(var o=0;o<e.length;o++)for(var a=e[o]._private.edges,s=0;s<a.length;s++){var l=a[s],c=l._private.data,u=this.hasElementWithId(c.source)&&e.hasElementWithId(c.target),h=e.hasElementWithId(c.source)&&this.hasElementWithId(c.target);(u||h)&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!u||i.thisIsTgt&&!h)||n.push(l))}return this.spawn(n,!0)}}function Hc(t){return t=Q({},{codirected:!1},t),function(e){for(var n=[],r=this.edges(),i=t,o=0;o<r.length;o++)for(var a=r[o]._private,s=a.source,l=s._private.data.id,c=a.data.target,u=s._private.edges,h=0;h<u.length;h++){var d=u[h],p=d._private.data,f=p.target,g=p.source,y=f===c&&g===l,m=l===f&&c===g;(i.codirected&&y||!i.codirected&&(y||m))&&n.push(d)}return this.spawn(n,!0).filter(e)}}jc.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},Q(jc,{roots:Gc({noIncomingEdges:!0}),leaves:Gc({noOutgoingEdges:!0}),outgoers:cl($c({outgoing:!0}),"outgoers"),successors:Yc({outgoing:!0}),incomers:cl($c({incoming:!0}),"incomers"),predecessors:Yc({incoming:!0})}),Q(jc,{neighborhood:cl((function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),c=s.target(),u=i===l?c:l;u.length>0&&e.push(u[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)}),"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),jc.neighbourhood=jc.neighborhood,jc.closedNeighbourhood=jc.closedNeighborhood,jc.openNeighbourhood=jc.openNeighborhood,Q(jc,{source:cl((function(t){var e,n=this[0];return n&&(e=n._private.source||n.cy().collection()),e&&t?e.filter(t):e}),"source"),target:cl((function(t){var e,n=this[0];return n&&(e=n._private.target||n.cy().collection()),e&&t?e.filter(t):e}),"target"),sources:Wc({attr:"source"}),targets:Wc({attr:"target"})}),Q(jc,{edgesWith:cl(Uc(),"edgesWith"),edgesTo:cl(Uc({thisIsSrc:!0}),"edgesTo")}),Q(jc,{connectedEdges:cl((function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];if(i.isNode())for(var o=i._private.edges,a=0;a<o.length;a++){var s=o[a];e.push(s)}}return this.spawn(e,!0).filter(t)}),"connectedEdges"),connectedNodes:cl((function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(t)}),"connectedNodes"),parallelEdges:cl(Hc(),"parallelEdges"),codirectedEdges:cl(Hc({codirected:!0}),"codirectedEdges")}),Q(jc,{components:function(t){var e=this,n=e.cy(),r=n.collection(),i=null==t?e.nodes():t.nodes(),o=[];null!=t&&i.empty()&&(i=t.sources());var a=function(t,e){r.merge(t),i.unmerge(t),e.merge(t)};if(i.empty())return e.spawn();var s=function(){var t=n.collection();o.push(t);var r=i[0];a(r,t),e.bfs({directed:!1,roots:r,visit:function(e){return a(e,t)}}),t.forEach((function(n){n.connectedEdges().forEach((function(n){e.has(n)&&t.has(n.source())&&t.has(n.target())&&t.merge(n)}))}))};do{s()}while(i.length>0);return o},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),jc.componentsOf=jc.components;var Vc=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==t){var i=new Ue,o=!1;if(e){if(e.length>0&&_(e[0])&&!A(e[0])){o=!0;for(var a=[],s=new Xe,l=0,c=e.length;l<c;l++){var u=e[l];null==u.data&&(u.data={});var h=u.data;if(null==h.id)h.id=Me();else if(t.hasElementWithId(h.id)||s.has(h.id))continue;var d=new Ke(t,u,!1);a.push(d),s.add(h.id)}e=a}}else e=[];this.length=0;for(var p=0,f=e.length;p<f;p++){var g=e[p][0];if(null!=g){var y=g._private.data.id;(!n||!i.has(y))&&(n&&i.set(y,{index:this.length,ele:g}),this[this.length]=g,this.length++)}}this._private={eles:this,cy:t,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(t){this.lazyMap=t},rebuildMap:function(){for(var t=this.lazyMap=new Ue,e=this.eles,n=0;n<e.length;n++){var r=e[n];t.set(r.id(),{index:n,ele:r})}}},n&&(this._private.map=i),o&&!r&&this.restore()}else De("A collection must have a reference to the core")},Xc=Ke.prototype=Vc.prototype=Object.create(Array.prototype);Xc.instanceString=function(){return"collection"},Xc.spawn=function(t,e){return new Vc(this.cy(),t,e)},Xc.spawnSelf=function(){return this.spawn(this)},Xc.cy=function(){return this._private.cy},Xc.renderer=function(){return this._private.cy.renderer()},Xc.element=function(){return this[0]},Xc.collection=function(){return L(this)?this:new Vc(this._private.cy,[this])},Xc.unique=function(){return new Vc(this._private.cy,this,!0)},Xc.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)},Xc.getElementById=function(t){t=""+t;var e=this._private.cy,n=this._private.map.get(t);return n?n.ele:new Vc(e)},Xc.$id=Xc.getElementById,Xc.poolIndex=function(){var t=this._private.cy._private.elements,e=this[0]._private.data.id;return t._private.map.get(e).index},Xc.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index},Xc.indexOfId=function(t){return t=""+t,this._private.map.get(t).index},Xc.json=function(t){var e=this.element(),n=this.cy();if(null==e&&t)return this;if(null!=e){var r=e._private;if(_(t)){if(n.startBatch(),t.data){e.data(t.data);var i=r.data;if(e.isEdge()){var o=!1,a={},s=t.data.source,l=t.data.target;null!=s&&s!=i.source&&(a.source=""+s,o=!0),null!=l&&l!=i.target&&(a.target=""+l,o=!0),o&&(e=e.move(a))}else{var c="parent"in t.data,u=t.data.parent;c&&(null!=u||null!=i.parent)&&u!=i.parent&&(void 0===u&&(u=null),null!=u&&(u=""+u),e=e.move({parent:u}))}}t.position&&e.position(t.position);var h=function(n,i,o){var a=t[n];null!=a&&a!==r[n]&&(a?e[i]():e[o]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),null!=t.classes&&e.classes(t.classes),n.endBatch(),this}if(void 0===t){var d={data:Ie(r.data),position:Ie(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};d.classes="";var p=0;return r.classes.forEach((function(t){return d.classes+=0==p++?t:" "+t})),d}}},Xc.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e].json();t.push(n)}return t},Xc.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n].json(),i=new Ke(t,r,!1);e.push(i)}return new Vc(t,e)},Xc.copy=Xc.clone,Xc.restore=function(){for(var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,i=r.cy(),o=i._private,a=[],s=[],l=0,c=r.length;l<c;l++){var u=r[l];n&&!u.removed()||(u.isNode()?a.push(u):s.push(u))}t=a.concat(s);var h,d=function(){t.splice(h,1),h--};for(h=0;h<t.length;h++){var p=t[h],f=p._private,g=f.data;if(p.clearTraversalCache(),n||f.removed)if(void 0===g.id)g.id=Me();else if(k(g.id))g.id=""+g.id;else{if(N(g.id)||!b(g.id)){De("Can not create element with invalid string ID `"+g.id+"`"),d();continue}if(i.hasElementWithId(g.id)){De("Can not create second element with ID `"+g.id+"`"),d();continue}}var y=g.id;if(p.isNode()){var m=f.position;null==m.x&&(m.x=0),null==m.y&&(m.y=0)}if(p.isEdge()){for(var v=p,x=["source","target"],C=x.length,_=!1,w=0;w<C;w++){var T=x[w],E=g[T];k(E)&&(E=g[T]=""+g[T]),null==E||""===E?(De("Can not create edge `"+y+"` with unspecified "+T),_=!0):i.hasElementWithId(E)||(De("Can not create edge `"+y+"` with nonexistant "+T+" `"+E+"`"),_=!0)}if(_){d();continue}var S=i.getElementById(g.source),A=i.getElementById(g.target);S.same(A)?S._private.edges.push(v):(S._private.edges.push(v),A._private.edges.push(v)),v._private.source=S,v._private.target=A}f.map=new Ue,f.map.set(y,{ele:p,index:0}),f.removed=!1,n&&i.addToPool(p)}for(var L=0;L<a.length;L++){var D=a[L],B=D._private.data;k(B.parent)&&(B.parent=""+B.parent);var F=B.parent;if(null!=F||D._private.parent){var I=D._private.parent?i.collection().merge(D._private.parent):i.getElementById(F);if(I.empty())B.parent=void 0;else if(I[0].removed())Fe("Node added with missing parent, reference to parent removed"),B.parent=void 0,D._private.parent=null;else{for(var O=!1,M=I;!M.empty();){if(D.same(M)){O=!0,B.parent=void 0;break}M=M.parent()}O||(I[0]._private.children.push(D),D._private.parent=I[0],o.hasCompoundNodes=!0)}}}if(t.length>0){for(var P=t.length===r.length?r:new Vc(i,t),R=0;R<P.length;R++){var z=P[R];z.isNode()||(z.parallelEdges().clearTraversalCache(),z.source().clearTraversalCache(),z.target().clearTraversalCache())}(o.hasCompoundNodes?i.collection().merge(P).merge(P.connectedNodes()).merge(P.parent()):P).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?P.emitAndNotify("add"):n&&P.emit("add")}return r},Xc.removed=function(){var t=this[0];return t&&t._private.removed},Xc.inside=function(){var t=this[0];return t&&!t._private.removed},Xc.remove=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=[],i={},o=n._private.cy;function a(t){for(var e=t._private.edges,n=0;n<e.length;n++)l(e[n])}function s(t){for(var e=t._private.children,n=0;n<e.length;n++)l(e[n])}function l(t){var n=i[t.id()];e&&t.removed()||n||(i[t.id()]=!0,t.isNode()?(r.push(t),a(t),s(t)):r.unshift(t))}for(var c=0,u=n.length;c<u;c++)l(n[c]);function h(t,e){var n=t._private.edges;qe(n,e),t.clearTraversalCache()}function d(t){t.clearTraversalCache()}var p=[];function f(t,e){e=e[0];var n=(t=t[0])._private.children,r=t.id();qe(n,e),e._private.parent=null,p.ids[r]||(p.ids[r]=!0,p.push(t))}p.ids={},n.dirtyCompoundBoundsCache(),e&&o.removeFromPool(r);for(var g=0;g<r.length;g++){var y=r[g];if(y.isEdge()){var m=y.source()[0],v=y.target()[0];h(m,y),h(v,y);for(var b=y.parallelEdges(),x=0;x<b.length;x++){var C=b[x];d(C),C.isBundledBezier()&&C.dirtyBoundingBoxCache()}}else{var _=y.parent();0!==_.length&&f(_,y)}e&&(y._private.removed=!0)}var w=o._private.elements;o._private.hasCompoundNodes=!1;for(var k=0;k<w.length;k++)if(w[k].isParent()){o._private.hasCompoundNodes=!0;break}var T=new Vc(this.cy(),r);T.size()>0&&(t?T.emitAndNotify("remove"):e&&T.emit("remove"));for(var E=0;E<p.length;E++){var S=p[E];(!e||!S.removed())&&S.updateStyle()}return T},Xc.move=function(t){var e=this._private.cy,n=this,r=!1,i=!1,o=function(t){return null==t?t:""+t};if(void 0!==t.source||void 0!==t.target){var a=o(t.source),s=o(t.target),l=null!=a&&e.hasElementWithId(a),c=null!=s&&e.hasElementWithId(s);(l||c)&&(e.batch((function(){n.remove(r,i),n.emitAndNotify("moveout");for(var t=0;t<n.length;t++){var e=n[t],o=e._private.data;e.isEdge()&&(l&&(o.source=a),c&&(o.target=s))}n.restore(r,i)})),n.emitAndNotify("move"))}else if(void 0!==t.parent){var u=o(t.parent);if(null===u||e.hasElementWithId(u)){var h=null===u?void 0:u;e.batch((function(){var t=n.remove(r,i);t.emitAndNotify("moveout");for(var e=0;e<n.length;e++){var o=n[e],a=o._private.data;o.isNode()&&(a.parent=h)}t.restore(r,i)})),n.emitAndNotify("move")}}return this},[qi,Bs,Fs,al,ul,gl,yl,nc,vc,bc,Cc,wc,Ec,Dc,Rc,jc].forEach((function(t){Q(Xc,t)}));var Kc={add:function(t){var e,n=this;if(S(t)){var r=t;if(r._private.cy===n)e=r.restore();else{for(var i=[],o=0;o<r.length;o++){var a=r[o];i.push(a.json())}e=new Vc(n,i)}}else if(C(t))e=new Vc(n,t);else if(_(t)&&(C(t.nodes)||C(t.edges))){for(var s=t,l=[],c=["nodes","edges"],u=0,h=c.length;u<h;u++){var d=c[u],p=s[d];if(C(p))for(var f=0,g=p.length;f<g;f++){var y=Q({group:d},p[f]);l.push(y)}}e=new Vc(n,l)}else e=new Ke(n,t).collection();return e},remove:function(t){if(!S(t)&&b(t)){var e=t;t=this.$(e)}return t.remove()}};
/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function Zc(t,e,n,r){var i=4,o=.001,a=1e-7,s=10,l=11,c=1/(l-1),u=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var h=0;h<4;++h)if("number"!=typeof arguments[h]||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;t=Math.min(t,1),n=Math.min(n,1),t=Math.max(t,0),n=Math.max(n,0);var d=u?new Float32Array(l):new Array(l);function p(t,e){return 1-3*e+3*t}function f(t,e){return 3*e-6*t}function g(t){return 3*t}function y(t,e,n){return((p(e,n)*t+f(e,n))*t+g(e))*t}function m(t,e,n){return 3*p(e,n)*t*t+2*f(e,n)*t+g(e)}function v(e,r){for(var o=0;o<i;++o){var a=m(r,t,n);if(0===a)return r;r-=(y(r,t,n)-e)/a}return r}function b(){for(var e=0;e<l;++e)d[e]=y(e*c,t,n)}function x(e,r,i){var o,l,c=0;do{(o=y(l=r+(i-r)/2,t,n)-e)>0?i=l:r=l}while(Math.abs(o)>a&&++c<s);return l}function C(e){for(var r=0,i=1,a=l-1;i!==a&&d[i]<=e;++i)r+=c;--i;var s=r+(e-d[i])/(d[i+1]-d[i])*c,u=m(s,t,n);return u>=o?v(e,s):0===u?s:x(e,r,r+c)}var _=!1;function w(){_=!0,(t!==e||n!==r)&&b()}var k=function(i){return _||w(),t===e&&n===r?i:0===i?0:1===i?1:y(C(i),e,r)};k.getControlPoints=function(){return[{x:t,y:e},{x:n,y:r}]};var T="generateBezier("+[t,e,n,r]+")";return k.toString=function(){return T},k
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */}var Qc=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},o=e(n,.5*r,i),a=e(n,.5*r,o),s=e(n,r,a),l=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),c=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+l*r,n.v=n.v+c*r,n}return function t(e,r,i){var o,a,s,l={x:-1,v:0,tension:null,friction:null},c=[0],u=0,h=1e-4,d=.016;for(e=parseFloat(e)||500,r=parseFloat(r)||20,i=i||null,l.tension=e,l.friction=r,a=(o=null!==i)?(u=t(e,r))/i*d:d;s=n(s||l,a),c.push(1+s.x),u+=16,Math.abs(s.x)>h&&Math.abs(s.v)>h;);return o?function(t){return c[t*(c.length-1)|0]}:u}}(),Jc=function(t,e,n,r){var i=Zc(t,e,n,r);return function(t,e,n){return t+(e-t)*i(n)}},tu={linear:function(t,e,n){return t+(e-t)*n},ease:Jc(.25,.1,.25,1),"ease-in":Jc(.42,0,1,1),"ease-out":Jc(0,0,.58,1),"ease-in-out":Jc(.42,0,.58,1),"ease-in-sine":Jc(.47,0,.745,.715),"ease-out-sine":Jc(.39,.575,.565,1),"ease-in-out-sine":Jc(.445,.05,.55,.95),"ease-in-quad":Jc(.55,.085,.68,.53),"ease-out-quad":Jc(.25,.46,.45,.94),"ease-in-out-quad":Jc(.455,.03,.515,.955),"ease-in-cubic":Jc(.55,.055,.675,.19),"ease-out-cubic":Jc(.215,.61,.355,1),"ease-in-out-cubic":Jc(.645,.045,.355,1),"ease-in-quart":Jc(.895,.03,.685,.22),"ease-out-quart":Jc(.165,.84,.44,1),"ease-in-out-quart":Jc(.77,0,.175,1),"ease-in-quint":Jc(.755,.05,.855,.06),"ease-out-quint":Jc(.23,1,.32,1),"ease-in-out-quint":Jc(.86,0,.07,1),"ease-in-expo":Jc(.95,.05,.795,.035),"ease-out-expo":Jc(.19,1,.22,1),"ease-in-out-expo":Jc(1,0,0,1),"ease-in-circ":Jc(.6,.04,.98,.335),"ease-out-circ":Jc(.075,.82,.165,1),"ease-in-out-circ":Jc(.785,.135,.15,.86),spring:function(t,e,n){if(0===n)return tu.linear;var r=Qc(t,e,n);return function(t,e,n){return t+(e-t)*r(n)}},"cubic-bezier":Jc};function eu(t,e,n,r,i){if(1===r||e===n)return n;var o=i(e,n,r);return null==t||((t.roundValue||t.color)&&(o=Math.round(o)),void 0!==t.min&&(o=Math.max(o,t.min)),void 0!==t.max&&(o=Math.min(o,t.max))),o}function nu(t,e){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=e&&"%"===e.type.units?t.value:t.pfValue:t}function ru(t,e,n,r,i){var o=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var a=nu(t,i),s=nu(e,i);if(k(a)&&k(s))return eu(o,a,s,n,r);if(C(a)&&C(s)){for(var l=[],c=0;c<s.length;c++){var u=a[c],h=s[c];if(null!=u&&null!=h){var d=eu(o,u,h,n,r);l.push(d)}else l.push(h)}return l}}function iu(t,e,n,r){var i=!r,o=t._private,a=e._private,s=a.easing,l=a.startTime,c=(r?t:t.cy()).style();if(!a.easingImpl)if(null==s)a.easingImpl=tu.linear;else{var u,h,d;u=b(s)?c.parse("transition-timing-function",s).value:s,b(u)?(h=u,d=[]):(h=u[1],d=u.slice(2).map((function(t){return+t}))),d.length>0?("spring"===h&&d.push(a.duration),a.easingImpl=tu[h].apply(null,d)):a.easingImpl=tu[h]}var p,f=a.easingImpl;if(p=0===a.duration?1:(n-l)/a.duration,a.applying&&(p=a.progress),p<0?p=0:p>1&&(p=1),null==a.delay){var g=a.startPosition,y=a.position;if(y&&i&&!t.locked()){var m={};ou(g.x,y.x)&&(m.x=ru(g.x,y.x,p,f)),ou(g.y,y.y)&&(m.y=ru(g.y,y.y,p,f)),t.position(m)}var v=a.startPan,x=a.pan,C=o.pan,_=null!=x&&r;_&&(ou(v.x,x.x)&&(C.x=ru(v.x,x.x,p,f)),ou(v.y,x.y)&&(C.y=ru(v.y,x.y,p,f)),t.emit("pan"));var w=a.startZoom,k=a.zoom,T=null!=k&&r;T&&(ou(w,k)&&(o.zoom=Nn(o.minZoom,ru(w,k,p,f),o.maxZoom)),t.emit("zoom")),(_||T)&&t.emit("viewport");var E=a.style;if(E&&E.length>0&&i){for(var S=0;S<E.length;S++){var A=E[S],L=A.name,D=A,B=a.startStyle[L],F=ru(B,D,p,f,c.properties[B.name]);c.overrideBypass(t,L,F)}t.emit("style")}}return a.progress=p,p}function ou(t,e){return!(null==t||null==e||!(k(t)&&k(e)||t&&e))}function au(t,e,n,r){var i=e._private;i.started=!0,i.startTime=n-i.progress*i.duration}function su(t,e){var n=e._private.aniEles,r=[];function i(e,n){var i=e._private,o=i.animation.current,a=i.animation.queue,s=!1;if(0===o.length){var l=a.shift();l&&o.push(l)}for(var c=function(t){for(var e=t.length-1;e>=0;e--)(0,t[e])();t.splice(0,t.length)},u=o.length-1;u>=0;u--){var h=o[u],d=h._private;d.stopped?(o.splice(u,1),d.hooked=!1,d.playing=!1,d.started=!1,c(d.frames)):!d.playing&&!d.applying||(d.playing&&d.applying&&(d.applying=!1),d.started||au(e,h,t),iu(e,h,t,n),d.applying&&(d.applying=!1),c(d.frames),null!=d.step&&d.step(t),h.completed()&&(o.splice(u,1),d.hooked=!1,d.playing=!1,d.started=!1,c(d.completes)),s=!0)}return!n&&0===o.length&&0===a.length&&r.push(e),s}for(var o=!1,a=0;a<n.length;a++){var s=i(n[a]);o=o||s}var l=i(e,!0);(o||l)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(r),e.emit("step")}var lu={animate:Ds.animate(),animation:Ds.animation(),animated:Ds.animated(),clearQueue:Ds.clearQueue(),delay:Ds.delay(),delayAnimation:Ds.delayAnimation(),stop:Ds.stop(),addToAnimationPool:function(t){var e=this;e.styleEnabled()&&e._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var e=t.renderer();e&&e.beforeRender?e.beforeRender((function(e,n){su(n,t)}),e.beforeRenderPriorities.animations):n()}function n(){t._private.animationsRunning&&se((function(e){su(e,t),n()}))}}},cu={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&A(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t,e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t}},uu=function(t){return b(t)?new il(t):t},hu={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new hc(cu,this)),this},emitter:function(){return this._private.emitter},on:function(t,e,n){return this.emitter().on(t,uu(e),n),this},removeListener:function(t,e,n){return this.emitter().removeListener(t,uu(e),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,e,n){return this.emitter().one(t,uu(e),n),this},once:function(t,e,n){return this.emitter().one(t,uu(e),n),this},emit:function(t,e){return this.emitter().emit(t,e),this},emitAndNotify:function(t,e){return this.emit(t),this.notify(t,e),this}};Ds.eventAliasesOn(hu);var du={png:function(t){return t=t||{},this._private.renderer.png(t)},jpg:function(t){var e=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",e.jpg(t)}};du.jpeg=du.jpg;var pu={layout:function(t){var e=this;if(null!=t)if(null!=t.name){var n,r=t.name,i=e.extension("layout",r);if(null!=i)return n=b(t.eles)?e.$(t.eles):null!=t.eles?t.eles:e.$(),new i(Q({},t,{cy:e,eles:n}));De("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else De("A `name` must be specified to make a layout");else De("Layout options must be specified to make a layout")}};pu.createLayout=pu.makeLayout=pu.layout;var fu={notify:function(t,e){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[t]=n.batchNotifications[t]||this.collection();null!=e&&r.merge(e)}else if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(t,e)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:(e.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var e=this.renderer();Object.keys(t.batchNotifications).forEach((function(n){var r=t.batchNotifications[n];r.empty()?e.notify(n):e.notify(n,r)}))}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch((function(){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];e.getElementById(i).data(o)}}))}},gu=ze({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),yu={renderTo:function(t,e,n,r){return this._private.renderer.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var e=this,n=e.extension("renderer",t.name);if(null!=n){void 0!==t.wheelSensitivity&&Fe("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var r=gu(t);r.cy=e,e._private.renderer=new n(r),this.notify("init")}else De("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var t=this;t.notify("destroy");var e=t.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);t._private.renderer=null,t.mutableElements().forEach((function(t){var e=t._private;e.rscratch={},e.rstyle={},e.animation.current=[],e.animation.queue=[]}))},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};yu.invalidateDimensions=yu.resize;var mu={collection:function(t,e){return b(t)?this.$(t):S(t)?t.collection():C(t)?(e||(e={}),new Vc(this,t,e.unique,e.removed)):new Vc(this)},nodes:function(t){var e=this.$((function(t){return t.isNode()}));return t?e.filter(t):e},edges:function(t){var e=this.$((function(t){return t.isEdge()}));return t?e.filter(t):e},$:function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()},mutableElements:function(){return this._private.elements}};mu.elements=mu.filter=mu.$;var vu={},bu="t",xu="f";vu.apply=function(t){for(var e=this,n=e._private.cy.collection(),r=0;r<t.length;r++){var i=t[r],o=e.getContextMeta(i);if(!o.empty){var a=e.getContextStyle(o),s=e.applyContextStyle(o,a,i);i._private.appliedInitStyle?e.updateTransitions(i,s.diffProps):i._private.appliedInitStyle=!0,e.updateStyleHints(i)&&n.push(i)}}return n},vu.getPropertiesDiff=function(t,e){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=t+"-"+e,o=r[i];if(o)return o;for(var a=[],s={},l=0;l<n.length;l++){var c=n[l],u=t[l]===bu,h=e[l]===bu,d=u!==h,p=c.mappedProperties.length>0;if(d||h&&p){var f=void 0;d&&p||d?f=c.properties:p&&(f=c.mappedProperties);for(var g=0;g<f.length;g++){for(var y=f[g],m=y.name,v=!1,b=l+1;b<n.length;b++){var x=n[b];if(e[b]===bu&&(v=null!=x.properties[y.name]))break}!s[m]&&!v&&(s[m]=!0,a.push(m))}}}return r[i]=a,a},vu.getContextMeta=function(t){for(var e,n=this,r="",i=t._private.styleCxtKey||"",o=0;o<n.length;o++){var a=n[o];r+=a.selector&&a.selector.matches(t)?bu:xu}return e=n.getPropertiesDiff(i,r),t._private.styleCxtKey=r,{key:r,diffPropNames:e,empty:0===e.length}},vu.getContextStyle=function(t){var e=t.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[e])return r[e];for(var i={_private:{key:e}},o=0;o<n.length;o++){var a=n[o];if(e[o]===bu)for(var s=0;s<a.properties.length;s++){var l=a.properties[s];i[l.name]=l}}return r[e]=i,i},vu.applyContextStyle=function(t,e,n){for(var r=this,i=t.diffPropNames,o={},a=r.types,s=0;s<i.length;s++){var l=i[s],c=e[l],u=n.pstyle(l);if(!c){if(!u)continue;c=u.bypass?{name:l,deleteBypassed:!0}:{name:l,delete:!0}}if(u!==c){if(c.mapped===a.fn&&null!=u&&null!=u.mapping&&u.mapping.value===c.value){var h=u.mapping;if((h.fnValue=c.value(n))===h.prevFnValue)continue}var d=o[l]={prev:u};r.applyParsedProperty(n,c),d.next=n.pstyle(l),d.next&&d.next.bypass&&(d.next=d.next.bypassed)}}return{diffProps:o}},vu.updateStyleHints=function(t){var e=t._private,n=this,r=n.propertyGroupNames,i=n.propertyGroupKeys,o=function(t,e,r){return n.getPropertiesHash(t,e,r)},a=e.styleKey;if(t.removed())return!1;var s="nodes"===e.group,l=t._private.style;r=Object.keys(l);for(var c=0;c<i.length;c++){var u=i[c];e.styleKeys[u]=[ce,he]}for(var h=function(t,n){return e.styleKeys[n][0]=pe(t,e.styleKeys[n][0])},d=function(t,n){return e.styleKeys[n][1]=fe(t,e.styleKeys[n][1])},p=function(t,e){h(t,e),d(t,e)},f=function(t,e){for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);h(r,e),d(r,e)}},g=2e9,y=function(t){return-128<t&&t<128&&Math.floor(t)!==t?g-(1024*t|0):t},m=0;m<r.length;m++){var v=r[m],b=l[v];if(null!=b){var x=this.properties[v],C=x.type,_=x.groupKey,w=void 0;null!=x.hashOverride?w=x.hashOverride(t,b):null!=b.pfValue&&(w=b.pfValue);var k=null==x.enums?b.value:null,T=null!=w,E=T||null!=k,S=b.units;C.number&&E&&!C.multiple?(p(y(T?w:k),_),!T&&null!=S&&f(S,_)):f(b.strValue,_)}}for(var A=[ce,he],L=0;L<i.length;L++){var D=i[L],B=e.styleKeys[D];A[0]=pe(B[0],A[0]),A[1]=fe(B[1],A[1])}e.styleKey=ge(A[0],A[1]);var F=e.styleKeys;e.labelDimsKey=ye(F.labelDimensions);var N=o(t,["label"],F.labelDimensions);if(e.labelKey=ye(N),e.labelStyleKey=ye(me(F.commonLabel,N)),!s){var I=o(t,["source-label"],F.labelDimensions);e.sourceLabelKey=ye(I),e.sourceLabelStyleKey=ye(me(F.commonLabel,I));var O=o(t,["target-label"],F.labelDimensions);e.targetLabelKey=ye(O),e.targetLabelStyleKey=ye(me(F.commonLabel,O))}if(s){var M=e.styleKeys,P=M.nodeBody,R=M.nodeBorder,z=M.nodeOutline,q=M.backgroundImage,j=M.compound,G=M.pie,$=[P,R,z,q,j,G].filter((function(t){return null!=t})).reduce(me,[ce,he]);e.nodeKey=ye($),e.hasPie=null!=G&&G[0]!==ce&&G[1]!==he}return a!==e.styleKey},vu.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},vu.applyParsedProperty=function(t,e){var n,r=this,i=e,o=t._private.style,a=r.types,s=r.properties[i.name].type,l=i.bypass,c=o[i.name],u=c&&c.bypass,h=t._private,d="mapping",p=function(t){return null==t?null:null!=t.pfValue?t.pfValue:t.value},f=function(){var e=p(c),n=p(i);r.checkTriggers(t,i.name,e,n)};if("curve-style"===e.name&&t.isEdge()&&("bezier"!==e.value&&t.isLoop()||"haystack"===e.value&&(t.source().isParent()||t.target().isParent()))&&(i=e=this.parse(e.name,"bezier",l)),i.delete)return o[i.name]=void 0,f(),!0;if(i.deleteBypassed)return c?!!c.bypass&&(c.bypassed=void 0,f(),!0):(f(),!0);if(i.deleteBypass)return c?!!c.bypass&&(o[i.name]=c.bypassed,f(),!0):(f(),!0);var g=function(){Fe("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case a.mapData:for(var y=i.field.split("."),m=h.data,v=0;v<y.length&&m;v++)m=m[y[v]];if(null==m)return g(),!1;var b;if(!k(m))return Fe("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+m+"` for `"+t.id()+"` is non-numeric)"),!1;var x=i.fieldMax-i.fieldMin;if((b=0===x?0:(m-i.fieldMin)/x)<0?b=0:b>1&&(b=1),s.color){var C=i.valueMin[0],_=i.valueMax[0],w=i.valueMin[1],T=i.valueMax[1],E=i.valueMin[2],S=i.valueMax[2],A=null==i.valueMin[3]?1:i.valueMin[3],L=null==i.valueMax[3]?1:i.valueMax[3],D=[Math.round(C+(_-C)*b),Math.round(w+(T-w)*b),Math.round(E+(S-E)*b),Math.round(A+(L-A)*b)];n={bypass:i.bypass,name:i.name,value:D,strValue:"rgb("+D[0]+", "+D[1]+", "+D[2]+")"}}else{if(!s.number)return!1;var B=i.valueMin+(i.valueMax-i.valueMin)*b;n=this.parse(i.name,B,i.bypass,d)}if(!n)return g(),!1;n.mapping=i,i=n;break;case a.data:for(var F=i.field.split("."),N=h.data,I=0;I<F.length&&N;I++)N=N[F[I]];if(null!=N&&(n=this.parse(i.name,N,i.bypass,d)),!n)return g(),!1;n.mapping=i,i=n;break;case a.fn:var O=i.value,M=null!=i.fnValue?i.fnValue:O(t);if(i.prevFnValue=M,null==M)return Fe("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(n=this.parse(i.name,M,i.bypass,d)))return Fe("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+t.id()+"` is invalid)"),!1;n.mapping=Ie(i),i=n;break;case void 0:break;default:return!1}return l?(i.bypassed=u?c.bypassed:c,o[i.name]=i):u?c.bypassed=i:o[i.name]=i,f(),!0},vu.cleanElements=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),e)for(var i=r._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],l=i[s];null!=l&&(l.bypass?l.bypassed=null:i[s]=null)}else r._private.style={}}},vu.update=function(){this._private.cy.mutableElements().updateStyle()},vu.updateTransitions=function(t,e){var n=this,r=t._private,i=t.pstyle("transition-property").value,o=t.pstyle("transition-duration").pfValue,a=t.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},l=!1,c=0;c<i.length;c++){var u=i[c],h=t.pstyle(u),d=e[u];if(d){var p=d.prev,f=null!=d.next?d.next:h,g=!1,y=void 0,m=1e-6;p&&(k(p.pfValue)&&k(f.pfValue)?(g=f.pfValue-p.pfValue,y=p.pfValue+m*g):k(p.value)&&k(f.value)?(g=f.value-p.value,y=p.value+m*g):C(p.value)&&C(f.value)&&(g=p.value[0]!==f.value[0]||p.value[1]!==f.value[1]||p.value[2]!==f.value[2],y=p.strValue),g&&(s[u]=f.strValue,this.applyBypass(t,u,y),l=!0))}}if(!l)return;r.transitioning=!0,new Ki((function(e){a>0?t.delayAnimation(a).play().promise().then(e):e()})).then((function(){return t.animation({style:s,duration:o,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){n.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1}))}else r.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1)},vu.checkTrigger=function(t,e,n,r,i,o){var a=this.properties[e],s=i(a);null!=s&&s(n,r)&&o(a)},vu.checkZOrderTrigger=function(t,e,n,r){var i=this;this.checkTrigger(t,e,n,r,(function(t){return t.triggersZOrder}),(function(){i._private.cy.notify("zorder",t)}))},vu.checkBoundsTrigger=function(t,e,n,r){this.checkTrigger(t,e,n,r,(function(t){return t.triggersBounds}),(function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),i.triggersBoundsOfParallelBeziers&&"curve-style"===e&&("bezier"===n||"bezier"===r)&&t.parallelEdges().forEach((function(t){t.isBundledBezier()&&t.dirtyBoundingBoxCache()})),i.triggersBoundsOfConnectedEdges&&"display"===e&&("none"===n||"none"===r)&&t.connectedEdges().forEach((function(t){t.dirtyBoundingBoxCache()}))}))},vu.checkTriggers=function(t,e,n,r){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,n,r),this.checkBoundsTrigger(t,e,n,r)};var Cu={applyBypass:function(t,e,n,r){var i=this,o=[],a=!0;if("*"===e||"**"===e){if(void 0!==n)for(var s=0;s<i.properties.length;s++){var l=i.properties[s].name,c=this.parse(l,n,!0);c&&o.push(c)}}else if(b(e)){var u=this.parse(e,n,!0);u&&o.push(u)}else{if(!_(e))return!1;var h=e;r=n;for(var d=Object.keys(h),p=0;p<d.length;p++){var f=d[p],g=h[f];if(void 0===g&&(g=h[q(f)]),void 0!==g){var y=this.parse(f,g,!0);y&&o.push(y)}}}if(0===o.length)return!1;for(var m=!1,v=0;v<t.length;v++){for(var x=t[v],C={},w=void 0,k=0;k<o.length;k++){var T=o[k];if(r){var E=x.pstyle(T.name);w=C[T.name]={prev:E}}m=this.applyParsedProperty(x,Ie(T))||m,r&&(w.next=x.pstyle(T.name))}m&&this.updateStyleHints(x),r&&this.updateTransitions(x,C,a)}return m},overrideBypass:function(t,e,n){e=z(e);for(var r=0;r<t.length;r++){var i=t[r],o=i._private.style[e],a=this.properties[e].type,s=a.color,l=a.mutiple,c=o?null!=o.pfValue?o.pfValue:o.value:null;o&&o.bypass?(o.value=n,null!=o.pfValue&&(o.pfValue=n),o.strValue=s?"rgb("+n.join(",")+")":l?n.join(" "):""+n,this.updateStyleHints(i)):this.applyBypass(i,e,n),this.checkTriggers(i,e,c,n)}},removeAllBypasses:function(t,e){return this.removeBypasses(t,this.propertyNames,e)},removeBypasses:function(t,e,n){for(var r=!0,i=0;i<t.length;i++){for(var o=t[i],a={},s=0;s<e.length;s++){var l=e[s],c=this.properties[l],u=o.pstyle(c.name);if(u&&u.bypass){var h="",d=this.parse(l,h,!0),p=a[c.name]={prev:u};this.applyParsedProperty(o,d),p.next=o.pstyle(c.name)}}this.updateStyleHints(o),n&&this.updateTransitions(o,a,r)}}},_u={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var e=this._private.cy,n=e.container(),r=e.window();if(r&&n&&r.getComputedStyle)return r.getComputedStyle(n).getPropertyValue(t)}},wu={getRenderedStyle:function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,e){var n=this;if(t=t[0]){for(var r={},i=0;i<n.properties.length;i++){var o=n.properties[i],a=n.getStylePropertyValue(t,o.name,e);null!=a&&(r[o.name]=a,r[q(o.name)]=a)}return r}},getIndexedStyle:function(t,e,n,r){return t.pstyle(e)[n][r]??t.cy().style().getDefaultProperty(e)[n][0]},getStylePropertyValue:function(t,e,n){var r=this;if(t=t[0]){var i=r.properties[e];i.alias&&(i=i.pointsTo);var o=i.type,a=t.pstyle(i.name);if(a){var s=a.value,l=a.units,c=a.strValue;if(n&&o.number&&null!=s&&k(s)){var u=t.cy().zoom(),h=function(t){return t*u},d=function(t,e){return h(t)+e},p=C(s);return(p?l.every((function(t){return null!=t})):null!=l)?p?s.map((function(t,e){return d(t,l[e])})).join(" "):d(s,l):p?s.map((function(t){return b(t)?t:""+h(t)})).join(" "):""+h(s)}if(null!=c)return c}return null}},getAnimationStartStyle:function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r].name,o=t.pstyle(i);void 0!==o&&(o=_(o)?this.parse(i,o.strValue):this.parse(i,o)),o&&(n[i]=o)}return n},getPropsList:function(t){var e=[],n=t,r=this.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var a=i[o],s=n[a],l=r[a]||r[z(a)],c=this.parse(l.name,s);c&&e.push(c)}return e},getNonDefaultPropertiesHash:function(t,e,n){var r,i,o,a,s,l,c=n.slice();for(s=0;s<e.length;s++)if(r=e[s],null!=(i=t.pstyle(r,!1)))if(null!=i.pfValue)c[0]=pe(a,c[0]),c[1]=fe(a,c[1]);else for(o=i.strValue,l=0;l<o.length;l++)a=o.charCodeAt(l),c[0]=pe(a,c[0]),c[1]=fe(a,c[1]);return c}};wu.getPropertiesHash=wu.getNonDefaultPropertiesHash;var ku={appendFromJson:function(t){for(var e=this,n=0;n<t.length;n++){var r=t[n],i=r.selector,o=r.style||r.css,a=Object.keys(o);e.selector(i);for(var s=0;s<a.length;s++){var l=a[s],c=o[l];e.css(l,c)}}return e},fromJson:function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e},json:function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:o})}return t}},Tu={appendFromString:function(t){var e,n,r,i=this,o=this,a=""+t;function s(){a=a.length>e.length?a.substr(e.length):""}function l(){n=n.length>r.length?n.substr(r.length):""}for(a=a.replace(/[/][*](\s|.)+?[*][/]/g,"");!a.match(/^\s*$/);){var c=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Fe("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}e=c[0];var u=c[1];if("core"!==u&&new il(u).invalid)Fe("Skipping parsing of block: Invalid selector found in string stylesheet: "+u),s();else{var h=c[2],d=!1;n=h;for(var p=[];!n.match(/^\s*$/);){var f=n.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!f){Fe("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),d=!0;break}r=f[0];var g=f[1],y=f[2];i.properties[g]?o.parse(g,y)?(p.push({name:g,val:y}),l()):(Fe("Skipping property: Invalid property definition in: "+r),l()):(Fe("Skipping property: Invalid property name in: "+r),l())}if(d){s();break}o.selector(u);for(var m=0;m<p.length;m++){var v=p[m];o.css(v.name,v.val)}s()}}return o},fromString:function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e}},Eu={};(function(){var t=$,e=W,n=H,r=V,i=X,o=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function(o){var a=t+"|\\w+|"+e+"|"+n+"|"+r+"|"+i;return"^"+o+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+a+")\\s*\\,\\s*("+a+")\\)$"},s=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Eu.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(t,e){switch(t.length){case 2:return"deg"!==e[0]&&"rad"!==e[0]&&"deg"!==e[1]&&"rad"!==e[1];case 1:return b(t[0])||"deg"===e[0]||"rad"===e[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(t){var e=t.length;return 1===e||2===e||4===e}}};var l={zeroNonZero:function(t,e){return(null==t||null==e)&&t!==e||0==t&&0!=e||0!=t&&0==e},any:function(t,e){return t!=e},emptyNonEmpty:function(t,e){var n=N(t),r=N(e);return n&&!r||!n&&r}},c=Eu.types,u=[{name:"label",type:c.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:c.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:c.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:c.bidirectionalSize,triggersBounds:l.any}],h=[{name:"source-label",type:c.text,triggersBounds:l.any},{name:"source-text-rotation",type:c.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:c.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:c.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:c.size,triggersBounds:l.any}],d=[{name:"target-label",type:c.text,triggersBounds:l.any},{name:"target-text-rotation",type:c.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:c.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:c.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:c.size,triggersBounds:l.any}],p=[{name:"font-family",type:c.fontFamily,triggersBounds:l.any},{name:"font-style",type:c.fontStyle,triggersBounds:l.any},{name:"font-weight",type:c.fontWeight,triggersBounds:l.any},{name:"font-size",type:c.size,triggersBounds:l.any},{name:"text-transform",type:c.textTransform,triggersBounds:l.any},{name:"text-wrap",type:c.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:c.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:c.size,triggersBounds:l.any},{name:"text-outline-width",type:c.size,triggersBounds:l.any},{name:"line-height",type:c.positiveNumber,triggersBounds:l.any}],f=[{name:"text-valign",type:c.valign,triggersBounds:l.any},{name:"text-halign",type:c.halign,triggersBounds:l.any},{name:"color",type:c.color},{name:"text-outline-color",type:c.color},{name:"text-outline-opacity",type:c.zeroOneNumber},{name:"text-background-color",type:c.color},{name:"text-background-opacity",type:c.zeroOneNumber},{name:"text-background-padding",type:c.size,triggersBounds:l.any},{name:"text-border-opacity",type:c.zeroOneNumber},{name:"text-border-color",type:c.color},{name:"text-border-width",type:c.size,triggersBounds:l.any},{name:"text-border-style",type:c.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:c.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:c.justification}],g=[{name:"events",type:c.bool,triggersZOrder:l.any},{name:"text-events",type:c.bool,triggersZOrder:l.any}],y=[{name:"display",type:c.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:c.visibility,triggersZOrder:l.any},{name:"opacity",type:c.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:c.zeroOneNumber},{name:"min-zoomed-font-size",type:c.size},{name:"z-compound-depth",type:c.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:c.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:c.number,triggersZOrder:l.any}],m=[{name:"overlay-padding",type:c.size,triggersBounds:l.any},{name:"overlay-color",type:c.color},{name:"overlay-opacity",type:c.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:c.overlayShape,triggersBounds:l.any}],v=[{name:"underlay-padding",type:c.size,triggersBounds:l.any},{name:"underlay-color",type:c.color},{name:"underlay-opacity",type:c.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:c.overlayShape,triggersBounds:l.any}],x=[{name:"transition-property",type:c.propList},{name:"transition-duration",type:c.time},{name:"transition-delay",type:c.time},{name:"transition-timing-function",type:c.easing}],C=function(t,e){return"label"===e.value?-t.poolIndex():e.pfValue},_=[{name:"height",type:c.nodeSize,triggersBounds:l.any,hashOverride:C},{name:"width",type:c.nodeSize,triggersBounds:l.any,hashOverride:C},{name:"shape",type:c.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:c.polygonPointList,triggersBounds:l.any},{name:"background-color",type:c.color},{name:"background-fill",type:c.fill},{name:"background-opacity",type:c.zeroOneNumber},{name:"background-blacken",type:c.nOneOneNumber},{name:"background-gradient-stop-colors",type:c.colors},{name:"background-gradient-stop-positions",type:c.percentages},{name:"background-gradient-direction",type:c.gradientDirection},{name:"padding",type:c.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:c.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:c.boundsExpansion,triggersBounds:l.any}],w=[{name:"border-color",type:c.color},{name:"border-opacity",type:c.zeroOneNumber},{name:"border-width",type:c.size,triggersBounds:l.any},{name:"border-style",type:c.borderStyle}],k=[{name:"outline-color",type:c.color},{name:"outline-opacity",type:c.zeroOneNumber},{name:"outline-width",type:c.size,triggersBounds:l.any},{name:"outline-style",type:c.borderStyle},{name:"outline-offset",type:c.size,triggersBounds:l.any}],T=[{name:"background-image",type:c.urls},{name:"background-image-crossorigin",type:c.bgCrossOrigin},{name:"background-image-opacity",type:c.zeroOneNumbers},{name:"background-image-containment",type:c.bgContainment},{name:"background-image-smoothing",type:c.bools},{name:"background-position-x",type:c.bgPos},{name:"background-position-y",type:c.bgPos},{name:"background-width-relative-to",type:c.bgRelativeTo},{name:"background-height-relative-to",type:c.bgRelativeTo},{name:"background-repeat",type:c.bgRepeat},{name:"background-fit",type:c.bgFit},{name:"background-clip",type:c.bgClip},{name:"background-width",type:c.bgWH},{name:"background-height",type:c.bgWH},{name:"background-offset-x",type:c.bgPos},{name:"background-offset-y",type:c.bgPos}],E=[{name:"position",type:c.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:c.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:c.size,triggersBounds:l.any},{name:"min-width-bias-left",type:c.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:c.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:c.size,triggersBounds:l.any},{name:"min-height-bias-top",type:c.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:c.sizeMaybePercent,triggersBounds:l.any}],S=[{name:"line-style",type:c.lineStyle},{name:"line-color",type:c.color},{name:"line-fill",type:c.fill},{name:"line-cap",type:c.lineCap},{name:"line-opacity",type:c.zeroOneNumber},{name:"line-dash-pattern",type:c.numbers},{name:"line-dash-offset",type:c.number},{name:"line-gradient-stop-colors",type:c.colors},{name:"line-gradient-stop-positions",type:c.percentages},{name:"curve-style",type:c.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:c.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:c.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:c.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:c.size,triggersBounds:l.any},{name:"control-point-distances",type:c.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:c.numbers,triggersBounds:l.any},{name:"segment-distances",type:c.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:c.numbers,triggersBounds:l.any},{name:"taxi-turn",type:c.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:c.size,triggersBounds:l.any},{name:"taxi-direction",type:c.axisDirection,triggersBounds:l.any},{name:"edge-distances",type:c.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:c.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:c.angle,triggersBounds:l.any},{name:"loop-sweep",type:c.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:c.size,triggersBounds:l.any},{name:"target-distance-from-node",type:c.size,triggersBounds:l.any}],A=[{name:"ghost",type:c.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:c.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:c.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:c.zeroOneNumber}],L=[{name:"selection-box-color",type:c.color},{name:"selection-box-opacity",type:c.zeroOneNumber},{name:"selection-box-border-color",type:c.color},{name:"selection-box-border-width",type:c.size},{name:"active-bg-color",type:c.color},{name:"active-bg-opacity",type:c.zeroOneNumber},{name:"active-bg-size",type:c.size},{name:"outside-texture-bg-color",type:c.color},{name:"outside-texture-bg-opacity",type:c.zeroOneNumber}],D=[];Eu.pieBackgroundN=16,D.push({name:"pie-size",type:c.sizeMaybePercent});for(var B=1;B<=Eu.pieBackgroundN;B++)D.push({name:"pie-"+B+"-background-color",type:c.color}),D.push({name:"pie-"+B+"-background-size",type:c.percent}),D.push({name:"pie-"+B+"-background-opacity",type:c.zeroOneNumber});var F=[],I=Eu.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:c.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:c.color},{name:"arrow-fill",type:c.arrowFill},{name:"arrow-width",type:c.arrowWidth}].forEach((function(t){I.forEach((function(e){var n=e+"-"+t.name,r=t.type,i=t.triggersBounds;F.push({name:n,type:r,triggersBounds:i})}))}),{});var O=Eu.properties=[].concat(g,x,y,m,v,A,f,p,u,h,d,_,w,k,T,D,E,S,F,L),M=Eu.propertyGroups={behavior:g,transition:x,visibility:y,overlay:m,underlay:v,ghost:A,commonLabel:f,labelDimensions:p,mainLabel:u,sourceLabel:h,targetLabel:d,nodeBody:_,nodeBorder:w,nodeOutline:k,backgroundImage:T,pie:D,compound:E,edgeLine:S,edgeArrow:F,core:L},P=Eu.propertyGroupNames={};(Eu.propertyGroupKeys=Object.keys(M)).forEach((function(t){P[t]=M[t].map((function(t){return t.name})),M[t].forEach((function(e){return e.groupKey=t}))}));var R=Eu.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Eu.propertyNames=O.map((function(t){return t.name}));for(var z=0;z<O.length;z++){var q=O[z];O[q.name]=q}for(var j=0;j<R.length;j++){var G=R[j],Y=O[G.pointsTo],U={name:G.name,alias:!0,pointsTo:Y};O.push(U),O[G.name]=U}})(),Eu.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},Eu.getDefaultProperties=function(){var t=this._private;if(null!=t.defaultProperties)return t.defaultProperties;for(var e=Q({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(t,e){for(var n=1;n<=Eu.pieBackgroundN;n++){var r=e.name.replace("{{i}}",n),i=e.value;t[r]=i}return t}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce((function(t,e){return Eu.arrowPrefixes.forEach((function(n){var r=n+"-"+e.name,i=e.value;t[r]=i})),t}),{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var o=i.name,a=e[o],s=this.parse(o,a);n[o]=s}}return t.defaultProperties=n,t.defaultProperties},Eu.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Su={parse:function(t,e,n,r){var i=this;if(x(e))return i.parseImplWarn(t,e,n,r);var o,a=xe(t,""+e,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),s=i.propCache=i.propCache||[];return(o=s[a])||(o=s[a]=i.parseImplWarn(t,e,n,r)),(n||"mapping"===r)&&(o=Ie(o))&&(o.value=Ie(o.value)),o},parseImplWarn:function(t,e,n,r){var i=this.parseImpl(t,e,n,r);return!i&&null!=e&&Fe("The style property `".concat(t,": ").concat(e,"` is invalid")),i&&("width"===i.name||"height"===i.name)&&"label"===e&&Fe("The style value of `label` is deprecated for `"+i.name+"`"),i},parseImpl:function(t,e,n,r){var i=this;t=z(t);var o=i.properties[t],a=e,s=i.types;if(!o||void 0===e)return null;o.alias&&(o=o.pointsTo,t=o.name);var l=b(e);l&&(e=e.trim());var c,u,h=o.type;if(!h)return null;if(n&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(x(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:n};if(!(!l||r||e.length<7||"a"!==e[1])){if(e.length>=7&&"d"===e[0]&&(c=new RegExp(s.data.regex).exec(e))){if(n)return!1;var d=s.data;return{name:t,value:c,strValue:""+e,mapped:d,field:c[1],bypass:n}}if(e.length>=10&&"m"===e[0]&&(u=new RegExp(s.mapData.regex).exec(e))){if(n||h.multiple)return!1;var p=s.mapData;if(!h.color&&!h.number)return!1;var f=this.parse(t,u[4]);if(!f||f.mapped)return!1;var g=this.parse(t,u[5]);if(!g||g.mapped)return!1;if(f.pfValue===g.pfValue||f.strValue===g.strValue)return Fe("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+f.strValue+"`"),this.parse(t,f.strValue);if(h.color){var y=f.value,m=g.value;if(!(y[0]!==m[0]||y[1]!==m[1]||y[2]!==m[2]||y[3]!==m[3]&&(null!=y[3]&&1!==y[3]||null!=m[3]&&1!==m[3])))return!1}return{name:t,value:u,strValue:""+e,mapped:p,field:u[1],fieldMin:parseFloat(u[2]),fieldMax:parseFloat(u[3]),valueMin:f.value,valueMax:g.value,bypass:n}}}if(h.multiple&&"multiple"!==r){var v;if(v=l?e.split(/\s+/):C(e)?e:[e],h.evenMultiple&&v.length%2!=0)return null;for(var _=[],w=[],k=[],E="",S=!1,A=0;A<v.length;A++){var L=i.parse(t,v[A],n,"multiple");S=S||b(L.value),_.push(L.value),k.push(null!=L.pfValue?L.pfValue:L.value),w.push(L.units),E+=(A>0?" ":"")+L.strValue}return h.validate&&!h.validate(_,w)?null:h.singleEnum&&S?1===_.length&&b(_[0])?{name:t,value:_[0],strValue:_[0],bypass:n}:null:{name:t,value:_,pfValue:k,strValue:E,bypass:n,units:w}}var D=function(){for(var r=0;r<h.enums.length;r++)if(h.enums[r]===e)return{name:t,value:e,strValue:""+e,bypass:n};return null};if(h.number){var B,F="px";if(h.units&&(B=h.units),h.implicitUnits&&(F=h.implicitUnits),!h.unitless)if(l){var N="px|em"+(h.allowPercent?"|\\%":"");B&&(N=B);var I=e.match("^("+$+")("+N+")?$");I&&(e=I[1],B=I[2]||F)}else(!B||h.implicitUnits)&&(B=F);if(e=parseFloat(e),isNaN(e)&&void 0===h.enums)return null;if(isNaN(e)&&void 0!==h.enums)return e=a,D();if(h.integer&&!T(e)||void 0!==h.min&&(e<h.min||h.strictMin&&e===h.min)||void 0!==h.max&&(e>h.max||h.strictMax&&e===h.max))return null;var O={name:t,value:e,strValue:""+e+(B||""),units:B,bypass:n};return h.unitless||"px"!==B&&"em"!==B?O.pfValue=e:O.pfValue="px"!==B&&B?this.getEmSizeInPixels()*e:e,("ms"===B||"s"===B)&&(O.pfValue="ms"===B?e:1e3*e),("deg"===B||"rad"===B)&&(O.pfValue="rad"===B?e:wn(e)),"%"===B&&(O.pfValue=e/100),O}if(h.propList){var M=[],P=""+e;if("none"!==P){for(var R=P.split(/\s*,\s*|\s+/),q=0;q<R.length;q++){var j=R[q].trim();i.properties[j]?M.push(j):Fe("`"+j+"` is not a valid property name")}if(0===M.length)return null}return{name:t,value:M,strValue:0===M.length?"none":M.join(" "),bypass:n}}if(h.color){var G=rt(e);return G?{name:t,value:G,pfValue:G,strValue:"rgb("+G[0]+","+G[1]+","+G[2]+")",bypass:n}:null}if(h.regex||h.regexes){if(h.enums){var Y=D();if(Y)return Y}for(var W=h.regexes?h.regexes:[h.regex],U=0;U<W.length;U++){var H=new RegExp(W[U]).exec(e);if(H)return{name:t,value:h.singleRegexMatchValue?H[1]:H,strValue:""+e,bypass:n}}return null}return h.string?{name:t,value:""+e,strValue:""+e,bypass:n}:h.enums?D():null}},Au=function t(e){if(!(this instanceof t))return new t(e);D(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):De("A style must have a core reference")},Lu=Au.prototype;Lu.instanceString=function(){return"style"},Lu.clear=function(){for(var t=this._private,e=t.cy.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(e,!0),e.forEach((function(t){var e=t[0]._private;e.styleDirty=!0,e.appliedInitStyle=!1})),this},Lu.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},Lu.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},Lu.selector=function(t){var e="core"===t?null:new il(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this},Lu.css=function(){var t=this,e=arguments;if(1===e.length)for(var n=e[0],r=0;r<t.properties.length;r++){var i=t.properties[r],o=n[i.name];void 0===o&&(o=n[q(i.name)]),void 0!==o&&this.cssRule(i.name,o)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},Lu.style=Lu.css,Lu.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},Lu.append=function(t){return B(t)?t.appendToStyle(this):C(t)?this.appendFromJson(t):b(t)&&this.appendFromString(t),this},Au.fromJson=function(t,e){var n=new Au(t);return n.fromJson(e),n},Au.fromString=function(t,e){return new Au(t).fromString(e)},[vu,Cu,_u,wu,ku,Tu,Eu,Su].forEach((function(t){Q(Lu,t)})),Au.types=Lu.types,Au.properties=Lu.properties,Au.propertyGroups=Lu.propertyGroups,Au.propertyGroupNames=Lu.propertyGroupNames,Au.propertyGroupKeys=Lu.propertyGroupKeys;var Du={style:function(t){return t&&this.setStyle(t).update(),this._private.style},setStyle:function(t){var e=this._private;return B(t)?e.style=t.generateStyle(this):C(t)?e.style=Au.fromJson(this,t):b(t)?e.style=Au.fromString(this,t):e.style=Au(this),e.style},updateStyle:function(){this.mutableElements().updateStyle()}},Bu="single",Fu={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var e=this._private;return null==e.selectionType&&(e.selectionType=Bu),void 0===t?e.selectionType:(("additive"===t||"single"===t)&&(e.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,e,n,r,i,o=arguments,a=this._private.pan;switch(o.length){case 0:return a;case 1:if(b(o[0]))return a[t=o[0]];if(_(o[0])){if(!this._private.panningEnabled)return this;r=(n=o[0]).x,i=n.y,k(r)&&(a.x=r),k(i)&&(a.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=o[0],e=o[1],("x"===t||"y"===t)&&k(e)&&(a[t]=e),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,e){var n,r,i,o,a,s=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:_(t)&&(o=(i=s[0]).x,a=i.y,k(o)&&(l.x+=o),k(a)&&(l.y+=a),this.emit("pan viewport"));break;case 2:r=e,("x"===(n=t)||"y"===n)&&k(r)&&(l[n]+=r),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,e){if(k(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n;if(b(t)){var r=t;t=this.$(r)}else if(O(t)){var i=t;(n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1}else S(t)||(t=this.mutableElements());if(!S(t)||!t.empty()){n=n||t.boundingBox();var o,a=this.width(),s=this.height();if(e=k(e)?e:0,!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:o=(o=(o=Math.min((a-2*e)/n.w,(s-2*e)/n.h))>this._private.maxZoom?this._private.maxZoom:o)<this._private.minZoom?this._private.minZoom:o,pan:{x:(a-o*(n.x1+n.x2))/2,y:(s-o*(n.y1+n.y2))/2}}}}},zoomRange:function(t,e){var n=this._private;if(null==e){var r=t;t=r.min,e=r.max}return k(t)&&k(e)&&t<=e?(n.minZoom=t,n.maxZoom=e):k(t)&&void 0===e&&t<=n.maxZoom?n.minZoom=t:k(e)&&void 0===t&&e>=n.minZoom&&(n.maxZoom=e),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var e,n,r=this._private,i=r.pan,o=r.zoom,a=!1;if(r.zoomingEnabled||(a=!0),k(t)?n=t:_(t)&&(n=t.level,null!=t.position?e=yn(t.position,o,i):null!=t.renderedPosition&&(e=t.renderedPosition),null!=e&&!r.panningEnabled&&(a=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,a||!k(n)||n===o||null!=e&&(!k(e.x)||!k(e.y)))return null;if(null!=e){var s=i,l=o,c=n;return{zoomed:!0,panned:!0,zoom:c,pan:{x:-c/l*(e.x-s.x)+e.x,y:-c/l*(e.y-s.y)+e.y}}}return{zoomed:!0,panned:!1,zoom:n,pan:i}},zoom:function(t){if(void 0===t)return this._private.zoom;var e=this.getZoomedViewport(t),n=this._private;return null!=e&&e.zoomed?(n.zoom=e.zoom,e.panned&&(n.pan.x=e.pan.x,n.pan.y=e.pan.y),this.emit("zoom"+(e.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var e=this._private,n=!0,r=!0,i=[],o=!1,a=!1;if(!t)return this;if(k(t.zoom)||(n=!1),_(t.pan)||(r=!1),!n&&!r)return this;if(n){var s=t.zoom;s<e.minZoom||s>e.maxZoom||!e.zoomingEnabled?o=!0:(e.zoom=s,i.push("zoom"))}if(r&&(!o||!t.cancelOnFailedZoom)&&e.panningEnabled){var l=t.pan;k(l.x)&&(e.pan.x=l.x,a=!1),k(l.y)&&(e.pan.y=l.y,a=!1),a||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(b(t)){var n=t;t=this.mutableElements().filter(n)}else S(t)||(t=this.mutableElements());if(0!==t.length){var r=t.boundingBox(),i=this.width(),o=this.height();return{x:(i-(e=void 0===e?this._private.zoom:e)*(r.x1+r.x2))/2,y:(o-e*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t,e,n=this._private,r=n.container,i=this;return n.sizeCache=n.sizeCache||(r?(t=i.window().getComputedStyle(r),e=function(e){return parseFloat(t.getPropertyValue(e))},{width:r.clientWidth-e("padding-left")-e("padding-right"),height:r.clientHeight-e("padding-top")-e("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}},multiClickDebounceTime:function(t){return t?(this._private.multiClickDebounceTime=t,this):this._private.multiClickDebounceTime}};Fu.centre=Fu.center,Fu.autolockNodes=Fu.autolock,Fu.autoungrabifyNodes=Fu.autoungrabify;var Nu={data:Ds.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Ds.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Ds.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ds.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Nu.attr=Nu.data,Nu.removeAttr=Nu.removeData;var Iu=function(t){var e=this,n=(t=Q({},t)).container;n&&!E(n)&&E(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{})&&r.cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=e;var o=void 0!==d&&void 0!==n&&!t.headless,a=t;a.layout=Q({name:o?"grid":"null"},a.layout),a.renderer=Q({name:o?"canvas":"null"},a.renderer);var s=function(t,e,n){return void 0!==e?e:void 0!==n?n:t},l=this._private={container:n,ready:!1,options:a,elements:new Vc(this),listeners:[],aniEles:new Vc(this),data:a.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:s(!0,a.zoomingEnabled),userZoomingEnabled:s(!0,a.userZoomingEnabled),panningEnabled:s(!0,a.panningEnabled),userPanningEnabled:s(!0,a.userPanningEnabled),boxSelectionEnabled:s(!0,a.boxSelectionEnabled),autolock:s(!1,a.autolock,a.autolockNodes),autoungrabify:s(!1,a.autoungrabify,a.autoungrabifyNodes),autounselectify:s(!1,a.autounselectify),styleEnabled:void 0===a.styleEnabled?o:a.styleEnabled,zoom:k(a.zoom)?a.zoom:1,pan:{x:_(a.pan)&&k(a.pan.x)?a.pan.x:0,y:_(a.pan)&&k(a.pan.y)?a.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:s(250,a.multiClickDebounceTime)};this.createEmitter(),this.selectionType(a.selectionType),this.zoomRange({min:a.minZoom,max:a.maxZoom});var c=function(t,e){if(t.some(M))return Ki.all(t).then(e);e(t)};l.styleEnabled&&e.setStyle([]);var u=Q({},a,a.renderer);e.initRenderer(u);var h=function(t,n,r){e.notifications(!1);var i=e.mutableElements();i.length>0&&i.remove(),null!=t&&(_(t)||C(t))&&e.add(t),e.one("layoutready",(function(t){e.notifications(!0),e.emit(t),e.one("load",n),e.emitAndNotify("load")})).one("layoutstop",(function(){e.one("done",r),e.emit("done")}));var o=Q({},e._private.options.layout);o.eles=e.elements(),e.layout(o).run()};c([a.style,a.elements],(function(t){var n=t[0],o=t[1];l.styleEnabled&&e.style().append(n),h(o,(function(){e.startAnimationLoop(),l.ready=!0,x(a.ready)&&e.on("ready",a.ready);for(var t=0;t<i.length;t++){var n=i[t];e.on("ready",n)}r&&(r.readies=[]),e.emit("ready")}),a.done)}))},Ou=Iu.prototype;Q(Ou,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},window:function(){if(null==this._private.container)return d;var t=this._private.container.ownerDocument;return void 0===t||null==t?d:t.defaultView||d},mount:function(t){if(null!=t){var e=this,n=e._private,r=n.options;return!E(t)&&E(t[0])&&(t=t[0]),e.stopAnimationLoop(),e.destroyRenderer(),n.container=t,n.styleEnabled=!0,e.invalidateSize(),e.initRenderer(Q({},r,r.renderer,{name:"null"===r.renderer.name?"canvas":r.renderer.name})),e.startAnimationLoop(),e.style(r.style),e.emit("mount"),e}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return Ie(this._private.options)},json:function(t){var e=this,n=e._private,r=e.mutableElements(),i=function(t){return e.getElementById(t.id())};if(_(t)){if(e.startBatch(),t.elements){var o={},a=function(t,n){for(var r=[],i=[],a=0;a<t.length;a++){var s=t[a];if(s.data.id){var l=""+s.data.id,c=e.getElementById(l);o[l]=!0,0!==c.length?i.push({ele:c,json:s}):(n&&(s.group=n),r.push(s))}else Fe("cy.json() cannot handle elements without an ID attribute")}e.add(r);for(var u=0;u<i.length;u++){var h=i[u],d=h.ele,p=h.json;d.json(p)}};if(C(t.elements))a(t.elements);else for(var s=["nodes","edges"],l=0;l<s.length;l++){var c=s[l],u=t.elements[c];C(u)&&a(u,c)}var h=e.collection();r.filter((function(t){return!o[t.id()]})).forEach((function(t){t.isParent()?h.merge(t):t.remove()})),h.forEach((function(t){return t.children().move({parent:null})})),h.forEach((function(t){return i(t).remove()}))}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==n.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x!==n.pan.x||t.pan.y!==n.pan.y)&&e.pan(t.pan),t.data&&e.data(t.data);for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<d.length;p++){var f=d[p];null!=t[f]&&e[f](t[f])}return e.endBatch(),this}var g={};t?g.elements=this.elements().map((function(t){return t.json()})):(g.elements={},r.forEach((function(t){var e=t.group();g.elements[e]||(g.elements[e]=[]),g.elements[e].push(t.json())}))),this._private.styleEnabled&&(g.style=e.style().json()),g.data=Ie(e.data());var y=n.options;return g.zoomingEnabled=n.zoomingEnabled,g.userZoomingEnabled=n.userZoomingEnabled,g.zoom=n.zoom,g.minZoom=n.minZoom,g.maxZoom=n.maxZoom,g.panningEnabled=n.panningEnabled,g.userPanningEnabled=n.userPanningEnabled,g.pan=Ie(n.pan),g.boxSelectionEnabled=n.boxSelectionEnabled,g.renderer=Ie(y.renderer),g.hideEdgesOnViewport=y.hideEdgesOnViewport,g.textureOnViewport=y.textureOnViewport,g.wheelSensitivity=y.wheelSensitivity,g.motionBlur=y.motionBlur,g.multiClickDebounceTime=y.multiClickDebounceTime,g}}),Ou.$id=Ou.getElementById,[Kc,lu,hu,du,pu,fu,yu,mu,Du,Fu,Nu].forEach((function(t){Q(Ou,t)}));var Mu={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}},Pu={maximal:!1,acyclic:!1},Ru=function(t){return t.scratch("breadthfirst")},zu=function(t,e){return t.scratch("breadthfirst",e)};function qu(t){this.options=Q({},Mu,Pu,t)}qu.prototype.run=function(){var t,e=this.options,n=e,r=e.cy,i=n.eles,o=i.nodes().filter((function(t){return!t.isParent()})),a=i,s=n.directed,l=n.acyclic||n.maximal||n.maximalAdjustments>0,c=In(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(S(n.roots))t=n.roots;else if(C(n.roots)){for(var u=[],h=0;h<n.roots.length;h++){var d=n.roots[h],p=r.getElementById(d);u.push(p)}t=r.collection(u)}else if(b(n.roots))t=r.$(n.roots);else if(s)t=o.roots();else{var f=i.components();t=r.collection();for(var g=function(e){var n=f[e],r=n.maxDegree(!1),i=n.filter((function(t){return t.degree(!1)===r}));t=t.add(i)},y=0;y<f.length;y++)g(y)}var m=[],v={},x=function(t,e){null==m[e]&&(m[e]=[]);var n=m[e].length;m[e].push(t),zu(t,{index:n,depth:e})},_=function(t,e){var n=Ru(t),r=n.depth,i=n.index;m[r][i]=null,x(t,e)};a.bfs({roots:t,directed:n.directed,visit:function(t,e,n,r,i){var o=t[0],a=o.id();x(o,i),v[a]=!0}});for(var w=[],k=0;k<o.length;k++){var T=o[k];v[T.id()]||w.push(T)}var E=function(t){for(var e=m[t],n=0;n<e.length;n++){var r=e[n];null!=r?zu(r,{depth:t,index:n}):(e.splice(n,1),n--)}},A=function(){for(var t=0;t<m.length;t++)E(t)},L=function(t,e){for(var r=Ru(t),o=t.incomers().filter((function(t){return t.isNode()&&i.has(t)})),a=-1,s=t.id(),l=0;l<o.length;l++){var c=o[l],u=Ru(c);a=Math.max(a,u.depth)}if(r.depth<=a){if(!n.acyclic&&e[s])return null;var h=a+1;return _(t,h),e[s]=h,!0}return!1};if(s&&l){var D=[],B={},F=function(t){return D.push(t)},N=function(){return D.shift()};for(o.forEach((function(t){return D.push(t)}));D.length>0;){var I=N(),O=L(I,B);if(O)I.outgoers().filter((function(t){return t.isNode()&&i.has(t)})).forEach(F);else if(null===O){Fe("Detected double maximal shift for node `"+I.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}A();var M=0;if(n.avoidOverlap)for(var P=0;P<o.length;P++){var R=o[P].layoutDimensions(n),z=R.w,q=R.h;M=Math.max(M,z,q)}var j={},G=function(t){if(j[t.id()])return j[t.id()];for(var e=Ru(t).depth,n=t.neighborhood(),r=0,i=0,a=0;a<n.length;a++){var s=n[a];if(!s.isEdge()&&!s.isParent()&&o.has(s)){var l=Ru(s);if(null!=l){var c=l.index,u=l.depth;if(null!=c&&null!=u){var h=m[u].length;u<e&&(r+=c/h,i++)}}}}return r/=i=Math.max(1,i),0===i&&(r=0),j[t.id()]=r,r},$=function(t,e){var n=G(t)-G(e);return 0===n?K(t.id(),e.id()):n};void 0!==n.depthSort&&($=n.depthSort);for(var Y=0;Y<m.length;Y++)m[Y].sort($),E(Y);for(var W=[],U=0;U<w.length;U++)W.push(w[U]);m.unshift(W),A();for(var H=0,V=0;V<m.length;V++)H=Math.max(m[V].length,H);var X={x:c.x1+c.w/2,y:c.x1+c.h/2},Z=m.reduce((function(t,e){return Math.max(t,e.length)}),0),Q=function(t){var e=Ru(t),r=e.depth,i=e.index,o=m[r].length,a=Math.max(c.w/((n.grid?Z:o)+1),M),s=Math.max(c.h/(m.length+1),M),l=Math.min(c.w/2/m.length,c.h/2/m.length);if(l=Math.max(l,M),n.circle){var u=l*r+l-(m.length>0&&m[0].length<=3?l/2:0),h=2*Math.PI/m[r].length*i;return 0===r&&1===m[0].length&&(u=1),{x:X.x+u*Math.cos(h),y:X.y+u*Math.sin(h)}}return{x:X.x+(i+1-(o+1)/2)*a,y:(r+1)*s}};return i.nodes().layoutPositions(this,n,Q),this};var ju={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Gu(t){this.options=Q({},ju,t)}Gu.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,o=r.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var a,s=In(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l={x:s.x1+s.w/2,y:s.y1+s.h/2},c=(void 0===e.sweep?2*Math.PI-2*Math.PI/o.length:e.sweep)/Math.max(1,o.length-1),u=0,h=0;h<o.length;h++){var d=o[h].layoutDimensions(e),p=d.w,f=d.h;u=Math.max(u,p,f)}if(a=k(e.radius)?e.radius:o.length<=1?0:Math.min(s.h,s.w)/2-u,o.length>1&&e.avoidOverlap){u*=1.75;var g=Math.cos(c)-Math.cos(0),y=Math.sin(c)-Math.sin(0),m=Math.sqrt(u*u/(g*g+y*y));a=Math.max(m,a)}var v=function(t,n){var r=e.startAngle+n*c*(i?1:-1),o=a*Math.cos(r),s=a*Math.sin(r);return{x:l.x+o,y:l.y+s}};return r.nodes().layoutPositions(this,e,v),this};var $u={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Yu(t){this.options=Q({},$u,t)}Yu.prototype.run=function(){for(var t=this.options,e=t,n=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles,o=i.nodes().not(":parent"),a=In(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},l=[],c=0,u=0;u<o.length;u++){var h=o[u],d=void 0;d=e.concentric(h),l.push({value:d,node:h}),h._private.scratch.concentric=d}o.updateStyle();for(var p=0;p<o.length;p++){var f=o[p].layoutDimensions(e);c=Math.max(c,f.w,f.h)}l.sort((function(t,e){return e.value-t.value}));for(var g=e.levelWidth(o),y=[[]],m=y[0],v=0;v<l.length;v++){var b=l[v];m.length>0&&Math.abs(m[0].value-b.value)>=g&&(m=[],y.push(m)),m.push(b)}var x=c+e.minNodeSpacing;if(!e.avoidOverlap){var C=y.length>0&&y[0].length>1,_=(Math.min(a.w,a.h)/2-x)/(y.length+C?1:0);x=Math.min(x,_)}for(var w=0,k=0;k<y.length;k++){var T=y[k],E=void 0===e.sweep?2*Math.PI-2*Math.PI/T.length:e.sweep,S=T.dTheta=E/Math.max(1,T.length-1);if(T.length>1&&e.avoidOverlap){var A=Math.cos(S)-Math.cos(0),L=Math.sin(S)-Math.sin(0),D=Math.sqrt(x*x/(A*A+L*L));w=Math.max(D,w)}T.r=w,w+=x}if(e.equidistant){for(var B=0,F=0,N=0;N<y.length;N++){var I=y[N].r-F;B=Math.max(B,I)}F=0;for(var O=0;O<y.length;O++){var M=y[O];0===O&&(F=M.r),M.r=F,F+=B}}for(var P={},R=0;R<y.length;R++)for(var z=y[R],q=z.dTheta,j=z.r,G=0;G<z.length;G++){var $=z[G],Y=e.startAngle+(n?1:-1)*q*G,W={x:s.x+j*Math.cos(Y),y:s.y+j*Math.sin(Y)};P[$.node.id()]=W}return i.nodes().layoutPositions(this,e,(function(t){var e=t.id();return P[e]})),this};var Wu,Uu={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,e){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Hu(t){this.options=Q({},Uu,t),this.options.layout=this;var e=this.options.eles.nodes(),n=this.options.eles.edges().filter((function(t){var n=t.source().data("id"),r=t.target().data("id"),i=e.some((function(t){return t.data("id")===n})),o=e.some((function(t){return t.data("id")===r}));return!i||!o}));this.options.eles=this.options.eles.not(n)}Hu.prototype.run=function(){var t=this.options,e=t.cy,n=this;n.stopped=!1,(!0===t.animate||!1===t.animate)&&n.emit({type:"layoutstart",layout:n}),Wu=!0===t.debug;var r=Xu(e,n,t);Wu&&Vu(r),t.randomize&&Qu(r);var i=le(),o=function(){th(r,e,t),!0===t.fit&&e.fit(t.padding)},a=function(e){return!(n.stopped||e>=t.numIter||(eh(r,t),r.temperature=r.temperature*t.coolingFactor,r.temperature<t.minTemp))},s=function(){if(!0===t.animate||!1===t.animate)o(),n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n});else{var e=t.eles.nodes(),i=Ju(r,t,e);e.layoutPositions(n,t,i)}},l=0,c=!0;if(!0===t.animate){var u=function e(){for(var n=0;c&&n<t.refresh;)c=a(l),l++,n++;c?(le()-i>=t.animationThreshold&&o(),se(e)):(ph(r,t),s())};u()}else{for(;c;)c=a(l),l++;ph(r,t),s()}return this},Hu.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Hu.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Vu,Xu=function(t,e,n){for(var r=n.eles.edges(),i=n.eles.nodes(),o=In(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),a={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},s=n.eles.components(),l={},c=0;c<s.length;c++)for(var u=s[c],h=0;h<u.length;h++)l[u[h].id()]=c;for(c=0;c<a.nodeSize;c++){var d=(m=i[c]).layoutDimensions(n);(I={}).isLocked=m.locked(),I.id=m.data("id"),I.parentId=m.data("parent"),I.cmptId=l[m.id()],I.children=[],I.positionX=m.position("x"),I.positionY=m.position("y"),I.offsetX=0,I.offsetY=0,I.height=d.w,I.width=d.h,I.maxX=I.positionX+I.width/2,I.minX=I.positionX-I.width/2,I.maxY=I.positionY+I.height/2,I.minY=I.positionY-I.height/2,I.padLeft=parseFloat(m.style("padding")),I.padRight=parseFloat(m.style("padding")),I.padTop=parseFloat(m.style("padding")),I.padBottom=parseFloat(m.style("padding")),I.nodeRepulsion=x(n.nodeRepulsion)?n.nodeRepulsion(m):n.nodeRepulsion,a.layoutNodes.push(I),a.idToIndex[I.id]=c}var p=[],f=0,g=-1,y=[];for(c=0;c<a.nodeSize;c++){var m,v=(m=a.layoutNodes[c]).parentId;null!=v?a.layoutNodes[a.idToIndex[v]].children.push(m.id):(p[++g]=m.id,y.push(m.id))}for(a.graphSet.push(y);f<=g;){var b=p[f++],C=a.idToIndex[b],_=a.layoutNodes[C].children;if(_.length>0)for(a.graphSet.push(_),c=0;c<_.length;c++)p[++g]=_[c]}for(c=0;c<a.graphSet.length;c++){var w=a.graphSet[c];for(h=0;h<w.length;h++){var k=a.idToIndex[w[h]];a.indexToGraph[k]=c}}for(c=0;c<a.edgeSize;c++){var T=r[c],E={};E.id=T.data("id"),E.sourceId=T.data("source"),E.targetId=T.data("target");var S=x(n.idealEdgeLength)?n.idealEdgeLength(T):n.idealEdgeLength,A=x(n.edgeElasticity)?n.edgeElasticity(T):n.edgeElasticity,L=a.idToIndex[E.sourceId],D=a.idToIndex[E.targetId];if(a.indexToGraph[L]!=a.indexToGraph[D]){for(var B=Ku(E.sourceId,E.targetId,a),F=a.graphSet[B],N=0,I=a.layoutNodes[L];-1===F.indexOf(I.id);)I=a.layoutNodes[a.idToIndex[I.parentId]],N++;for(I=a.layoutNodes[D];-1===F.indexOf(I.id);)I=a.layoutNodes[a.idToIndex[I.parentId]],N++;S*=N*n.nestingFactor}E.idealLength=S,E.elasticity=A,a.layoutEdges.push(E)}return a},Ku=function(t,e,n){var r=Zu(t,e,0,n);return 2>r.count?0:r.graph},Zu=function t(e,n,r,i){var o=i.graphSet[r];if(-1<o.indexOf(e)&&-1<o.indexOf(n))return{count:2,graph:r};for(var a=0,s=0;s<o.length;s++){var l=o[s],c=i.idToIndex[l],u=i.layoutNodes[c].children;if(0!==u.length){var h=t(e,n,i.indexToGraph[i.idToIndex[u[0]]],i);if(0!==h.count){if(1!==h.count)return h;if(2==++a)break}}}return{count:a,graph:r}},Qu=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var o=t.layoutNodes[i];0===o.children.length&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},Ju=function(t,e,n){var r=t.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return e.boundingBox&&(n.forEach((function(e){var n=t.layoutNodes[t.idToIndex[e.data("id")]];i.x1=Math.min(i.x1,n.positionX),i.x2=Math.max(i.x2,n.positionX),i.y1=Math.min(i.y1,n.positionY),i.y2=Math.max(i.y2,n.positionY)})),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(n,o){var a=t.layoutNodes[t.idToIndex[n.data("id")]];if(e.boundingBox){var s=(a.positionX-i.x1)/i.w,l=(a.positionY-i.y1)/i.h;return{x:r.x1+s*r.w,y:r.y1+l*r.h}}return{x:a.positionX,y:a.positionY}}},th=function(t,e,n){var r=n.layout,i=n.eles.nodes(),o=Ju(t,n,i);i.positions(o),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},eh=function(t,e,n){nh(t,e),sh(t),lh(t,e),ch(t),uh(t)},nh=function(t,e){for(var n=0;n<t.graphSet.length;n++)for(var r=t.graphSet[n],i=r.length,o=0;o<i;o++)for(var a=t.layoutNodes[t.idToIndex[r[o]]],s=o+1;s<i;s++){var l=t.layoutNodes[t.idToIndex[r[s]]];ih(a,l,t,e)}},rh=function(t){return-t+2*t*Math.random()},ih=function(t,e,n,r){if(t.cmptId===e.cmptId||n.isCompound){var i=e.positionX-t.positionX,o=e.positionY-t.positionY,a=1;0===i&&0===o&&(i=rh(a),o=rh(a));var s=oh(t,e,i,o);if(s>0)var l=(u=r.nodeOverlap*s)*i/(y=Math.sqrt(i*i+o*o)),c=u*o/y;else{var u,h=ah(t,i,o),d=ah(e,-1*i,-1*o),p=d.x-h.x,f=d.y-h.y,g=p*p+f*f,y=Math.sqrt(g);l=(u=(t.nodeRepulsion+e.nodeRepulsion)/g)*p/y,c=u*f/y}t.isLocked||(t.offsetX-=l,t.offsetY-=c),e.isLocked||(e.offsetX+=l,e.offsetY+=c)}},oh=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else i=e.maxX-t.minX;if(r>0)var o=t.maxY-e.minY;else o=e.maxY-t.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},ah=function(t,e,n){var r=t.positionX,i=t.positionY,o=t.height||1,a=t.width||1,s=n/e,l=o/a,c={};return 0===e&&0<n||0===e&&0>n?(c.x=r,c.y=i+o/2,c):0<e&&-1*l<=s&&s<=l?(c.x=r+a/2,c.y=i+a*n/2/e,c):0>e&&-1*l<=s&&s<=l?(c.x=r-a/2,c.y=i-a*n/2/e,c):0<n&&(s<=-1*l||s>=l)?(c.x=r+o*e/2/n,c.y=i+o/2,c):(0>n&&(s<=-1*l||s>=l)&&(c.x=r-o*e/2/n,c.y=i-o/2),c)},sh=function(t,e){for(var n=0;n<t.edgeSize;n++){var r=t.layoutEdges[n],i=t.idToIndex[r.sourceId],o=t.layoutNodes[i],a=t.idToIndex[r.targetId],s=t.layoutNodes[a],l=s.positionX-o.positionX,c=s.positionY-o.positionY;if(0!==l||0!==c){var u=ah(o,l,c),h=ah(s,-1*l,-1*c),d=h.x-u.x,p=h.y-u.y,f=Math.sqrt(d*d+p*p),g=Math.pow(r.idealLength-f,2)/r.elasticity;if(0!==f)var y=g*d/f,m=g*p/f;else y=0,m=0;o.isLocked||(o.offsetX+=y,o.offsetY+=m),s.isLocked||(s.offsetX-=y,s.offsetY-=m)}}},lh=function(t,e){if(0!==e.gravity)for(var n=1,r=0;r<t.graphSet.length;r++){var i=t.graphSet[r],o=i.length;if(0===r)var a=t.clientHeight/2,s=t.clientWidth/2;else{var l=t.layoutNodes[t.idToIndex[i[0]]],c=t.layoutNodes[t.idToIndex[l.parentId]];a=c.positionX,s=c.positionY}for(var u=0;u<o;u++){var h=t.layoutNodes[t.idToIndex[i[u]]];if(!h.isLocked){var d=a-h.positionX,p=s-h.positionY,f=Math.sqrt(d*d+p*p);if(f>n){var g=e.gravity*d/f,y=e.gravity*p/f;h.offsetX+=g,h.offsetY+=y}}}}},ch=function(t,e){var n=[],r=0,i=-1;for(n.push.apply(n,t.graphSet[0]),i+=t.graphSet[0].length;r<=i;){var o=n[r++],a=t.idToIndex[o],s=t.layoutNodes[a],l=s.children;if(0<l.length&&!s.isLocked){for(var c=s.offsetX,u=s.offsetY,h=0;h<l.length;h++){var d=t.layoutNodes[t.idToIndex[l[h]]];d.offsetX+=c,d.offsetY+=u,n[++i]=l[h]}s.offsetX=0,s.offsetY=0}}},uh=function(t,e){for(var n=0;n<t.nodeSize;n++)0<(i=t.layoutNodes[n]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0);for(n=0;n<t.nodeSize;n++)if(!(0<(i=t.layoutNodes[n]).children.length||i.isLocked)){var r=hh(i.offsetX,i.offsetY,t.temperature);i.positionX+=r.x,i.positionY+=r.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,dh(i,t)}for(n=0;n<t.nodeSize;n++){var i;0<(i=t.layoutNodes[n]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},hh=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else i={x:t,y:e};return i},dh=function t(e,n){var r=e.parentId;if(null!=r){var i=n.layoutNodes[n.idToIndex[r]],o=!1;if((null==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(null==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(null==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(null==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o)return t(i,n)}},ph=function(t,e){for(var n=t.layoutNodes,r=[],i=0;i<n.length;i++){var o=n[i],a=o.cmptId;(r[a]=r[a]||[]).push(o)}var s=0;for(i=0;i<r.length;i++)if(g=r[i]){g.x1=1/0,g.x2=-1/0,g.y1=1/0,g.y2=-1/0;for(var l=0;l<g.length;l++){var c=g[l];g.x1=Math.min(g.x1,c.positionX-c.width/2),g.x2=Math.max(g.x2,c.positionX+c.width/2),g.y1=Math.min(g.y1,c.positionY-c.height/2),g.y2=Math.max(g.y2,c.positionY+c.height/2)}g.w=g.x2-g.x1,g.h=g.y2-g.y1,s+=g.w*g.h}r.sort((function(t,e){return e.w*e.h-t.w*t.h}));var u=0,h=0,d=0,p=0,f=Math.sqrt(s)*t.clientWidth/t.clientHeight;for(i=0;i<r.length;i++){var g;if(g=r[i]){for(l=0;l<g.length;l++)(c=g[l]).isLocked||(c.positionX+=u-g.x1,c.positionY+=h-g.y1);u+=g.w+e.componentSpacing,d+=g.w+e.componentSpacing,p=Math.max(p,g.h),d>f&&(h+=p+e.componentSpacing,u=0,d=0,p=0)}}},fh={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function gh(t){this.options=Q({},fh,t)}gh.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=r.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var o=In(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===o.h||0===o.w)r.nodes().layoutPositions(this,e,(function(t){return{x:o.x1,y:o.y1}}));else{var a=i.size(),s=Math.sqrt(a*o.h/o.w),l=Math.round(s),c=Math.round(o.w/o.h*s),u=function(t){if(null==t)return Math.min(l,c);Math.min(l,c)==l?l=t:c=t},h=function(t){if(null==t)return Math.max(l,c);Math.max(l,c)==l?l=t:c=t},d=e.rows,p=null!=e.cols?e.cols:e.columns;if(null!=d&&null!=p)l=d,c=p;else if(null!=d&&null==p)l=d,c=Math.ceil(a/l);else if(null==d&&null!=p)c=p,l=Math.ceil(a/c);else if(c*l>a){var f=u(),g=h();(f-1)*g>=a?u(f-1):(g-1)*f>=a&&h(g-1)}else for(;c*l<a;){var y=u(),m=h();(m+1)*y>=a?h(m+1):u(y+1)}var v=o.w/c,b=o.h/l;if(e.condense&&(v=0,b=0),e.avoidOverlap)for(var x=0;x<i.length;x++){var C=i[x],_=C._private.position;(null==_.x||null==_.y)&&(_.x=0,_.y=0);var w=C.layoutDimensions(e),k=e.avoidOverlapPadding,T=w.w+k,E=w.h+k;v=Math.max(v,T),b=Math.max(b,E)}for(var S={},A=function(t,e){return!!S["c-"+t+"-"+e]},L=function(t,e){S["c-"+t+"-"+e]=!0},D=0,B=0,F=function(){++B>=c&&(B=0,D++)},N={},I=0;I<i.length;I++){var O=i[I],M=e.position(O);if(M&&(void 0!==M.row||void 0!==M.col)){var P={row:M.row,col:M.col};if(void 0===P.col)for(P.col=0;A(P.row,P.col);)P.col++;else if(void 0===P.row)for(P.row=0;A(P.row,P.col);)P.row++;N[O.id()]=P,L(P.row,P.col)}}var R=function(t,e){var n,r;if(t.locked()||t.isParent())return!1;var i=N[t.id()];if(i)n=i.col*v+v/2+o.x1,r=i.row*b+b/2+o.y1;else{for(;A(D,B);)F();n=B*v+v/2+o.x1,r=D*b+b/2+o.y1,L(D,B),F()}return{x:n,y:r}};i.layoutPositions(this,e,R)}return this};var yh={ready:function(){},stop:function(){}};function mh(t){this.options=Q({},yh,t)}mh.prototype.run=function(){var t=this.options,e=t.eles,n=this;return t.cy,n.emit("layoutstart"),e.nodes().positions((function(){return{x:0,y:0}})),n.one("layoutready",t.ready),n.emit("layoutready"),n.one("layoutstop",t.stop),n.emit("layoutstop"),this},mh.prototype.stop=function(){return this};var vh={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function bh(t){this.options=Q({},vh,t)}bh.prototype.run=function(){var t=this.options,e=t.eles.nodes(),n=x(t.positions);function r(e){return null==t.positions?gn(e.position()):n?t.positions(e):t.positions[e._private.data.id]??null}return e.layoutPositions(this,t,(function(t,e){var n=r(t);return!t.locked()&&null!=n&&n})),this};var xh={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Ch(t){this.options=Q({},xh,t)}Ch.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=In(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(t,e){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}};return n.nodes().layoutPositions(this,t,i),this};var _h=[{name:"breadthfirst",impl:qu},{name:"circle",impl:Gu},{name:"concentric",impl:Yu},{name:"cose",impl:Hu},{name:"grid",impl:gh},{name:"null",impl:mh},{name:"preset",impl:bh},{name:"random",impl:Ch}];function wh(t){this.options=t,this.notifications=0}var kh=function(){},Th=function(){throw new Error("A headless instance can not render images")};wh.prototype={recalculateRenderedStyle:kh,notify:function(){this.notifications++},init:kh,isHeadless:function(){return!0},png:Th,jpg:Th};var Eh={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},e=this,n=function(t,e,n,r,i,o,a){var s=i.x-n/2-a,l=i.x+n/2+a,c=i.y-n/2-a,u=i.y+n/2+a;return s<=t&&t<=l&&c<=e&&e<=u},r=function(t,e,n,r,i){var o=t*Math.cos(r)-e*Math.sin(r),a=(t*Math.sin(r)+e*Math.cos(r))*n;return{x:o*n+i.x,y:a+i.y}},i=function(t,e,n,i){for(var o=[],a=0;a<t.length;a+=2){var s=t[a],l=t[a+1];o.push(r(s,l,e,n,i))}return o},o=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r.x,r.y)}return e},a=function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").pfValue*2},s=function(r,s){b(s)&&(s=t[s]),t[r]=Q({name:r,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,e,n,r,a,s){var l=o(i(this.points,n+2*s,r,a));return tr(t,e,l)},roughCollide:n,draw:function(t,n,r,o){var a=i(this.points,n,r,o);e.arrowShapeImpl("polygon")(t,a)},spacing:function(t){return 0},gap:a},s)};s("none",{collide:Se,roughCollide:Se,draw:Le,spacing:Ae,gap:Ae}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(t,n,o,a,s){var l=i(this.points,n,o,a),c=this.controlPoint,u=r(c[0],c[1],n,o,a);e.arrowShapeImpl(this.name)(t,l,u)},gap:function(t){return.8*a(t)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,e,n,r,a,s,l){var c=o(i(this.points,n+2*l,r,a)),u=o(i(this.pointsTee,n+2*l,r,a));return tr(t,e,c)||tr(t,e,u)},draw:function(t,n,r,o,a){var s=i(this.points,n,r,o),l=i(this.pointsTee,n,r,o);e.arrowShapeImpl(this.name)(t,s,l)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(t,e,n,r,a,s,l){var c=a,u=Math.pow(c.x-t,2)+Math.pow(c.y-e,2)<=Math.pow((n+2*l)*this.radius,2),h=o(i(this.points,n+2*l,r,a));return tr(t,e,h)||u},draw:function(t,n,r,o,a){var s=i(this.pointsTr,n,r,o);e.arrowShapeImpl(this.name)(t,s,o.x,o.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(t,e){var n=this.baseCrossLinePts.slice(),r=e/t,i=3,o=5;return n[i]=n[i]-r,n[o]=n[o]-r,n},collide:function(t,e,n,r,a,s,l){var c=o(i(this.points,n+2*l,r,a)),u=o(i(this.crossLinePts(n,s),n+2*l,r,a));return tr(t,e,c)||tr(t,e,u)},draw:function(t,n,r,o,a){var s=i(this.points,n,r,o),l=i(this.crossLinePts(n,a),n,r,o);e.arrowShapeImpl(this.name)(t,s,l)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(t){return.525*a(t)}}),s("circle",{radius:.15,collide:function(t,e,n,r,i,o,a){var s=i;return Math.pow(s.x-t,2)+Math.pow(s.y-e,2)<=Math.pow((n+2*a)*this.radius,2)},draw:function(t,n,r,i,o){e.arrowShapeImpl(this.name)(t,i.x,i.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(t){return 1},gap:function(t){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(t){return.95*t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}})}},Sh={projectIntoViewport:function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],s=n.pan(),l=n.zoom();return[((t-i)/a-s.x)/l,((e-o)/a-s.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=this.cy.window().getComputedStyle(t),r=function(t){return parseFloat(n.getPropertyValue(t))},i={left:r("padding-left"),right:r("padding-right"),top:r("padding-top"),bottom:r("padding-bottom")},o={left:r("border-left-width"),right:r("border-right-width"),top:r("border-top-width"),bottom:r("border-bottom-width")},a=t.clientWidth,s=t.clientHeight,l=i.left+i.right,c=i.top+i.bottom,u=o.left+o.right,h=e.width/(a+u),d=a-l,p=s-c,f=e.left+i.left+o.left,g=e.top+i.top+o.top;return this.containerBB=[f,g,d,p,h]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]},findNearestElements:function(t,e,n,r){var i,o,a=this,s=this,l=s.getCachedZSortedEles(),c=[],u=s.cy.zoom(),h=s.cy.hasCompoundNodes(),d=(r?24:8)/u,p=(r?8:2)/u,f=(r?8:2)/u,g=1/0;function y(t,e){if(t.isNode()){if(o)return;o=t,c.push(t)}if(t.isEdge()&&(null==e||e<g))if(i){if(i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value)for(var n=0;n<c.length;n++)if(c[n].isEdge()){c[n]=t,i=t,g=e??g;break}}else c.push(t),i=t,g=e??g}function m(n){var r=n.outerWidth()+2*p,i=n.outerHeight()+2*p,o=r/2,l=i/2,c=n.position();if(c.x-o<=t&&t<=c.x+o&&c.y-l<=e&&e<=c.y+l&&s.nodeShapes[a.getNodeShape(n)].checkPoint(t,e,0,r,i,c.x,c.y))return y(n,0),!0}function v(n){var r,i=n._private,o=i.rscratch,l=n.pstyle("width").pfValue,u=n.pstyle("arrow-scale").value,p=l/2+d,f=p*p,g=2*p,v=i.source,b=i.target;if("segments"===o.edgeType||"straight"===o.edgeType||"haystack"===o.edgeType){for(var x=o.allpts,C=0;C+3<x.length;C+=2)if(Vn(t,e,x[C],x[C+1],x[C+2],x[C+3],g)&&f>(r=Jn(t,e,x[C],x[C+1],x[C+2],x[C+3])))return y(n,r),!0}else if("bezier"===o.edgeType||"multibezier"===o.edgeType||"self"===o.edgeType||"compound"===o.edgeType)for(x=o.allpts,C=0;C+5<o.allpts.length;C+=4)if(Xn(t,e,x[C],x[C+1],x[C+2],x[C+3],x[C+4],x[C+5],g)&&f>(r=Qn(t,e,x[C],x[C+1],x[C+2],x[C+3],x[C+4],x[C+5])))return y(n,r),!0;v=v||i.source,b=b||i.target;var _=a.getArrowWidth(l,u),w=[{name:"source",x:o.arrowStartX,y:o.arrowStartY,angle:o.srcArrowAngle},{name:"target",x:o.arrowEndX,y:o.arrowEndY,angle:o.tgtArrowAngle},{name:"mid-source",x:o.midX,y:o.midY,angle:o.midsrcArrowAngle},{name:"mid-target",x:o.midX,y:o.midY,angle:o.midtgtArrowAngle}];for(C=0;C<w.length;C++){var k=w[C],T=s.arrowShapes[n.pstyle(k.name+"-arrow-shape").value],E=n.pstyle("width").pfValue;if(T.roughCollide(t,e,_,k.angle,{x:k.x,y:k.y},E,d)&&T.collide(t,e,_,k.angle,{x:k.x,y:k.y},E,d))return y(n),!0}h&&c.length>0&&(m(v),m(b))}function b(t,e,n){return $e(t,e,n)}function x(n,r){var i,o=n._private,a=f;i=r?r+"-":"",n.boundingBox();var s=o.labelBounds[r||"main"],l=n.pstyle(i+"label").value;if("yes"===n.pstyle("text-events").strValue&&l){var c=b(o.rscratch,"labelX",r),u=b(o.rscratch,"labelY",r),h=b(o.rscratch,"labelAngle",r),d=n.pstyle(i+"text-margin-x").pfValue,p=n.pstyle(i+"text-margin-y").pfValue,g=s.x1-a-d,m=s.x2+a-d,v=s.y1-a-p,x=s.y2+a-p;if(h){var C=Math.cos(h),_=Math.sin(h),w=function(t,e){return{x:(t-=c)*C-(e-=u)*_+c,y:t*_+e*C+u}},k=w(g,v),T=w(g,x),E=w(m,v),S=w(m,x),A=[k.x+d,k.y+p,E.x+d,E.y+p,S.x+d,S.y+p,T.x+d,T.y+p];if(tr(t,e,A))return y(n),!0}else if(Yn(s,t,e))return y(n),!0}}n&&(l=l.interactive);for(var C=l.length-1;C>=0;C--){var _=l[C];_.isNode()?m(_)||x(_):v(_)||x(_)||x(_,"source")||x(_,"target")}return c},getAllInBox:function(t,e,n,r){for(var i=this.getCachedZSortedEles().interactive,o=[],a=Math.min(t,n),s=Math.max(t,n),l=Math.min(e,r),c=Math.max(e,r),u=In({x1:t=a,y1:e=l,x2:n=s,y2:r=c}),h=0;h<i.length;h++){var d=i[h];if(d.isNode()){var p=d,f=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});$n(u,f)&&!Un(f,u)&&o.push(p)}else{var g=d,y=g._private,m=y.rscratch;if(null!=m.startX&&null!=m.startY&&!Yn(u,m.startX,m.startY)||null!=m.endX&&null!=m.endY&&!Yn(u,m.endX,m.endY))continue;if("bezier"===m.edgeType||"multibezier"===m.edgeType||"self"===m.edgeType||"compound"===m.edgeType||"segments"===m.edgeType||"haystack"===m.edgeType){for(var v=y.rstyle.bezierPts||y.rstyle.linePts||y.rstyle.haystackPts,b=!0,x=0;x<v.length;x++)if(!Wn(u,v[x])){b=!1;break}b&&o.push(g)}else("haystack"===m.edgeType||"straight"===m.edgeType)&&o.push(g)}}return o}},Ah={calculateArrowAngles:function(t){var e,n,r,i,o,a,s=t._private.rscratch,l="haystack"===s.edgeType,c="bezier"===s.edgeType,u="multibezier"===s.edgeType,h="segments"===s.edgeType,d="compound"===s.edgeType,p="self"===s.edgeType;if(l?(r=s.haystackPts[0],i=s.haystackPts[1],o=s.haystackPts[2],a=s.haystackPts[3]):(r=s.arrowStartX,i=s.arrowStartY,o=s.arrowEndX,a=s.arrowEndY),g=s.midX,y=s.midY,h)e=r-s.segpts[0],n=i-s.segpts[1];else if(u||d||p||c){var f=s.allpts;e=r-Dn(f[0],f[2],f[4],.1),n=i-Dn(f[1],f[3],f[5],.1)}else e=r-g,n=i-y;s.srcArrowAngle=kn(e,n);var g=s.midX,y=s.midY;if(l&&(g=(r+o)/2,y=(i+a)/2),e=o-r,n=a-i,h)if((f=s.allpts).length/2%2==0){var m=(v=f.length/2)-2;e=f[v]-f[m],n=f[v+1]-f[m+1]}else{m=(v=f.length/2-1)-2;var v,b=v+2;e=f[v]-f[m],n=f[v+1]-f[m+1]}else if(u||d||p){var x,C,_,w,f=s.allpts;if(s.ctrlpts.length/2%2==0){var k=2+(T=2+(E=f.length/2-1));x=Dn(f[E],f[T],f[k],0),C=Dn(f[E+1],f[T+1],f[k+1],0),_=Dn(f[E],f[T],f[k],1e-4),w=Dn(f[E+1],f[T+1],f[k+1],1e-4)}else{var T,E;k=2+(T=f.length/2-1),x=Dn(f[E=T-2],f[T],f[k],.4999),C=Dn(f[E+1],f[T+1],f[k+1],.4999),_=Dn(f[E],f[T],f[k],.5),w=Dn(f[E+1],f[T+1],f[k+1],.5)}e=_-x,n=w-C}if(s.midtgtArrowAngle=kn(e,n),s.midDispX=e,s.midDispY=n,e*=-1,n*=-1,h&&(f=s.allpts).length/2%2!=0&&(e=-(f[b=2+(v=f.length/2-1)]-f[v]),n=-(f[b+1]-f[v+1])),s.midsrcArrowAngle=kn(e,n),h)e=o-s.segpts[s.segpts.length-2],n=a-s.segpts[s.segpts.length-1];else if(u||d||p||c){var S=(f=s.allpts).length;e=o-Dn(f[S-6],f[S-4],f[S-2],.9),n=a-Dn(f[S-5],f[S-3],f[S-1],.9)}else e=o-g,n=a-y;s.tgtArrowAngle=kn(e,n)}};Ah.getArrowWidth=Ah.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(13.37*t,.9),29)*e,n[t+", "+e]=r,r)};var Lh={};function Dh(t){var e=[];if(null!=t){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e.push({x:r,y:i})}return e}}Lh.findMidptPtsEtc=function(t,e){var n,r=e.posPts,i=e.intersectionPts,o=e.vectorNormInverse,s=t.pstyle("source-endpoint"),l=t.pstyle("target-endpoint"),c=null!=s.units&&null!=l.units,u=function(t,e,n,r){var i=r-e,o=n-t,a=Math.sqrt(o*o+i*i);return{x:-i/a,y:o/a}};switch(t.pstyle("edge-distances").value){case"node-position":n=r;break;case"intersection":n=i;break;case"endpoints":if(c){var h=a(this.manualEndptToPx(t.source()[0],s),2),d=h[0],p=h[1],f=a(this.manualEndptToPx(t.target()[0],l),2),g=f[0],y=f[1],m={x1:d,y1:p,x2:g,y2:y};o=u(d,p,g,y),n=m}else Fe("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),n=i}return{midptPts:n,vectorNormInverse:o}},Lh.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n._private,i=r.rscratch;if(!i.haystack){var o=2*Math.random()*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=2*Math.random()*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=r.source,s=r.target,l=a.position(),c=s.position(),u=a.width(),h=s.width(),d=a.height(),p=s.height(),f=n.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*u*f+l.x,i.source.y*d*f+l.y,i.target.x*h*f+c.x,i.target.y*p*f+c.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},Lh.findSegmentsPoints=function(t,e){var n=t._private.rscratch,r=t.pstyle("segment-weights"),i=t.pstyle("segment-distances"),o=Math.min(r.pfValue.length,i.pfValue.length);n.edgeType="segments",n.segpts=[];for(var a=0;a<o;a++){var s=r.pfValue[a],l=i.pfValue[a],c=1-s,u=s,h=this.findMidptPtsEtc(t,e),d=h.midptPts,p=h.vectorNormInverse,f={x:d.x1*c+d.x2*u,y:d.y1*c+d.y2*u};n.segpts.push(f.x+p.x*l,f.y+p.y*l)}},Lh.findLoopPoints=function(t,e,n,r){var i=t._private.rscratch,o=e.dirCounts,a=e.srcPos,s=t.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,c=t.pstyle("loop-direction").pfValue,u=t.pstyle("loop-sweep").pfValue,h=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=n,p=h;r&&(d=0,p=l);var f=c-Math.PI/2,g=f-u/2,y=f+u/2,m=c+"_"+u;d=void 0===o[m]?o[m]=0:++o[m],i.ctrlpts=[a.x+1.4*Math.cos(g)*p*(d/3+1),a.y+1.4*Math.sin(g)*p*(d/3+1),a.x+1.4*Math.cos(y)*p*(d/3+1),a.y+1.4*Math.sin(y)*p*(d/3+1)]},Lh.findCompoundLoopPoints=function(t,e,n,r){var i=t._private.rscratch;i.edgeType="compound";var o=e.srcPos,a=e.tgtPos,s=e.srcW,l=e.srcH,c=e.tgtW,u=e.tgtH,h=t.pstyle("control-point-step-size").pfValue,d=t.pstyle("control-point-distances"),p=d?d.pfValue[0]:void 0,f=n,g=h;r&&(f=0,g=p);var y=50,m={x:o.x-s/2,y:o.y-l/2},v={x:a.x-c/2,y:a.y-u/2},b={x:Math.min(m.x,v.x),y:Math.min(m.y,v.y)},x=.5,C=Math.max(x,Math.log(.01*s)),_=Math.max(x,Math.log(.01*c));i.ctrlpts=[b.x,b.y-(1+Math.pow(y,1.12)/100)*g*(f/3+1)*C,b.x-(1+Math.pow(y,1.12)/100)*g*(f/3+1)*_,b.y]},Lh.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},Lh.findBezierPoints=function(t,e,n,r,i){var o=t._private.rscratch,a=t.pstyle("control-point-step-size").pfValue,s=t.pstyle("control-point-distances"),l=t.pstyle("control-point-weights"),c=s&&l?Math.min(s.value.length,l.value.length):1,u=s?s.pfValue[0]:void 0,h=l.value[0],d=r;o.edgeType=d?"multibezier":"bezier",o.ctrlpts=[];for(var p=0;p<c;p++){var f=(.5-e.eles.length/2+n)*a*(i?-1:1),g=void 0,y=En(f);d&&(u=s?s.pfValue[p]:a,h=l.value[p]);var m=void 0!==(g=r?u:void 0!==u?y*u:void 0)?g:f,v=1-h,b=h,x=this.findMidptPtsEtc(t,e),C=x.midptPts,_=x.vectorNormInverse,w={x:C.x1*v+C.x2*b,y:C.y1*v+C.y2*b};o.ctrlpts.push(w.x+_.x*m,w.y+_.y*m)}},Lh.findTaxiPoints=function(t,e){var n=t._private.rscratch;n.edgeType="segments";var r="vertical",i="horizontal",o="leftward",a="rightward",s="downward",l="upward",c="auto",u=e.posPts,h=e.srcW,d=e.srcH,p=e.tgtW,f=e.tgtH,g="node-position"!==t.pstyle("edge-distances").value,y=t.pstyle("taxi-direction").value,m=y,v=t.pstyle("taxi-turn"),b="%"===v.units,x=v.pfValue,C=x<0,_=t.pstyle("taxi-turn-min-distance").pfValue,w=g?(h+p)/2:0,k=g?(d+f)/2:0,T=u.x2-u.x1,E=u.y2-u.y1,S=function(t,e){return t>0?Math.max(t-e,0):Math.min(t+e,0)},A=S(T,w),L=S(E,k),D=!1;m===c?y=Math.abs(A)>Math.abs(L)?i:r:m===l||m===s?(y=r,D=!0):(m===o||m===a)&&(y=i,D=!0);var B,F=y===r,N=F?L:A,I=F?E:T,O=En(I),M=!1;(!D||!b&&!C)&&(m===s&&I<0||m===l&&I>0||m===o&&I>0||m===a&&I<0)&&(N=(O*=-1)*Math.abs(N),M=!0);var P=function(t){return Math.abs(t)<_||Math.abs(t)>=Math.abs(N)},R=P(B=b?(x<0?1+x:x)*N:(x<0?N:0)+x*O),z=P(Math.abs(N)-Math.abs(B));if(!R&&!z||M)if(F){var q=u.y1+B+(g?d/2*O:0),j=u.x1,G=u.x2;n.segpts=[j,q,G,q]}else{var $=u.x1+B+(g?h/2*O:0),Y=u.y1,W=u.y2;n.segpts=[$,Y,$,W]}else if(F){var U=Math.abs(I)<=d/2,H=Math.abs(T)<=p/2;if(U){var V=(u.x1+u.x2)/2,X=u.y1,K=u.y2;n.segpts=[V,X,V,K]}else if(H){var Z=(u.y1+u.y2)/2,Q=u.x1,J=u.x2;n.segpts=[Q,Z,J,Z]}else n.segpts=[u.x1,u.y2]}else{var tt=Math.abs(I)<=h/2,et=Math.abs(E)<=f/2;if(tt){var nt=(u.y1+u.y2)/2,rt=u.x1,it=u.x2;n.segpts=[rt,nt,it,nt]}else if(et){var ot=(u.x1+u.x2)/2,at=u.y1,st=u.y2;n.segpts=[ot,at,ot,st]}else n.segpts=[u.x2,u.y1]}},Lh.tryToCorrectInvalidPoints=function(t,e){var n=t._private.rscratch;if("bezier"===n.edgeType){var r=e.srcPos,i=e.tgtPos,o=e.srcW,a=e.srcH,s=e.tgtW,l=e.tgtH,c=e.srcShape,u=e.tgtShape,h=!k(n.startX)||!k(n.startY),d=!k(n.arrowStartX)||!k(n.arrowStartY),p=!k(n.endX)||!k(n.endY),f=!k(n.arrowEndX)||!k(n.arrowEndY),g=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,y=Sn({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),m=y<g,v=Sn({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),b=v<g,x=!1;if(h||d||m){x=!0;var C={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},_=Math.sqrt(C.x*C.x+C.y*C.y),w={x:C.x/_,y:C.y/_},T=Math.max(o,a),E={x:n.ctrlpts[0]+2*w.x*T,y:n.ctrlpts[1]+2*w.y*T},S=c.intersectLine(r.x,r.y,o,a,E.x,E.y,0);m?(n.ctrlpts[0]=n.ctrlpts[0]+w.x*(g-y),n.ctrlpts[1]=n.ctrlpts[1]+w.y*(g-y)):(n.ctrlpts[0]=S[0]+w.x*g,n.ctrlpts[1]=S[1]+w.y*g)}if(p||f||b){x=!0;var A={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},L=Math.sqrt(A.x*A.x+A.y*A.y),D={x:A.x/L,y:A.y/L},B=Math.max(o,a),F={x:n.ctrlpts[0]+2*D.x*B,y:n.ctrlpts[1]+2*D.y*B},N=u.intersectLine(i.x,i.y,s,l,F.x,F.y,0);b?(n.ctrlpts[0]=n.ctrlpts[0]+D.x*(g-v),n.ctrlpts[1]=n.ctrlpts[1]+D.y*(g-v)):(n.ctrlpts[0]=N[0]+D.x*g,n.ctrlpts[1]=N[1]+D.y*g)}x&&this.findEndpoints(t)}},Lh.storeAllpts=function(t){var e=t._private.rscratch;if("multibezier"===e.edgeType||"bezier"===e.edgeType||"self"===e.edgeType||"compound"===e.edgeType){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);var r,i;e.allpts.push(e.endX,e.endY),e.ctrlpts.length/2%2==0?(r=e.allpts.length/2-1,e.midX=e.allpts[r],e.midY=e.allpts[r+1]):(r=e.allpts.length/2-3,i=.5,e.midX=Dn(e.allpts[r],e.allpts[r+2],e.allpts[r+4],i),e.midY=Dn(e.allpts[r+1],e.allpts[r+3],e.allpts[r+5],i))}else if("straight"===e.edgeType)e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if("segments"===e.edgeType)if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4==0){var o=e.segpts.length/2,a=o-2;e.midX=(e.segpts[a]+e.segpts[o])/2,e.midY=(e.segpts[a+1]+e.segpts[o+1])/2}else{var s=e.segpts.length/2-1;e.midX=e.segpts[s],e.midY=e.segpts[s+1]}},Lh.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||k(e.startX)&&k(e.startY)&&k(e.endX)&&k(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Fe("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Lh.findEdgeControlPoints=function(t){var e=this;if(t&&0!==t.length){for(var n=this,r=n.cy.hasCompoundNodes(),i={map:new Ue,get:function(t){var e=this.map.get(t[0]);return null!=e?e.get(t[1]):null},set:function(t,e){var n=this.map.get(t[0]);null==n&&(n=new Ue,this.map.set(t[0],n)),n.set(t[1],e)}},o=[],a=[],s=0;s<t.length;s++){var l=t[s],c=l._private,u=l.pstyle("curve-style").value;if(!l.removed()&&l.takesUpSpace()){if("haystack"===u){a.push(l);continue}var h="unbundled-bezier"===u||"segments"===u||"straight"===u||"straight-triangle"===u||"taxi"===u,d="unbundled-bezier"===u||"bezier"===u,p=c.source,f=c.target,g=[p.poolIndex(),f.poolIndex()].sort(),y=i.get(g);null==y&&(y={eles:[]},i.set(g,y),o.push(g)),y.eles.push(l),h&&(y.hasUnbundled=!0),d&&(y.hasBezier=!0)}}for(var m=function(t){var a=o[t],s=i.get(a),l=void 0;if(!s.hasUnbundled){var c=s.eles[0].parallelEdges().filter((function(t){return t.isBundledBezier()}));je(s.eles),c.forEach((function(t){return s.eles.push(t)})),s.eles.sort((function(t,e){return t.poolIndex()-e.poolIndex()}))}var u=s.eles[0],h=u.source(),d=u.target();if(h.poolIndex()>d.poolIndex()){var p=h;h=d,d=p}var f=s.srcPos=h.position(),g=s.tgtPos=d.position(),y=s.srcW=h.outerWidth(),m=s.srcH=h.outerHeight(),v=s.tgtW=d.outerWidth(),b=s.tgtH=d.outerHeight(),x=s.srcShape=n.nodeShapes[e.getNodeShape(h)],C=s.tgtShape=n.nodeShapes[e.getNodeShape(d)];s.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var _=0;_<s.eles.length;_++){var w=s.eles[_],T=w[0]._private.rscratch,E=w.pstyle("curve-style").value,S="unbundled-bezier"===E||"segments"===E||"taxi"===E,A=!h.same(w.source());if(!s.calculatedIntersection&&h!==d&&(s.hasBezier||s.hasUnbundled)){s.calculatedIntersection=!0;var L=x.intersectLine(f.x,f.y,y,m,g.x,g.y,0),D=s.srcIntn=L,B=C.intersectLine(g.x,g.y,v,b,f.x,f.y,0),F=s.tgtIntn=B,N=s.intersectionPts={x1:L[0],x2:B[0],y1:L[1],y2:B[1]},I=s.posPts={x1:f.x,x2:g.x,y1:f.y,y2:g.y},O=B[1]-L[1],M=B[0]-L[0],P=Math.sqrt(M*M+O*O),R=s.vector={x:M,y:O},z=s.vectorNorm={x:R.x/P,y:R.y/P},q={x:-z.y,y:z.x};s.nodesOverlap=!k(P)||C.checkPoint(L[0],L[1],0,v,b,g.x,g.y)||x.checkPoint(B[0],B[1],0,y,m,f.x,f.y),s.vectorNormInverse=q,l={nodesOverlap:s.nodesOverlap,dirCounts:s.dirCounts,calculatedIntersection:!0,hasBezier:s.hasBezier,hasUnbundled:s.hasUnbundled,eles:s.eles,srcPos:g,tgtPos:f,srcW:v,srcH:b,tgtW:y,tgtH:m,srcIntn:F,tgtIntn:D,srcShape:C,tgtShape:x,posPts:{x1:I.x2,y1:I.y2,x2:I.x1,y2:I.y1},intersectionPts:{x1:N.x2,y1:N.y2,x2:N.x1,y2:N.y1},vector:{x:-R.x,y:-R.y},vectorNorm:{x:-z.x,y:-z.y},vectorNormInverse:{x:-q.x,y:-q.y}}}var j=A?l:s;T.nodesOverlap=j.nodesOverlap,T.srcIntn=j.srcIntn,T.tgtIntn=j.tgtIntn,r&&(h.isParent()||h.isChild()||d.isParent()||d.isChild())&&(h.parents().anySame(d)||d.parents().anySame(h)||h.same(d)&&h.isParent())?e.findCompoundLoopPoints(w,j,_,S):h===d?e.findLoopPoints(w,j,_,S):"segments"===E?e.findSegmentsPoints(w,j):"taxi"===E?e.findTaxiPoints(w,j):"straight"===E||!S&&s.eles.length%2==1&&_===Math.floor(s.eles.length/2)?e.findStraightEdgePoints(w):e.findBezierPoints(w,j,_,S,A),e.findEndpoints(w),e.tryToCorrectInvalidPoints(w,j),e.checkForInvalidEdgeWarning(w),e.storeAllpts(w),e.storeEdgeProjections(w),e.calculateArrowAngles(w),e.recalculateEdgeLabelProjections(w),e.calculateLabelAngles(w)}},v=0;v<o.length;v++)m(v);this.findHaystackPoints(a)}},Lh.getSegmentPoints=function(t){var e=t[0]._private.rscratch;if("segments"===e.edgeType)return this.recalculateRenderedStyle(t),Dh(e.segpts)},Lh.getControlPoints=function(t){var e=t[0]._private.rscratch,n=e.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return this.recalculateRenderedStyle(t),Dh(e.ctrlpts)},Lh.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Bh={manualEndptToPx:function(t,e){var n=this,r=t.position(),i=t.outerWidth(),o=t.outerHeight();if(2===e.value.length){var a=[e.pfValue[0],e.pfValue[1]];return"%"===e.units[0]&&(a[0]=a[0]*i),"%"===e.units[1]&&(a[1]=a[1]*o),a[0]+=r.x,a[1]+=r.y,a}var s=e.pfValue[0];s=-Math.PI/2+s;var l=2*Math.max(i,o),c=[r.x+Math.cos(s)*l,r.y+Math.sin(s)*l];return n.nodeShapes[this.getNodeShape(t)].intersectLine(r.x,r.y,i,o,c[0],c[1],0)},findEndpoints:function(t){var e,n,r,i,o,a=this,s=t.source()[0],l=t.target()[0],c=s.position(),u=l.position(),h=t.pstyle("target-arrow-shape").value,d=t.pstyle("source-arrow-shape").value,p=t.pstyle("target-distance-from-node").pfValue,f=t.pstyle("source-distance-from-node").pfValue,g=t.pstyle("curve-style").value,y=t._private.rscratch,m=y.edgeType,v="self"===m||"compound"===m,b="bezier"===m||"multibezier"===m||v,x="bezier"!==m,C="straight"===m||"segments"===m,_="segments"===m,w=b||x||C,T=v||"taxi"===g,E=t.pstyle("source-endpoint"),S=T?"outside-to-node":E.value,A=t.pstyle("target-endpoint"),L=T?"outside-to-node":A.value;if(y.srcManEndpt=E,y.tgtManEndpt=A,b){var D=[y.ctrlpts[0],y.ctrlpts[1]];n=x?[y.ctrlpts[y.ctrlpts.length-2],y.ctrlpts[y.ctrlpts.length-1]]:D,r=D}else if(C){var B=_?y.segpts.slice(0,2):[u.x,u.y];n=_?y.segpts.slice(y.segpts.length-2):[c.x,c.y],r=B}if("inside-to-node"===L)e=[u.x,u.y];else if(A.units)e=this.manualEndptToPx(l,A);else if("outside-to-line"===L)e=y.tgtIntn;else if("outside-to-node"===L||"outside-to-node-or-label"===L?i=n:("outside-to-line"===L||"outside-to-line-or-label"===L)&&(i=[c.x,c.y]),e=a.nodeShapes[this.getNodeShape(l)].intersectLine(u.x,u.y,l.outerWidth(),l.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===L||"outside-to-line-or-label"===L){var F=l._private.rscratch,N=F.labelWidth,I=F.labelHeight,O=F.labelX,M=F.labelY,P=N/2,R=I/2,z=l.pstyle("text-valign").value;"top"===z?M-=R:"bottom"===z&&(M+=R);var q=l.pstyle("text-halign").value;"left"===q?O-=P:"right"===q&&(O+=P);var j=ur(i[0],i[1],[O-P,M-R,O+P,M-R,O+P,M+R,O-P,M+R],u.x,u.y);if(j.length>0){var G=c,$=An(G,vn(e)),Y=An(G,vn(j)),W=$;Y<$&&(e=j,W=Y),j.length>2&&An(G,{x:j[2],y:j[3]})<W&&(e=[j[2],j[3]])}}var U=dr(e,n,a.arrowShapes[h].spacing(t)+p),H=dr(e,n,a.arrowShapes[h].gap(t)+p);if(y.endX=H[0],y.endY=H[1],y.arrowEndX=U[0],y.arrowEndY=U[1],"inside-to-node"===S)e=[c.x,c.y];else if(E.units)e=this.manualEndptToPx(s,E);else if("outside-to-line"===S)e=y.srcIntn;else if("outside-to-node"===S||"outside-to-node-or-label"===S?o=r:("outside-to-line"===S||"outside-to-line-or-label"===S)&&(o=[u.x,u.y]),e=a.nodeShapes[this.getNodeShape(s)].intersectLine(c.x,c.y,s.outerWidth(),s.outerHeight(),o[0],o[1],0),"outside-to-node-or-label"===S||"outside-to-line-or-label"===S){var V=s._private.rscratch,X=V.labelWidth,K=V.labelHeight,Z=V.labelX,Q=V.labelY,J=X/2,tt=K/2,et=s.pstyle("text-valign").value;"top"===et?Q-=tt:"bottom"===et&&(Q+=tt);var nt=s.pstyle("text-halign").value;"left"===nt?Z-=J:"right"===nt&&(Z+=J);var rt=ur(o[0],o[1],[Z-J,Q-tt,Z+J,Q-tt,Z+J,Q+tt,Z-J,Q+tt],c.x,c.y);if(rt.length>0){var it=u,ot=An(it,vn(e)),at=An(it,vn(rt)),st=ot;at<ot&&(e=[rt[0],rt[1]],st=at),rt.length>2&&An(it,{x:rt[2],y:rt[3]})<st&&(e=[rt[2],rt[3]])}}var lt=dr(e,r,a.arrowShapes[d].spacing(t)+f),ct=dr(e,r,a.arrowShapes[d].gap(t)+f);y.startX=ct[0],y.startY=ct[1],y.arrowStartX=lt[0],y.arrowStartY=lt[1],w&&(k(y.startX)&&k(y.startY)&&k(y.endX)&&k(y.endY)?y.badLine=!1:y.badLine=!0)},getSourceEndpoint:function(t){var e=t[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(t),e.edgeType)?{x:e.haystackPts[0],y:e.haystackPts[1]}:{x:e.arrowStartX,y:e.arrowStartY}},getTargetEndpoint:function(t){var e=t[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(t),e.edgeType)?{x:e.haystackPts[2],y:e.haystackPts[3]}:{x:e.arrowEndX,y:e.arrowEndY}}},Fh={};function Nh(t,e,n){for(var r=function(t,e,n,r){return Dn(t,e,n,r)},i=e._private.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var a=t.bezierProjPcts[o];i.push({x:r(n[0],n[2],n[4],a),y:r(n[1],n[3],n[5],a)})}}Fh.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)Nh(this,t,n.allpts.slice(i,i+6))}else if("segments"===r){var o=e.rstyle.linePts=[];for(i=0;i+1<n.allpts.length;i+=2)o.push({x:n.allpts[i],y:n.allpts[i+1]})}else if("haystack"===r){var a=n.haystackPts;e.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},Fh.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Ih={recalculateNodeLabelProjection:function(t){var e=t.pstyle("label").strValue;if(!N(e)){var n,r,i=t._private,o=t.width(),a=t.height(),s=t.padding(),l=t.position(),c=t.pstyle("text-halign").strValue,u=t.pstyle("text-valign").strValue,h=i.rscratch,d=i.rstyle;switch(c){case"left":n=l.x-o/2-s;break;case"right":n=l.x+o/2+s;break;default:n=l.x}switch(u){case"top":r=l.y-a/2-s;break;case"bottom":r=l.y+a/2+s;break;default:r=l.y}h.labelX=n,h.labelY=r,d.labelX=n,d.labelY=r,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}}},Oh=function(t,e){var n=Math.atan(e/t);return 0===t&&n<0&&(n*=-1),n},Mh=function(t,e){var n=e.x-t.x,r=e.y-t.y;return Oh(n,r)},Ph=function(t,e,n,r){var i=Nn(0,r-.001,1),o=Nn(0,r+.001,1),a=Bn(t,e,n,i),s=Bn(t,e,n,o);return Mh(a,s)};Ih.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,i=this,o={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(o.mid||o.source||o.target){e={x:r.midX,y:r.midY};var a=function(t,e,r){Ye(n.rscratch,t,e,r),Ye(n.rstyle,t,e,r)};a("labelX",null,e.x),a("labelY",null,e.y);var s=Oh(r.midDispX,r.midDispY);a("labelAutoAngle",null,s);var l=function t(){if(t.cache)return t.cache;for(var e=[],o=0;o+5<r.allpts.length;o+=4){var a={x:r.allpts[o],y:r.allpts[o+1]},s={x:r.allpts[o+2],y:r.allpts[o+3]},l={x:r.allpts[o+4],y:r.allpts[o+5]};e.push({p0:a,p1:s,p2:l,startDist:0,length:0,segments:[]})}var c=n.rstyle.bezierPts,u=i.bezierProjPcts.length;function h(t,e,n,r,i){var o=Sn(e,n),a=t.segments[t.segments.length-1],s={p0:e,p1:n,t0:r,t1:i,startDist:a?a.startDist+a.length:0,length:o};t.segments.push(s),t.length+=o}for(var d=0;d<e.length;d++){var p=e[d],f=e[d-1];f&&(p.startDist=f.startDist+f.length),h(p,p.p0,c[d*u],0,i.bezierProjPcts[0]);for(var g=0;g<u-1;g++)h(p,c[d*u+g],c[d*u+g+1],i.bezierProjPcts[g],i.bezierProjPcts[g+1]);h(p,c[d*u+u-1],p.p2,i.bezierProjPcts[u-1],1)}return t.cache=e},c=function(n){var i,s="source"===n;if(o[n]){var c=t.pstyle(n+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var u,h=l(),d=0,p=0,f=0;f<h.length;f++){for(var g=h[s?f:h.length-1-f],y=0;y<g.segments.length;y++){var m=g.segments[s?y:g.segments.length-1-y],v=f===h.length-1&&y===g.segments.length-1;if(d=p,(p+=m.length)>=c||v){u={cp:g,segment:m};break}}if(u)break}var b=u.cp,x=u.segment,C=(c-d)/x.length,_=x.t1-x.t0,w=s?x.t0+_*C:x.t1-_*C;w=Nn(0,w,1),e=Bn(b.p0,b.p1,b.p2,w),i=Ph(b.p0,b.p1,b.p2,w);break;case"straight":case"segments":case"haystack":for(var k,T,E,S,A=0,L=r.allpts.length,D=0;D+3<L&&(s?(E={x:r.allpts[D],y:r.allpts[D+1]},S={x:r.allpts[D+2],y:r.allpts[D+3]}):(E={x:r.allpts[L-2-D],y:r.allpts[L-1-D]},S={x:r.allpts[L-4-D],y:r.allpts[L-3-D]}),T=A,!((A+=k=Sn(E,S))>=c));D+=2);var B=(c-T)/k;B=Nn(0,B,1),e=Fn(E,S,B),i=Mh(E,S)}a("labelX",n,e.x),a("labelY",n,e.y),a("labelAutoAngle",n,i)}};c("source"),c("target"),this.applyLabelDimensions(t)}},Ih.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},Ih.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r),o=t.pstyle("line-height").pfValue,a=t.pstyle("text-wrap").strValue,s=$e(n.rscratch,"labelWrapCachedLines",e)||[],l="wrap"!==a?1:Math.max(s.length,1),c=i.height/l,u=c*o,h=i.width,d=i.height+(l-1)*(o-1)*c;Ye(n.rstyle,"labelWidth",e,h),Ye(n.rscratch,"labelWidth",e,h),Ye(n.rstyle,"labelHeight",e,d),Ye(n.rscratch,"labelHeight",e,d),Ye(n.rscratch,"labelLineHeight",e,u)},Ih.getLabelText=function(t,e){var n=t._private,r=e?e+"-":"",i=t.pstyle(r+"label").strValue,o=t.pstyle("text-transform").value,a=function(t,r){return r?(Ye(n.rscratch,t,e,r),r):$e(n.rscratch,t,e)};if(!i)return"";"none"==o||("uppercase"==o?i=i.toUpperCase():"lowercase"==o&&(i=i.toLowerCase()));var s=t.pstyle("text-wrap").value;if("wrap"===s){var l=a("labelKey");if(null!=l&&a("labelWrapKey")===l)return a("labelWrapCachedText");for(var c="​",u=i.split("\n"),h=t.pstyle("text-max-width").pfValue,d="anywhere"===t.pstyle("text-overflow-wrap").value,p=[],f=/[\s\u200b]+/,g=d?"":" ",y=0;y<u.length;y++){var m=u[y],v=this.calculateLabelDimensions(t,m).width;if(d){var b=m.split("").join(c);m=b}if(v>h){for(var x=m.split(f),C="",_=0;_<x.length;_++){var w=x[_],k=0===C.length?w:C+g+w;this.calculateLabelDimensions(t,k).width<=h?C+=w+g:(C&&p.push(C),C=w+g)}C.match(/^[\s\u200b]+$/)||p.push(C)}else p.push(m)}a("labelWrapCachedLines",p),i=a("labelWrapCachedText",p.join("\n")),a("labelWrapKey",l)}else if("ellipsis"===s){var T=t.pstyle("text-max-width").pfValue,E="",S="…",A=!1;if(this.calculateLabelDimensions(t,i).width<T)return i;for(var L=0;L<i.length&&!(this.calculateLabelDimensions(t,E+i[L]+S).width>T);L++)E+=i[L],L===i.length-1&&(A=!0);return A||(E+=S),E}return i},Ih.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,n=t.pstyle("text-halign").strValue;if("auto"!==e)return e;if(!t.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},Ih.calculateLabelDimensions=function(t,e){var n=this,r=be(e,t._private.labelDimsKey),i=n.labelDimCache||(n.labelDimCache=[]),o=i[r];if(null!=o)return o;var a=0,s=t.pstyle("font-style").strValue,l=t.pstyle("font-size").pfValue,c=t.pstyle("font-family").strValue,u=t.pstyle("font-weight").strValue,h=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!h){h=this.labelCalcCanvas=document.createElement("canvas"),d=this.labelCalcCanvasContext=h.getContext("2d");var p=h.style;p.position="absolute",p.left="-9999px",p.top="-9999px",p.zIndex="-1",p.visibility="hidden",p.pointerEvents="none"}d.font="".concat(s," ").concat(u," ").concat(l,"px ").concat(c);for(var f=0,g=0,y=e.split("\n"),m=0;m<y.length;m++){var v=y[m],b=d.measureText(v),x=Math.ceil(b.width),C=l;f=Math.max(x,f),g+=C}return f+=a,g+=a,i[r]={width:f,height:g}},Ih.calculateLabelAngle=function(t,e){var n=t._private.rscratch,r=t.isEdge(),i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),a=o.strValue;return"none"===a?0:r&&"autorotate"===a?n.labelAutoAngle:"autorotate"===a?0:o.pfValue},Ih.calculateLabelAngles=function(t){var e=this,n=t.isEdge(),r=t._private.rscratch;r.labelAngle=e.calculateLabelAngle(t),n&&(r.sourceLabelAngle=e.calculateLabelAngle(t,"source"),r.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var Rh={},zh=28,qh=!1;Rh.getNodeShape=function(t){var e=this,n=t.pstyle("shape").value;if("cutrectangle"===n&&(t.width()<zh||t.height()<zh))return qh||(Fe("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),qh=!0),"rectangle";if(t.isParent())return"rectangle"===n||"roundrectangle"===n||"round-rectangle"===n||"cutrectangle"===n||"cut-rectangle"===n||"barrel"===n?n:"rectangle";if("polygon"===n){var r=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(r).name}return n};var jh={registerCalculationListeners:function(){var t=this.cy,e=t.collection(),n=this,r=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.merge(t),n)for(var r=0;r<t.length;r++){var i=t[r]._private.rstyle;i.clean=!1,i.cleanConnected=!1}};n.binder(t).on("bounds.* dirty.*",(function(t){var e=t.target;r(e)})).on("style.* background.*",(function(t){var e=t.target;r(e,!1)}));var i=function(i){if(i){var o=n.onUpdateEleCalcsFns;e.cleanStyle();for(var a=0;a<e.length;a++){var s=e[a],l=s._private.rstyle;s.isNode()&&!l.cleanConnected&&(r(s.connectedEdges()),l.cleanConnected=!0)}if(o)for(var c=0;c<o.length;c++)(0,o[c])(i,e);n.recalculateRenderedStyle(e),e=t.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,e){var n=function(t){return t._private.rstyle.cleanConnected},r=[],i=[];if(!this.destroyed){void 0===e&&(e=!0);for(var o=0;o<t.length;o++){var a=t[o],s=a._private,l=s.rstyle;a.isEdge()&&(!n(a.source())||!n(a.target()))&&(l.clean=!1),!(e&&l.clean||a.removed())&&"none"!==a.pstyle("display").value&&("nodes"===s.group?i.push(a):r.push(a),l.clean=!0)}for(var c=0;c<i.length;c++){var u=i[c],h=u._private.rstyle,d=u.position();this.recalculateNodeLabelProjection(u),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=u.pstyle("width").pfValue,h.nodeH=u.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var p=0;p<r.length;p++){var f=r[p]._private,g=f.rstyle,y=f.rscratch;g.srcX=y.arrowStartX,g.srcY=y.arrowStartY,g.tgtX=y.arrowEndX,g.tgtY=y.arrowEndY,g.midX=y.midX,g.midY=y.midY,g.labelAngle=y.labelAngle,g.sourceLabelAngle=y.sourceLabelAngle,g.targetLabelAngle=y.targetLabelAngle}}}},Gh={updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=(i=t[n])._private.rscratch;i.grabbed()&&!i.isParent()?e.push(i):r.inDragLayer?t.drag.push(i):t.nondrag.push(i)}for(n=0;n<e.length;n++){var i=e[n];t.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(_c),e.interactive=e.filter((function(t){return t.interactive()})),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e}},$h={};[Sh,Ah,Lh,Bh,Fh,Ih,Rh,jh,Gh].forEach((function(t){Q($h,t)}));var Yh={getCachedImage:function(t,e,n){var r=this,i=r.imageCache=r.imageCache||{},o=i[t];if(o)return o.image.complete||o.image.addEventListener("load",n),o.image;var a=(o=i[t]=i[t]||{}).image=new Image;a.addEventListener("load",n),a.addEventListener("error",(function(){a.error=!0}));var s="data:";return t.substring(0,s.length).toLowerCase()===s||(e="null"===e?null:e,a.crossOrigin=e),a.src=t,a}},Wh={registerBinding:function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(t);return o.on.apply(o,i)},binder:function(t){var e=this,n=e.cy.window(),r=t===n||t===n.document||t===n.document.body||I(t);if(null==e.supportsPassiveEvents){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});n.addEventListener("test",null,o)}catch{}e.supportsPassiveEvents=i}var a=function(n,i,o){var a=Array.prototype.slice.call(arguments);return r&&e.supportsPassiveEvents&&(a[2]={capture:o??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:a}),(t.addEventListener||t.on).apply(t,a),this};return{on:a,addEventListener:a,addListener:a,bind:a}},nodeIsDraggable:function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},nodeIsGrabbable:function(t){return this.nodeIsDraggable(t)&&t.interactive()},load:function(){var t=this,e=t.cy.window(),n=function(t){return t.selected()},r=function(e,n,r,i){null==e&&(e=t.cy);for(var o=0;o<n.length;o++){var a=n[o];e.emit({originalEvent:r,type:a,position:i})}},i=function(t){return t.shiftKey||t.metaKey||t.ctrlKey},o=function(e,n){var r=!0;if(t.cy.hasCompoundNodes()&&e&&e.pannable()){for(var i=0;n&&i<n.length;i++)if((e=n[i]).isNode()&&e.isParent()&&!e.pannable()){r=!1;break}}else r=!0;return r},a=function(t){t[0]._private.grabbed=!0},s=function(t){t[0]._private.grabbed=!1},l=function(t){t[0]._private.rscratch.inDragLayer=!0},c=function(t){t[0]._private.rscratch.inDragLayer=!1},u=function(t){t[0]._private.rscratch.isGrabTarget=!0},h=function(t){t[0]._private.rscratch.isGrabTarget=!1},d=function(t,e){var n=e.addToList;!n.has(t)&&t.grabbable()&&!t.locked()&&(n.merge(t),a(t))},p=function(t,e){if(t.cy().hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList)){var n=t.descendants();e.inDragLayer&&(n.forEach(l),n.connectedEdges().forEach(l)),e.addToList&&d(n,e)}},f=function(e,n){n=n||{};var r=e.cy().hasCompoundNodes();n.inDragLayer&&(e.forEach(l),e.neighborhood().stdFilter((function(t){return!r||t.isEdge()})).forEach(l)),n.addToList&&e.forEach((function(t){d(t,n)})),p(e,n),m(e,{inDragLayer:n.inDragLayer}),t.updateCachedGrabbedEles()},g=f,y=function(e){e&&(t.getCachedZSortedEles().forEach((function(t){s(t),c(t),h(t)})),t.updateCachedGrabbedEles())},m=function(t,e){if((null!=e.inDragLayer||null!=e.addToList)&&t.cy().hasCompoundNodes()){var n=t.ancestors().orphans();if(!n.same(t)){var r=n.descendants().spawnSelf().merge(n).unmerge(t).unmerge(t.descendants()),i=r.connectedEdges();e.inDragLayer&&(i.forEach(l),r.forEach(l)),e.addToList&&r.forEach((function(t){d(t,e)}))}}},v=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},b=typeof MutationObserver<"u",x=typeof ResizeObserver<"u";b?(t.removeObserver=new MutationObserver((function(e){for(var n=0;n<e.length;n++){var r=e[n].removedNodes;if(r)for(var i=0;i<r.length;i++)if(r[i]===t.container){t.destroy();break}}})),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",(function(e){t.destroy()}));var C=re((function(){t.cy.resize()}),100);b&&(t.styleObserver=new MutationObserver(C),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",C),x&&(t.resizeObserver=new ResizeObserver(C),t.resizeObserver.observe(t.container));var _=function(t,e){for(;null!=t;)e(t),t=t.parentNode},w=function(){t.invalidateContainerClientCoordsCache()};_(t.container,(function(e){t.registerBinding(e,"transitionend",w),t.registerBinding(e,"animationend",w),t.registerBinding(e,"scroll",w)})),t.registerBinding(t.container,"contextmenu",(function(t){t.preventDefault()}));var T,E,S,A=function(){return 0!==t.selection[4]},L=function(e){for(var n=t.findContainerClientCoords(),r=n[0],i=n[1],o=n[2],a=n[3],s=e.touches?e.touches:[e],l=!1,c=0;c<s.length;c++){var u=s[c];if(r<=u.clientX&&u.clientX<=r+o&&i<=u.clientY&&u.clientY<=i+a){l=!0;break}}if(!l)return!1;for(var h=t.container,d=e.target.parentNode,p=!1;d;){if(d===h){p=!0;break}d=d.parentNode}return!!p};t.registerBinding(t.container,"mousedown",(function(e){if(L(e)){e.preventDefault(),v(),t.hoverData.capture=!0,t.hoverData.which=e.which;var n=t.cy,i=[e.clientX,e.clientY],o=t.projectIntoViewport(i[0],i[1]),a=t.selection,s=t.findNearestElements(o[0],o[1],!0,!1),l=s[0],c=t.dragData.possibleDragElements;t.hoverData.mdownPos=o,t.hoverData.mdownGPos=i;var h=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout((function(){if(!t.hoverData.tapholdCancelled){var r=t.hoverData.down;r?r.emit({originalEvent:e,type:"taphold",position:{x:o[0],y:o[1]}}):n.emit({originalEvent:e,type:"taphold",position:{x:o[0],y:o[1]}})}}),t.tapholdDuration)};if(3==e.which){t.hoverData.cxtStarted=!0;var d={originalEvent:e,type:"cxttapstart",position:{x:o[0],y:o[1]}};l?(l.activate(),l.emit(d),t.hoverData.down=l):n.emit(d),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==e.which){if(l&&l.activate(),null!=l&&t.nodeIsGrabbable(l)){var p=function(t){return{originalEvent:e,type:t,position:{x:o[0],y:o[1]}}},y=function(t){t.emit(p("grab"))};if(u(l),l.selected()){c=t.dragData.possibleDragElements=n.collection();var m=n.$((function(e){return e.isNode()&&e.selected()&&t.nodeIsGrabbable(e)}));f(m,{addToList:c}),l.emit(p("grabon")),m.forEach(y)}else c=t.dragData.possibleDragElements=n.collection(),g(l,{addToList:c}),l.emit(p("grabon")).emit(p("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=l,t.hoverData.downs=s,t.hoverData.downTime=(new Date).getTime(),r(l,["mousedown","tapstart","vmousedown"],e,{x:o[0],y:o[1]}),null==l?(a[4]=1,t.data.bgActivePosistion={x:o[0],y:o[1]},t.redrawHint("select",!0),t.redraw()):l.pannable()&&(a[4]=1),h()}a[0]=a[2]=o[0],a[1]=a[3]=o[1]}}),!1),t.registerBinding(e,"mousemove",(function(e){if(t.hoverData.capture||L(e)){var n=!1,a=t.cy,s=a.zoom(),l=[e.clientX,e.clientY],c=t.projectIntoViewport(l[0],l[1]),u=t.hoverData.mdownPos,h=t.hoverData.mdownGPos,d=t.selection,p=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(p=t.findNearestElement(c[0],c[1],!0,!1));var g,m=t.hoverData.last,v=t.hoverData.down,b=[c[0]-d[2],c[1]-d[3]],x=t.dragData.possibleDragElements;if(h){var C=l[0]-h[0],_=C*C,w=l[1]-h[1],T=_+w*w;t.hoverData.isOverThresholdDrag=g=T>=t.desktopTapThreshold2}var E=i(e);g&&(t.hoverData.tapholdCancelled=!0);var S=function(){var e=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===e.length?(e.push(b[0]),e.push(b[1])):(e[0]+=b[0],e[1]+=b[1])};n=!0,r(p,["mousemove","vmousemove","tapdrag"],e,{x:c[0],y:c[1]});var A=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||a.emit({originalEvent:e,type:"boxstart",position:{x:c[0],y:c[1]}}),d[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(g){var D={originalEvent:e,type:"cxtdrag",position:{x:c[0],y:c[1]}};v?v.emit(D):a.emit(D),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||p!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:c[0],y:c[1]}}),t.hoverData.cxtOver=p,p&&p.emit({originalEvent:e,type:"cxtdragover",position:{x:c[0],y:c[1]}}))}}else if(t.hoverData.dragging){if(n=!0,a.panningEnabled()&&a.userPanningEnabled()){var B;if(t.hoverData.justStartedPan){var F=t.hoverData.mdownPos;B={x:(c[0]-F[0])*s,y:(c[1]-F[1])*s},t.hoverData.justStartedPan=!1}else B={x:b[0]*s,y:b[1]*s};a.panBy(B),a.emit("dragpan"),t.hoverData.dragged=!0}c=t.projectIntoViewport(e.clientX,e.clientY)}else if(1!=d[4]||null!=v&&!v.pannable()){if(v&&v.pannable()&&v.active()&&v.unactivate(),(!v||!v.grabbed())&&p!=m&&(m&&r(m,["mouseout","tapdragout"],e,{x:c[0],y:c[1]}),p&&r(p,["mouseover","tapdragover"],e,{x:c[0],y:c[1]}),t.hoverData.last=p),v)if(g){if(a.boxSelectionEnabled()&&E)v&&v.grabbed()&&(y(x),v.emit("freeon"),x.emit("free"),t.dragData.didDrag&&(v.emit("dragfreeon"),x.emit("dragfree"))),A();else if(v&&v.grabbed()&&t.nodeIsDraggable(v)){var N=!t.dragData.didDrag;N&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||f(x,{inDragLayer:!0});var I={x:0,y:0};if(k(b[0])&&k(b[1])&&(I.x+=b[0],I.y+=b[1],N)){var O=t.hoverData.dragDelta;O&&k(O[0])&&k(O[1])&&(I.x+=O[0],I.y+=O[1])}t.hoverData.draggingEles=!0,x.silentShift(I).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else S();n=!0}else g&&(t.hoverData.dragging||!a.boxSelectionEnabled()||!E&&a.panningEnabled()&&a.userPanningEnabled()?!t.hoverData.selecting&&a.panningEnabled()&&a.userPanningEnabled()&&o(v,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,d[4]=0,t.data.bgActivePosistion=vn(u),t.redrawHint("select",!0),t.redraw()):A(),v&&v.pannable()&&v.active()&&v.unactivate());if(d[2]=c[0],d[3]=c[1],n)return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}}),!1),t.registerBinding(e,"mouseup",(function(e){if(t.hoverData.capture){t.hoverData.capture=!1;var o=t.cy,a=t.projectIntoViewport(e.clientX,e.clientY),s=t.selection,l=t.findNearestElement(a[0],a[1],!0,!1),c=t.dragData.possibleDragElements,u=t.hoverData.down,h=i(e);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,u&&u.unactivate(),3===t.hoverData.which){var d={originalEvent:e,type:"cxttapend",position:{x:a[0],y:a[1]}};if(u?u.emit(d):o.emit(d),!t.hoverData.cxtDragged){var p={originalEvent:e,type:"cxttap",position:{x:a[0],y:a[1]}};u?u.emit(p):o.emit(p)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(r(l,["mouseup","tapend","vmouseup"],e,{x:a[0],y:a[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(r(u,["click","tap","vclick"],e,{x:a[0],y:a[1]}),E=!1,e.timeStamp-S<=o.multiClickDebounceTime()?(T&&clearTimeout(T),E=!0,S=null,r(u,["dblclick","dbltap","vdblclick"],e,{x:a[0],y:a[1]})):(T=setTimeout((function(){E||r(u,["oneclick","onetap","voneclick"],e,{x:a[0],y:a[1]})}),o.multiClickDebounceTime()),S=e.timeStamp)),null==u&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!i(e)&&(o.$(n).unselect(["tapunselect"]),c.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=c=o.collection()),l==u&&!t.dragData.didDrag&&!t.hoverData.selecting&&null!=l&&l._private.selectable&&(t.hoverData.dragging||("additive"===o.selectionType()||h?l.selected()?l.unselect(["tapunselect"]):l.select(["tapselect"]):h||(o.$(n).unmerge(l).unselect(["tapunselect"]),l.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var f=o.collection(t.getAllInBox(s[0],s[1],s[2],s[3]));t.redrawHint("select",!0),f.length>0&&t.redrawHint("eles",!0),o.emit({type:"boxend",originalEvent:e,position:{x:a[0],y:a[1]}});var g=function(t){return t.selectable()&&!t.selected()};"additive"===o.selectionType()||h||o.$(n).unmerge(f).unselect(),f.emit("box").stdFilter(g).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!s[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var m=u&&u.grabbed();y(c),m&&(u.emit("freeon"),c.emit("free"),t.dragData.didDrag&&(u.emit("dragfreeon"),c.emit("dragfree")))}}s[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}}),!1);var D=function(e){if(!t.scrollingPage){var n=t.cy,r=n.zoom(),i=n.pan(),o=t.projectIntoViewport(e.clientX,e.clientY),a=[o[0]*r+i.x,o[1]*r+i.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||A())return void e.preventDefault();if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){var s;e.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout((function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()}),150),s=null!=e.deltaY?e.deltaY/-250:null!=e.wheelDeltaY?e.wheelDeltaY/1e3:e.wheelDelta/1e3,s*=t.wheelSensitivity,1===e.deltaMode&&(s*=33);var l=n.zoom()*Math.pow(10,s);"gesturechange"===e.type&&(l=t.gestureStartZoom*e.scale),n.zoom({level:l,renderedPosition:{x:a[0],y:a[1]}}),n.emit("gesturechange"===e.type?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",D,!0),t.registerBinding(e,"scroll",(function(e){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout((function(){t.scrollingPage=!1}),250)}),!0),t.registerBinding(t.container,"gesturestart",(function(e){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||e.preventDefault()}),!0),t.registerBinding(t.container,"gesturechange",(function(e){t.hasTouchStarted||D(e)}),!0),t.registerBinding(t.container,"mouseout",(function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseout",position:{x:n[0],y:n[1]}})}),!1),t.registerBinding(t.container,"mouseover",(function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseover",position:{x:n[0],y:n[1]}})}),!1);var B,F,N,I,O,M,P,R,z,q,j,G,$,Y,W,U,H,V,X,K,Z=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},Q=function(t,e,n,r){return(n-t)*(n-t)+(r-e)*(r-e)};if(t.registerBinding(t.container,"touchstart",Y=function(e){if(t.hasTouchStarted=!0,L(e)){v(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var n=t.cy,i=t.touchData.now,o=t.touchData.earlier;if(e.touches[0]){var a=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=a[0],i[1]=a[1]}if(e.touches[1]&&(a=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),i[2]=a[0],i[3]=a[1]),e.touches[2]&&(a=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),i[4]=a[0],i[5]=a[1]),e.touches[1]){t.touchData.singleTouchMoved=!0,y(t.dragData.touchDragEles);var s=t.findContainerClientCoords();z=s[0],q=s[1],j=s[2],G=s[3],B=e.touches[0].clientX-z,F=e.touches[0].clientY-q,N=e.touches[1].clientX-z,I=e.touches[1].clientY-q,$=0<=B&&B<=j&&0<=N&&N<=j&&0<=F&&F<=G&&0<=I&&I<=G;var l=n.pan(),c=n.zoom();O=Z(B,F,N,I),M=Q(B,F,N,I),R=[((P=[(B+N)/2,(F+I)/2])[0]-l.x)/c,(P[1]-l.y)/c];var h=200;if(M<h*h&&!e.touches[2]){var d=t.findNearestElement(i[0],i[1],!0,!0),p=t.findNearestElement(i[2],i[3],!0,!0);return d&&d.isNode()?(d.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=d):p&&p.isNode()?(p.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=p):n.emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(e.touches[2])n.boxSelectionEnabled()&&e.preventDefault();else if(!e.touches[1]&&e.touches[0]){var m=t.findNearestElements(i[0],i[1],!0,!0),b=m[0];if(null!=b&&(b.activate(),t.touchData.start=b,t.touchData.starts=m,t.nodeIsGrabbable(b))){var x=t.dragData.touchDragEles=n.collection(),C=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),b.selected()?(C=n.$((function(e){return e.selected()&&t.nodeIsGrabbable(e)})),f(C,{addToList:x})):g(b,{addToList:x}),u(b);var _=function(t){return{originalEvent:e,type:t,position:{x:i[0],y:i[1]}}};b.emit(_("grabon")),C?C.forEach((function(t){t.emit(_("grab"))})):b.emit(_("grab"))}r(b,["touchstart","tapstart","vmousedown"],e,{x:i[0],y:i[1]}),null==b&&(t.data.bgActivePosistion={x:a[0],y:a[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout((function(){!1===t.touchData.singleTouchMoved&&!t.pinching&&!t.touchData.selecting&&r(t.touchData.start,["taphold"],e,{x:i[0],y:i[1]})}),t.tapholdDuration)}if(e.touches.length>=1){for(var w=t.touchData.startPosition=[null,null,null,null,null,null],k=0;k<i.length;k++)w[k]=o[k]=i[k];var T=e.touches[0];t.touchData.startGPosition=[T.clientX,T.clientY]}}},!1),t.registerBinding(window,"touchmove",W=function(e){var n=t.touchData.capture;if(n||L(e)){var i=t.selection,a=t.cy,s=t.touchData.now,l=t.touchData.earlier,c=a.zoom();if(e.touches[0]){var u=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);s[0]=u[0],s[1]=u[1]}e.touches[1]&&(u=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),s[2]=u[0],s[3]=u[1]),e.touches[2]&&(u=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),s[4]=u[0],s[5]=u[1]);var h,d=t.touchData.startGPosition;if(n&&e.touches[0]&&d){for(var p=[],g=0;g<s.length;g++)p[g]=s[g]-l[g];var m=e.touches[0].clientX-d[0],v=m*m,b=e.touches[0].clientY-d[1];h=v+b*b>=t.touchTapThreshold2}if(n&&t.touchData.cxt){e.preventDefault();var x=e.touches[0].clientX-z,C=e.touches[0].clientY-q,_=e.touches[1].clientX-z,w=e.touches[1].clientY-q,T=Q(x,C,_,w),E=150,S=1.5;if(T/M>=S*S||T>=E*E){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var A={originalEvent:e,type:"cxttapend",position:{x:s[0],y:s[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(A),t.touchData.start=null):a.emit(A)}}if(n&&t.touchData.cxt){A={originalEvent:e,type:"cxtdrag",position:{x:s[0],y:s[1]}},t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(A):a.emit(A),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var D=t.findNearestElement(s[0],s[1],!0,!0);(!t.touchData.cxtOver||D!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:s[0],y:s[1]}}),t.touchData.cxtOver=D,D&&D.emit({originalEvent:e,type:"cxtdragover",position:{x:s[0],y:s[1]}}))}else if(n&&e.touches[2]&&a.boxSelectionEnabled())e.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||a.emit({originalEvent:e,type:"boxstart",position:{x:s[0],y:s[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,i[4]=1,i&&0!==i.length&&void 0!==i[0]?(i[2]=(s[0]+s[2]+s[4])/3,i[3]=(s[1]+s[3]+s[5])/3):(i[0]=(s[0]+s[2]+s[4])/3,i[1]=(s[1]+s[3]+s[5])/3,i[2]=(s[0]+s[2]+s[4])/3+1,i[3]=(s[1]+s[3]+s[5])/3+1),t.redrawHint("select",!0),t.redraw();else if(n&&e.touches[1]&&!t.touchData.didSelect&&a.zoomingEnabled()&&a.panningEnabled()&&a.userZoomingEnabled()&&a.userPanningEnabled()){if(e.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),nt=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var P=0;P<nt.length;P++){var j=nt[P]._private;j.grabbed=!1,j.rscratch.inDragLayer=!1}}var G=t.touchData.start,Y=(x=e.touches[0].clientX-z,C=e.touches[0].clientY-q,_=e.touches[1].clientX-z,w=e.touches[1].clientY-q,Z(x,C,_,w)),W=Y/O;if($){var U=(x-B+(_-N))/2,H=(C-F+(w-I))/2,V=a.zoom(),X=V*W,K=a.pan(),J=R[0]*V+K.x,tt=R[1]*V+K.y,et={x:-X/V*(J-K.x-U)+J,y:-X/V*(tt-K.y-H)+tt};if(G&&G.active()){var nt=t.dragData.touchDragEles;y(nt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),G.unactivate().emit("freeon"),nt.emit("free"),t.dragData.didDrag&&(G.emit("dragfreeon"),nt.emit("dragfree"))}a.viewport({zoom:X,pan:et,cancelOnFailedZoom:!0}),a.emit("pinchzoom"),O=Y,B=x,F=C,N=_,I=w,t.pinching=!0}e.touches[0]&&(u=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),s[0]=u[0],s[1]=u[1]),e.touches[1]&&(u=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),s[2]=u[0],s[3]=u[1]),e.touches[2]&&(u=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),s[4]=u[0],s[5]=u[1])}else if(e.touches[0]&&!t.touchData.didSelect){var rt=t.touchData.start,it=t.touchData.last;if(!t.hoverData.draggingEles&&!t.swipePanning&&(D=t.findNearestElement(s[0],s[1],!0,!0)),n&&null!=rt&&e.preventDefault(),n&&null!=rt&&t.nodeIsDraggable(rt))if(h){nt=t.dragData.touchDragEles;var ot=!t.dragData.didDrag;ot&&f(nt,{inDragLayer:!0}),t.dragData.didDrag=!0;var at={x:0,y:0};k(p[0])&&k(p[1])&&(at.x+=p[0],at.y+=p[1],ot)&&(t.redrawHint("eles",!0),(st=t.touchData.dragDelta)&&k(st[0])&&k(st[1])&&(at.x+=st[0],at.y+=st[1])),t.hoverData.draggingEles=!0,nt.silentShift(at).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==l[0]&&t.touchData.startPosition[1]==l[1]&&t.redrawHint("eles",!0),t.redraw()}else{var st;0===(st=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(st.push(p[0]),st.push(p[1])):(st[0]+=p[0],st[1]+=p[1])}if(r(rt||D,["touchmove","tapdrag","vmousemove"],e,{x:s[0],y:s[1]}),(!rt||!rt.grabbed())&&D!=it&&(it&&it.emit({originalEvent:e,type:"tapdragout",position:{x:s[0],y:s[1]}}),D&&D.emit({originalEvent:e,type:"tapdragover",position:{x:s[0],y:s[1]}})),t.touchData.last=D,n)for(P=0;P<s.length;P++)s[P]&&t.touchData.startPosition[P]&&h&&(t.touchData.singleTouchMoved=!0);n&&(null==rt||rt.pannable())&&a.panningEnabled()&&a.userPanningEnabled()&&(o(rt,t.touchData.starts)&&(e.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=vn(t.touchData.startPosition)),t.swipePanning?(a.panBy({x:p[0]*c,y:p[1]*c}),a.emit("dragpan")):h&&(t.swipePanning=!0,a.panBy({x:m*c,y:b*c}),a.emit("dragpan"),rt&&(rt.unactivate(),t.redrawHint("select",!0),t.touchData.start=null))),u=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),s[0]=u[0],s[1]=u[1])}for(g=0;g<s.length;g++)l[g]=s[g];n&&e.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(e,"touchcancel",U=function(e){var n=t.touchData.start;t.touchData.capture=!1,n&&n.unactivate()}),t.registerBinding(e,"touchend",H=function(e){var i=t.touchData.start;if(t.touchData.capture){0===e.touches.length&&(t.touchData.capture=!1),e.preventDefault();var o=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var a,s=t.cy,l=s.zoom(),c=t.touchData.now,u=t.touchData.earlier;if(e.touches[0]){var h=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);c[0]=h[0],c[1]=h[1]}if(e.touches[1]&&(h=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),c[2]=h[0],c[3]=h[1]),e.touches[2]&&(h=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),c[4]=h[0],c[5]=h[1]),i&&i.unactivate(),t.touchData.cxt){if(a={originalEvent:e,type:"cxttapend",position:{x:c[0],y:c[1]}},i?i.emit(a):s.emit(a),!t.touchData.cxtDragged){var d={originalEvent:e,type:"cxttap",position:{x:c[0],y:c[1]}};i?i.emit(d):s.emit(d)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!e.touches[2]&&s.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var p=s.collection(t.getAllInBox(o[0],o[1],o[2],o[3]));o[0]=void 0,o[1]=void 0,o[2]=void 0,o[3]=void 0,o[4]=0,t.redrawHint("select",!0),s.emit({type:"boxend",originalEvent:e,position:{x:c[0],y:c[1]}});var f=function(t){return t.selectable()&&!t.selected()};p.emit("box").stdFilter(f).select().emit("boxselect"),p.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=i&&i.unactivate(),e.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!e.touches[1]&&!e.touches[0]&&!e.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var g=t.dragData.touchDragEles;if(null!=i){var m=i._private.grabbed;y(g),t.redrawHint("drag",!0),t.redrawHint("eles",!0),m&&(i.emit("freeon"),g.emit("free"),t.dragData.didDrag&&(i.emit("dragfreeon"),g.emit("dragfree"))),r(i,["touchend","tapend","vmouseup","tapdragout"],e,{x:c[0],y:c[1]}),i.unactivate(),t.touchData.start=null}else{var v=t.findNearestElement(c[0],c[1],!0,!0);r(v,["touchend","tapend","vmouseup","tapdragout"],e,{x:c[0],y:c[1]})}var b=t.touchData.startPosition[0]-c[0],x=b*b,C=t.touchData.startPosition[1]-c[1],_=(x+C*C)*l*l;t.touchData.singleTouchMoved||(i||s.$(":selected").unselect(["tapunselect"]),r(i,["tap","vclick"],e,{x:c[0],y:c[1]}),V=!1,e.timeStamp-K<=s.multiClickDebounceTime()?(X&&clearTimeout(X),V=!0,K=null,r(i,["dbltap","vdblclick"],e,{x:c[0],y:c[1]})):(X=setTimeout((function(){V||r(i,["onetap","voneclick"],e,{x:c[0],y:c[1]})}),s.multiClickDebounceTime()),K=e.timeStamp)),null!=i&&!t.dragData.didDrag&&i._private.selectable&&_<t.touchTapThreshold2&&!t.pinching&&("single"===s.selectionType()?(s.$(n).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"])):i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}for(var w=0;w<c.length;w++)u[w]=c[w];t.dragData.didDrag=!1,0===e.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),e.touches.length<2&&(1===e.touches.length&&(t.touchData.startGPosition=[e.touches[0].clientX,e.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),typeof TouchEvent>"u"){var J=[],tt=function(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}},et=function(t){return{event:t,touch:tt(t)}},nt=function(t){J.push(et(t))},rt=function(t){for(var e=0;e<J.length;e++)if(J[e].event.pointerId===t.pointerId)return void J.splice(e,1)},it=function(t){var e=J.filter((function(e){return e.event.pointerId===t.pointerId}))[0];e.event=t,e.touch=tt(t)},ot=function(t){t.touches=J.map((function(t){return t.touch}))},at=function(t){return"mouse"===t.pointerType||4===t.pointerType};t.registerBinding(t.container,"pointerdown",(function(t){at(t)||(t.preventDefault(),nt(t),ot(t),Y(t))})),t.registerBinding(t.container,"pointerup",(function(t){at(t)||(rt(t),ot(t),H(t))})),t.registerBinding(t.container,"pointercancel",(function(t){at(t)||(rt(t),ot(t),U(t))})),t.registerBinding(t.container,"pointermove",(function(t){at(t)||(t.preventDefault(),it(t),ot(t),W(t))}))}}},Uh={generatePolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,r,i,o,a){return ur(i,o,this.points,t,e,n/2,r/2,a)},checkPoint:function(t,e,n,r,i,o,a){return er(t,e,this.points,o,a,r,i,[0,-1],n)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){return or(i,o,t,e,n/2+a,r/2+a)},checkPoint:function(t,e,n,r,i,o,a){return ar(t,e,r,i,o,a,n)}}},generateRoundPolygon:function(t,e){for(var n=new Array(2*e.length),r=0;r<e.length/2;r++){var i=2*r,o=void 0;o=r<e.length/2-1?2*(r+1):0,n[4*r]=e[i],n[4*r+1]=e[i+1];var a=e[o]-e[i],s=e[o+1]-e[i+1],l=Math.sqrt(a*a+s*s);n[4*r+2]=a/l,n[4*r+3]=s/l}return this.nodeShapes[t]={renderer:this,name:t,points:n,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("round-polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,r,i,o,a){return hr(i,o,this.points,t,e,n,r)},checkPoint:function(t,e,n,r,i,o,a){return nr(t,e,this.points,o,a,r,i)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:pr(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){return Hn(i,o,t,e,n,r,a)},checkPoint:function(t,e,n,r,i,o,a){var s=yr(r,i),l=2*s;return!!(er(t,e,this.points,o,a,r,i-l,[0,-1],n)||er(t,e,this.points,o,a,r-l,i,[0,-1],n)||ar(t,e,l,l,o-r/2+s,a-i/2+s,n)||ar(t,e,l,l,o+r/2-s,a-i/2+s,n)||ar(t,e,l,l,o+r/2-s,a+i/2-s,n)||ar(t,e,l,l,o-r/2+s,a+i/2-s,n))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:vr(),points:pr(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},generateCutTrianglePts:function(t,e,n,r){var i=this.cornerLength,o=e/2,a=t/2,s=n-a,l=n+a,c=r-o,u=r+o;return{topLeft:[s,c+i,s+i,c,s+i,c+i],topRight:[l-i,c,l,c+i,l-i,c+i],bottomRight:[l,u-i,l-i,u,l-i,u-i],bottomLeft:[s+i,u,s,u-i,s+i,u-i]}},intersectLine:function(t,e,n,r,i,o,a){var s=this.generateCutTrianglePts(n+2*a,r+2*a,t,e),l=[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]);return ur(i,o,l,t,e)},checkPoint:function(t,e,n,r,i,o,a){if(er(t,e,this.points,o,a,r,i-2*this.cornerLength,[0,-1],n)||er(t,e,this.points,o,a,r-2*this.cornerLength,i,[0,-1],n))return!0;var s=this.generateCutTrianglePts(r,i,o,a);return tr(t,e,s.topLeft)||tr(t,e,s.topRight)||tr(t,e,s.bottomRight)||tr(t,e,s.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:pr(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){var s=.15,l=.5,c=.85,u=this.generateBarrelBezierPts(n+2*a,r+2*a,t,e),h=function(t){var e=Bn({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},s),n=Bn({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},l),r=Bn({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},c);return[t[0],t[1],e.x,e.y,n.x,n.y,r.x,r.y,t[4],t[5]]},d=[].concat(h(u.topLeft),h(u.topRight),h(u.bottomRight),h(u.bottomLeft));return ur(i,o,d,t,e)},generateBarrelBezierPts:function(t,e,n,r){var i=e/2,o=t/2,a=n-o,s=n+o,l=r-i,c=r+i,u=xr(t,e),h=u.heightOffset,d=u.widthOffset,p=u.ctrlPtOffsetPct*t,f={topLeft:[a,l+h,a+p,l,a+d,l],topRight:[s-d,l,s-p,l,s,l+h],bottomRight:[s,c-h,s-p,c,s-d,c],bottomLeft:[a+d,c,a+p,c,a,c-h]};return f.topLeft.isTop=!0,f.topRight.isTop=!0,f.bottomLeft.isBottom=!0,f.bottomRight.isBottom=!0,f},checkPoint:function(t,e,n,r,i,o,a){var s=xr(r,i),l=s.heightOffset,c=s.widthOffset;if(er(t,e,this.points,o,a,r,i-2*l,[0,-1],n)||er(t,e,this.points,o,a,r-2*c,i,[0,-1],n))return!0;for(var u=this.generateBarrelBezierPts(r,i,o,a),h=function(t,e,n){var r=n[4],i=n[2],o=n[0],a=n[5],s=n[1],l=Math.min(r,o),c=Math.max(r,o),u=Math.min(a,s),h=Math.max(a,s);if(l<=t&&t<=c&&u<=e&&e<=h){var d=br(r,i,o),p=Kn(d[0],d[1],d[2],t).filter((function(t){return 0<=t&&t<=1}));if(p.length>0)return p[0]}return null},d=Object.keys(u),p=0;p<d.length;p++){var f=u[d[p]],g=h(t,e,f);if(null!=g){var y=f[5],m=f[3],v=f[1],b=Dn(y,m,v,g);if(f.isTop&&b<=e||f.isBottom&&e<=b)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:pr(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){var s=e-(r/2+a),l=cr(i,o,t,e,t-(n/2+a),s,t+(n/2+a),s,!1);return l.length>0?l:Hn(i,o,t,e,n,r,a)},checkPoint:function(t,e,n,r,i,o,a){var s=yr(r,i),l=2*s;if(er(t,e,this.points,o,a,r,i-l,[0,-1],n)||er(t,e,this.points,o,a,r-l,i,[0,-1],n))return!0;var c=r/2+2*n,u=i/2+2*n;return!!(tr(t,e,[o-c,a-u,o-c,a,o+c,a,o+c,a-u])||ar(t,e,l,l,o+r/2-s,a+i/2-s,n)||ar(t,e,l,l,o-r/2+s,a+i/2-s,n))}}},registerNodeShapes:function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",pr(3,0)),this.generateRoundPolygon("round-triangle",pr(3,0)),this.generatePolygon("rectangle",pr(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n),this.generatePolygon("pentagon",pr(5,0)),this.generateRoundPolygon("round-pentagon",pr(5,0)),this.generatePolygon("hexagon",pr(6,0)),this.generateRoundPolygon("round-hexagon",pr(6,0)),this.generatePolygon("heptagon",pr(7,0)),this.generateRoundPolygon("round-heptagon",pr(7,0)),this.generatePolygon("octagon",pr(8,0)),this.generateRoundPolygon("round-octagon",pr(8,0));var r=new Array(20),i=gr(5,0),o=gr(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[2*s]*=a,o[2*s+1]*=a;for(s=0;s<5;s++)r[4*s]=i[2*s],r[4*s+1]=i[2*s+1],r[4*s+2]=o[2*s],r[4*s+3]=o[2*s+1];r=fr(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),t.makePolygon=function(t){var n,r="polygon-"+t.join("$");return(n=this[r])?n:e.generatePolygon(r,t)}}},Hh={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||Re();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},beforeRender:function(t,e){if(!this.destroyed){null==e&&De("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort((function(t,e){return e.priority-t.priority}))}}},Vh=function(t,e,n){for(var r=t.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(e,n)};Hh.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var n=function n(r){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){Vh(t,!0,r);var i=le();t.render(t.renderOptions);var o=t.lastDrawTime=le();void 0===t.averageRedrawTime&&(t.averageRedrawTime=o-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var a=o-i;t.redrawTotalTime+=a,t.lastRedrawTime=a,t.averageRedrawTime=t.averageRedrawTime/2+a/2,t.requestedFrame=!1}else Vh(t,!1,r);t.skipFrame=!1,se(n)}};se(n)}};var Xh=function(t){this.init(t)},Kh=Xh,Zh=Kh.prototype;Zh.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Zh.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container(),r=e.cy.window();if(r){var i=r.document,o=i.head,a="__________cytoscape_stylesheet",s="__________cytoscape_container",l=null!=i.getElementById(a);if(n.className.indexOf(s)<0&&(n.className=(n.className||"")+" "+s),!l){var c=i.createElement("style");c.id=a,c.textContent="."+s+" { position: relative; }",o.insertBefore(c,o.children[0])}"static"===r.getComputedStyle(n).getPropertyValue("position")&&Fe("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=k(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},Zh.notify=function(t,e){var n=this,r=n.cy;if(!this.destroyed){if("init"===t)return void n.load();if("destroy"===t)return void n.destroy();("add"===t||"remove"===t||"move"===t&&r.hasCompoundNodes()||"load"===t||"zorder"===t||"mount"===t)&&n.invalidateCachedZSortedEles(),"viewport"===t&&n.redrawHint("select",!0),("load"===t||"resize"===t||"mount"===t)&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},Zh.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}},Zh.isHeadless=function(){return!1},[Eh,$h,Yh,Wh,Uh,Hh].forEach((function(t){Q(Zh,t)}));var Qh=1e3/60,Jh={setupDequeueing:function(t){return function(){var e=this,n=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var r=re((function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()}),t.deqRedrawThreshold),i=function(i,o){var a=le(),s=n.averageRedrawTime,l=n.lastRedrawTime,c=[],u=n.cy.extent(),h=n.getPixelRatio();for(i||n.flushRenderedStyleQueue();;){var d=le(),p=d-a,f=d-o;if(l<Qh){var g=Qh-(i?s:0);if(f>=t.deqFastCost*g)break}else if(i){if(p>=t.deqCost*l||p>=t.deqAvgCost*s)break}else if(f>=t.deqNoDrawCost*Qh)break;var y=t.deq(e,h,u);if(!(y.length>0))break;for(var m=0;m<y.length;m++)c.push(y[m])}c.length>0&&(t.onDeqd(e,c),!i&&t.shouldRedraw(e,c,h,u)&&r())},o=t.priority||Le;n.beforeRender(i,o(e))}}}},td=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se;e(this,t),this.idsByKey=new Ue,this.keyForId=new Ue,this.cachesByLvl=new Ue,this.lvls=[],this.getKey=n,this.doesEleInvalidateKey=r}return i(t,[{key:"getIdsFor",value:function(t){null==t&&De("Can not get id list for null key");var e=this.idsByKey,n=this.idsByKey.get(t);return n||(n=new Xe,e.set(t,n)),n}},{key:"addIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).add(e)}},{key:"deleteIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).delete(e)}},{key:"getNumberOfIdsForKey",value:function(t){return null==t?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e),r=this.getKey(t);this.deleteIdForKey(n,e),this.addIdForKey(r,e),this.keyForId.set(e,r)}},{key:"deleteKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteIdForKey(n,e),this.keyForId.delete(e)}},{key:"keyHasChangedFor",value:function(t){var e=t.id();return this.keyForId.get(e)!==this.getKey(t)}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var e=this.cachesByLvl,n=this.lvls,r=e.get(t);return r||(r=new Ue,e.set(t,r),n.push(t)),r}},{key:"getCache",value:function(t,e){return this.getCachesAt(e).get(t)}},{key:"get",value:function(t,e){var n=this.getKey(t),r=this.getCache(n,e);return null!=r&&this.updateKeyMappingFor(t),r}},{key:"getForCachedKey",value:function(t,e){var n=this.keyForId.get(t.id());return this.getCache(n,e)}},{key:"hasCache",value:function(t,e){return this.getCachesAt(e).has(t)}},{key:"has",value:function(t,e){var n=this.getKey(t);return this.hasCache(n,e)}},{key:"setCache",value:function(t,e,n){n.key=t,this.getCachesAt(e).set(t,n)}},{key:"set",value:function(t,e,n){var r=this.getKey(t);this.setCache(r,e,n),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,e){this.getCachesAt(e).delete(t)}},{key:"delete",value:function(t,e){var n=this.getKey(t);this.deleteCache(n,e)}},{key:"invalidateKey",value:function(t){var e=this;this.lvls.forEach((function(n){return e.deleteCache(t,n)}))}},{key:"invalidate",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteKeyMappingFor(t);var r=this.doesEleInvalidateKey(t);return r&&this.invalidateKey(n),r||0===this.getNumberOfIdsForKey(n)}}]),t}(),ed=25,nd=50,rd=-4,id=3,od=7.99,ad=8,sd=1024,ld=1024,cd=1024,ud=.2,hd=.8,dd=10,pd=.15,fd=.1,gd=.9,yd=.9,md=100,vd=1,bd={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},xd=ze({getKey:null,doesEleInvalidateKey:Se,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Ee,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Cd=function(t,e){var n=this;n.renderer=t,n.onDequeues=[];var r=xd(e);Q(n,r),n.lookup=new td(r.getKey,r.doesEleInvalidateKey),n.setupDequeueing()},_d=Cd.prototype;_d.reasons=bd,_d.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]},_d.getRetiredTextureQueue=function(t){var e=this,n=e.eleImgCaches.retired=e.eleImgCaches.retired||{};return n[t]=n[t]||[]},_d.getElementQueue=function(){var t=this;return t.eleCacheQueue=t.eleCacheQueue||new tn((function(t,e){return e.reqs-t.reqs}))},_d.getElementKeyToQueue=function(){var t=this;return t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{}},_d.getElement=function(t,e,n,r,i){var o=this,a=this.renderer,s=a.cy.zoom(),l=this.lookup;if(!e||0===e.w||0===e.h||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!o.allowEdgeTxrCaching&&t.isEdge()||!o.allowParentTxrCaching&&t.isParent())return null;if(null==r&&(r=Math.ceil(Tn(s*n))),r<rd)r=rd;else if(s>=od||r>id)return null;var c=Math.pow(2,r),u=e.h*c,h=e.w*c,d=a.eleTextBiggerThanMin(t,c);if(!this.isVisible(t,d))return null;var p,f=l.get(t,r);if(f&&f.invalidated&&(f.invalidated=!1,f.texture.invalidatedWidth-=f.width),f)return f;if(p=u<=ed?ed:u<=nd?nd:Math.ceil(u/nd)*nd,u>cd||h>ld)return null;var g=o.getTextureQueue(p),y=g[g.length-2],m=function(){return o.recycleTexture(p,h)||o.addTexture(p,h)};y||(y=g[g.length-1]),y||(y=m()),y.width-y.usedWidth<h&&(y=m());for(var v,b=function(t){return t&&t.scaledLabelShown===d},x=i&&i===bd.dequeue,C=i&&i===bd.highQuality,_=i&&i===bd.downscale,w=r+1;w<=id;w++){var k=l.get(t,w);if(k){v=k;break}}var T=v&&v.level===r+1?v:null,E=function(){y.context.drawImage(T.texture.canvas,T.x,0,T.width,T.height,y.usedWidth,0,h,u)};if(y.context.setTransform(1,0,0,1,0,0),y.context.clearRect(y.usedWidth,0,h,p),b(T))E();else if(b(v)){if(!C)return o.queueElement(t,v.level-1),v;for(var S=v.level;S>r;S--)T=o.getElement(t,e,n,S,bd.downscale);E()}else{var A;if(!x&&!C&&!_)for(var L=r-1;L>=rd;L--){var D=l.get(t,L);if(D){A=D;break}}if(b(A))return o.queueElement(t,r),A;y.context.translate(y.usedWidth,0),y.context.scale(c,c),this.drawElement(y.context,t,e,d,!1),y.context.scale(1/c,1/c),y.context.translate(-y.usedWidth,0)}return f={x:y.usedWidth,texture:y,level:r,scale:c,width:h,height:u,scaledLabelShown:d},y.usedWidth+=Math.ceil(h+ad),y.eleCaches.push(f),l.set(t,r,f),o.checkTextureFullness(y),f},_d.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])},_d.invalidateElement=function(t){var e=this,n=e.lookup,r=[];if(n.isInvalid(t)){for(var i=rd;i<=id;i++){var o=n.getForCachedKey(t,i);o&&r.push(o)}if(n.invalidate(t))for(var a=0;a<r.length;a++){var s=r[a],l=s.texture;l.invalidatedWidth+=s.width,s.invalidated=!0,e.checkTextureUtility(l)}e.removeFromQueue(t)}},_d.checkTextureUtility=function(t){t.invalidatedWidth>=ud*t.width&&this.retireTexture(t)},_d.checkTextureFullness=function(t){var e=this.getTextureQueue(t.height);t.usedWidth/t.width>hd&&t.fullnessChecks>=dd?qe(e,t):t.fullnessChecks++},_d.retireTexture=function(t){var e=this,n=t.height,r=e.getTextureQueue(n),i=this.lookup;qe(r,t),t.retired=!0;for(var o=t.eleCaches,a=0;a<o.length;a++){var s=o[a];i.deleteCache(s.key,s.level)}je(o),e.getRetiredTextureQueue(n).push(t)},_d.addTexture=function(t,e){var n=this,r={};return n.getTextureQueue(t).push(r),r.eleCaches=[],r.height=t,r.width=Math.max(sd,e),r.usedWidth=0,r.invalidatedWidth=0,r.fullnessChecks=0,r.canvas=n.renderer.makeOffscreenCanvas(r.width,r.height),r.context=r.canvas.getContext("2d"),r},_d.recycleTexture=function(t,e){for(var n=this,r=n.getTextureQueue(t),i=n.getRetiredTextureQueue(t),o=0;o<i.length;o++){var a=i[o];if(a.width>=e)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,je(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),qe(i,a),r.push(a),a}},_d.queueElement=function(t,e){var n=this,r=n.getElementQueue(),i=n.getElementKeyToQueue(),o=this.getKey(t),a=i[o];if(a)a.level=Math.max(a.level,e),a.eles.merge(t),a.reqs++,r.updateItem(a);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:o};r.push(s),i[o]=s}},_d.dequeue=function(t){for(var e=this,n=e.getElementQueue(),r=e.getElementKeyToQueue(),i=[],o=e.lookup,a=0;a<vd&&n.size()>0;a++){var s=n.pop(),l=s.key,c=s.eles[0],u=o.hasCache(c,s.level);if(r[l]=null,!u){i.push(s);var h=e.getBoundingBox(c);e.getElement(c,h,t,s.level,bd.dequeue)}}return i},_d.removeFromQueue=function(t){var e=this,n=e.getElementQueue(),r=e.getElementKeyToQueue(),i=this.getKey(t),o=r[i];null!=o&&(1===o.eles.length?(o.reqs=Te,n.updateItem(o),n.pop(),r[i]=null):o.eles.unmerge(t))},_d.onDequeue=function(t){this.onDequeues.push(t)},_d.offDequeue=function(t){qe(this.onDequeues,t)},_d.setupDequeueing=Jh.setupDequeueing({deqRedrawThreshold:md,deqCost:pd,deqAvgCost:fd,deqNoDrawCost:gd,deqFastCost:yd,deq:function(t,e,n){return t.dequeue(e,n)},onDeqd:function(t,e){for(var n=0;n<t.onDequeues.length;n++)(0,t.onDequeues[n])(e)},shouldRedraw:function(t,e,n,r){for(var i=0;i<e.length;i++)for(var o=e[i].eles,a=0;a<o.length;a++){var s=o[a].boundingBox();if($n(s,r))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var wd=1,kd=-4,Td=2,Ed=3.99,Sd=50,Ad=50,Ld=.15,Dd=.1,Bd=.9,Fd=.9,Nd=1,Id=250,Od=16e6,Md=!0,Pd=function(t){var e=this,n=e.renderer=t,r=n.cy;e.layersByLevel={},e.firstGet=!0,e.lastInvalidationTime=le()-2*Id,e.skipping=!1,e.eleTxrDeqs=r.collection(),e.scheduleElementRefinement=re((function(){e.refineElementTextures(e.eleTxrDeqs),e.eleTxrDeqs.unmerge(e.eleTxrDeqs)}),Ad),n.beforeRender((function(t,n){n-e.lastInvalidationTime<=Id?e.skipping=!0:e.skipping=!1}),n.beforeRenderPriorities.lyrTxrSkip);var i=function(t,e){return e.reqs-t.reqs};e.layersQueue=new tn(i),e.setupDequeueing()},Rd=Pd.prototype,zd=0,qd=Math.pow(2,53)-1;Rd.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),o=this.renderer.makeOffscreenCanvas(r,i),a={id:zd=++zd%qd,bb:t,level:e,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,l=-a.bb.x1,c=-a.bb.y1;return s.scale(n,n),s.translate(l,c),a},Rd.getLayers=function(t,e,n){var r=this,i=r.renderer.cy.zoom(),o=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil(Tn(i*e)))<kd)n=kd;else if(i>=Ed||n>Td)return null;r.validateLayersElesOrdering(n,t);var a,s,l=r.layersByLevel,c=Math.pow(2,n),u=l[n]=l[n]||[],h=function(){var e=function(e){if(r.validateLayersElesOrdering(e,t),r.levelIsComplete(e,t))return s=l[e],!0},i=function(t){if(!s)for(var r=n+t;kd<=r&&r<=Td&&!e(r);r+=t);};i(1),i(-1);for(var o=u.length-1;o>=0;o--){var a=u[o];a.invalid&&qe(u,a)}};if(r.levelIsComplete(n,t))return u;h();var d=function(){if(!a){a=In();for(var e=0;e<t.length;e++)Rn(a,t[e].boundingBox())}return a},p=function(t){var e=(t=t||{}).after;if(d(),a.w*c*(a.h*c)>Od)return null;var i=r.makeLayer(a,n);if(null!=e){var o=u.indexOf(e)+1;u.splice(o,0,i)}else(void 0===t.insert||t.insert)&&u.unshift(i);return i};if(r.skipping&&!o)return null;for(var f=null,g=t.length/wd,y=!o,m=0;m<t.length;m++){var v=t[m],b=v._private.rscratch,x=b.imgLayerCaches=b.imgLayerCaches||{},C=x[n];if(C)f=C;else{if((!f||f.eles.length>=g||!Un(f.bb,v.boundingBox()))&&!(f=p({insert:!0,after:f})))return null;s||y?r.queueLayer(f,v):r.drawEleInLayer(f,v,n,e),f.eles.push(v),x[n]=f}}return s||(y?null:u)},Rd.getEleLevelForLayerLevel=function(t,e){return t},Rd.drawEleInLayer=function(t,e,n,r){var i=this,o=this.renderer,a=t.context,s=e.boundingBox();0===s.w||0===s.h||!e.visible()||(n=i.getEleLevelForLayerLevel(n,r),o.setImgSmoothing(a,!1),o.drawCachedElement(a,e,null,null,n,Md),o.setImgSmoothing(a,!0))},Rd.levelIsComplete=function(t,e){var n=this.layersByLevel[t];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;r+=o.eles.length}return r===e.length},Rd.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0)this.invalidateLayer(i);else{var s=o;for(a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}}},Rd.updateElementsInLayers=function(t,e){for(var n=this,r=A(t[0]),i=0;i<t.length;i++)for(var o=r?null:t[i],a=r?t[i]:t[i].ele,s=a._private.rscratch,l=s.imgLayerCaches=s.imgLayerCaches||{},c=kd;c<=Td;c++){var u=l[c];u&&(o&&n.getEleLevelForLayerLevel(u.level)!==o.level||e(u,a,o))}},Rd.haveLayers=function(){for(var t=this,e=!1,n=kd;n<=Td;n++){var r=t.layersByLevel[n];if(r&&r.length>0){e=!0;break}}return e},Rd.invalidateElements=function(t){var e=this;0!==t.length&&(e.lastInvalidationTime=le(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,(function(t,n,r){e.invalidateLayer(t)})))},Rd.invalidateLayer=function(t){if(this.lastInvalidationTime=le(),!t.invalid){var e=t.level,n=t.eles,r=this.layersByLevel[e];qe(r,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var i=0;i<n.length;i++){var o=n[i]._private.rscratch.imgLayerCaches;o&&(o[e]=null)}}},Rd.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,(function(t,n,r){var i=t.replacement;if(i||((i=t.replacement=e.makeLayer(t.bb,t.level)).replaces=t,i.eles=t.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)e.queueLayer(i,i.eles[o])}))},Rd.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},Rd.queueLayer=function(t,e){var n=this.layersQueue,r=t.elesQueue,i=r.hasId=r.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;r.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}},Rd.dequeue=function(t){for(var e=this,n=e.layersQueue,r=[],i=0;i<Nd&&0!==n.size();){var o=n.peek();if(o.replacement)n.pop();else if(o.replaces&&o!==o.replaces.replacement)n.pop();else if(o.invalid)n.pop();else{var a=o.elesQueue.shift();a&&(e.drawEleInLayer(o,a,o.level,t),i++),0===r.length&&r.push(!0),0===o.elesQueue.length&&(n.pop(),o.reqs=0,o.replaces&&e.applyLayerReplacement(o),e.requestRedraw())}}return r},Rd.applyLayerReplacement=function(t){var e=this,n=e.layersByLevel[t.level],r=t.replaces,i=n.indexOf(r);if(!(i<0||r.invalid)){n[i]=t;for(var o=0;o<t.eles.length;o++){var a=t.eles[o]._private,s=a.imgLayerCaches=a.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}},Rd.requestRedraw=re((function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()}),100),Rd.setupDequeueing=Jh.setupDequeueing({deqRedrawThreshold:Sd,deqCost:Ld,deqAvgCost:Dd,deqNoDrawCost:Bd,deqFastCost:Fd,deq:function(t,e){return t.dequeue(e)},onDeqd:Le,shouldRedraw:Ee,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var jd,Gd={};function $d(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}}function Yd(t,e,n){for(var r,i=0;i<e.length;i++){var o=e[i];0===i&&(r=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)}function Wd(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var o=r[i];t.lineTo(o.x,o.y)}var a=n,s=n[0];for(t.moveTo(s.x,s.y),i=1;i<a.length;i++)o=a[i],t.lineTo(o.x,o.y);t.closePath&&t.closePath()}function Ud(t,e,n,r,i){t.beginPath&&t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1);var o=e,a=o[0];t.moveTo(a.x,a.y);for(var s=0;s<o.length;s++){var l=o[s];t.lineTo(l.x,l.y)}t.closePath&&t.closePath()}function Hd(t,e,n,r){t.arc(e,n,r,0,2*Math.PI,!1)}Gd.arrowShapeImpl=function(t){return(jd||(jd={polygon:$d,"triangle-backcurve":Yd,"triangle-tee":Wd,"circle-triangle":Ud,"triangle-cross":Wd,circle:Hd}))[t]};var Vd={drawElement:function(t,e,n,r,i,o){var a=this;e.isNode()?a.drawNode(t,e,n,r,i,o):a.drawEdge(t,e,n,r,i,o)},drawElementOverlay:function(t,e){var n=this;e.isNode()?n.drawNodeOverlay(t,e):n.drawEdgeOverlay(t,e)},drawElementUnderlay:function(t,e){var n=this;e.isNode()?n.drawNodeUnderlay(t,e):n.drawEdgeUnderlay(t,e)},drawCachedElementPortion:function(t,e,n,r,i,o,a,s){var l=this,c=n.getBoundingBox(e);if(0!==c.w&&0!==c.h){var u=n.getElement(e,c,r,i,o);if(null!=u){var h=s(l,e);if(0===h)return;var d,p,f,g,y,m,v=a(l,e),b=c.x1,x=c.y1,C=c.w,_=c.h;if(0!==v){var w=n.getRotationPoint(e);f=w.x,g=w.y,t.translate(f,g),t.rotate(v),(y=l.getImgSmoothing(t))||l.setImgSmoothing(t,!0);var k=n.getRotationOffset(e);d=k.x,p=k.y}else d=b,p=x;1!==h&&(m=t.globalAlpha,t.globalAlpha=m*h),t.drawImage(u.texture.canvas,u.x,0,u.width,u.height,d,p,C,_),1!==h&&(t.globalAlpha=m),0!==v&&(t.rotate(-v),t.translate(-f,-g),y||l.setImgSmoothing(t,!1))}else n.drawElement(t,e)}}},Xd=function(){return 0},Kd=function(t,e){return t.getTextAngle(e,null)},Zd=function(t,e){return t.getTextAngle(e,"source")},Qd=function(t,e){return t.getTextAngle(e,"target")},Jd=function(t,e){return e.effectiveOpacity()},tp=function(t,e){return e.pstyle("text-opacity").pfValue*e.effectiveOpacity()};Vd.drawCachedElement=function(t,e,n,r,i,o){var a=this,s=a.data,l=s.eleTxrCache,c=s.lblTxrCache,u=s.slbTxrCache,h=s.tlbTxrCache,d=e.boundingBox(),p=!0===o?l.reasons.highQuality:null;if(0!==d.w&&0!==d.h&&e.visible()&&(!r||$n(d,r))){var f=e.isEdge(),g=e.element()._private.rscratch.badLine;a.drawElementUnderlay(t,e),a.drawCachedElementPortion(t,e,l,n,i,p,Xd,Jd),(!f||!g)&&a.drawCachedElementPortion(t,e,c,n,i,p,Kd,tp),f&&!g&&(a.drawCachedElementPortion(t,e,u,n,i,p,Zd,tp),a.drawCachedElementPortion(t,e,h,n,i,p,Qd,tp)),a.drawElementOverlay(t,e)}},Vd.drawElements=function(t,e){for(var n=this,r=0;r<e.length;r++){var i=e[r];n.drawElement(t,i)}},Vd.drawCachedElements=function(t,e,n,r){for(var i=this,o=0;o<e.length;o++){var a=e[o];i.drawCachedElement(t,a,n,r)}},Vd.drawCachedNodes=function(t,e,n,r){for(var i=this,o=0;o<e.length;o++){var a=e[o];a.isNode()&&i.drawCachedElement(t,a,n,r)}},Vd.drawLayeredElements=function(t,e,n,r){var i=this,o=i.data.lyrTxrCache.getLayers(e,n);if(o)for(var a=0;a<o.length;a++){var s=o[a],l=s.bb;0===l.w||0===l.h||t.drawImage(s.canvas,l.x1,l.y1,l.w,l.h)}else i.drawCachedElements(t,e,n,r)};var ep={drawEdge:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this,s=e._private.rscratch;if((!o||e.visible())&&!s.badLine&&null!=s.allpts&&!isNaN(s.allpts[0])){var l;n&&(l=n,t.translate(-l.x1,-l.y1));var c=o?e.pstyle("opacity").value:1,u=o?e.pstyle("line-opacity").value:1,h=e.pstyle("curve-style").value,d=e.pstyle("line-style").value,p=e.pstyle("width").pfValue,f=e.pstyle("line-cap").value,g=c*u,y=c*u,m=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;"straight-triangle"===h?(a.eleStrokeStyle(t,e,n),a.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=p,t.lineCap=f,a.eleStrokeStyle(t,e,n),a.drawEdgePath(e,t,s.allpts,d),t.lineCap="butt")},v=function(){i&&a.drawEdgeOverlay(t,e)},b=function(){i&&a.drawEdgeUnderlay(t,e)},x=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;a.drawArrowheads(t,e,n)},C=function(){a.drawElementText(t,e,null,r)};if(t.lineJoin="round","yes"===e.pstyle("ghost").value){var _=e.pstyle("ghost-offset-x").pfValue,w=e.pstyle("ghost-offset-y").pfValue,k=e.pstyle("ghost-opacity").value,T=g*k;t.translate(_,w),m(T),x(T),t.translate(-_,-w)}b(),m(),x(),v(),C(),n&&t.translate(l.x1,l.y1)}}},np=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(e,n){if(n.visible()){var r=n.pstyle("".concat(t,"-opacity")).value;if(0!==r){var i=this,o=i.usePaths(),a=n._private.rscratch,s=2*n.pstyle("".concat(t,"-padding")).pfValue,l=n.pstyle("".concat(t,"-color")).value;e.lineWidth=s,"self"!==a.edgeType||o?e.lineCap="round":e.lineCap="butt",i.colorStrokeStyle(e,l[0],l[1],l[2],r),i.drawEdgePath(n,e,a.allpts,"solid")}}}};ep.drawEdgeOverlay=np("overlay"),ep.drawEdgeUnderlay=np("underlay"),ep.drawEdgePath=function(t,e,n,r){var i,o=t._private.rscratch,a=e,s=!1,l=this.usePaths(),c=t.pstyle("line-dash-pattern").pfValue,u=t.pstyle("line-dash-offset").pfValue;if(l){var h=n.join("$");o.pathCacheKey&&o.pathCacheKey===h?(i=e=o.pathCache,s=!0):(i=e=new Path2D,o.pathCacheKey=h,o.pathCache=i)}if(a.setLineDash)switch(r){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(c),a.lineDashOffset=u;break;case"solid":a.setLineDash([])}if(!s&&!o.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),o.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<n.length;d+=4)e.quadraticCurveTo(n[d],n[d+1],n[d+2],n[d+3]);break;case"straight":case"segments":case"haystack":for(var p=2;p+1<n.length;p+=2)e.lineTo(n[p],n[p+1])}e=a,l?e.stroke(i):e.stroke(),e.setLineDash&&e.setLineDash([])},ep.drawEdgeTrianglePath=function(t,e,n){e.fillStyle=e.strokeStyle;for(var r=t.pstyle("width").pfValue,i=0;i+1<n.length;i+=2){var o=[n[i+2]-n[i],n[i+3]-n[i+1]],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s=[o[1]/a,-o[0]/a],l=[s[0]*r/2,s[1]*r/2];e.beginPath(),e.moveTo(n[i]-l[0],n[i+1]-l[1]),e.lineTo(n[i]+l[0],n[i+1]+l[1]),e.lineTo(n[i+2],n[i+3]),e.closePath(),e.fill()}},ep.drawArrowheads=function(t,e,n){var r=e._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},ep.drawArrowhead=function(t,e,n,r,i,o,a){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var s=this,l=e.pstyle(n+"-arrow-shape").value;if("none"!==l){var c="hollow"===e.pstyle(n+"-arrow-fill").value?"both":"filled",u=e.pstyle(n+"-arrow-fill").value,h=e.pstyle("width").pfValue,d=e.pstyle(n+"-arrow-width"),p="match-line"===d.value?h:d.pfValue;"%"===d.units&&(p*=h);var f=e.pstyle("opacity").value;void 0===a&&(a=f);var g=t.globalCompositeOperation;(1!==a||"hollow"===u)&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,c,h,l,p,r,i,o),t.globalCompositeOperation=g);var y=e.pstyle(n+"-arrow-color").value;s.colorFillStyle(t,y[0],y[1],y[2],a),s.colorStrokeStyle(t,y[0],y[1],y[2],a),s.drawArrowShape(e,t,u,h,l,p,r,i,o)}}},ep.drawArrowShape=function(t,e,n,r,i,o,a,s,l){var c,u=this,h=this.usePaths()&&"triangle-cross"!==i,d=!1,p=e,f={x:a,y:s},g=t.pstyle("arrow-scale").value,y=this.getArrowWidth(r,g),m=u.arrowShapes[i];if(h){var v=u.arrowPathCache=u.arrowPathCache||[],b=be(i),x=v[b];null!=x?(c=e=x,d=!0):(c=e=new Path2D,v[b]=c)}d||(e.beginPath&&e.beginPath(),h?m.draw(e,1,0,{x:0,y:0},1):m.draw(e,y,l,f,r),e.closePath&&e.closePath()),e=p,h&&(e.translate(a,s),e.rotate(l),e.scale(y,y)),("filled"===n||"both"===n)&&(h?e.fill(c):e.fill()),("hollow"===n||"both"===n)&&(e.lineWidth=o/(h?y:1),e.lineJoin="miter",h?e.stroke(c):e.stroke()),h&&(e.scale(1/y,1/y),e.rotate(-l),e.translate(-a,-s))};var rp={safeDrawImage:function(t,e,n,r,i,o,a,s,l,c){if(!(i<=0||o<=0||l<=0||c<=0))try{t.drawImage(e,n,r,i,o,a,s,l,c)}catch(t){Fe(t)}},drawInscribedImage:function(t,e,n,r,i){var o=this,a=n.position(),s=a.x,l=a.y,c=n.cy().style(),u=c.getIndexedStyle.bind(c),h=u(n,"background-fit","value",r),d=u(n,"background-repeat","value",r),p=n.width(),f=n.height(),g=2*n.padding(),y=p+("inner"===u(n,"background-width-relative-to","value",r)?0:g),m=f+("inner"===u(n,"background-height-relative-to","value",r)?0:g),v=n._private.rscratch,b="node"===u(n,"background-clip","value",r),x=u(n,"background-image-opacity","value",r)*i,C=u(n,"background-image-smoothing","value",r),_=e.width||e.cachedW,w=e.height||e.cachedH;(null==_||null==w)&&(document.body.appendChild(e),_=e.cachedW=e.width||e.offsetWidth,w=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var k=_,T=w;if("auto"!==u(n,"background-width","value",r)&&(k="%"===u(n,"background-width","units",r)?u(n,"background-width","pfValue",r)*y:u(n,"background-width","pfValue",r)),"auto"!==u(n,"background-height","value",r)&&(T="%"===u(n,"background-height","units",r)?u(n,"background-height","pfValue",r)*m:u(n,"background-height","pfValue",r)),0!==k&&0!==T){if("contain"===h)k*=E=Math.min(y/k,m/T),T*=E;else if("cover"===h){var E;k*=E=Math.max(y/k,m/T),T*=E}var S=s-y/2,A=u(n,"background-position-x","units",r),L=u(n,"background-position-x","pfValue",r);S+="%"===A?(y-k)*L:L;var D=u(n,"background-offset-x","units",r),B=u(n,"background-offset-x","pfValue",r);S+="%"===D?(y-k)*B:B;var F=l-m/2,N=u(n,"background-position-y","units",r),I=u(n,"background-position-y","pfValue",r);F+="%"===N?(m-T)*I:I;var O=u(n,"background-offset-y","units",r),M=u(n,"background-offset-y","pfValue",r);F+="%"===O?(m-T)*M:M,v.pathCache&&(S-=s,F-=l,s=0,l=0);var P=t.globalAlpha;t.globalAlpha=x;var R=o.getImgSmoothing(t),z=!1;if("no"===C&&R?(o.setImgSmoothing(t,!1),z=!0):"yes"===C&&!R&&(o.setImgSmoothing(t,!0),z=!0),"no-repeat"===d)b&&(t.save(),v.pathCache?t.clip(v.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(t,s,l,y,m),t.clip())),o.safeDrawImage(t,e,0,0,_,w,S,F,k,T),b&&t.restore();else{var q=t.createPattern(e,d);t.fillStyle=q,o.nodeShapes[o.getNodeShape(n)].draw(t,s,l,y,m),t.translate(S,F),t.fill(),t.translate(-S,-F)}t.globalAlpha=P,z&&o.setImgSmoothing(t,R)}}},ip={};function op(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,a=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),a?t.stroke():t.fill()}ip.eleTextBiggerThanMin=function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(Tn(n*r));e=Math.pow(2,i)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},ip.drawElementText=function(t,e,n,r,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this;if(null==r){if(o&&!a.eleTextBiggerThanMin(e))return}else if(!1===r)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var l=a.getLabelJustification(e);t.textAlign=l,t.textBaseline="bottom"}else{var c=e.element()._private.rscratch.badLine,u=e.pstyle("label"),h=e.pstyle("source-label"),d=e.pstyle("target-label");if(c||(!u||!u.value)&&(!h||!h.value)&&(!d||!d.value))return;t.textAlign="center",t.textBaseline="bottom"}var p,f=!n;n&&(p=n,t.translate(-p.x1,-p.y1)),null==i?(a.drawText(t,e,null,f,o),e.isEdge()&&(a.drawText(t,e,"source",f,o),a.drawText(t,e,"target",f,o))):a.drawText(t,e,i,f,o),n&&t.translate(p.x1,p.y1)},ip.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((e=this.fontCaches[n]).context===t)return e;return e={context:t},this.fontCaches.push(e),e},ip.setupTextStyle=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=n?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*s,c=e.pstyle("color").value,u=e.pstyle("text-outline-color").value;t.font=r+" "+a+" "+i+" "+o,t.lineJoin="round",this.colorFillStyle(t,c[0],c[1],c[2],s),this.colorStrokeStyle(t,u[0],u[1],u[2],l)},ip.getTextAngle=function(t,e){var n=t._private.rscratch,r=e?e+"-":"",i=t.pstyle(r+"text-rotation"),o=$e(n,"labelAngle",e);return"autorotate"===i.strValue?t.isEdge()?o:0:"none"===i.strValue?0:i.pfValue},ip.drawText=function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=e._private.rscratch,a=i?e.effectiveOpacity():1;if(!i||0!==a&&0!==e.pstyle("text-opacity").value){"main"===n&&(n=null);var s,l,c=$e(o,"labelX",n),u=$e(o,"labelY",n),h=this.getLabelText(e,n);if(null!=h&&""!==h&&!isNaN(c)&&!isNaN(u)){this.setupTextStyle(t,e,i);var d,p=n?n+"-":"",f=$e(o,"labelWidth",n),g=$e(o,"labelHeight",n),y=e.pstyle(p+"text-margin-x").pfValue,m=e.pstyle(p+"text-margin-y").pfValue,v=e.isEdge(),b=e.pstyle("text-halign").value,x=e.pstyle("text-valign").value;switch(v&&(b="center",x="center"),c+=y,u+=m,0!==(d=r?this.getTextAngle(e,n):0)&&(s=c,l=u,t.translate(s,l),t.rotate(d),c=0,u=0),x){case"top":break;case"center":u+=g/2;break;case"bottom":u+=g}var C=e.pstyle("text-background-opacity").value,_=e.pstyle("text-border-opacity").value,w=e.pstyle("text-border-width").pfValue,k=e.pstyle("text-background-padding").pfValue,T=0===e.pstyle("text-background-shape").strValue.indexOf("round"),E=2;if(C>0||w>0&&_>0){var S=c-k;switch(b){case"left":S-=f;break;case"center":S-=f/2}var A=u-g-k,L=f+2*k,D=g+2*k;if(C>0){var B=t.fillStyle,F=e.pstyle("text-background-color").value;t.fillStyle="rgba("+F[0]+","+F[1]+","+F[2]+","+C*a+")",T?op(t,S,A,L,D,E):t.fillRect(S,A,L,D),t.fillStyle=B}if(w>0&&_>0){var N=t.strokeStyle,I=t.lineWidth,O=e.pstyle("text-border-color").value,M=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+_*a+")",t.lineWidth=w,t.setLineDash)switch(M){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=w/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(T?op(t,S,A,L,D,E,"stroke"):t.strokeRect(S,A,L,D),"double"===M){var P=w/2;T?op(t,S+P,A+P,L-2*P,D-2*P,E,"stroke"):t.strokeRect(S+P,A+P,L-2*P,D-2*P)}t.setLineDash&&t.setLineDash([]),t.lineWidth=I,t.strokeStyle=N}}var R=2*e.pstyle("text-outline-width").pfValue;if(R>0&&(t.lineWidth=R),"wrap"===e.pstyle("text-wrap").value){var z=$e(o,"labelWrapCachedLines",n),q=$e(o,"labelLineHeight",n),j=f/2,G=this.getLabelJustification(e);switch("auto"===G||("left"===b?"left"===G?c+=-f:"center"===G&&(c+=-j):"center"===b?"left"===G?c+=-j:"right"===G&&(c+=j):"right"===b&&("center"===G?c+=j:"right"===G&&(c+=f))),x){case"top":case"center":case"bottom":u-=(z.length-1)*q}for(var $=0;$<z.length;$++)R>0&&t.strokeText(z[$],c,u),t.fillText(z[$],c,u),u+=q}else R>0&&t.strokeText(h,c,u),t.fillText(h,c,u);0!==d&&(t.rotate(-d),t.translate(-s,-l))}}};var ap={drawNode:function(t,e,n){var r,i,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=this,c=e._private,u=c.rscratch,h=e.position();if(k(h.x)&&k(h.y)&&(!s||e.visible())){var d,p,f=s?e.effectiveOpacity():1,g=l.usePaths(),y=!1,m=e.padding();r=e.width()+2*m,i=e.height()+2*m,n&&(p=n,t.translate(-p.x1,-p.y1));for(var v=e.pstyle("background-image").value,b=new Array(v.length),x=new Array(v.length),C=0,_=0;_<v.length;_++){var w=v[_];if(b[_]=null!=w&&"none"!==w){var T=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",_);C++,x[_]=l.getCachedImage(w,T,(function(){c.backgroundTimestamp=Date.now(),e.emitAndNotify("background")}))}}var E=e.pstyle("background-blacken").value,S=e.pstyle("border-width").pfValue,A=e.pstyle("background-opacity").value*f,L=e.pstyle("border-color").value,D=e.pstyle("border-style").value,B=e.pstyle("border-opacity").value*f,F=e.pstyle("outline-width").pfValue,N=e.pstyle("outline-color").value,I=e.pstyle("outline-style").value,O=e.pstyle("outline-opacity").value*f,M=e.pstyle("outline-offset").value;t.lineJoin="miter";var P=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;l.eleFillStyle(t,e,n)},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;l.colorStrokeStyle(t,L[0],L[1],L[2],e)},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;l.colorStrokeStyle(t,N[0],N[1],N[2],e)},q=function(t,e,n,r){var i,o=l.nodePathCache=l.nodePathCache||[],a=xe("polygon"===n?n+","+r.join(","):n,""+e,""+t),s=o[a],c=!1;return null!=s?(i=s,c=!0,u.pathCache=i):(i=new Path2D,o[a]=u.pathCache=i),{path:i,cacheHit:c}},j=e.pstyle("shape").strValue,G=e.pstyle("shape-polygon-points").pfValue;if(g){t.translate(h.x,h.y);var $=q(r,i,j,G);d=$.path,y=$.cacheHit}var Y=function(){if(!y){var n=h;g&&(n={x:0,y:0}),l.nodeShapes[l.getNodeShape(e)].draw(d||t,n.x,n.y,r,i)}g?t.fill(d):t.fill()},W=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=c.backgrounding,o=0,a=0;a<x.length;a++){var s=e.cy().style().getIndexedStyle(e,"background-image-containment","value",a);r&&"over"===s||!r&&"inside"===s?o++:b[a]&&x[a].complete&&!x[a].error&&(o++,l.drawInscribedImage(t,x[a],e,a,n))}c.backgrounding=o!==C,i!==c.backgrounding&&e.updateStyle(!1)},U=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;l.hasPie(e)&&(l.drawPie(t,e,o),n&&(g||l.nodeShapes[l.getNodeShape(e)].draw(t,h.x,h.y,r,i)))},H=function(){var e=(E>0?E:-E)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:f),n=E>0?0:255;0!==E&&(l.colorFillStyle(t,n,n,n,e),g?t.fill(d):t.fill())},V=function(){if(S>0){if(t.lineWidth=S,t.lineCap="butt",t.setLineDash)switch(D){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}if(g?t.stroke(d):t.stroke(),"double"===D){t.lineWidth=S/3;var e=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(d):t.stroke(),t.globalCompositeOperation=e}t.setLineDash&&t.setLineDash([])}},X=function(){if(F>0){if(t.lineWidth=F,t.lineCap="butt",t.setLineDash)switch(I){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}var n=h;g&&(n={x:0,y:0});var o,a=l.getNodeShape(e),s=(r+S+(F+M))/r,c=(i+S+(F+M))/i,u=r*s,d=i*c,p=l.nodeShapes[a].points;if(g&&(o=q(u,d,a,p).path),"ellipse"===a)l.drawEllipsePath(o||t,n.x,n.y,u,d);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(a)){var f=0,y=0,m=0;"round-diamond"===a?f=1.4*(S+M+F):"round-heptagon"===a?(f=1.075*(S+M+F),m=-(S/2+M+F)/35):"round-hexagon"===a?f=1.12*(S+M+F):"round-pentagon"===a?(f=1.13*(S+M+F),m=-(S/2+M+F)/15):"round-tag"===a?(f=1.12*(S+M+F),y=.07*(S/2+F+M)):"round-triangle"===a&&(f=(S+M+F)*(Math.PI/2),m=-(S+M/2+F)/Math.PI),0!==f&&(s=(r+f)/r,c=(i+f)/i),l.drawRoundPolygonPath(o||t,n.x+y,n.y+m,r*s,i*c,p)}else["roundrectangle","round-rectangle"].includes(a)?l.drawRoundRectanglePath(o||t,n.x,n.y,u,d):["cutrectangle","cut-rectangle"].includes(a)?l.drawCutRectanglePath(o||t,n.x,n.y,u,d):["bottomroundrectangle","bottom-round-rectangle"].includes(a)?l.drawBottomRoundRectanglePath(o||t,n.x,n.y,u,d):"barrel"===a?l.drawBarrelPath(o||t,n.x,n.y,u,d):a.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(a)?(p=rr(ir(p,(S+F+M)/r)),l.drawPolygonPath(o||t,n.x,n.y,r,i,p)):(p=rr(ir(p,-(S+F+M)/r)),l.drawPolygonPath(o||t,n.x,n.y,r,i,p));if(g?t.stroke(o):t.stroke(),"double"===I){t.lineWidth=S/3;var v=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(o):t.stroke(),t.globalCompositeOperation=v}t.setLineDash&&t.setLineDash([])}},K=function(){a&&l.drawNodeOverlay(t,e,h,r,i)},Z=function(){a&&l.drawNodeUnderlay(t,e,h,r,i)},Q=function(){l.drawElementText(t,e,null,o)};if("yes"===e.pstyle("ghost").value){var J=e.pstyle("ghost-offset-x").pfValue,tt=e.pstyle("ghost-offset-y").pfValue,et=e.pstyle("ghost-opacity").value,nt=et*f;t.translate(J,tt),z(),X(),P(et*A),Y(),W(nt,!0),R(et*B),V(),U(0!==E||0!==S),W(nt,!1),H(nt),t.translate(-J,-tt)}g&&t.translate(-h.x,-h.y),Z(),g&&t.translate(h.x,h.y),z(),X(),P(),Y(),W(f,!0),R(),V(),U(0!==E||0!==S),W(f,!1),H(),g&&t.translate(-h.x,-h.y),Q(),K(),n&&t.translate(p.x1,p.y1)}}},sp=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(e,n,r,i,o){var a=this;if(n.visible()){var s=n.pstyle("".concat(t,"-padding")).pfValue,l=n.pstyle("".concat(t,"-opacity")).value,c=n.pstyle("".concat(t,"-color")).value,u=n.pstyle("".concat(t,"-shape")).value;if(l>0){if(r=r||n.position(),null==i||null==o){var h=n.padding();i=n.width()+2*h,o=n.height()+2*h}a.colorFillStyle(e,c[0],c[1],c[2],l),a.nodeShapes[u].draw(e,r.x,r.y,i+2*s,o+2*s),e.fill()}}}};ap.drawNodeOverlay=sp("overlay"),ap.drawNodeUnderlay=sp("underlay"),ap.hasPie=function(t){return(t=t[0])._private.hasPie},ap.drawPie=function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),a=r.x,s=r.y,l=e.width(),c=e.height(),u=Math.min(l,c)/2,h=0;this.usePaths()&&(a=0,s=0),"%"===o.units?u*=o.pfValue:void 0!==o.pfValue&&(u=o.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var p=e.pstyle("pie-"+d+"-background-size").value,f=e.pstyle("pie-"+d+"-background-color").value,g=e.pstyle("pie-"+d+"-background-opacity").value*n,y=p/100;y+h>1&&(y=1-h);var m=1.5*Math.PI+2*Math.PI*h,v=m+2*Math.PI*y;0===p||h>=1||h+y>1||(t.beginPath(),t.moveTo(a,s),t.arc(a,s,u,m,v),t.closePath(),this.colorFillStyle(t,f[0],f[1],f[2],g),t.fill(),h+=y)}};var lp={},cp=100;lp.getPixelRatio=function(){var t=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},lp.paintCache=function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((e=n[i]).context===t){r=!1;break}return r&&(e={context:t},n.push(e)),e},lp.createGradientStyleFor=function(t,e,n,r,i){var o,a=this.usePaths(),s=n.pstyle(e+"-gradient-stop-colors").value,l=n.pstyle(e+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var c=n.sourceEndpoint(),u=n.targetEndpoint(),h=n.midpoint(),d=Sn(c,h),p=Sn(u,h);o=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(d,p))}else{var f=a?{x:0,y:0}:n.position(),g=n.paddedWidth(),y=n.paddedHeight();o=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(g,y))}else if(n.isEdge()){var m=n.sourceEndpoint(),v=n.targetEndpoint();o=t.createLinearGradient(m.x,m.y,v.x,v.y)}else{var b=a?{x:0,y:0}:n.position(),x=n.paddedWidth()/2,C=n.paddedHeight()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":o=t.createLinearGradient(b.x,b.y-C,b.x,b.y+C);break;case"to-top":o=t.createLinearGradient(b.x,b.y+C,b.x,b.y-C);break;case"to-left":o=t.createLinearGradient(b.x+x,b.y,b.x-x,b.y);break;case"to-right":o=t.createLinearGradient(b.x-x,b.y,b.x+x,b.y);break;case"to-bottom-right":case"to-right-bottom":o=t.createLinearGradient(b.x-x,b.y-C,b.x+x,b.y+C);break;case"to-top-right":case"to-right-top":o=t.createLinearGradient(b.x-x,b.y+C,b.x+x,b.y-C);break;case"to-bottom-left":case"to-left-bottom":o=t.createLinearGradient(b.x+x,b.y-C,b.x-x,b.y+C);break;case"to-top-left":case"to-left-top":o=t.createLinearGradient(b.x+x,b.y+C,b.x-x,b.y-C)}}if(!o)return null;for(var _=l.length===s.length,w=s.length,k=0;k<w;k++)o.addColorStop(_?l[k]:k/(w-1),"rgba("+s[k][0]+","+s[k][1]+","+s[k][2]+","+i+")");return o},lp.gradientFillStyle=function(t,e,n,r){var i=this.createGradientStyleFor(t,"background",e,n,r);if(!i)return null;t.fillStyle=i},lp.colorFillStyle=function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},lp.eleFillStyle=function(t,e,n){var r=e.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(t,e,r,n);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],n)}},lp.gradientStrokeStyle=function(t,e,n,r){var i=this.createGradientStyleFor(t,"line",e,n,r);if(!i)return null;t.strokeStyle=i},lp.colorStrokeStyle=function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},lp.eleStrokeStyle=function(t,e,n){var r=e.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(t,e,r,n);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],n)}},lp.matchCanvasSize=function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],o=r[3],a=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(a=s);var l,c=i*a,u=o*a;if(c!==e.canvasWidth||u!==e.canvasHeight){e.fontCaches=null;var h=n.canvasContainer;h.style.width=i+"px",h.style.height=o+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)(l=n.canvases[d]).width=c,l.height=u,l.style.width=i+"px",l.style.height=o+"px";for(d=0;d<e.BUFFER_COUNT;d++)(l=n.bufferCanvases[d]).width=c,l.height=u,l.style.width=i+"px",l.style.height=o+"px";e.textureMult=1,a<=1&&(l=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,l.width=c*e.textureMult,l.height=u*e.textureMult),e.canvasWidth=c,e.canvasHeight=u}},lp.renderTo=function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},lp.render=function(t){var e=(t=t||Re()).forcedContext,n=t.drawAllLayers,r=t.drawOnlyNodeLayer,i=t.forcedZoom,o=t.forcedPan,a=this,s=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,l=a.cy,c=a.data,u=c.canvasNeedsRedraw,h=a.textureOnViewport&&!e&&(a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming),d=void 0!==t.motionBlur?t.motionBlur:a.motionBlur,p=a.motionBlurPxRatio,f=l.hasCompoundNodes(),g=a.hoverData.draggingEles,y=!(!a.hoverData.selecting&&!a.touchData.selecting),m=d=d&&!e&&a.motionBlurEnabled&&!y;e||(a.prevPxRatio!==s&&(a.invalidateContainerClientCoordsCache(),a.matchCanvasSize(a.container),a.redrawHint("eles",!0),a.redrawHint("drag",!0)),a.prevPxRatio=s),!e&&a.motionBlurTimeout&&clearTimeout(a.motionBlurTimeout),d&&(null==a.mbFrames&&(a.mbFrames=0),a.mbFrames++,a.mbFrames<3&&(m=!1),a.mbFrames>a.minMbLowQualFrames&&(a.motionBlurPxRatio=a.mbPxRBlurry)),a.clearingMotionBlur&&(a.motionBlurPxRatio=1),a.textureDrawLastFrame&&!h&&(u[a.NODE]=!0,u[a.SELECT_BOX]=!0);var v=l.style(),b=l.zoom(),x=void 0!==i?i:b,C=l.pan(),_={x:C.x,y:C.y},w={zoom:b,pan:{x:C.x,y:C.y}},k=a.prevViewport;!(void 0===k||w.zoom!==k.zoom||w.pan.x!==k.pan.x||w.pan.y!==k.pan.y)&&!(g&&!f)&&(a.motionBlurPxRatio=1),o&&(_=o),x*=s,_.x*=s,_.y*=s;var T=a.getCachedZSortedEles();function E(t,e,n,r,i){var o=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",a.colorFillStyle(t,255,255,255,a.motionBlurTransparency),t.fillRect(e,n,r,i),t.globalCompositeOperation=o}function S(t,r){var s,l,u,h;a.clearingMotionBlur||t!==c.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]&&t!==c.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]?(s=_,l=x,u=a.canvasWidth,h=a.canvasHeight):(s={x:C.x*p,y:C.y*p},l=b*p,u=a.canvasWidth*p,h=a.canvasHeight*p),t.setTransform(1,0,0,1,0,0),"motionBlur"===r?E(t,0,0,u,h):!e&&(void 0===r||r)&&t.clearRect(0,0,u,h),n||(t.translate(s.x,s.y),t.scale(l,l)),o&&t.translate(o.x,o.y),i&&t.scale(i,i)}if(h||(a.textureDrawLastFrame=!1),h){if(a.textureDrawLastFrame=!0,!a.textureCache){a.textureCache={},a.textureCache.bb=l.mutableElements().boundingBox(),a.textureCache.texture=a.data.bufferCanvases[a.TEXTURE_BUFFER];var A=a.data.bufferContexts[a.TEXTURE_BUFFER];A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,a.canvasWidth*a.textureMult,a.canvasHeight*a.textureMult),a.render({forcedContext:A,drawOnlyNodeLayer:!0,forcedPxRatio:s*a.textureMult}),(w=a.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:a.canvasWidth,height:a.canvasHeight}).mpan={x:(0-w.pan.x)/w.zoom,y:(0-w.pan.y)/w.zoom}}u[a.DRAG]=!1,u[a.NODE]=!1;var L=c.contexts[a.NODE],D=a.textureCache.texture;w=a.textureCache.viewport,L.setTransform(1,0,0,1,0,0),d?E(L,0,0,w.width,w.height):L.clearRect(0,0,w.width,w.height);var B=v.core("outside-texture-bg-color").value,F=v.core("outside-texture-bg-opacity").value;a.colorFillStyle(L,B[0],B[1],B[2],F),L.fillRect(0,0,w.width,w.height),b=l.zoom(),S(L,!1),L.clearRect(w.mpan.x,w.mpan.y,w.width/w.zoom/s,w.height/w.zoom/s),L.drawImage(D,w.mpan.x,w.mpan.y,w.width/w.zoom/s,w.height/w.zoom/s)}else a.textureOnViewport&&!e&&(a.textureCache=null);var N=l.extent(),I=a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming||a.hoverData.draggingEles||a.cy.animated(),O=a.hideEdgesOnViewport&&I,M=[];if(M[a.NODE]=!u[a.NODE]&&d&&!a.clearedForMotionBlur[a.NODE]||a.clearingMotionBlur,M[a.NODE]&&(a.clearedForMotionBlur[a.NODE]=!0),M[a.DRAG]=!u[a.DRAG]&&d&&!a.clearedForMotionBlur[a.DRAG]||a.clearingMotionBlur,M[a.DRAG]&&(a.clearedForMotionBlur[a.DRAG]=!0),u[a.NODE]||n||r||M[a.NODE]){var P=d&&!M[a.NODE]&&1!==p;S(L=e||(P?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]:c.contexts[a.NODE]),d&&!P?"motionBlur":void 0),O?a.drawCachedNodes(L,T.nondrag,s,N):a.drawLayeredElements(L,T.nondrag,s,N),a.debug&&a.drawDebugPoints(L,T.nondrag),!n&&!d&&(u[a.NODE]=!1)}if(!r&&(u[a.DRAG]||n||M[a.DRAG])&&(P=d&&!M[a.DRAG]&&1!==p,S(L=e||(P?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]:c.contexts[a.DRAG]),d&&!P?"motionBlur":void 0),O?a.drawCachedNodes(L,T.drag,s,N):a.drawCachedElements(L,T.drag,s,N),a.debug&&a.drawDebugPoints(L,T.drag),!n&&!d&&(u[a.DRAG]=!1)),a.showFps||!r&&u[a.SELECT_BOX]&&!n){if(S(L=e||c.contexts[a.SELECT_BOX]),1==a.selection[4]&&(a.hoverData.selecting||a.touchData.selecting)){b=a.cy.zoom();var R=v.core("selection-box-border-width").value/b;L.lineWidth=R,L.fillStyle="rgba("+v.core("selection-box-color").value[0]+","+v.core("selection-box-color").value[1]+","+v.core("selection-box-color").value[2]+","+v.core("selection-box-opacity").value+")",L.fillRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]),R>0&&(L.strokeStyle="rgba("+v.core("selection-box-border-color").value[0]+","+v.core("selection-box-border-color").value[1]+","+v.core("selection-box-border-color").value[2]+","+v.core("selection-box-opacity").value+")",L.strokeRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]))}if(c.bgActivePosistion&&!a.hoverData.selecting){b=a.cy.zoom();var z=c.bgActivePosistion;L.fillStyle="rgba("+v.core("active-bg-color").value[0]+","+v.core("active-bg-color").value[1]+","+v.core("active-bg-color").value[2]+","+v.core("active-bg-opacity").value+")",L.beginPath(),L.arc(z.x,z.y,v.core("active-bg-size").pfValue/b,0,2*Math.PI),L.fill()}var q=a.lastRedrawTime;if(a.showFps&&q){q=Math.round(q);var j=Math.round(1e3/q);L.setTransform(1,0,0,1,0,0),L.fillStyle="rgba(255, 0, 0, 0.75)",L.strokeStyle="rgba(255, 0, 0, 0.75)",L.lineWidth=1,L.fillText("1 frame = "+q+" ms = "+j+" fps",0,20);var G=60;L.strokeRect(0,30,250,20),L.fillRect(0,30,250*Math.min(j/G,1),20)}n||(u[a.SELECT_BOX]=!1)}if(d&&1!==p){var $=c.contexts[a.NODE],Y=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_NODE],W=c.contexts[a.DRAG],U=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_DRAG],H=function(t,e,n){t.setTransform(1,0,0,1,0,0),n||!m?t.clearRect(0,0,a.canvasWidth,a.canvasHeight):E(t,0,0,a.canvasWidth,a.canvasHeight);var r=p;t.drawImage(e,0,0,a.canvasWidth*r,a.canvasHeight*r,0,0,a.canvasWidth,a.canvasHeight)};(u[a.NODE]||M[a.NODE])&&(H($,Y,M[a.NODE]),u[a.NODE]=!1),(u[a.DRAG]||M[a.DRAG])&&(H(W,U,M[a.DRAG]),u[a.DRAG]=!1)}a.prevViewport=w,a.clearingMotionBlur&&(a.clearingMotionBlur=!1,a.motionBlurCleared=!0,a.motionBlur=!0),d&&(a.motionBlurTimeout=setTimeout((function(){a.motionBlurTimeout=null,a.clearedForMotionBlur[a.NODE]=!1,a.clearedForMotionBlur[a.DRAG]=!1,a.motionBlur=!1,a.clearingMotionBlur=!h,a.mbFrames=0,u[a.NODE]=!0,u[a.DRAG]=!0,a.redraw()}),cp)),e||l.emit("render")};for(var up={drawPolygonPath:function(t,e,n,r,i,o){var a=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],n+s*o[1]);for(var l=1;l<o.length/2;l++)t.lineTo(e+a*o[2*l],n+s*o[2*l+1]);t.closePath()},drawRoundPolygonPath:function(t,e,n,r,i,o){var a=r/2,s=i/2,l=mr(r,i);t.beginPath&&t.beginPath();for(var c=0;c<o.length/4;c++){var u=void 0,h=void 0;u=0===c?o.length-2:4*c-2,h=4*c+2;var d=e+a*o[4*c],p=n+s*o[4*c+1],f=-o[u]*o[h]-o[u+1]*o[h+1],g=l/Math.tan(Math.acos(f)/2),y=d-g*o[u],m=p-g*o[u+1],v=d+g*o[h],b=p+g*o[h+1];0===c?t.moveTo(y,m):t.lineTo(y,m),t.arcTo(d,p,v,b,l)}t.closePath()},drawRoundRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2,s=yr(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-a),t.arcTo(e+o,n-a,e+o,n,s),t.arcTo(e+o,n+a,e,n+a,s),t.arcTo(e-o,n+a,e-o,n,s),t.arcTo(e-o,n-a,e,n-a,s),t.lineTo(e,n-a),t.closePath()},drawBottomRoundRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2,s=yr(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-a),t.lineTo(e+o,n-a),t.lineTo(e+o,n),t.arcTo(e+o,n+a,e,n+a,s),t.arcTo(e-o,n+a,e-o,n,s),t.lineTo(e-o,n-a),t.lineTo(e,n-a),t.closePath()},drawCutRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2,s=vr();t.beginPath&&t.beginPath(),t.moveTo(e-o+s,n-a),t.lineTo(e+o-s,n-a),t.lineTo(e+o,n-a+s),t.lineTo(e+o,n+a-s),t.lineTo(e+o-s,n+a),t.lineTo(e-o+s,n+a),t.lineTo(e-o,n+a-s),t.lineTo(e-o,n-a+s),t.closePath()},drawBarrelPath:function(t,e,n,r,i){var o=r/2,a=i/2,s=e-o,l=e+o,c=n-a,u=n+a,h=xr(r,i),d=h.widthOffset,p=h.heightOffset,f=h.ctrlPtOffsetPct*d;t.beginPath&&t.beginPath(),t.moveTo(s,c+p),t.lineTo(s,u-p),t.quadraticCurveTo(s+f,u,s+d,u),t.lineTo(l-d,u),t.quadraticCurveTo(l-f,u,l,u-p),t.lineTo(l,c+p),t.quadraticCurveTo(l-f,c,l-d,c),t.lineTo(s+d,c),t.quadraticCurveTo(s+f,c,s,c+p),t.closePath()}},hp=Math.sin(0),dp=Math.cos(0),pp={},fp={},gp=Math.PI/40,yp=0*Math.PI;yp<2*Math.PI;yp+=gp)pp[yp]=Math.sin(yp),fp[yp]=Math.cos(yp);up.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var o,a,s=r/2,l=i/2,c=0*Math.PI;c<2*Math.PI;c+=gp)o=e-s*pp[c]*hp+s*fp[c]*dp,a=n+l*fp[c]*hp+l*pp[c]*dp,0===c?t.moveTo(o,a):t.lineTo(o,a);t.closePath()};var mp={};function vp(t,e){for(var n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:e})}function bp(t){var e=t.indexOf(",");return t.substr(e+1)}function xp(t,e,n){var r=function(){return e.toDataURL(n,t.quality)};switch(t.output){case"blob-promise":return new Ki((function(r,i){try{e.toBlob((function(t){null!=t?r(t):i(new Error("`canvas.toBlob()` sent a null value in its callback"))}),n,t.quality)}catch(t){i(t)}}));case"blob":return vp(bp(r()),n);case"base64":return bp(r());default:return r()}}mp.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},mp.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements().boundingBox(),r=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):r[2],o=t.full?Math.ceil(n.h):r[3],a=k(t.maxWidth)||k(t.maxHeight),s=this.getPixelRatio(),l=1;if(void 0!==t.scale)i*=t.scale,o*=t.scale,l=t.scale;else if(a){var c=1/0,u=1/0;k(t.maxWidth)&&(c=l*t.maxWidth/i),k(t.maxHeight)&&(u=l*t.maxHeight/o),i*=l=Math.min(c,u),o*=l}a||(i*=s,o*=s,l*=s);var h=document.createElement("canvas");h.width=i,h.height=o,h.style.width=i+"px",h.style.height=o+"px";var d=h.getContext("2d");if(i>0&&o>0){d.clearRect(0,0,i,o),d.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(t.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,p),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var f=e.pan(),g={x:f.x*l,y:f.y*l};l*=e.zoom(),d.translate(g.x,g.y),d.scale(l,l),this.drawElements(d,p),d.scale(1/l,1/l),d.translate(-g.x,-g.y)}t.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=t.bg,d.rect(0,0,i,o),d.fill())}return h},mp.png=function(t){return xp(t,this.bufferCanvasImage(t),"image/png")},mp.jpg=function(t){return xp(t,this.bufferCanvasImage(t),"image/jpeg")};var Cp={nodeShapeImpl:function(t,e,n,r,i,o,a){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,o);case"polygon":return this.drawPolygonPath(e,n,r,i,o,a);case"round-polygon":return this.drawRoundPolygonPath(e,n,r,i,o,a);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,r,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,r,i,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,o);case"barrel":return this.drawBarrelPath(e,n,r,i,o)}}},_p=kp,wp=kp.prototype;function kp(t){var e=this;e.data={canvases:new Array(wp.CANVAS_LAYERS),contexts:new Array(wp.CANVAS_LAYERS),canvasNeedsRedraw:new Array(wp.CANVAS_LAYERS),bufferCanvases:new Array(wp.BUFFER_COUNT),bufferContexts:new Array(wp.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",r="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var i=e.data.canvasContainer.style;e.data.canvasContainer.style[n]=r,i.position="relative",i.zIndex="0",i.overflow="hidden";var o=t.cy.container();o.appendChild(e.data.canvasContainer),o.style[n]=r;var a={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};P()&&(a["-ms-touch-action"]="none",a["touch-action"]="none");for(var s=0;s<wp.CANVAS_LAYERS;s++){var l=e.data.canvases[s]=document.createElement("canvas");e.data.contexts[s]=l.getContext("2d"),Object.keys(a).forEach((function(t){l.style[t]=a[t]})),l.style.position="absolute",l.setAttribute("data-id","layer"+s),l.style.zIndex=String(wp.CANVAS_LAYERS-s),e.data.canvasContainer.appendChild(l),e.data.canvasNeedsRedraw[s]=!1}for(e.data.topCanvas=e.data.canvases[0],e.data.canvases[wp.NODE].setAttribute("data-id","layer"+wp.NODE+"-node"),e.data.canvases[wp.SELECT_BOX].setAttribute("data-id","layer"+wp.SELECT_BOX+"-selectbox"),e.data.canvases[wp.DRAG].setAttribute("data-id","layer"+wp.DRAG+"-drag"),s=0;s<wp.BUFFER_COUNT;s++)e.data.bufferCanvases[s]=document.createElement("canvas"),e.data.bufferContexts[s]=e.data.bufferCanvases[s].getContext("2d"),e.data.bufferCanvases[s].style.position="absolute",e.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),e.data.bufferCanvases[s].style.zIndex=String(-s-1),e.data.bufferCanvases[s].style.visibility="hidden";e.pathsEnabled=!0;var c=In(),u=function(t){return{x:(t.x1+t.x2)/2,y:(t.y1+t.y2)/2}},h=function(t){return{x:-t.w/2,y:-t.h/2}},d=function(t){var e=t[0]._private;return!(e.oldBackgroundTimestamp===e.backgroundTimestamp)},p=function(t){return t[0]._private.nodeKey},f=function(t){return t[0]._private.labelStyleKey},g=function(t){return t[0]._private.sourceLabelStyleKey},y=function(t){return t[0]._private.targetLabelStyleKey},m=function(t,n,r,i,o){return e.drawElement(t,n,r,!1,!1,o)},v=function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"main",o)},b=function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"source",o)},x=function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"target",o)},C=function(t){return t.boundingBox(),t[0]._private.bodyBounds},_=function(t){return t.boundingBox(),t[0]._private.labelBounds.main||c},w=function(t){return t.boundingBox(),t[0]._private.labelBounds.source||c},k=function(t){return t.boundingBox(),t[0]._private.labelBounds.target||c},T=function(t,e){return e},E=function(t){return u(C(t))},S=function(t,e,n){var r=t?t+"-":"";return{x:e.x+n.pstyle(r+"text-margin-x").pfValue,y:e.y+n.pstyle(r+"text-margin-y").pfValue}},A=function(t,e,n){var r=t[0]._private.rscratch;return{x:r[e],y:r[n]}},L=function(t){return S("",A(t,"labelX","labelY"),t)},D=function(t){return S("source",A(t,"sourceLabelX","sourceLabelY"),t)},B=function(t){return S("target",A(t,"targetLabelX","targetLabelY"),t)},F=function(t){return h(C(t))},N=function(t){return h(w(t))},I=function(t){return h(k(t))},O=function(t){var e=_(t),n=h(_(t));if(t.isNode()){switch(t.pstyle("text-halign").value){case"left":n.x=-e.w;break;case"right":n.x=0}switch(t.pstyle("text-valign").value){case"top":n.y=-e.h;break;case"bottom":n.y=0}}return n},M=e.data.eleTxrCache=new Cd(e,{getKey:p,doesEleInvalidateKey:d,drawElement:m,getBoundingBox:C,getRotationPoint:E,getRotationOffset:F,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),R=e.data.lblTxrCache=new Cd(e,{getKey:f,drawElement:v,getBoundingBox:_,getRotationPoint:L,getRotationOffset:O,isVisible:T}),z=e.data.slbTxrCache=new Cd(e,{getKey:g,drawElement:b,getBoundingBox:w,getRotationPoint:D,getRotationOffset:N,isVisible:T}),q=e.data.tlbTxrCache=new Cd(e,{getKey:y,drawElement:x,getBoundingBox:k,getRotationPoint:B,getRotationOffset:I,isVisible:T}),j=e.data.lyrTxrCache=new Pd(e);e.onUpdateEleCalcs((function(t,e){M.invalidateElements(e),R.invalidateElements(e),z.invalidateElements(e),q.invalidateElements(e),j.invalidateElements(e);for(var n=0;n<e.length;n++){var r=e[n]._private;r.oldBackgroundTimestamp=r.backgroundTimestamp}}));var G=function(t){for(var e=0;e<t.length;e++)j.enqueueElementRefinement(t[e].ele)};M.onDequeue(G),R.onDequeue(G),z.onDequeue(G),q.onDequeue(G)}wp.CANVAS_LAYERS=3,wp.SELECT_BOX=0,wp.DRAG=1,wp.NODE=2,wp.BUFFER_COUNT=3,wp.TEXTURE_BUFFER=0,wp.MOTIONBLUR_BUFFER_NODE=1,wp.MOTIONBLUR_BUFFER_DRAG=2,wp.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[wp.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[wp.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[wp.SELECT_BOX]=e}};var Tp=typeof Path2D<"u";wp.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},wp.usePaths=function(){return Tp&&this.pathsEnabled},wp.setImgSmoothing=function(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},wp.getImgSmoothing=function(t){return null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},wp.makeOffscreenCanvas=function(e,n){var r;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":t(OffscreenCanvas))?r=new OffscreenCanvas(e,n):((r=document.createElement("canvas")).width=e,r.height=n),r},[Gd,Vd,ep,rp,ip,ap,lp,up,mp,Cp].forEach((function(t){Q(wp,t)}));var Ep=[{name:"null",impl:wh},{name:"base",impl:Kh},{name:"canvas",impl:_p}],Sp=[{type:"layout",extensions:_h},{type:"renderer",extensions:Ep}],Ap={},Lp={};function Dp(t,e,n){var r=n,i=function(n){Fe("Can not register `"+e+"` for `"+t+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===t){if(Iu.prototype[e])return i(e);Iu.prototype[e]=n}else if("collection"===t){if(Vc.prototype[e])return i(e);Vc.prototype[e]=n}else if("layout"===t){for(var o=function(t){this.options=t,n.call(this,t),_(this._private)||(this._private={}),this._private.cy=t.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(n.prototype),s=[],l=0;l<s.length;l++){var c=s[l];a[c]=a[c]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var u=n.prototype.stop;a.stop=function(){var t=this.options;if(t&&t.animate){var e=this.animations;if(e)for(var n=0;n<e.length;n++)e[n].stop()}return u?u.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var h=function(t){return t._private.cy},d={addEventFields:function(t,e){e.layout=t,e.cy=h(t),e.target=t},bubble:function(){return!0},parent:function(t){return h(t)}};Q(a,{createEmitter:function(){return this._private.emitter=new hc(d,this),this},emitter:function(){return this._private.emitter},on:function(t,e){return this.emitter().on(t,e),this},one:function(t,e){return this.emitter().one(t,e),this},once:function(t,e){return this.emitter().one(t,e),this},removeListener:function(t,e){return this.emitter().removeListener(t,e),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(t,e){return this.emitter().emit(t,e),this}}),Ds.eventAliasesOn(a),r=o}else if("renderer"===t&&"null"!==e&&"base"!==e){var p=Bp("renderer","base"),f=p.prototype,g=n,y=n.prototype,m=function(){p.apply(this,arguments),g.apply(this,arguments)},v=m.prototype;for(var b in f){var x=f[b];if(null!=y[b])return i(b);v[b]=x}for(var C in y)v[C]=y[C];f.clientFunctions.forEach((function(t){v[t]=v[t]||function(){De("Renderer does not implement `renderer."+t+"()` on its prototype")}})),r=m}else if("__proto__"===t||"constructor"===t||"prototype"===t)return De(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return ot({map:Ap,keys:[t,e],value:r})}function Bp(t,e){return at({map:Ap,keys:[t,e]})}function Fp(t,e,n,r,i){return ot({map:Lp,keys:[t,e,n,r],value:i})}function Np(t,e,n,r){return at({map:Lp,keys:[t,e,n,r]})}var Ip=function(){return 2===arguments.length?Bp.apply(null,arguments):3===arguments.length?Dp.apply(null,arguments):4===arguments.length?Np.apply(null,arguments):5===arguments.length?Fp.apply(null,arguments):void De("Invalid extension access syntax")};Iu.prototype.extension=Ip,Sp.forEach((function(t){t.extensions.forEach((function(e){Dp(t.type,e.name,e.impl)}))}));var Op=function t(){if(!(this instanceof t))return new t;this.length=0},Mp=Op.prototype;Mp.instanceString=function(){return"stylesheet"},Mp.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},Mp.css=function(t,e){var n=this.length-1;if(b(t))this[n].properties.push({name:t,value:e});else if(_(t))for(var r=t,i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],s=r[a];if(null!=s){var l=Au.properties[a]||Au.properties[q(a)];if(null!=l){var c=l.name,u=s;this[n].properties.push({name:c,value:u})}}}return this},Mp.style=Mp.css,Mp.generateStyle=function(t){var e=new Au(t);return this.appendToStyle(e)},Mp.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],r=n.selector,i=n.properties;t.selector(r);for(var o=0;o<i.length;o++){var a=i[o];t.css(a.name,a.value)}}return t};var Pp="3.28.1",Rp=function(t){return void 0===t&&(t={}),_(t)?new Iu(t):b(t)?Ip.apply(Ip,arguments):void 0};return Rp.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Rp),t.apply(null,e),this},Rp.warnings=function(t){return Be(t)},Rp.version=Pp,Rp.stylesheet=Rp.Stylesheet=Op,Rp}();const dg=r(hg.exports);var pg,fg,gg={exports:{}},yg={exports:{}},mg={exports:{}};function vg(){return pg||(pg=1,mg.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=26)}([function(t,e,n){function r(){}r.QUALITY=1,r.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,r.DEFAULT_INCREMENTAL=!1,r.DEFAULT_ANIMATION_ON_LAYOUT=!0,r.DEFAULT_ANIMATION_DURING_LAYOUT=!1,r.DEFAULT_ANIMATION_PERIOD=50,r.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,r.DEFAULT_GRAPH_MARGIN=15,r.NODE_DIMENSIONS_INCLUDE_LABELS=!1,r.SIMPLE_NODE_SIZE=40,r.SIMPLE_NODE_HALF_SIZE=r.SIMPLE_NODE_SIZE/2,r.EMPTY_COMPOUND_NODE_SIZE=40,r.MIN_EDGE_LENGTH=1,r.WORLD_BOUNDARY=1e6,r.INITIAL_WORLD_BOUNDARY=r.WORLD_BOUNDARY/1e3,r.WORLD_CENTER_X=1200,r.WORLD_CENTER_Y=900,t.exports=r},function(t,e,n){var r=n(2),i=n(8),o=n(9);function a(t,e,n){r.call(this,n),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=n,this.bendpoints=[],this.source=t,this.target=e}for(var s in a.prototype=Object.create(r.prototype),r)a[s]=r[s];a.prototype.getSource=function(){return this.source},a.prototype.getTarget=function(){return this.target},a.prototype.isInterGraph=function(){return this.isInterGraph},a.prototype.getLength=function(){return this.length},a.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},a.prototype.getBendpoints=function(){return this.bendpoints},a.prototype.getLca=function(){return this.lca},a.prototype.getSourceInLca=function(){return this.sourceInLca},a.prototype.getTargetInLca=function(){return this.targetInLca},a.prototype.getOtherEnd=function(t){if(this.source===t)return this.target;if(this.target===t)return this.source;throw"Node is not incident with this edge"},a.prototype.getOtherEndInGraph=function(t,e){for(var n=this.getOtherEnd(t),r=e.getGraphManager().getRoot();;){if(n.getOwner()==e)return n;if(n.getOwner()==r)break;n=n.getOwner().getParent()}return null},a.prototype.updateLength=function(){var t=new Array(4);this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),t),this.isOverlapingSourceAndTarget||(this.lengthX=t[0]-t[2],this.lengthY=t[1]-t[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},a.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},t.exports=a},function(t,e,n){function r(t){this.vGraphObject=t}t.exports=r},function(t,e,n){var r=n(2),i=n(10),o=n(13),a=n(0),s=n(16),l=n(4);function c(t,e,n,a){null==n&&null==a&&(a=e),r.call(this,a),null!=t.graphManager&&(t=t.graphManager),this.estimatedSize=i.MIN_VALUE,this.inclusionTreeDepth=i.MAX_VALUE,this.vGraphObject=a,this.edges=[],this.graphManager=t,this.rect=null!=n&&null!=e?new o(e.x,e.y,n.width,n.height):new o}for(var u in c.prototype=Object.create(r.prototype),r)c[u]=r[u];c.prototype.getEdges=function(){return this.edges},c.prototype.getChild=function(){return this.child},c.prototype.getOwner=function(){return this.owner},c.prototype.getWidth=function(){return this.rect.width},c.prototype.setWidth=function(t){this.rect.width=t},c.prototype.getHeight=function(){return this.rect.height},c.prototype.setHeight=function(t){this.rect.height=t},c.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},c.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},c.prototype.getCenter=function(){return new l(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},c.prototype.getLocation=function(){return new l(this.rect.x,this.rect.y)},c.prototype.getRect=function(){return this.rect},c.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},c.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},c.prototype.setRect=function(t,e){this.rect.x=t.x,this.rect.y=t.y,this.rect.width=e.width,this.rect.height=e.height},c.prototype.setCenter=function(t,e){this.rect.x=t-this.rect.width/2,this.rect.y=e-this.rect.height/2},c.prototype.setLocation=function(t,e){this.rect.x=t,this.rect.y=e},c.prototype.moveBy=function(t,e){this.rect.x+=t,this.rect.y+=e},c.prototype.getEdgeListToNode=function(t){var e=[],n=this;return n.edges.forEach((function(r){if(r.target==t){if(r.source!=n)throw"Incorrect edge source!";e.push(r)}})),e},c.prototype.getEdgesBetween=function(t){var e=[],n=this;return n.edges.forEach((function(r){if(r.source!=n&&r.target!=n)throw"Incorrect edge source and/or target";(r.target==t||r.source==t)&&e.push(r)})),e},c.prototype.getNeighborsList=function(){var t=new Set,e=this;return e.edges.forEach((function(n){if(n.source==e)t.add(n.target);else{if(n.target!=e)throw"Incorrect incidency!";t.add(n.source)}})),t},c.prototype.withChildren=function(){var t=new Set;if(t.add(this),null!=this.child)for(var e=this.child.getNodes(),n=0;n<e.length;n++)e[n].withChildren().forEach((function(e){t.add(e)}));return t},c.prototype.getNoOfChildren=function(){var t=0;if(null==this.child)t=1;else for(var e=this.child.getNodes(),n=0;n<e.length;n++)t+=e[n].getNoOfChildren();return 0==t&&(t=1),t},c.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},c.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},c.prototype.scatter=function(){var t,e,n=-a.INITIAL_WORLD_BOUNDARY,r=a.INITIAL_WORLD_BOUNDARY;t=a.WORLD_CENTER_X+s.nextDouble()*(r-n)+n;var i=-a.INITIAL_WORLD_BOUNDARY,o=a.INITIAL_WORLD_BOUNDARY;e=a.WORLD_CENTER_Y+s.nextDouble()*(o-i)+i,this.rect.x=t,this.rect.y=e},c.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var t=this.getChild();if(t.updateBounds(!0),this.rect.x=t.getLeft(),this.rect.y=t.getTop(),this.setWidth(t.getRight()-t.getLeft()),this.setHeight(t.getBottom()-t.getTop()),a.NODE_DIMENSIONS_INCLUDE_LABELS){var e=t.getRight()-t.getLeft(),n=t.getBottom()-t.getTop();this.labelWidth>e&&(this.rect.x-=(this.labelWidth-e)/2,this.setWidth(this.labelWidth)),this.labelHeight>n&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-n)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-n),this.setHeight(this.labelHeight))}}},c.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==i.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},c.prototype.transform=function(t){var e=this.rect.x;e>a.WORLD_BOUNDARY?e=a.WORLD_BOUNDARY:e<-a.WORLD_BOUNDARY&&(e=-a.WORLD_BOUNDARY);var n=this.rect.y;n>a.WORLD_BOUNDARY?n=a.WORLD_BOUNDARY:n<-a.WORLD_BOUNDARY&&(n=-a.WORLD_BOUNDARY);var r=new l(e,n),i=t.inverseTransformPoint(r);this.setLocation(i.x,i.y)},c.prototype.getLeft=function(){return this.rect.x},c.prototype.getRight=function(){return this.rect.x+this.rect.width},c.prototype.getTop=function(){return this.rect.y},c.prototype.getBottom=function(){return this.rect.y+this.rect.height},c.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},t.exports=c},function(t,e,n){function r(t,e){null==t&&null==e?(this.x=0,this.y=0):(this.x=t,this.y=e)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.setX=function(t){this.x=t},r.prototype.setY=function(t){this.y=t},r.prototype.getDifference=function(t){return new DimensionD(this.x-t.x,this.y-t.y)},r.prototype.getCopy=function(){return new r(this.x,this.y)},r.prototype.translate=function(t){return this.x+=t.width,this.y+=t.height,this},t.exports=r},function(t,e,n){var r=n(2),i=n(10),o=n(0),a=n(6),s=n(3),l=n(1),c=n(13),u=n(12),h=n(11);function d(t,e,n){r.call(this,n),this.estimatedSize=i.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=t,null!=e&&e instanceof a?this.graphManager=e:null!=e&&e instanceof Layout&&(this.graphManager=e.graphManager)}for(var p in d.prototype=Object.create(r.prototype),r)d[p]=r[p];d.prototype.getNodes=function(){return this.nodes},d.prototype.getEdges=function(){return this.edges},d.prototype.getGraphManager=function(){return this.graphManager},d.prototype.getParent=function(){return this.parent},d.prototype.getLeft=function(){return this.left},d.prototype.getRight=function(){return this.right},d.prototype.getTop=function(){return this.top},d.prototype.getBottom=function(){return this.bottom},d.prototype.isConnected=function(){return this.isConnected},d.prototype.add=function(t,e,n){if(null==e&&null==n){var r=t;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(r)>-1)throw"Node already in graph!";return r.owner=this,this.getNodes().push(r),r}var i=t;if(!(this.getNodes().indexOf(e)>-1&&this.getNodes().indexOf(n)>-1))throw"Source or target not in graph!";if(e.owner!=n.owner||e.owner!=this)throw"Both owners must be this graph!";return e.owner!=n.owner?null:(i.source=e,i.target=n,i.isInterGraph=!1,this.getEdges().push(i),e.edges.push(i),n!=e&&n.edges.push(i),i)},d.prototype.remove=function(t){var e=t;if(t instanceof s){if(null==e)throw"Node is null!";if(null==e.owner||e.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var n=e.edges.slice(),r=n.length,i=0;i<r;i++)(o=n[i]).isInterGraph?this.graphManager.remove(o):o.source.owner.remove(o);if(-1==(a=this.nodes.indexOf(e)))throw"Node not in owner node list!";this.nodes.splice(a,1)}else if(t instanceof l){var o;if(null==(o=t))throw"Edge is null!";if(null==o.source||null==o.target)throw"Source and/or target is null!";if(null==o.source.owner||null==o.target.owner||o.source.owner!=this||o.target.owner!=this)throw"Source and/or target owner is invalid!";var a,c=o.source.edges.indexOf(o),u=o.target.edges.indexOf(o);if(!(c>-1&&u>-1))throw"Source and/or target doesn't know this edge!";if(o.source.edges.splice(c,1),o.target!=o.source&&o.target.edges.splice(u,1),-1==(a=o.source.owner.getEdges().indexOf(o)))throw"Not in owner's edge list!";o.source.owner.getEdges().splice(a,1)}},d.prototype.updateLeftTop=function(){for(var t,e,n,r=i.MAX_VALUE,o=i.MAX_VALUE,a=this.getNodes(),s=a.length,l=0;l<s;l++){var c=a[l];r>(t=c.getTop())&&(r=t),o>(e=c.getLeft())&&(o=e)}return r==i.MAX_VALUE?null:(n=null!=a[0].getParent().paddingLeft?a[0].getParent().paddingLeft:this.margin,this.left=o-n,this.top=r-n,new u(this.left,this.top))},d.prototype.updateBounds=function(t){for(var e,n,r,o,a,s=i.MAX_VALUE,l=-i.MAX_VALUE,u=i.MAX_VALUE,h=-i.MAX_VALUE,d=this.nodes,p=d.length,f=0;f<p;f++){var g=d[f];t&&null!=g.child&&g.updateBounds(),s>(e=g.getLeft())&&(s=e),l<(n=g.getRight())&&(l=n),u>(r=g.getTop())&&(u=r),h<(o=g.getBottom())&&(h=o)}var y=new c(s,u,l-s,h-u);s==i.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),a=null!=d[0].getParent().paddingLeft?d[0].getParent().paddingLeft:this.margin,this.left=y.x-a,this.right=y.x+y.width+a,this.top=y.y-a,this.bottom=y.y+y.height+a},d.calculateBounds=function(t){for(var e,n,r,o,a=i.MAX_VALUE,s=-i.MAX_VALUE,l=i.MAX_VALUE,u=-i.MAX_VALUE,h=t.length,d=0;d<h;d++){var p=t[d];a>(e=p.getLeft())&&(a=e),s<(n=p.getRight())&&(s=n),l>(r=p.getTop())&&(l=r),u<(o=p.getBottom())&&(u=o)}return new c(a,l,s-a,u-l)},d.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},d.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},d.prototype.calcEstimatedSize=function(){for(var t=0,e=this.nodes,n=e.length,r=0;r<n;r++)t+=e[r].calcEstimatedSize();return this.estimatedSize=0==t?o.EMPTY_COMPOUND_NODE_SIZE:t/Math.sqrt(this.nodes.length),this.estimatedSize},d.prototype.updateConnected=function(){var t=this;if(0!=this.nodes.length){var e,n,r=new h,i=new Set,o=this.nodes[0];for(o.withChildren().forEach((function(t){r.push(t),i.add(t)}));0!==r.length;)for(var a=(e=(o=r.shift()).getEdges()).length,s=0;s<a;s++)null==(n=e[s].getOtherEndInGraph(o,this))||i.has(n)||n.withChildren().forEach((function(t){r.push(t),i.add(t)}));if(this.isConnected=!1,i.size>=this.nodes.length){var l=0;i.forEach((function(e){e.owner==t&&l++})),l==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},t.exports=d},function(t,e,n){var r,i=n(1);function o(t){r=n(5),this.layout=t,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var t=this.layout.newGraph(),e=this.layout.newNode(null),n=this.add(t,e);return this.setRootGraph(n),this.rootGraph},o.prototype.add=function(t,e,n,r,i){if(null==n&&null==r&&null==i){if(null==t)throw"Graph is null!";if(null==e)throw"Parent node is null!";if(this.graphs.indexOf(t)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(t),null!=t.parent)throw"Already has a parent!";if(null!=e.child)throw"Already has a child!";return t.parent=e,e.child=t,t}i=n,n=t;var o=(r=e).getOwner(),a=i.getOwner();if(null==o||o.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==a||a.getGraphManager()!=this)throw"Target not in this graph mgr!";if(o==a)return n.isInterGraph=!1,o.add(n,r,i);if(n.isInterGraph=!0,n.source=r,n.target=i,this.edges.indexOf(n)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(n),null==n.source||null==n.target)throw"Edge source and/or target is null!";if(-1!=n.source.edges.indexOf(n)||-1!=n.target.edges.indexOf(n))throw"Edge already in source and/or target incidency list!";return n.source.edges.push(n),n.target.edges.push(n),n},o.prototype.remove=function(t){if(t instanceof r){var e=t;if(e.getGraphManager()!=this)throw"Graph not in this graph mgr";if(e!=this.rootGraph&&(null==e.parent||e.parent.graphManager!=this))throw"Invalid parent node!";for(var n,o=[],a=(o=o.concat(e.getEdges())).length,s=0;s<a;s++)n=o[s],e.remove(n);var l,c=[];for(a=(c=c.concat(e.getNodes())).length,s=0;s<a;s++)l=c[s],e.remove(l);e==this.rootGraph&&this.setRootGraph(null);var u=this.graphs.indexOf(e);this.graphs.splice(u,1),e.parent=null}else if(t instanceof i){if(null==(n=t))throw"Edge is null!";if(!n.isInterGraph)throw"Not an inter-graph edge!";if(null==n.source||null==n.target)throw"Source and/or target is null!";if(-1==n.source.edges.indexOf(n)||-1==n.target.edges.indexOf(n))throw"Source and/or target doesn't know this edge!";if(u=n.source.edges.indexOf(n),n.source.edges.splice(u,1),u=n.target.edges.indexOf(n),n.target.edges.splice(u,1),null==n.source.owner||null==n.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==n.source.owner.getGraphManager().edges.indexOf(n))throw"Not in owner graph manager's edge list!";u=n.source.owner.getGraphManager().edges.indexOf(n),n.source.owner.getGraphManager().edges.splice(u,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(null==this.allNodes){for(var t=[],e=this.getGraphs(),n=e.length,r=0;r<n;r++)t=t.concat(e[r].getNodes());this.allNodes=t}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(null==this.allEdges){var t=[],e=this.getGraphs();e.length;for(var n=0;n<e.length;n++)t=t.concat(e[n].getEdges());t=t.concat(this.edges),this.allEdges=t}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(t){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=t},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(t){if(t.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=t,null==t.parent&&(t.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(t,e){if(null==t||null==e)throw"assert failed";if(t==e)return!0;for(var n,r=t.getOwner();null!=(n=r.getParent());){if(n==e)return!0;if(null==(r=n.getOwner()))break}for(r=e.getOwner();null!=(n=r.getParent());){if(n==t)return!0;if(null==(r=n.getOwner()))break}return!1},o.prototype.calcLowestCommonAncestors=function(){for(var t,e,n,r,i,o=this.getAllEdges(),a=o.length,s=0;s<a;s++)if(e=(t=o[s]).source,n=t.target,t.lca=null,t.sourceInLca=e,t.targetInLca=n,e!=n){for(r=e.getOwner();null==t.lca;){for(t.targetInLca=n,i=n.getOwner();null==t.lca;){if(i==r){t.lca=i;break}if(i==this.rootGraph)break;if(null!=t.lca)throw"assert failed";t.targetInLca=i.getParent(),i=t.targetInLca.getOwner()}if(r==this.rootGraph)break;null==t.lca&&(t.sourceInLca=r.getParent(),r=t.sourceInLca.getOwner())}if(null==t.lca)throw"assert failed"}else t.lca=e.getOwner()},o.prototype.calcLowestCommonAncestor=function(t,e){if(t==e)return t.getOwner();for(var n=t.getOwner();null!=n;){for(var r=e.getOwner();null!=r;){if(r==n)return r;r=r.getParent().getOwner()}n=n.getParent().getOwner()}return n},o.prototype.calcInclusionTreeDepths=function(t,e){null==t&&null==e&&(t=this.rootGraph,e=1);for(var n,r=t.getNodes(),i=r.length,o=0;o<i;o++)(n=r[o]).inclusionTreeDepth=e,null!=n.child&&this.calcInclusionTreeDepths(n.child,e+1)},o.prototype.includesInvalidEdge=function(){for(var t,e=this.edges.length,n=0;n<e;n++)if(t=this.edges[n],this.isOneAncestorOfOther(t.source,t.target))return!0;return!1},t.exports=o},function(t,e,n){var r=n(0);function i(){}for(var o in r)i[o]=r[o];i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,i.COOLING_ADAPTATION_FACTOR=.33,i.ADAPTATION_LOWER_NODE_LIMIT=1e3,i.ADAPTATION_UPPER_NODE_LIMIT=5e3,i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,i.MAX_NODE_DISPLACEMENT=3*i.MAX_NODE_DISPLACEMENT_INCREMENTAL,i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,t.exports=i},function(t,e,n){var r=n(12);function i(){}i.calcSeparationAmount=function(t,e,n,r){if(!t.intersects(e))throw"assert failed";var i=new Array(2);this.decideDirectionsForOverlappingNodes(t,e,i),n[0]=Math.min(t.getRight(),e.getRight())-Math.max(t.x,e.x),n[1]=Math.min(t.getBottom(),e.getBottom())-Math.max(t.y,e.y),t.getX()<=e.getX()&&t.getRight()>=e.getRight()?n[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight()):e.getX()<=t.getX()&&e.getRight()>=t.getRight()&&(n[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight())),t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()?n[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()):e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()&&(n[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()));var o=Math.abs((e.getCenterY()-t.getCenterY())/(e.getCenterX()-t.getCenterX()));e.getCenterY()===t.getCenterY()&&e.getCenterX()===t.getCenterX()&&(o=1);var a=o*n[0],s=n[1]/o;n[0]<s?s=n[0]:a=n[1],n[0]=-1*i[0]*(s/2+r),n[1]=-1*i[1]*(a/2+r)},i.decideDirectionsForOverlappingNodes=function(t,e,n){t.getCenterX()<e.getCenterX()?n[0]=-1:n[0]=1,t.getCenterY()<e.getCenterY()?n[1]=-1:n[1]=1},i.getIntersection2=function(t,e,n){var r=t.getCenterX(),i=t.getCenterY(),o=e.getCenterX(),a=e.getCenterY();if(t.intersects(e))return n[0]=r,n[1]=i,n[2]=o,n[3]=a,!0;var s=t.getX(),l=t.getY(),c=t.getRight(),u=t.getX(),h=t.getBottom(),d=t.getRight(),p=t.getWidthHalf(),f=t.getHeightHalf(),g=e.getX(),y=e.getY(),m=e.getRight(),v=e.getX(),b=e.getBottom(),x=e.getRight(),C=e.getWidthHalf(),_=e.getHeightHalf(),w=!1,k=!1;if(r===o){if(i>a)return n[0]=r,n[1]=l,n[2]=o,n[3]=b,!1;if(i<a)return n[0]=r,n[1]=h,n[2]=o,n[3]=y,!1}else if(i===a){if(r>o)return n[0]=s,n[1]=i,n[2]=m,n[3]=a,!1;if(r<o)return n[0]=c,n[1]=i,n[2]=g,n[3]=a,!1}else{var T=t.height/t.width,E=e.height/e.width,S=(a-i)/(o-r),A=void 0,L=void 0,D=void 0,B=void 0,F=void 0,N=void 0;if(-T===S?r>o?(n[0]=u,n[1]=h,w=!0):(n[0]=c,n[1]=l,w=!0):T===S&&(r>o?(n[0]=s,n[1]=l,w=!0):(n[0]=d,n[1]=h,w=!0)),-E===S?o>r?(n[2]=v,n[3]=b,k=!0):(n[2]=m,n[3]=y,k=!0):E===S&&(o>r?(n[2]=g,n[3]=y,k=!0):(n[2]=x,n[3]=b,k=!0)),w&&k)return!1;if(r>o?i>a?(A=this.getCardinalDirection(T,S,4),L=this.getCardinalDirection(E,S,2)):(A=this.getCardinalDirection(-T,S,3),L=this.getCardinalDirection(-E,S,1)):i>a?(A=this.getCardinalDirection(-T,S,1),L=this.getCardinalDirection(-E,S,3)):(A=this.getCardinalDirection(T,S,2),L=this.getCardinalDirection(E,S,4)),!w)switch(A){case 1:B=l,D=r+-f/S,n[0]=D,n[1]=B;break;case 2:D=d,B=i+p*S,n[0]=D,n[1]=B;break;case 3:B=h,D=r+f/S,n[0]=D,n[1]=B;break;case 4:D=u,B=i+-p*S,n[0]=D,n[1]=B}if(!k)switch(L){case 1:N=y,F=o+-_/S,n[2]=F,n[3]=N;break;case 2:F=x,N=a+C*S,n[2]=F,n[3]=N;break;case 3:N=b,F=o+_/S,n[2]=F,n[3]=N;break;case 4:F=v,N=a+-C*S,n[2]=F,n[3]=N}}return!1},i.getCardinalDirection=function(t,e,n){return t>e?n:1+n%4},i.getIntersection=function(t,e,n,i){if(null==i)return this.getIntersection2(t,e,n);var o=t.x,a=t.y,s=e.x,l=e.y,c=n.x,u=n.y,h=i.x,d=i.y,p=void 0,f=void 0,g=void 0,y=void 0,m=void 0,v=void 0,b=void 0;return m=s*a-o*l,v=h*u-c*d,0==(b=(p=l-a)*(y=c-h)-(f=d-u)*(g=o-s))?null:new r((g*v-y*m)/b,(f*m-p*v)/b)},i.angleOfVector=function(t,e,n,r){var i=void 0;return t!==n?(i=Math.atan((r-e)/(n-t)),n<t?i+=Math.PI:r<e&&(i+=this.TWO_PI)):i=r<e?this.ONE_AND_HALF_PI:this.HALF_PI,i},i.doIntersect=function(t,e,n,r){var i=t.x,o=t.y,a=e.x,s=e.y,l=n.x,c=n.y,u=r.x,h=r.y,d=(a-i)*(h-c)-(u-l)*(s-o);if(0===d)return!1;var p=((h-c)*(u-i)+(l-u)*(h-o))/d,f=((o-s)*(u-i)+(a-i)*(h-o))/d;return 0<p&&p<1&&0<f&&f<1},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,t.exports=i},function(t,e,n){function r(){}r.sign=function(t){return t>0?1:t<0?-1:0},r.floor=function(t){return t<0?Math.ceil(t):Math.floor(t)},r.ceil=function(t){return t<0?Math.floor(t):Math.ceil(t)},t.exports=r},function(t,e,n){function r(){}r.MAX_VALUE=2147483647,r.MIN_VALUE=-2147483648,t.exports=r},function(t,e,n){var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(t){return{value:t,next:null,prev:null}},a=function(t,e,n,r){return null!==t?t.next=e:r.head=e,null!==n?n.prev=e:r.tail=e,e.prev=t,e.next=n,r.length++,e},s=function(t,e){var n=t.prev,r=t.next;return null!==n?n.next=r:e.head=r,null!==r?r.prev=n:e.tail=n,t.prev=t.next=null,e.length--,t},l=function(){function t(e){var n=this;i(this,t),this.length=0,this.head=null,this.tail=null,null!=e&&e.forEach((function(t){return n.push(t)}))}return r(t,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(t,e){return a(e.prev,o(t),e,this)}},{key:"insertAfter",value:function(t,e){return a(e,o(t),e.next,this)}},{key:"insertNodeBefore",value:function(t,e){return a(e.prev,t,e,this)}},{key:"insertNodeAfter",value:function(t,e){return a(e,t,e.next,this)}},{key:"push",value:function(t){return a(this.tail,o(t),null,this)}},{key:"unshift",value:function(t){return a(null,o(t),this.head,this)}},{key:"remove",value:function(t){return s(t,this)}},{key:"pop",value:function(){return s(this.tail,this).value}},{key:"popNode",value:function(){return s(this.tail,this)}},{key:"shift",value:function(){return s(this.head,this).value}},{key:"shiftNode",value:function(){return s(this.head,this)}},{key:"get_object_at",value:function(t){if(t<=this.length()){for(var e=1,n=this.head;e<t;)n=n.next,e++;return n.value}}},{key:"set_object_at",value:function(t,e){if(t<=this.length()){for(var n=1,r=this.head;n<t;)r=r.next,n++;r.value=e}}}]),t}();t.exports=l},function(t,e,n){function r(t,e,n){this.x=null,this.y=null,null==t&&null==e&&null==n?(this.x=0,this.y=0):"number"==typeof t&&"number"==typeof e&&null==n?(this.x=t,this.y=e):"Point"==t.constructor.name&&null==e&&null==n&&(n=t,this.x=n.x,this.y=n.y)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.getLocation=function(){return new r(this.x,this.y)},r.prototype.setLocation=function(t,e,n){"Point"==t.constructor.name&&null==e&&null==n?(n=t,this.setLocation(n.x,n.y)):"number"==typeof t&&"number"==typeof e&&null==n&&(parseInt(t)==t&&parseInt(e)==e?this.move(t,e):(this.x=Math.floor(t+.5),this.y=Math.floor(e+.5)))},r.prototype.move=function(t,e){this.x=t,this.y=e},r.prototype.translate=function(t,e){this.x+=t,this.y+=e},r.prototype.equals=function(t){if("Point"==t.constructor.name){var e=t;return this.x==e.x&&this.y==e.y}return this==t},r.prototype.toString=function(){return(new r).constructor.name+"[x="+this.x+",y="+this.y+"]"},t.exports=r},function(t,e,n){function r(t,e,n,r){this.x=0,this.y=0,this.width=0,this.height=0,null!=t&&null!=e&&null!=n&&null!=r&&(this.x=t,this.y=e,this.width=n,this.height=r)}r.prototype.getX=function(){return this.x},r.prototype.setX=function(t){this.x=t},r.prototype.getY=function(){return this.y},r.prototype.setY=function(t){this.y=t},r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(t){this.width=t},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(t){this.height=t},r.prototype.getRight=function(){return this.x+this.width},r.prototype.getBottom=function(){return this.y+this.height},r.prototype.intersects=function(t){return!(this.getRight()<t.x||this.getBottom()<t.y||t.getRight()<this.x||t.getBottom()<this.y)},r.prototype.getCenterX=function(){return this.x+this.width/2},r.prototype.getMinX=function(){return this.getX()},r.prototype.getMaxX=function(){return this.getX()+this.width},r.prototype.getCenterY=function(){return this.y+this.height/2},r.prototype.getMinY=function(){return this.getY()},r.prototype.getMaxY=function(){return this.getY()+this.height},r.prototype.getWidthHalf=function(){return this.width/2},r.prototype.getHeightHalf=function(){return this.height/2},t.exports=r},function(t,e,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(){}i.lastID=0,i.createID=function(t){return i.isPrimitive(t)?t:(null!=t.uniqueID||(t.uniqueID=i.getString(),i.lastID++),t.uniqueID)},i.getString=function(t){return null==t&&(t=i.lastID),"Object#"+t},i.isPrimitive=function(t){var e=typeof t>"u"?"undefined":r(t);return null==t||"object"!=e&&"function"!=e},t.exports=i},function(t,e,n){function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=n(0),o=n(6),a=n(3),s=n(1),l=n(5),c=n(4),u=n(17),h=n(27);function d(t){h.call(this),this.layoutQuality=i.QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=t&&(this.isRemoteUse=t)}d.RANDOM_SEED=1,d.prototype=Object.create(h.prototype),d.prototype.getGraphManager=function(){return this.graphManager},d.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},d.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},d.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},d.prototype.newGraphManager=function(){var t=new o(this);return this.graphManager=t,t},d.prototype.newGraph=function(t){return new l(null,this.graphManager,t)},d.prototype.newNode=function(t){return new a(this.graphManager,t)},d.prototype.newEdge=function(t){return new s(null,null,t)},d.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},d.prototype.runLayout=function(){var t;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),t=!this.checkLayoutSuccess()&&this.layout(),"during"!==i.ANIMATE&&(t&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,t)},d.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},d.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var t=this.graphManager.getAllEdges(),e=0;e<t.length;e++)t[e];var n=this.graphManager.getRoot().getNodes();for(e=0;e<n.length;e++)n[e];this.update(this.graphManager.getRoot())}},d.prototype.update=function(t){if(null==t)this.update2();else if(t instanceof a){var e=t;if(null!=e.getChild())for(var n=e.getChild().getNodes(),r=0;r<n.length;r++)update(n[r]);null!=e.vGraphObject&&e.vGraphObject.update(e)}else if(t instanceof s){var i=t;null!=i.vGraphObject&&i.vGraphObject.update(i)}else if(t instanceof l){var o=t;null!=o.vGraphObject&&o.vGraphObject.update(o)}},d.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},d.prototype.transform=function(t){if(null==t)this.transform(new c(0,0));else{var e=new u,n=this.graphManager.getRoot().updateLeftTop();if(null!=n){e.setWorldOrgX(t.x),e.setWorldOrgY(t.y),e.setDeviceOrgX(n.x),e.setDeviceOrgY(n.y);for(var r=this.getAllNodes(),i=0;i<r.length;i++)r[i].transform(e)}}},d.prototype.positionNodesRandomly=function(t){if(null==t)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var e,n,r=t.getNodes(),i=0;i<r.length;i++)null==(n=(e=r[i]).getChild())||0==n.getNodes().length?e.scatter():(this.positionNodesRandomly(n),e.updateBounds())},d.prototype.getFlatForest=function(){for(var t=[],e=!0,n=this.graphManager.getRoot().getNodes(),i=!0,o=0;o<n.length;o++)null!=n[o].getChild()&&(i=!1);if(!i)return t;var a=new Set,s=[],l=new Map,c=[];for(c=c.concat(n);c.length>0&&e;){for(s.push(c[0]);s.length>0&&e;){var u=s[0];s.splice(0,1),a.add(u);var h=u.getEdges();for(o=0;o<h.length;o++){var d=h[o].getOtherEnd(u);if(l.get(u)!=d){if(a.has(d)){e=!1;break}s.push(d),l.set(d,u)}}}if(e){var p=[].concat(r(a));for(t.push(p),o=0;o<p.length;o++){var f=p[o],g=c.indexOf(f);g>-1&&c.splice(g,1)}a=new Set,l=new Map}else t=[]}return t},d.prototype.createDummyNodesForBendpoints=function(t){for(var e=[],n=t.source,r=this.graphManager.calcLowestCommonAncestor(t.source,t.target),i=0;i<t.bendpoints.length;i++){var o=this.newNode(null);o.setRect(new Point(0,0),new Dimension(1,1)),r.add(o);var a=this.newEdge(null);this.graphManager.add(a,n,o),e.add(o),n=o}return a=this.newEdge(null),this.graphManager.add(a,n,t.target),this.edgeToDummyNodes.set(t,e),t.isInterGraph()?this.graphManager.remove(t):r.remove(t),e},d.prototype.createBendpointsFromDummyNodes=function(){var t=[];t=t.concat(this.graphManager.getAllEdges()),t=[].concat(r(this.edgeToDummyNodes.keys())).concat(t);for(var e=0;e<t.length;e++){var n=t[e];if(n.bendpoints.length>0){for(var i=this.edgeToDummyNodes.get(n),o=0;o<i.length;o++){var a=i[o],s=new c(a.getCenterX(),a.getCenterY()),l=n.bendpoints.get(o);l.x=s.x,l.y=s.y,a.getOwner().remove(a)}this.graphManager.add(n,n.source,n.target)}}},d.transform=function(t,e,n,r){if(null!=n&&null!=r){var i=e;return t<=50?i-=(e-e/n)/50*(50-t):i+=(e*r-e)/50*(t-50),i}var o,a;return t<=50?(o=9*e/500,a=e/10):(o=9*e/50,a=-8*e),o*t+a},d.findCenterOfTree=function(t){var e=[];e=e.concat(t);var n=[],r=new Map,i=!1,o=null;(1==e.length||2==e.length)&&(i=!0,o=e[0]);for(var a=0;a<e.length;a++){var s=(u=e[a]).getNeighborsList().size;r.set(u,u.getNeighborsList().size),1==s&&n.push(u)}var l=[];for(l=l.concat(n);!i;){var c=[];for(c=c.concat(l),l=[],a=0;a<e.length;a++){var u=e[a],h=e.indexOf(u);h>=0&&e.splice(h,1),u.getNeighborsList().forEach((function(t){if(n.indexOf(t)<0){var e=r.get(t)-1;1==e&&l.push(t),r.set(t,e)}}))}n=n.concat(l),(1==e.length||2==e.length)&&(i=!0,o=e[0])}return o},d.prototype.setGraphManager=function(t){this.graphManager=t},t.exports=d},function(t,e,n){function r(){}r.seed=1,r.x=0,r.nextDouble=function(){return r.x=1e4*Math.sin(r.seed++),r.x-Math.floor(r.x)},t.exports=r},function(t,e,n){var r=n(4);function i(t,e){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}i.prototype.getWorldOrgX=function(){return this.lworldOrgX},i.prototype.setWorldOrgX=function(t){this.lworldOrgX=t},i.prototype.getWorldOrgY=function(){return this.lworldOrgY},i.prototype.setWorldOrgY=function(t){this.lworldOrgY=t},i.prototype.getWorldExtX=function(){return this.lworldExtX},i.prototype.setWorldExtX=function(t){this.lworldExtX=t},i.prototype.getWorldExtY=function(){return this.lworldExtY},i.prototype.setWorldExtY=function(t){this.lworldExtY=t},i.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},i.prototype.setDeviceOrgX=function(t){this.ldeviceOrgX=t},i.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},i.prototype.setDeviceOrgY=function(t){this.ldeviceOrgY=t},i.prototype.getDeviceExtX=function(){return this.ldeviceExtX},i.prototype.setDeviceExtX=function(t){this.ldeviceExtX=t},i.prototype.getDeviceExtY=function(){return this.ldeviceExtY},i.prototype.setDeviceExtY=function(t){this.ldeviceExtY=t},i.prototype.transformX=function(t){var e=0,n=this.lworldExtX;return 0!=n&&(e=this.ldeviceOrgX+(t-this.lworldOrgX)*this.ldeviceExtX/n),e},i.prototype.transformY=function(t){var e=0,n=this.lworldExtY;return 0!=n&&(e=this.ldeviceOrgY+(t-this.lworldOrgY)*this.ldeviceExtY/n),e},i.prototype.inverseTransformX=function(t){var e=0,n=this.ldeviceExtX;return 0!=n&&(e=this.lworldOrgX+(t-this.ldeviceOrgX)*this.lworldExtX/n),e},i.prototype.inverseTransformY=function(t){var e=0,n=this.ldeviceExtY;return 0!=n&&(e=this.lworldOrgY+(t-this.ldeviceOrgY)*this.lworldExtY/n),e},i.prototype.inverseTransformPoint=function(t){return new r(this.inverseTransformX(t.x),this.inverseTransformY(t.y))},t.exports=i},function(t,e,n){function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=n(15),o=n(7),a=n(0),s=n(8),l=n(9);function c(){i.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=o.DEFAULT_EDGE_LENGTH,this.springConstant=o.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=o.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}for(var u in c.prototype=Object.create(i.prototype),i)c[u]=i[u];c.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},c.prototype.calcIdealEdgeLengths=function(){for(var t,e,n,r,i,s,l=this.getGraphManager().getAllEdges(),c=0;c<l.length;c++)(t=l[c]).idealLength=this.idealEdgeLength,t.isInterGraph&&(n=t.getSource(),r=t.getTarget(),i=t.getSourceInLca().getEstimatedSize(),s=t.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(t.idealLength+=i+s-2*a.SIMPLE_NODE_SIZE),e=t.getLca().getInclusionTreeDepth(),t.idealLength+=o.DEFAULT_EDGE_LENGTH*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(n.getInclusionTreeDepth()+r.getInclusionTreeDepth()-2*e))},c.prototype.initSpringEmbedder=function(){var t=this.getAllNodes().length;this.incremental?(t>o.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*o.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(t-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-o.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(t>o.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(o.COOLING_ADAPTATION_FACTOR,1-(t-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*(1-o.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},c.prototype.calcSpringForces=function(){for(var t,e=this.getAllEdges(),n=0;n<e.length;n++)t=e[n],this.calcSpringForce(t,t.idealLength)},c.prototype.calcRepulsionForces=function(){var t,e,n,r,i,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&a&&this.updateGrid(),i=new Set,t=0;t<l.length;t++)n=l[t],this.calculateRepulsionForceOfANode(n,i,a,s),i.add(n);else for(t=0;t<l.length;t++)for(n=l[t],e=t+1;e<l.length;e++)r=l[e],n.getOwner()==r.getOwner()&&this.calcRepulsionForce(n,r)},c.prototype.calcGravitationalForces=function(){for(var t,e=this.getAllNodesToApplyGravitation(),n=0;n<e.length;n++)t=e[n],this.calcGravitationalForce(t)},c.prototype.moveNodes=function(){for(var t=this.getAllNodes(),e=0;e<t.length;e++)t[e].move()},c.prototype.calcSpringForce=function(t,e){var n,r,i,o,a=t.getSource(),s=t.getTarget();if(this.uniformLeafNodeSizes&&null==a.getChild()&&null==s.getChild())t.updateLengthSimple();else if(t.updateLength(),t.isOverlapingSourceAndTarget)return;0!=(n=t.getLength())&&(i=(r=this.springConstant*(n-e))*(t.lengthX/n),o=r*(t.lengthY/n),a.springForceX+=i,a.springForceY+=o,s.springForceX-=i,s.springForceY-=o)},c.prototype.calcRepulsionForce=function(t,e){var n,r,i,a,c,u,h,d=t.getRect(),p=e.getRect(),f=new Array(2),g=new Array(4);if(d.intersects(p)){s.calcSeparationAmount(d,p,f,o.DEFAULT_EDGE_LENGTH/2),u=2*f[0],h=2*f[1];var y=t.noOfChildren*e.noOfChildren/(t.noOfChildren+e.noOfChildren);t.repulsionForceX-=y*u,t.repulsionForceY-=y*h,e.repulsionForceX+=y*u,e.repulsionForceY+=y*h}else this.uniformLeafNodeSizes&&null==t.getChild()&&null==e.getChild()?(n=p.getCenterX()-d.getCenterX(),r=p.getCenterY()-d.getCenterY()):(s.getIntersection(d,p,g),n=g[2]-g[0],r=g[3]-g[1]),Math.abs(n)<o.MIN_REPULSION_DIST&&(n=l.sign(n)*o.MIN_REPULSION_DIST),Math.abs(r)<o.MIN_REPULSION_DIST&&(r=l.sign(r)*o.MIN_REPULSION_DIST),i=n*n+r*r,a=Math.sqrt(i),u=(c=this.repulsionConstant*t.noOfChildren*e.noOfChildren/i)*n/a,h=c*r/a,t.repulsionForceX-=u,t.repulsionForceY-=h,e.repulsionForceX+=u,e.repulsionForceY+=h},c.prototype.calcGravitationalForce=function(t){var e,n,r,i,o,a,s,l;n=((e=t.getOwner()).getRight()+e.getLeft())/2,r=(e.getTop()+e.getBottom())/2,i=t.getCenterX()-n,o=t.getCenterY()-r,a=Math.abs(i)+t.getWidth()/2,s=Math.abs(o)+t.getHeight()/2,t.getOwner()==this.graphManager.getRoot()?(a>(l=e.getEstimatedSize()*this.gravityRangeFactor)||s>l)&&(t.gravitationForceX=-this.gravityConstant*i,t.gravitationForceY=-this.gravityConstant*o):(a>(l=e.getEstimatedSize()*this.compoundGravityRangeFactor)||s>l)&&(t.gravitationForceX=-this.gravityConstant*i*this.compoundGravityConstant,t.gravitationForceY=-this.gravityConstant*o*this.compoundGravityConstant)},c.prototype.isConverged=function(){var t,e=!1;return this.totalIterations>this.maxIterations/3&&(e=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),t=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,t||e},c.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},c.prototype.calcNoOfChildrenForAllNodes=function(){for(var t,e=this.graphManager.getAllNodes(),n=0;n<e.length;n++)(t=e[n]).noOfChildren=t.getNoOfChildren()},c.prototype.calcGrid=function(t){var e=0,n=0;e=parseInt(Math.ceil((t.getRight()-t.getLeft())/this.repulsionRange)),n=parseInt(Math.ceil((t.getBottom()-t.getTop())/this.repulsionRange));for(var r=new Array(e),i=0;i<e;i++)r[i]=new Array(n);for(i=0;i<e;i++)for(var o=0;o<n;o++)r[i][o]=new Array;return r},c.prototype.addNodeToGrid=function(t,e,n){var r=0,i=0,o=0,a=0;r=parseInt(Math.floor((t.getRect().x-e)/this.repulsionRange)),i=parseInt(Math.floor((t.getRect().width+t.getRect().x-e)/this.repulsionRange)),o=parseInt(Math.floor((t.getRect().y-n)/this.repulsionRange)),a=parseInt(Math.floor((t.getRect().height+t.getRect().y-n)/this.repulsionRange));for(var s=r;s<=i;s++)for(var l=o;l<=a;l++)this.grid[s][l].push(t),t.setGridCoordinates(r,i,o,a)},c.prototype.updateGrid=function(){var t,e,n=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),t=0;t<n.length;t++)e=n[t],this.addNodeToGrid(e,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},c.prototype.calculateRepulsionForceOfANode=function(t,e,n,i){if(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&n||i){var a=new Set;t.surrounding=new Array;for(var s,l=this.grid,c=t.startX-1;c<t.finishX+2;c++)for(var u=t.startY-1;u<t.finishY+2;u++)if(!(c<0||u<0||c>=l.length||u>=l[0].length))for(var h=0;h<l[c][u].length;h++)if(s=l[c][u][h],t.getOwner()==s.getOwner()&&t!=s&&!e.has(s)&&!a.has(s)){var d=Math.abs(t.getCenterX()-s.getCenterX())-(t.getWidth()/2+s.getWidth()/2),p=Math.abs(t.getCenterY()-s.getCenterY())-(t.getHeight()/2+s.getHeight()/2);d<=this.repulsionRange&&p<=this.repulsionRange&&a.add(s)}t.surrounding=[].concat(r(a))}for(c=0;c<t.surrounding.length;c++)this.calcRepulsionForce(t,t.surrounding[c])},c.prototype.calcRepulsionRange=function(){return 0},t.exports=c},function(t,e,n){var r=n(1),i=n(7);function o(t,e,n){r.call(this,t,e,n),this.idealLength=i.DEFAULT_EDGE_LENGTH}for(var a in o.prototype=Object.create(r.prototype),r)o[a]=r[a];t.exports=o},function(t,e,n){var r=n(3);function i(t,e,n,i){r.call(this,t,e,n,i),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var o in i.prototype=Object.create(r.prototype),r)i[o]=r[o];i.prototype.setGridCoordinates=function(t,e,n,r){this.startX=t,this.finishX=e,this.startY=n,this.finishY=r},t.exports=i},function(t,e,n){function r(t,e){this.width=0,this.height=0,null!==t&&null!==e&&(this.height=e,this.width=t)}r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(t){this.width=t},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(t){this.height=t},t.exports=r},function(t,e,n){var r=n(14);function i(){this.map={},this.keys=[]}i.prototype.put=function(t,e){var n=r.createID(t);this.contains(n)||(this.map[n]=e,this.keys.push(t))},i.prototype.contains=function(t){return r.createID(t),null!=this.map[t]},i.prototype.get=function(t){var e=r.createID(t);return this.map[e]},i.prototype.keySet=function(){return this.keys},t.exports=i},function(t,e,n){var r=n(14);function i(){this.set={}}i.prototype.add=function(t){var e=r.createID(t);this.contains(e)||(this.set[e]=t)},i.prototype.remove=function(t){delete this.set[r.createID(t)]},i.prototype.clear=function(){this.set={}},i.prototype.contains=function(t){return this.set[r.createID(t)]==t},i.prototype.isEmpty=function(){return 0===this.size()},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAllTo=function(t){for(var e=Object.keys(this.set),n=e.length,r=0;r<n;r++)t.push(this.set[e[r]])},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAll=function(t){for(var e=t.length,n=0;n<e;n++){var r=t[n];this.add(r)}},t.exports=i},function(t,e,n){var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(11),a=function(){function t(e,n){i(this,t),(null!==n||void 0!==n)&&(this.compareFunction=this._defaultCompareFunction);var r=void 0;r=e instanceof o?e.size():e.length,this._quicksort(e,0,r-1)}return r(t,[{key:"_quicksort",value:function(t,e,n){if(e<n){var r=this._partition(t,e,n);this._quicksort(t,e,r),this._quicksort(t,r+1,n)}}},{key:"_partition",value:function(t,e,n){for(var r=this._get(t,e),i=e,o=n;;){for(;this.compareFunction(r,this._get(t,o));)o--;for(;this.compareFunction(this._get(t,i),r);)i++;if(!(i<o))return o;this._swap(t,i,o),i++,o--}}},{key:"_get",value:function(t,e){return t instanceof o?t.get_object_at(e):t[e]}},{key:"_set",value:function(t,e,n){t instanceof o?t.set_object_at(e,n):t[e]=n}},{key:"_swap",value:function(t,e,n){var r=this._get(t,e);this._set(t,e,this._get(t,n)),this._set(t,n,r)}},{key:"_defaultCompareFunction",value:function(t,e){return e>t}}]),t}();t.exports=a},function(t,e,n){var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;i(this,t),this.sequence1=e,this.sequence2=n,this.match_score=r,this.mismatch_penalty=o,this.gap_penalty=a,this.iMax=e.length+1,this.jMax=n.length+1,this.grid=new Array(this.iMax);for(var s=0;s<this.iMax;s++){this.grid[s]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.grid[s][l]=0}this.tracebackGrid=new Array(this.iMax);for(var c=0;c<this.iMax;c++){this.tracebackGrid[c]=new Array(this.jMax);for(var u=0;u<this.jMax;u++)this.tracebackGrid[c][u]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return r(t,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var t=1;t<this.jMax;t++)this.grid[0][t]=this.grid[0][t-1]+this.gap_penalty,this.tracebackGrid[0][t]=[!1,!1,!0];for(var e=1;e<this.iMax;e++)this.grid[e][0]=this.grid[e-1][0]+this.gap_penalty,this.tracebackGrid[e][0]=[!1,!0,!1];for(var n=1;n<this.iMax;n++)for(var r=1;r<this.jMax;r++){var i=[this.sequence1[n-1]===this.sequence2[r-1]?this.grid[n-1][r-1]+this.match_score:this.grid[n-1][r-1]+this.mismatch_penalty,this.grid[n-1][r]+this.gap_penalty,this.grid[n][r-1]+this.gap_penalty],o=this.arrayAllMaxIndexes(i);this.grid[n][r]=i[o[0]],this.tracebackGrid[n][r]=[o.includes(0),o.includes(1),o.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var t=[];for(t.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});t[0];){var e=t[0],n=this.tracebackGrid[e.pos[0]][e.pos[1]];n[0]&&t.push({pos:[e.pos[0]-1,e.pos[1]-1],seq1:this.sequence1[e.pos[0]-1]+e.seq1,seq2:this.sequence2[e.pos[1]-1]+e.seq2}),n[1]&&t.push({pos:[e.pos[0]-1,e.pos[1]],seq1:this.sequence1[e.pos[0]-1]+e.seq1,seq2:"-"+e.seq2}),n[2]&&t.push({pos:[e.pos[0],e.pos[1]-1],seq1:"-"+e.seq1,seq2:this.sequence2[e.pos[1]-1]+e.seq2}),0===e.pos[0]&&0===e.pos[1]&&this.alignments.push({sequence1:e.seq1,sequence2:e.seq2}),t.shift()}return this.alignments}},{key:"getAllIndexes",value:function(t,e){for(var n=[],r=-1;-1!==(r=t.indexOf(e,r+1));)n.push(r);return n}},{key:"arrayAllMaxIndexes",value:function(t){return this.getAllIndexes(t,Math.max.apply(null,t))}}]),t}();t.exports=o},function(t,e,n){var r=function(){};r.FDLayout=n(18),r.FDLayoutConstants=n(7),r.FDLayoutEdge=n(19),r.FDLayoutNode=n(20),r.DimensionD=n(21),r.HashMap=n(22),r.HashSet=n(23),r.IGeometry=n(8),r.IMath=n(9),r.Integer=n(10),r.Point=n(12),r.PointD=n(4),r.RandomSeed=n(16),r.RectangleD=n(13),r.Transform=n(17),r.UniqueIDGeneretor=n(14),r.Quicksort=n(24),r.LinkedList=n(11),r.LGraphObject=n(2),r.LGraph=n(5),r.LEdge=n(1),r.LGraphManager=n(6),r.LNode=n(3),r.Layout=n(15),r.LayoutConstants=n(0),r.NeedlemanWunsch=n(25),t.exports=r},function(t,e,n){function r(){this.listeners=[]}var i=r.prototype;i.addListener=function(t,e){this.listeners.push({event:t,callback:e})},i.removeListener=function(t,e){for(var n=this.listeners.length;n>=0;n--){var r=this.listeners[n];r.event===t&&r.callback===e&&this.listeners.splice(n,1)}},i.emit=function(t,e){for(var n=0;n<this.listeners.length;n++){var r=this.listeners[n];t===r.event&&r.callback(e)}},t.exports=r}])),mg.exports}function bg(){return fg||(fg=1,yg.exports=function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(e,n){e.exports=t},function(t,e,n){var r=n(0).FDLayoutConstants;function i(){}for(var o in r)i[o]=r[o];i.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,i.DEFAULT_RADIAL_SEPARATION=r.DEFAULT_EDGE_LENGTH,i.DEFAULT_COMPONENT_SEPERATION=60,i.TILE=!0,i.TILING_PADDING_VERTICAL=10,i.TILING_PADDING_HORIZONTAL=10,i.TREE_REDUCTION_ON_INCREMENTAL=!1,t.exports=i},function(t,e,n){var r=n(0).FDLayoutEdge;function i(t,e,n){r.call(this,t,e,n)}for(var o in i.prototype=Object.create(r.prototype),r)i[o]=r[o];t.exports=i},function(t,e,n){var r=n(0).LGraph;function i(t,e,n){r.call(this,t,e,n)}for(var o in i.prototype=Object.create(r.prototype),r)i[o]=r[o];t.exports=i},function(t,e,n){var r=n(0).LGraphManager;function i(t){r.call(this,t)}for(var o in i.prototype=Object.create(r.prototype),r)i[o]=r[o];t.exports=i},function(t,e,n){var r=n(0).FDLayoutNode,i=n(0).IMath;function o(t,e,n,i){r.call(this,t,e,n,i)}for(var a in o.prototype=Object.create(r.prototype),r)o[a]=r[a];o.prototype.move=function(){var t=this.graphManager.getLayout();this.displacementX=t.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=t.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementX=t.coolingFactor*t.maxNodeDisplacement*i.sign(this.displacementX)),Math.abs(this.displacementY)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementY=t.coolingFactor*t.maxNodeDisplacement*i.sign(this.displacementY)),null==this.child||0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),t.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},o.prototype.propogateDisplacementToChildren=function(t,e){for(var n,r=this.getChild().getNodes(),i=0;i<r.length;i++)null==(n=r[i]).getChild()?(n.moveBy(t,e),n.displacementX+=t,n.displacementY+=e):n.propogateDisplacementToChildren(t,e)},o.prototype.setPred1=function(t){this.pred1=t},o.prototype.getPred1=function(){return pred1},o.prototype.getPred2=function(){return pred2},o.prototype.setNext=function(t){this.next=t},o.prototype.getNext=function(){return next},o.prototype.setProcessed=function(t){this.processed=t},o.prototype.isProcessed=function(){return processed},t.exports=o},function(t,e,n){var r=n(0).FDLayout,i=n(4),o=n(3),a=n(5),s=n(2),l=n(1),c=n(0).FDLayoutConstants,u=n(0).LayoutConstants,h=n(0).Point,d=n(0).PointD,p=n(0).Layout,f=n(0).Integer,g=n(0).IGeometry,y=n(0).LGraph,m=n(0).Transform;function v(){r.call(this),this.toBeTiled={}}for(var b in v.prototype=Object.create(r.prototype),r)v[b]=r[b];v.prototype.newGraphManager=function(){var t=new i(this);return this.graphManager=t,t},v.prototype.newGraph=function(t){return new o(null,this.graphManager,t)},v.prototype.newNode=function(t){return new a(this.graphManager,t)},v.prototype.newEdge=function(t){return new s(null,null,t)},v.prototype.initParameters=function(){r.prototype.initParameters.call(this,arguments),this.isSubLayout||(l.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=l.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=l.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=c.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=c.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=c.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=c.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/c.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=c.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},v.prototype.layout=function(){return u.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},v.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(l.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var t=new Set(this.getAllNodes()),e=this.nodesWithGravity.filter((function(e){return t.has(e)}));this.graphManager.setAllNodesToApplyGravitation(e)}}else{var n=this.getFlatForest();n.length>0?this.positionNodesRadially(n):(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),t=new Set(this.getAllNodes()),e=this.nodesWithGravity.filter((function(e){return t.has(e)})),this.graphManager.setAllNodesToApplyGravitation(e),this.positionNodesRandomly())}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},v.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%c.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var t=new Set(this.getAllNodes()),e=this.nodesWithGravity.filter((function(e){return t.has(e)}));this.graphManager.setAllNodesToApplyGravitation(e),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var n=!this.isTreeGrowing&&!this.isGrowthFinished,r=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(n,r),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},v.prototype.getPositionsData=function(){for(var t=this.graphManager.getAllNodes(),e={},n=0;n<t.length;n++){var r=t[n].rect,i=t[n].id;e[i]={id:i,x:r.getCenterX(),y:r.getCenterY(),w:r.width,h:r.height}}return e},v.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var t=!1;if("during"===c.ANIMATE)this.emit("layoutstarted");else{for(;!t;)t=this.tick();this.graphManager.updateBounds()}},v.prototype.calculateNodesToApplyGravitationTo=function(){var t,e,n=[],r=this.graphManager.getGraphs(),i=r.length;for(e=0;e<i;e++)(t=r[e]).updateConnected(),t.isConnected||(n=n.concat(t.getNodes()));return n},v.prototype.createBendpoints=function(){var t=[];t=t.concat(this.graphManager.getAllEdges());var e,n=new Set;for(e=0;e<t.length;e++){var r=t[e];if(!n.has(r)){var i=r.getSource(),o=r.getTarget();if(i==o)r.getBendpoints().push(new d),r.getBendpoints().push(new d),this.createDummyNodesForBendpoints(r),n.add(r);else{var a=[];if(a=(a=a.concat(i.getEdgeListToNode(o))).concat(o.getEdgeListToNode(i)),!n.has(a[0])){var s;if(a.length>1)for(s=0;s<a.length;s++){var l=a[s];l.getBendpoints().push(new d),this.createDummyNodesForBendpoints(l)}a.forEach((function(t){n.add(t)}))}}}if(n.size==t.length)break}},v.prototype.positionNodesRadially=function(t){for(var e=new h(0,0),n=Math.ceil(Math.sqrt(t.length)),r=0,i=0,o=0,a=new d(0,0),s=0;s<t.length;s++){s%n==0&&(o=0,i=r,0!=s&&(i+=l.DEFAULT_COMPONENT_SEPERATION),r=0);var c=t[s],f=p.findCenterOfTree(c);e.x=o,e.y=i,(a=v.radialLayout(c,f,e)).y>r&&(r=Math.floor(a.y)),o=Math.floor(a.x+l.DEFAULT_COMPONENT_SEPERATION)}this.transform(new d(u.WORLD_CENTER_X-a.x/2,u.WORLD_CENTER_Y-a.y/2))},v.radialLayout=function(t,e,n){var r=Math.max(this.maxDiagonalInTree(t),l.DEFAULT_RADIAL_SEPARATION);v.branchRadialLayout(e,null,0,359,0,r);var i=y.calculateBounds(t),o=new m;o.setDeviceOrgX(i.getMinX()),o.setDeviceOrgY(i.getMinY()),o.setWorldOrgX(n.x),o.setWorldOrgY(n.y);for(var a=0;a<t.length;a++)t[a].transform(o);var s=new d(i.getMaxX(),i.getMaxY());return o.inverseTransformPoint(s)},v.branchRadialLayout=function(t,e,n,r,i,o){var a=(r-n+1)/2;a<0&&(a+=180);var s=(a+n)%360*g.TWO_PI/360,l=i*Math.cos(s),c=i*Math.sin(s);t.setCenter(l,c);var u=[],h=(u=u.concat(t.getEdges())).length;null!=e&&h--;for(var d,p=0,f=u.length,y=t.getEdgesBetween(e);y.length>1;){var m=y[0];y.splice(0,1);var b=u.indexOf(m);b>=0&&u.splice(b,1),f--,h--}d=null!=e?(u.indexOf(y[0])+1)%f:0;for(var x=Math.abs(r-n)/h,C=d;p!=h;C=++C%f){var _=u[C].getOtherEnd(t);if(_!=e){var w=(n+p*x)%360,k=(w+x)%360;v.branchRadialLayout(_,t,w,k,i+o,o),p++}}},v.maxDiagonalInTree=function(t){for(var e=f.MIN_VALUE,n=0;n<t.length;n++){var r=t[n].getDiagonal();r>e&&(e=r)}return e},v.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},v.prototype.groupZeroDegreeMembers=function(){var t=this,e={};this.memberGroups={},this.idToDummyNode={};for(var n=[],r=this.graphManager.getAllNodes(),i=0;i<r.length;i++){var o=(s=r[i]).getParent();0===this.getNodeDegreeWithChildren(s)&&(null==o.id||!this.getToBeTiled(o))&&n.push(s)}for(i=0;i<n.length;i++){var s,l=(s=n[i]).getParent().id;typeof e[l]>"u"&&(e[l]=[]),e[l]=e[l].concat(s)}Object.keys(e).forEach((function(n){if(e[n].length>1){var r="DummyCompound_"+n;t.memberGroups[r]=e[n];var i=e[n][0].getParent(),o=new a(t.graphManager);o.id=r,o.paddingLeft=i.paddingLeft||0,o.paddingRight=i.paddingRight||0,o.paddingBottom=i.paddingBottom||0,o.paddingTop=i.paddingTop||0,t.idToDummyNode[r]=o;var s=t.getGraphManager().add(t.newGraph(),o),l=i.getChild();l.add(o);for(var c=0;c<e[n].length;c++){var u=e[n][c];l.remove(u),s.add(u)}}}))},v.prototype.clearCompounds=function(){var t={},e={};this.performDFSOnCompounds();for(var n=0;n<this.compoundOrder.length;n++)e[this.compoundOrder[n].id]=this.compoundOrder[n],t[this.compoundOrder[n].id]=[].concat(this.compoundOrder[n].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[n].getChild()),this.compoundOrder[n].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(t,e)},v.prototype.clearZeroDegreeMembers=function(){var t=this,e=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach((function(n){var r=t.idToDummyNode[n];e[n]=t.tileNodes(t.memberGroups[n],r.paddingLeft+r.paddingRight),r.rect.width=e[n].width,r.rect.height=e[n].height}))},v.prototype.repopulateCompounds=function(){for(var t=this.compoundOrder.length-1;t>=0;t--){var e=this.compoundOrder[t],n=e.id,r=e.paddingLeft,i=e.paddingTop;this.adjustLocations(this.tiledMemberPack[n],e.rect.x,e.rect.y,r,i)}},v.prototype.repopulateZeroDegreeMembers=function(){var t=this,e=this.tiledZeroDegreePack;Object.keys(e).forEach((function(n){var r=t.idToDummyNode[n],i=r.paddingLeft,o=r.paddingTop;t.adjustLocations(e[n],r.rect.x,r.rect.y,i,o)}))},v.prototype.getToBeTiled=function(t){var e=t.id;if(null!=this.toBeTiled[e])return this.toBeTiled[e];var n=t.getChild();if(null==n)return this.toBeTiled[e]=!1,!1;for(var r=n.getNodes(),i=0;i<r.length;i++){var o=r[i];if(this.getNodeDegree(o)>0)return this.toBeTiled[e]=!1,!1;if(null!=o.getChild()){if(!this.getToBeTiled(o))return this.toBeTiled[e]=!1,!1}else this.toBeTiled[o.id]=!1}return this.toBeTiled[e]=!0,!0},v.prototype.getNodeDegree=function(t){t.id;for(var e=t.getEdges(),n=0,r=0;r<e.length;r++){var i=e[r];i.getSource().id!==i.getTarget().id&&(n+=1)}return n},v.prototype.getNodeDegreeWithChildren=function(t){var e=this.getNodeDegree(t);if(null==t.getChild())return e;for(var n=t.getChild().getNodes(),r=0;r<n.length;r++){var i=n[r];e+=this.getNodeDegreeWithChildren(i)}return e},v.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},v.prototype.fillCompexOrderByDFS=function(t){for(var e=0;e<t.length;e++){var n=t[e];null!=n.getChild()&&this.fillCompexOrderByDFS(n.getChild().getNodes()),this.getToBeTiled(n)&&this.compoundOrder.push(n)}},v.prototype.adjustLocations=function(t,e,n,r,i){n+=i;for(var o=e+=r,a=0;a<t.rows.length;a++){var s=t.rows[a];e=o;for(var l=0,c=0;c<s.length;c++){var u=s[c];u.rect.x=e,u.rect.y=n,e+=u.rect.width+t.horizontalPadding,u.rect.height>l&&(l=u.rect.height)}n+=l+t.verticalPadding}},v.prototype.tileCompoundMembers=function(t,e){var n=this;this.tiledMemberPack=[],Object.keys(t).forEach((function(r){var i=e[r];n.tiledMemberPack[r]=n.tileNodes(t[r],i.paddingLeft+i.paddingRight),i.rect.width=n.tiledMemberPack[r].width,i.rect.height=n.tiledMemberPack[r].height}))},v.prototype.tileNodes=function(t,e){var n={rows:[],rowWidth:[],rowHeight:[],width:0,height:e,verticalPadding:l.TILING_PADDING_VERTICAL,horizontalPadding:l.TILING_PADDING_HORIZONTAL};t.sort((function(t,e){return t.rect.width*t.rect.height>e.rect.width*e.rect.height?-1:t.rect.width*t.rect.height<e.rect.width*e.rect.height?1:0}));for(var r=0;r<t.length;r++){var i=t[r];0==n.rows.length?this.insertNodeToRow(n,i,0,e):this.canAddHorizontal(n,i.rect.width,i.rect.height)?this.insertNodeToRow(n,i,this.getShortestRowIndex(n),e):this.insertNodeToRow(n,i,n.rows.length,e),this.shiftToLastRow(n)}return n},v.prototype.insertNodeToRow=function(t,e,n,r){var i=r;if(n==t.rows.length){var o=[];t.rows.push(o),t.rowWidth.push(i),t.rowHeight.push(0)}var a=t.rowWidth[n]+e.rect.width;t.rows[n].length>0&&(a+=t.horizontalPadding),t.rowWidth[n]=a,t.width<a&&(t.width=a);var s=e.rect.height;n>0&&(s+=t.verticalPadding);var l=0;s>t.rowHeight[n]&&(l=t.rowHeight[n],t.rowHeight[n]=s,l=t.rowHeight[n]-l),t.height+=l,t.rows[n].push(e)},v.prototype.getShortestRowIndex=function(t){for(var e=-1,n=Number.MAX_VALUE,r=0;r<t.rows.length;r++)t.rowWidth[r]<n&&(e=r,n=t.rowWidth[r]);return e},v.prototype.getLongestRowIndex=function(t){for(var e=-1,n=Number.MIN_VALUE,r=0;r<t.rows.length;r++)t.rowWidth[r]>n&&(e=r,n=t.rowWidth[r]);return e},v.prototype.canAddHorizontal=function(t,e,n){var r=this.getShortestRowIndex(t);if(r<0)return!0;var i=t.rowWidth[r];if(i+t.horizontalPadding+e<=t.width)return!0;var o,a,s=0;return t.rowHeight[r]<n&&r>0&&(s=n+t.verticalPadding-t.rowHeight[r]),o=t.width-i>=e+t.horizontalPadding?(t.height+s)/(i+e+t.horizontalPadding):(t.height+s)/t.width,s=n+t.verticalPadding,(a=t.width<e?(t.height+s)/e:(t.height+s)/t.width)<1&&(a=1/a),o<1&&(o=1/o),o<a},v.prototype.shiftToLastRow=function(t){var e=this.getLongestRowIndex(t),n=t.rowWidth.length-1,r=t.rows[e],i=r[r.length-1],o=i.width+t.horizontalPadding;if(t.width-t.rowWidth[n]>o&&e!=n){r.splice(-1,1),t.rows[n].push(i),t.rowWidth[e]=t.rowWidth[e]-o,t.rowWidth[n]=t.rowWidth[n]+o,t.width=t.rowWidth[instance.getLongestRowIndex(t)];for(var a=Number.MIN_VALUE,s=0;s<r.length;s++)r[s].height>a&&(a=r[s].height);e>0&&(a+=t.verticalPadding);var l=t.rowHeight[e]+t.rowHeight[n];t.rowHeight[e]=a,t.rowHeight[n]<i.height+t.verticalPadding&&(t.rowHeight[n]=i.height+t.verticalPadding);var c=t.rowHeight[e]+t.rowHeight[n];t.height+=c-l,this.shiftToLastRow(t)}},v.prototype.tilingPreLayout=function(){l.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},v.prototype.tilingPostLayout=function(){l.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},v.prototype.reduceTrees=function(){for(var t,e=[],n=!0;n;){var r=this.graphManager.getAllNodes(),i=[];n=!1;for(var o=0;o<r.length;o++)1==(t=r[o]).getEdges().length&&!t.getEdges()[0].isInterGraph&&null==t.getChild()&&(i.push([t,t.getEdges()[0],t.getOwner()]),n=!0);if(1==n){for(var a=[],s=0;s<i.length;s++)1==i[s][0].getEdges().length&&(a.push(i[s]),i[s][0].getOwner().remove(i[s][0]));e.push(a),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=e},v.prototype.growTree=function(t){for(var e,n=t[t.length-1],r=0;r<n.length;r++)e=n[r],this.findPlaceforPrunedNode(e),e[2].add(e[0]),e[2].add(e[1],e[1].source,e[1].target);t.splice(t.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},v.prototype.findPlaceforPrunedNode=function(t){var e,n,r=t[0],i=(n=r==t[1].source?t[1].target:t[1].source).startX,o=n.finishX,a=n.startY,s=n.finishY,l=[0,0,0,0];if(a>0)for(var u=i;u<=o;u++)l[0]+=this.grid[u][a-1].length+this.grid[u][a].length-1;if(o<this.grid.length-1)for(u=a;u<=s;u++)l[1]+=this.grid[o+1][u].length+this.grid[o][u].length-1;if(s<this.grid[0].length-1)for(u=i;u<=o;u++)l[2]+=this.grid[u][s+1].length+this.grid[u][s].length-1;if(i>0)for(u=a;u<=s;u++)l[3]+=this.grid[i-1][u].length+this.grid[i][u].length-1;for(var h,d,p=f.MAX_VALUE,g=0;g<l.length;g++)l[g]<p?(p=l[g],h=1,d=g):l[g]==p&&h++;if(3==h&&0==p)0==l[0]&&0==l[1]&&0==l[2]?e=1:0==l[0]&&0==l[1]&&0==l[3]?e=0:0==l[0]&&0==l[2]&&0==l[3]?e=3:0==l[1]&&0==l[2]&&0==l[3]&&(e=2);else if(2==h&&0==p){var y=Math.floor(2*Math.random());e=0==l[0]&&0==l[1]?0==y?0:1:0==l[0]&&0==l[2]?0==y?0:2:0==l[0]&&0==l[3]?0==y?0:3:0==l[1]&&0==l[2]?0==y?1:2:0==l[1]&&0==l[3]?0==y?1:3:0==y?2:3}else e=4==h&&0==p?y=Math.floor(4*Math.random()):d;0==e?r.setCenter(n.getCenterX(),n.getCenterY()-n.getHeight()/2-c.DEFAULT_EDGE_LENGTH-r.getHeight()/2):1==e?r.setCenter(n.getCenterX()+n.getWidth()/2+c.DEFAULT_EDGE_LENGTH+r.getWidth()/2,n.getCenterY()):2==e?r.setCenter(n.getCenterX(),n.getCenterY()+n.getHeight()/2+c.DEFAULT_EDGE_LENGTH+r.getHeight()/2):r.setCenter(n.getCenterX()-n.getWidth()/2-c.DEFAULT_EDGE_LENGTH-r.getWidth()/2,n.getCenterY())},t.exports=v},function(t,e,n){var r={};r.layoutBase=n(0),r.CoSEConstants=n(1),r.CoSEEdge=n(2),r.CoSEGraph=n(3),r.CoSEGraphManager=n(4),r.CoSELayout=n(6),r.CoSENode=n(5),t.exports=r}])}(vg())),yg.exports}gg.exports=function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(e,n){e.exports=t},function(t,e,n){var r=n(0).layoutBase.LayoutConstants,i=n(0).layoutBase.FDLayoutConstants,o=n(0).CoSEConstants,a=n(0).CoSELayout,s=n(0).CoSENode,l=n(0).layoutBase.PointD,c=n(0).layoutBase.DimensionD,u={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function h(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n}function d(t){this.options=h(u,t),p(this.options)}var p=function(t){null!=t.nodeRepulsion&&(o.DEFAULT_REPULSION_STRENGTH=i.DEFAULT_REPULSION_STRENGTH=t.nodeRepulsion),null!=t.idealEdgeLength&&(o.DEFAULT_EDGE_LENGTH=i.DEFAULT_EDGE_LENGTH=t.idealEdgeLength),null!=t.edgeElasticity&&(o.DEFAULT_SPRING_STRENGTH=i.DEFAULT_SPRING_STRENGTH=t.edgeElasticity),null!=t.nestingFactor&&(o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=t.nestingFactor),null!=t.gravity&&(o.DEFAULT_GRAVITY_STRENGTH=i.DEFAULT_GRAVITY_STRENGTH=t.gravity),null!=t.numIter&&(o.MAX_ITERATIONS=i.MAX_ITERATIONS=t.numIter),null!=t.gravityRange&&(o.DEFAULT_GRAVITY_RANGE_FACTOR=i.DEFAULT_GRAVITY_RANGE_FACTOR=t.gravityRange),null!=t.gravityCompound&&(o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=t.gravityCompound),null!=t.gravityRangeCompound&&(o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=t.gravityRangeCompound),null!=t.initialEnergyOnIncremental&&(o.DEFAULT_COOLING_FACTOR_INCREMENTAL=i.DEFAULT_COOLING_FACTOR_INCREMENTAL=t.initialEnergyOnIncremental),"draft"==t.quality?r.QUALITY=0:"proof"==t.quality?r.QUALITY=2:r.QUALITY=1,o.NODE_DIMENSIONS_INCLUDE_LABELS=i.NODE_DIMENSIONS_INCLUDE_LABELS=r.NODE_DIMENSIONS_INCLUDE_LABELS=t.nodeDimensionsIncludeLabels,o.DEFAULT_INCREMENTAL=i.DEFAULT_INCREMENTAL=r.DEFAULT_INCREMENTAL=!t.randomize,o.ANIMATE=i.ANIMATE=r.ANIMATE=t.animate,o.TILE=t.tile,o.TILING_PADDING_VERTICAL="function"==typeof t.tilingPaddingVertical?t.tilingPaddingVertical.call():t.tilingPaddingVertical,o.TILING_PADDING_HORIZONTAL="function"==typeof t.tilingPaddingHorizontal?t.tilingPaddingHorizontal.call():t.tilingPaddingHorizontal};d.prototype.run=function(){var t,e,n=this.options;this.idToLNode={};var r=this.layout=new a,i=this;i.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var o=r.newGraphManager();this.gm=o;var s=this.options.eles.nodes(),l=this.options.eles.edges();this.root=o.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(s),r);for(var c=0;c<l.length;c++){var u=l[c],h=this.idToLNode[u.data("source")],d=this.idToLNode[u.data("target")];h!==d&&0==h.getEdgesBetween(d).length&&(o.add(r.newEdge(),h,d).id=u.id())}var p=function(t,e){"number"==typeof t&&(t=e);var n=t.data("id"),r=i.idToLNode[n];return{x:r.getRect().getCenterX(),y:r.getRect().getCenterY()}},f=function o(){for(var a,s=function(){n.fit&&n.cy.fit(n.eles,n.padding),t||(t=!0,i.cy.one("layoutready",n.ready),i.cy.trigger({type:"layoutready",layout:i}))},l=i.options.refresh,c=0;c<l&&!a;c++)a=i.stopped||i.layout.tick();if(a)return r.checkLayoutSuccess()&&!r.isSubLayout&&r.doPostLayout(),r.tilingPostLayout&&r.tilingPostLayout(),r.isLayoutFinished=!0,i.options.eles.nodes().positions(p),s(),i.cy.one("layoutstop",i.options.stop),i.cy.trigger({type:"layoutstop",layout:i}),e&&cancelAnimationFrame(e),void(t=!1);var u=i.layout.getPositionsData();n.eles.nodes().positions((function(t,e){if("number"==typeof t&&(t=e),!t.isParent()){for(var n=t.id(),r=u[n],i=t;null==r&&(r=u[i.data("parent")]||u["DummyCompound_"+i.data("parent")],u[n]=r,null!=(i=i.parent()[0])););return null!=r?{x:r.x,y:r.y}:{x:t.position("x"),y:t.position("y")}}})),s(),e=requestAnimationFrame(o)};return r.addListener("layoutstarted",(function(){"during"===i.options.animate&&(e=requestAnimationFrame(f))})),r.runLayout(),"during"!==this.options.animate&&(i.options.eles.nodes().not(":parent").layoutPositions(i,i.options,p),t=!1),this},d.prototype.getTopMostNodes=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].id()]=!0;var r=t.filter((function(t,n){"number"==typeof t&&(t=n);for(var r=t.parent()[0];null!=r;){if(e[r.id()])return!1;r=r.parent()[0]}return!0}));return r},d.prototype.processChildrenList=function(t,e,n){for(var r=e.length,i=0;i<r;i++){var o,a,u=e[i],h=u.children(),d=u.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((o=null!=u.outerWidth()&&null!=u.outerHeight()?t.add(new s(n.graphManager,new l(u.position("x")-d.w/2,u.position("y")-d.h/2),new c(parseFloat(d.w),parseFloat(d.h)))):t.add(new s(this.graphManager))).id=u.data("id"),o.paddingLeft=parseInt(u.css("padding")),o.paddingTop=parseInt(u.css("padding")),o.paddingRight=parseInt(u.css("padding")),o.paddingBottom=parseInt(u.css("padding")),this.options.nodeDimensionsIncludeLabels&&u.isParent()){var p=u.boundingBox({includeLabels:!0,includeNodes:!1}).w,f=u.boundingBox({includeLabels:!0,includeNodes:!1}).h,g=u.css("text-halign");o.labelWidth=p,o.labelHeight=f,o.labelPos=g}this.idToLNode[u.data("id")]=o,isNaN(o.rect.x)&&(o.rect.x=0),isNaN(o.rect.y)&&(o.rect.y=0),null!=h&&h.length>0&&(a=n.getGraphManager().add(n.newGraph(),o),this.processChildrenList(a,h,n))}},d.prototype.stop=function(){return this.stopped=!0,this};var f=function(t){t("layout","cose-bilkent",d)};typeof cytoscape<"u"&&f(cytoscape),t.exports=f}])}(bg());const xg=r(gg.exports);function Cg(t,e,n,r,i){(function(t,e,n,r,i){const o=i.htmlLabels,a=r%11,s=e.append("g");n.section=a;let l="section-"+a;a<0&&(l+=" section-root"),s.attr("class",(n.class?n.class+" ":"")+"mindmap-node "+l);const c=s.append("g"),u=s.append("g"),h=n.descr.replace(/(<br\/*>)/g,"\n");ng(u,h,{useHtmlLabels:o,width:n.width,classes:"mindmap-node-label"}),o||u.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const d=u.node().getBBox(),[p]=Ps(i.fontSize);if(n.height=d.height+1.1*p*.5+n.padding,n.width=d.width+2*n.padding,n.icon)if(n.type===t.nodeType.CIRCLE)n.height+=50,n.width+=50,s.append("foreignObject").attr("height","50px").attr("width",n.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+a+" "+n.icon),u.attr("transform","translate("+n.width/2+", "+(n.height/2-1.5*n.padding)+")");else{n.width+=50;const t=n.height;n.height=Math.max(t,60);const e=Math.abs(n.height-t);s.append("foreignObject").attr("width","60px").attr("height",n.height).attr("style","text-align: center;margin-top:"+e/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+a+" "+n.icon),u.attr("transform","translate("+(25+n.width/2)+", "+(e/2+n.padding/2)+")")}else if(o){const t=(n.width-d.width)/2,e=(n.height-d.height)/2;u.attr("transform","translate("+t+", "+e+")")}else{const t=n.width/2,e=n.padding/2;u.attr("transform","translate("+t+", "+e+")")}switch(n.type){case t.nodeType.DEFAULT:!function(t,e,n,r){e.append("path").attr("id","node-"+n.id).attr("class","node-bkg node-"+t.type2Str(n.type)).attr("d",`M0 ${n.height-5} v${10-n.height} q0,-5 5,-5 h${n.width-10} q5,0 5,5 v${n.height-5} H0 Z`),e.append("line").attr("class","node-line-"+r).attr("x1",0).attr("y1",n.height).attr("x2",n.width).attr("y2",n.height)}(t,c,n,a);break;case t.nodeType.ROUNDED_RECT:!function(t,e,n){e.append("rect").attr("id","node-"+n.id).attr("class","node-bkg node-"+t.type2Str(n.type)).attr("height",n.height).attr("rx",n.padding).attr("ry",n.padding).attr("width",n.width)}(t,c,n);break;case t.nodeType.RECT:!function(t,e,n){e.append("rect").attr("id","node-"+n.id).attr("class","node-bkg node-"+t.type2Str(n.type)).attr("height",n.height).attr("width",n.width)}(t,c,n);break;case t.nodeType.CIRCLE:c.attr("transform","translate("+n.width/2+", "+ +n.height/2+")"),function(t,e,n){e.append("circle").attr("id","node-"+n.id).attr("class","node-bkg node-"+t.type2Str(n.type)).attr("r",n.width/2)}(t,c,n);break;case t.nodeType.CLOUD:!function(t,e,n){const r=n.width,i=n.height,o=.15*r,a=.25*r,s=.35*r,l=.2*r;e.append("path").attr("id","node-"+n.id).attr("class","node-bkg node-"+t.type2Str(n.type)).attr("d",`M0 0 a${o},${o} 0 0,1 ${.25*r},${-1*r*.1}\n      a${s},${s} 1 0,1 ${.4*r},${-1*r*.1}\n      a${a},${a} 1 0,1 ${.35*r},${1*r*.2}\n\n      a${o},${o} 1 0,1 ${.15*r},${1*i*.35}\n      a${l},${l} 1 0,1 ${-1*r*.15},${1*i*.65}\n\n      a${a},${o} 1 0,1 ${-1*r*.25},${.15*r}\n      a${s},${s} 1 0,1 ${-1*r*.5},0\n      a${o},${o} 1 0,1 ${-1*r*.25},${-1*r*.15}\n\n      a${o},${o} 1 0,1 ${-1*r*.1},${-1*i*.35}\n      a${l},${l} 1 0,1 ${.1*r},${-1*i*.65}\n\n    H0 V0 Z`)}(t,c,n);break;case t.nodeType.BANG:!function(t,e,n){const r=n.width,i=n.height,o=.15*r;e.append("path").attr("id","node-"+n.id).attr("class","node-bkg node-"+t.type2Str(n.type)).attr("d",`M0 0 a${o},${o} 1 0,0 ${.25*r},${-1*i*.1}\n      a${o},${o} 1 0,0 ${.25*r},0\n      a${o},${o} 1 0,0 ${.25*r},0\n      a${o},${o} 1 0,0 ${.25*r},${1*i*.1}\n\n      a${o},${o} 1 0,0 ${.15*r},${1*i*.33}\n      a${.8*o},${.8*o} 1 0,0 0,${1*i*.34}\n      a${o},${o} 1 0,0 ${-1*r*.15},${1*i*.33}\n\n      a${o},${o} 1 0,0 ${-1*r*.25},${.15*i}\n      a${o},${o} 1 0,0 ${-1*r*.25},0\n      a${o},${o} 1 0,0 ${-1*r*.25},0\n      a${o},${o} 1 0,0 ${-1*r*.25},${-1*i*.15}\n\n      a${o},${o} 1 0,0 ${-1*r*.1},${-1*i*.33}\n      a${.8*o},${.8*o} 1 0,0 0,${-1*i*.34}\n      a${o},${o} 1 0,0 ${.1*r},${-1*i*.33}\n\n    H0 V0 Z`)}(t,c,n);break;case t.nodeType.HEXAGON:!function(t,e,n){const r=n.height,i=r/4,o=n.width-n.padding+2*i;!function(t,e,n,r,i){t.insert("polygon",":first-child").attr("points",r.map((function(t){return t.x+","+t.y})).join(" ")).attr("transform","translate("+(i.width-e)/2+", "+n+")")}(e,o,r,[{x:i,y:0},{x:o-i,y:0},{x:o,y:-r/2},{x:o-i,y:-r},{x:i,y:-r},{x:0,y:-r/2}],n)}(0,c,n)}t.setElementForId(n.id,s),n.height})(t,e,n,r,i),n.children&&n.children.forEach(((n,o)=>{Cg(t,e,n,r<0?o:r,i)}))}function _g(t,e,n,r){e.add({group:"nodes",data:{id:t.id.toString(),labelText:t.descr,height:t.height,width:t.width,level:r,nodeId:t.id,padding:t.padding,type:t.type},position:{x:t.x,y:t.y}}),t.children&&t.children.forEach((i=>{_g(i,e,n,r+1),e.add({group:"edges",data:{id:`${t.id}_${i.id}`,source:t.id,target:i.id,depth:r,section:i.section}})}))}function wg(t,e){return new Promise((n=>{const r=At("body").append("div").attr("id","cy").attr("style","display:none"),i=dg({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});r.remove(),_g(t,i,e,0),i.nodes().forEach((function(t){t.layoutDimensions=()=>{const e=t.data();return{w:e.width,h:e.height}}})),i.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),i.ready((t=>{s.info("Ready",t),n(i)}))}))}dg.use(xg);const kg={draw:async(t,e,n,r)=>{var i,o;s.debug("Rendering mindmap diagram\n"+t);const a=r.db,l=a.getMindmap();if(!l)return;const c=Gc();c.htmlLabels=!1;const u=Xc(e),h=u.append("g");h.attr("class","mindmap-edges");const d=u.append("g");d.attr("class","mindmap-nodes"),Cg(a,d,l,-1,c);const p=await wg(l,c);(function(t,e){e.edges().map(((e,n)=>{const r=e.data();if(e[0]._private.bodyBounds){const i=e[0]._private.rscratch;s.trace("Edge: ",n,r),t.insert("path").attr("d",`M ${i.startX},${i.startY} L ${i.midX},${i.midY} L${i.endX},${i.endY} `).attr("class","edge section-edge-"+r.section+" edge-depth-"+r.depth)}}))})(h,p),function(t,e){e.nodes().map(((e,n)=>{const r=e.data();r.x=e.position().x,r.y=e.position().y,function(t,e){const n=t.getElementById(e.id),r=e.x||0,i=e.y||0;n.attr("transform","translate("+r+","+i+")")}(t,r);const i=t.getElementById(r.nodeId);s.info("Id:",n,"Position: (",e.position().x,", ",e.position().y,")",r),i.attr("transform",`translate(${e.position().x-r.width/2}, ${e.position().y-r.height/2})`),i.attr("attr",`apa-${n})`)}))}(a,p),Fc(void 0,u,(null==(i=c.mindmap)?void 0:i.padding)??Ji.mindmap.padding,(null==(o=c.mindmap)?void 0:o.useMaxWidth)??Ji.mindmap.useMaxWidth)}},Tg=t=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${(t=>{let e="";for(let e=0;e<t.THEME_COLOR_LIMIT;e++)t["lineColor"+e]=t["lineColor"+e]||t["cScaleInv"+e],Pi(t["lineColor"+e])?t["lineColor"+e]=zi(t["lineColor"+e],20):t["lineColor"+e]=qi(t["lineColor"+e],20);for(let n=0;n<t.THEME_COLOR_LIMIT;n++){const r=""+(17-3*n);e+=`\n    .section-${n-1} rect, .section-${n-1} path, .section-${n-1} circle, .section-${n-1} polygon, .section-${n-1} path  {\n      fill: ${t["cScale"+n]};\n    }\n    .section-${n-1} text {\n     fill: ${t["cScaleLabel"+n]};\n    }\n    .node-icon-${n-1} {\n      font-size: 40px;\n      color: ${t["cScaleLabel"+n]};\n    }\n    .section-edge-${n-1}{\n      stroke: ${t["cScale"+n]};\n    }\n    .edge-depth-${n-1}{\n      stroke-width: ${r};\n    }\n    .section-${n-1} line {\n      stroke: ${t["cScaleInv"+n]} ;\n      stroke-width: 3;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n    `}return e})(t)}\n  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {\n    fill: ${t.git0};\n  }\n  .section-root text {\n    fill: ${t.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .mindmap-node-label {\n    dy: 1em;\n    alignment-baseline: middle;\n    text-anchor: middle;\n    dominant-baseline: middle;\n    text-align: center;\n  }\n`,Eg={db:ug,renderer:kg,parser:ig,styles:Tg};export{Eg as diagram};export default null;
